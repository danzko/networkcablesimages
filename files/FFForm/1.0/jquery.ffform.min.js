(function(e){e.fn.extend({ffform:function(t){var n=e.extend({fields:[],onSuccess:null,onFail:null,onValidate:null,submitButton:"",sendingText:"Sending Messgage...",animation:"flip",validationIndicator:"",successIndicator:"",errorIndicator:""},t);return this.each(function(){function a(){if(!t.is("form")){alert("No suitable element selected, formify can only be invoked with form element");return}if(n.submitButton==""){alert("No submit button specified");return}var a=e('<input type="hidden" name="hid_dynamic"/>');var c="";e(n.fields).each(function(){if(c=="")c=e("#"+this.id).attr("name");else c+=","+e("#"+this.id).attr("name")});a.val(c);t.prepend(a);s=e(n.successIndicator).css({display:"none"});o=e(n.errorIndicator).css({display:"none"});u=e(n.validationIndicator).css({display:"none"});if(n.animation=="flip"){var h=e('<div class="flip-container"><div class="flipper"><div class="front"></div><div class="back"></div></div></div>');t.after(h);t.appendTo(h.find(".front"));h.find(".back").append('<span id="msg-close">Close</span>').append(u).append(s).append(o)}else{t.after(e('<div class="form-front"></div><div class="form-back"></div>'));t.appendTo(e(".form-front"));e(".form-back").append('<span id="msg-close">Close</span>').append(u).append(s).append(o);var p=e(".form-front");var d=e(".form-back");p.css({position:"relative",top:"0px",left:"0px",zIndex:1});d.css({position:"relative",top:"0px",left:"0px",zIndex:0,display:"none"})}e("#msg-close").bind("click",function(){setTimeout(function(){e(".invalid").effect("shake")},300)});e(n.submitButton).click(function(t){s.css({display:"none"});o.css({display:"none"});u.css({display:"none"});t.preventDefault();t.stopImmediatePropagation();i='<ul id="validation-list">';l();if(!r){i+="</ul>";if(n.onValidate!=null){n.onValidate(i)}if(n.animation=="flip"){e(".flip-container").addClass("flip");e("#msg-close").click(function(){e(".flip-container").removeClass("flip")})}else if(n.animation=="fade"){e(".form-front").css({zIndex:0}).fadeOut("slow");e(".form-back").css({zIndex:1}).fadeIn("slow");e("#msg-close").click(function(){e(".form-front").css({zIndex:1}).fadeIn("slow");e(".form-back").css({zIndex:0}).fadeOut("slow")})}if(u!=null)u.html(i).css({display:"block"});else{alert(i)}setTimeout(function(){e("#validation-list li").each(function(){var t=e(this).attr("id").replace("v-","");e("#"+t).addClass("invalid")})},500);e("#validation-list li").bind("click",function(){e("#msg-close").click()});return false}else{var a=parseFloat(e(this).outerWidth());e(this).addClass("animate");e(this).data("text",e(this).val());e(this).val(n.sendingText);f()}return false})}function f(){var r=t.serialize();e.ajax({type:"POST",url:"email.php",data:r,success:function(t){if(n.onSuccess!=null)n.onSuccess(t);if(n.animation=="flip"){e(".flip-container").addClass("flip");e("#msg-close").click(function(){e(".flip-container").removeClass("flip")})}else if(n.animation=="fade"){e(".form-front").css({zIndex:0}).fadeOut("slow");e(".form-back").css({zIndex:1}).fadeIn("slow");e("#msg-close").click(function(){e(".form-front").css({zIndex:1}).fadeIn("slow");e(".form-back").css({zIndex:0}).fadeOut("slow")})}if(s!=null)s.css({display:"block"});else alert("Your message has been sent successfully");e(n.submitButton).removeClass("animate").val(e(n.submitButton).data("text"))},error:function(t,r,i){if(n.onError!=null)n.onError(i);if(n.animation=="flip"){e(".flip-container").addClass("flip");e("#msg-close").click(function(){e(".flip-container").removeClass("flip")})}else if(n.animation=="fade"){e(".form-front").css({zIndex:0}).fadeOut("slow");e(".form-back").css({zIndex:1}).fadeIn("slow");e("#msg-close").click(function(){e(".form-front").css({zIndex:1}).fadeIn("slow");e(".form-back").css({zIndex:0}).fadeOut("slow")})}if(o!=null)o.css({display:"block"});else{alert("Unable to send your message at the moment. Please try again later!")}e(n.submitButton).removeClass("animate").val(e(n.submitButton).data("text"))}});return false}function l(){e(n.fields).each(function(){var t=e("#"+this.id);t.removeClass("invalid");if(this.required!=undefined&&this.required){if(t.val()==""||t.val()==t.attr("placeholder")){r=false;if(this.requiredMsg!=undefined)i+='<li id="v-'+this.id+'">'+this.requiredMsg+"</li>"}}if(this.validate!=undefined&&this.validate){r=c(this,t);if(!r&&this.msg!=undefined)i+='<li id="v-'+this.id+'">'+this.msg+"</li>"}})}function c(e,t){if(e.regExp!=undefined&&e.regExp!=""){if(!e.regExp.test(t.val())){return false}}else{if(e.type!=undefined)if(e.type=="alpha"){var n=/^[a-zA-Z]*/;if(!n.test(t.val())){return false}}else if(e.type=="email"){return h(t.val())}}return true}function h(e){var t=/^[\w\.\+-]{1,}\@([\da-zA-Z-]{1,}\.){1,}[\da-zA-Z-]{2,6}$/;if(!t.test(e)){return false}return true}var t=e(this);var r=true;var i;var s;var o;var u;a()})}})})(jQuery)
