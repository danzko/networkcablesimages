!function(t){var i=0;t.isSmartSidebar=function(i){return!!t(i).data("SmartSidebar")},t.SmartSidebar=function(o,e){function a(){u=p.offset(),h=t('<div id="'+b+'" class="'+e.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;"></div>'),g=t('<div class="top-offset" style="margin:0;padding:0;"></div>'),m=t('<div class="bottom-offset" style="margin:0;padding:0;"></div>'),v=t('<div class="bottom-gap" style="margin:0;padding:0;"></div>'),h.css({left:u.left+"px"}),p.before(h),S=Math.max(u.top-parseInt(h.css("top")),0),g.css({height:S+"px"}),h.append(g),h.append(p),h.append(m),h.append(v)}function s(){h.replaceWith(p)}function n(){if(!l())return d.off("scroll",n);n.lastScrollTop=n.lastScrollTop||0;var t=m.height(),i=d.scrollTop(),o=i-n.lastScrollTop,a=h.scrollTop()+o;n.lastScrollTop=i,S>a&&(a=S>i?i:S);var s=!e.saveBottomOffset&&f.height()-d.height()-i>t;s?(m.hide(),v.css({height:h.height()-p.outerHeight(!0)+"px"})):(m.show(),v.css({height:h.height()-p.outerHeight(!0)-t+"px"})),h.scrollTop(a)}function r(t){t=t||0,t>=0&&l()&&(n(),setTimeout(function(){r(t-1)},100))}function l(){return t("#"+b).length}function c(t,i){function o(n){n===s?(t.apply(a,e),s=0):setTimeout(function(){o(s)},i)}var e,a,s=0;return function(){s++,e=Array.prototype.slice.call(arguments),a=this,1===s&&o(0)}}e=e||{},e.railClass=e.railClass||"sidebar-rail",e.saveBottomOffset=!!e.saveBottomOffset;var d=t(window),f=t(window.document.body),p=t(o);p.data("SmartSidebar",!0);var u,h,g,m,v,S,b="ssr"+ ++i;a(),r(200),d.on("scroll",n),d.on("resize",c(function(){s(),a(),r(1)},500))},t.fn.smartSidebar=function(i){return this.each(function(){return t.SmartSidebar(this,i)})}}(jQuery);
