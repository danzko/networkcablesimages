var edit_window_specs="width=650,height=600,left=175,top=100,resizable=1,scrollbars=1",indx_window_specs="width=600,height=500,left=200,top=150,resizable=1,scrollbars=1",news_window_specs="width=740,height=650,left=200,top=150,resizable=1,scrollbars=1",help_window_specs="width=500,height=400,left=250,top=200,resizable=1,scrollbars=1",find_window_specs="width=550,height=600,left=250,top=150,resizable=1,scrollbars=1",mesg_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",chan_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",mord_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",assist_window_specs="width=900,height=800,left=70,top=70,resizable=1,scrollbars=1",gmap_window_specs="width=650,height=600,left=200,top=150,resizable=1,scrollbars=1",fam_nav_specs="width=300,height=600,left=817,top=150,resizable=1,scrollbars=1";function helpDialog(d,c){url="help_text.php?help="+d+"&mod="+c;dialog=jQuery("<div></div>").load(url+" .helpcontent").dialog({modal:!0,width:500,closeText:""});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close")});jQuery(".ui-dialog-title").load(url+" .helpheader");return !1}function modalDialog(d,c){jQuery(document).ajaxComplete(function(){jQuery(".ui-dialog").before('<div class="ui-widget-overlay" />')});dialog=jQuery('<div title="'+c+'"></div>').load(d).dialog({modal:!1,width:700,closeText:"",close:function(){jQuery(this).remove();jQuery(".ui-widget-overlay").remove()}});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close");jQuery(this).remove()});return !1}function modalNotes(d,c){dialog=jQuery('<div title="'+c+'"></div>').html(d).dialog({modal:!0,width:500,closeText:"",close:function(){jQuery(this).remove()}});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close")});return !1}function modalDialogSubmitAjax(b){jQuery.ajax({type:"POST",url:jQuery(b).attr("action"),data:jQuery(b).serialize(),success:function(){window.location.reload()}});return !1}function closePopupAndReloadParent(b){parent.opener&&(null==b||""==b?parent.opener.location.reload():parent.opener.location=b);window.close()}var msX=0,msY=0;function MM_showHideLayers(){var f,e,h,g=MM_showHideLayers.arguments;for(f=0;f<g.length-3;f+=4){if(null!=(h=document.getElementById(g[f]))){h.style&&(div=h,h=h.style),e=g[f+2],"toggle"==e&&(e=-1!=h.visibility.indexOf("hid")?"show":"hide"),e="show"==e?"visible":"hide"==e?"hidden":e,h.visibility=e,"followmouse"==g[f+1]&&(pobj=document.getElementById(g[f+3]),null!=pobj?"auto"!=pobj.style.top&&"relatives"!=g[f+3]?(h.top=5+msY-parseInt(pobj.style.top)+"px","ltr"==textDirection&&(h.left=5+msX-parseInt(pobj.style.left)+"px"),"rtl"==textDirection&&(h.right=5+msX-parseInt(pobj.style.right)+"px")):(h.top="auto",pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,"rtl"==textDirection&&(pagewidth-=document.documentElement.scrollLeft),msX>pagewidth-160&&(msX=msX-150-pobj.offsetLeft),contentdiv=document.getElementById("content"),msX-=contentdiv.offsetLeft,"ltr"==textDirection&&(h.left=5+msX+"px"),h.zIndex=1000):(0<WT_SCRIPT_NAME.indexOf("fanchart")?(h.top=msY-20+"px",h.left=msX-20+"px"):-1==WT_SCRIPT_NAME.indexOf("index.php")?(Xadjust=document.getElementById("content").offsetLeft,h.left=5+(msX-Xadjust)+"px",h.top="auto"):(Xadjust=document.getElementById("content").offsetLeft,h.top=msY-50+"px",h.left=10+(msX-Xadjust)+"px"),h.zIndex=1000))}}}var show=!1;function togglechildrenbox(b){b=b?"."+b:"";show?(MM_showHideLayers("childbox"+b," ","hide"," "),show=!1):(MM_showHideLayers("childbox"+b," ","show"," "),show=!0);return !1}var lastfamilybox="",popupopen=0;function show_family_box(d,c){popupopen=1;lastfamilybox=d;"relatives"==c?MM_showHideLayers("I"+d+"links","followmouse","show",""+c):(famlinks=document.getElementById("I"+d+"links"),divbox=document.getElementById("out-"+d),parentbox=document.getElementById("box"+d),famlinks&&divbox&&parentbox?(famlinks.style.top="0px",famleft="ltr"==textDirection?parseInt(divbox.style.width)+15:0,isNaN(famleft)&&(famleft=0,famlinks.style.top=parentbox.offsetTop+"px"),pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,"rtl"==textDirection&&(pagewidth-=document.documentElement.scrollLeft),famleft+parseInt(parentbox.style.left)>pagewidth-100&&(famleft=25),famlinks.style.left=famleft+"px",-1!=WT_SCRIPT_NAME.indexOf("index.php")&&(famlinks.style.left="100%"),MM_showHideLayers("I"+d+"links"," ","show",""+c)):MM_showHideLayers("I"+d+"links","followmouse","show",""+c))}function hide_family_box(b){MM_showHideLayers("I"+b+"links","","hide","");popupopen=0;lastfamilybox=""}var timeouts=[];function family_box_timeout(b){tout=setTimeout("hide_family_box('"+b+"')",2500);timeouts[b]=tout}function clear_family_box_timeout(b){clearTimeout(timeouts[b])}function expand_layer(b){jQuery("#"+b+"_img").hasClass("icon-plus")?(jQuery("#"+b+"_img").removeClass("icon-plus").addClass("icon-minus"),jQuery("#"+b).slideDown("fast")):(jQuery("#"+b+"_img").removeClass("icon-minus").addClass("icon-plus"),jQuery("#"+b).slideUp("fast"));return !1}function edit_interface(f,e){var h=e||edit_window_specs,g="edit_interface.php?"+jQuery.param(f)+"&ged="+WT_GEDCOM;window.open(g,"_blank",h);return !1}function edit_record(d,c){return edit_interface({action:"edit",xref:d,fact_id:c})}function add_fact(d,c){return edit_interface({action:"add",xref:d,fact:c})}function edit_raw(b){return edit_interface({action:"editraw",xref:b})}function edit_note(b){return edit_interface({action:"editnote",xref:b})}function add_record(e,d){var f=jQuery("#"+d).val();if(f){if("OBJE"==f){window.open("addmedia.php?action=showmediaform&linkid="+encodeURIComponent(e)+"&ged="+encodeURIComponent(WT_GEDCOM),"_blank",edit_window_specs)}else{return add_fact(e,f)}}return !1}function reorder_media(b){return edit_interface({action:"reorder_media",xref:b},mord_window_specs)}function add_new_record(d,c){return edit_interface({action:"add",xref:d,fact:c})}function add_child_to_family(d,c){return edit_interface({action:"add_child_to_family",gender:c,xref:d})}function add_child_to_individual(d,c){return edit_interface({action:"add_child_to_individual",gender:c,xref:d})}function add_parent_to_individual(d,c){return edit_interface({action:"add_parent_to_individual",xref:d,gender:c})}function add_spouse_to_family(d,c){return edit_interface({action:"add_spouse_to_family",xref:d,famtag:c})}function add_unlinked_indi(){return edit_interface({action:"add_unlinked_indi"})}function add_spouse_to_individual(d,c){return edit_interface({action:"add_spouse_to_individual",xref:d,famtag:c})}function linkspouse(d,c){return edit_interface({action:"linkspouse",xref:d,famtag:c,famid:"new"})}function add_famc(b){return edit_interface({action:"addfamlink",xref:b})}function edit_name(d,c){return edit_interface({action:"editname",xref:d,fact_id:c})}function add_name(b){return edit_interface({action:"addname",xref:b})}function accept_changes(b){jQuery.post("action.php",{action:"accept-changes",xref:b,ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function reject_changes(b){jQuery.post("action.php",{action:"reject-changes",xref:b,ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_family(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-family",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_individual(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-individual",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_media(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-media",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_note(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-note",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_repository(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-repository",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_source(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-source",xref:d,ged:"undefined"==typeof f?WT_GEDCOM:f,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_fact(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"delete-fact",xref:d,fact_id:f,ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function unlink_media(e,d,f){confirm(e)&&jQuery.post("action.php",{action:"unlink-media",source:d,target:f,ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function copy_fact(d,c){jQuery.post("action.php",{action:"copy-fact",xref:d,fact_id:c,ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function paste_fact(d,c){jQuery.post("action.php",{action:"paste-fact",xref:d,fact_id:jQuery(c).val(),ged:WT_GEDCOM,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function delete_user(d,c){confirm(d)&&jQuery.post("action.php",{action:"delete-user",user_id:c,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function masquerade(b){jQuery.post("action.php",{action:"masquerade",user_id:b,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function reorder_children(b){return edit_interface({action:"reorder_children",xref:b})}function reorder_families(b){return edit_interface({action:"reorder_fams",xref:b})}function reply(d,c){window.open("message.php?to="+encodeURIComponent(d)+"&subject="+encodeURIComponent(c)+"&ged="+encodeURIComponent(WT_GEDCOM),"_blank",mesg_window_specs);return !1}function delete_message(b){window.open("message.php?action=delete&id="+encodeURIComponent(b)+"&ged="+encodeURIComponent(WT_GEDCOM),"_blank",mesg_window_specs);return !1}function change_family_members(b){return edit_interface({action:"changefamily",xref:b})}function addnewsource(b){pastefield=b;return edit_interface({action:"addnewsource",xref:"newsour"},null,b)}function addnewrepository(b){pastefield=b;return edit_interface({action:"addnewrepository",xref:"newrepo"},null,b)}function addnewnote(b){pastefield=b;return edit_interface({action:"addnewnote",noteid:"newnote"},null,b)}function addnewnote_assisted(d,c){pastefield=d;return edit_interface({action:"addnewnote_assisted",noteid:"newnote",xref:c},assist_window_specs,d)}function addmedia_links(e,d,f){pastefield=e;insertRowToTable(d,f);return !1}function valid_date(a){var b="JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),c="MUHAR SAFAR RABIA RABIT JUMAA JUMAT RAJAB SHAAB RAMAD SHAWW DHUAQ DHUAH".split(" "),d="TSH CSH KSL TVT SHV ADR ADS NSN IYR SVN TMZ AAV ELL".split(" "),f="VEND BRUM FRIM NIVO PLUV VENT GERM FLOR PRAI MESS THER FRUC COMP".split(" "),g="FARVA ORDIB KHORD TIR MORDA SHAHR MEHR ABAN AZAR DEY BAHMA ESFAN".split(" "),e=a.value,h=e.split("("),l="";1<h.length&&(e=h[0],l=h[1]);e=e.toUpperCase();e=e.replace(/\s+/," ");e=e.replace(/(^\s)|(\s$)/,"");e=e.replace(/(\d)([A-Z])/,"$1 $2");e=e.replace(/([A-Z])(\d)/,"$1 $2");e.match(/^Q ([1-4]) (\d\d\d\d)$/)&&(e="BET "+b[3*RegExp.$1-3]+" "+RegExp.$2+" AND "+b[3*RegExp.$1-1]+" "+RegExp.$2);e.match(/^(@#DHIJRI@|HIJRI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(e="@#DHIJRI@"+RegExp.$2+c[parseInt(RegExp.$3,10)-1]+RegExp.$4);e.match(/^(@#DJALALI@|JALALI)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(e="@#DJALALI@"+RegExp.$2+g[parseInt(RegExp.$3,10)-1]+RegExp.$4);e.match(/^(@#DHEBREW@|HEBREW)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(e="@#DHEBREW@"+RegExp.$2+d[parseInt(RegExp.$3,10)-1]+RegExp.$4);e.match(/^(@#DFRENCH R@|FRENCH)( \d?\d )(\d?\d)( \d?\d?\d?\d)$/)&&(e="@#DFRENCH R@"+RegExp.$2+f[parseInt(RegExp.$3,10)-1]+RegExp.$4);if(/^([^\d]*)(\d+)[^\d](\d+)[^\d](\d+)$/i.exec(e)){c=RegExp.$1;d=parseInt(RegExp.$2,10);f=parseInt(RegExp.$3,10);g=parseInt(RegExp.$4,10);h="DMY";if("undefined"!=typeof locale_date_format&&("MDY"==locale_date_format||"YMD"==locale_date_format)){h=locale_date_format}var k=(new Date).getFullYear(),m=k%100,k=k-m;if("DMY"==h&&31>=d&&12>=f||13<d&&31>=d&&12>=f&&31<g){e=c+d+" "+b[f-1]+" "+(100<=g?g:g<=m?g+k:g+k-100)}else{if("MDY"==h&&12>=d&&31>=f||13<f&&31>=f&&12>=d&&31<g){e=c+f+" "+b[d-1]+" "+(100<=g?g:g<=m?g+k:g+k-100)}else{if("YMD"==h&&12>=f&&31>=g||13<g&&31>=g&&12>=f&&31<d){e=c+g+" "+b[f-1]+" "+(100<=d?d:d<=m?d+k:d+k-100)}}}}e=e.replace(/^[>]([\w ]+)$/,"AFT $1");e=e.replace(/^[<]([\w ]+)$/,"BEF $1");e=e.replace(/^([\w ]+)[-]$/,"FROM $1");e=e.replace(/^[-]([\w ]+)$/,"TO $1");e=e.replace(/^[~]([\w ]+)$/,"ABT $1");e=e.replace(/^[*]([\w ]+)$/,"EST $1");e=e.replace(/^[#]([\w ]+)$/,"CAL $1");e=e.replace(/^([\w ]+) ?- ?([\w ]+)$/,"BET $1 AND $2");e=e.replace(/^([\w ]+) ?~ ?([\w ]+)$/,"FROM $1 TO $2");e.match(/^=([\d ()\/+*-]+)$/)&&(e=eval(RegExp.$1));e=e.replace(/(JANUARY)/,"JAN");e=e.replace(/(FEBRUARY)/,"FEB");e=e.replace(/(MARCH)/,"MAR");e=e.replace(/(APRIL)/,"APR");e=e.replace(/(MAY)/,"MAY");e=e.replace(/(JUNE)/,"JUN");e=e.replace(/(JULY)/,"JUL");e=e.replace(/(AUGUST)/,"AUG");e=e.replace(/(SEPTEMBER)/,"SEP");e=e.replace(/(OCTOBER)/,"OCT");e=e.replace(/(NOVEMBER)/,"NOV");e=e.replace(/(DECEMBER)/,"DEC");e=e.replace(/(JAN) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(FEB) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(MAR) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(APR) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(MAY) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(JUN) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(JUL) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(AUG) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(SEP) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(OCT) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(NOV) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(DEC) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");e=e.replace(/(^| )(\d [A-Z]{3,5} \d{4})/,"$10$2");""!=l&&(e=e+" ("+l);a.value!==e&&(a.value=e)}var oldheight=0,oldwidth=0,oldz=0,oldleft=0,big=0,oldboxid="",oldimgw=0,oldimgh=0,oldimgw1=0,oldimgh1=0,diff=0,oldfont=0,oldname=0,oldthumbdisp=0,repositioned=0,oldiconsdislpay=0,rv=null;function expandbox(f,e){if(1==big&&(0<clength&&(fontdef.style.display="none"),restorebox(oldboxid,e),f==oldboxid)){return !0}jQuery(document).ready(function(){clength=jQuery(".compact_view").length});url=window.location.toString();divbox=document.getElementById("out-"+f);inbox=document.getElementById("inout-"+f);inbox2=document.getElementById("inout2-"+f);(parentbox=document.getElementById("box"+f))||(parentbox=divbox);gender=document.getElementById("box-"+f+"-gender");thumb1=document.getElementById("box-"+f+"-thumb");famlinks=document.getElementById("I"+f+"links");icons=document.getElementById("icons-"+f);iconz=document.getElementById("iconz-"+f);if(divbox){icons&&(oldiconsdislpay=icons.style.display,icons.style.display="block");jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin");oldboxid=f;big=1;oldheight=divbox.style.height;oldwidth=divbox.style.width;oldz=parentbox.style.zIndex;-1==url.indexOf("descendancy.php")&&(parentbox.style.zIndex="100");2!=e&&(divbox.style.width="300px",diff=300-parseInt(oldwidth),famlinks&&(famleft=parseInt(famlinks.style.left),famlinks.style.left=famleft+diff+"px"));divleft=parseInt(parentbox.style.left);"rtl"==textDirection&&(divleft=parseInt(parentbox.style.right));oldleft=divleft;divleft-=diff;repositioned=0;0>divleft&&(repositioned=1,divleft=0);divbox.style.height="auto";if(inbox){if(inbox.style.display="block",0<inbox.innerHTML.indexOf("LOADING")){var h=f.split(".")[0],g=createXMLHttp();g.open("get","expand_view.php?pid="+h,!0);g.onreadystatechange=function(){4==g.readyState&&(inbox.innerHTML=g.responseText)};g.send(null)}}else{inbox.style.display="none"}inbox2&&(inbox2.style.display="none");if(fontdef=document.getElementById("fontdef-"+f)){oldfont=fontdef.className,fontdef.className="detailsZoom",fontdef.style.display="block"}if(namedef=document.getElementById("namedef-"+f)){oldname=namedef.className,namedef.className="nameZoom"}if(addnamedef=document.getElementById("addnamedef-"+f)){oldaddname=addnamedef.className,addnamedef.className="nameZoom"}thumb1&&(oldthumbdisp=thumb1.style.display,thumb1.style.display="block",oldimgw=thumb1.offsetWidth,oldimgh=thumb1.offsetHeight,oldimgw&&(thumb1.style.width=2*oldimgw+"px"),oldimgh&&(thumb1.style.height=2*oldimgh+"px"));gender&&(oldimgw1=gender.offsetWidth,oldimgh1=gender.offsetHeight,oldimgw1&&(gender.style.width="15px"),oldimgh1&&(gender.style.height="15px"))}return !0}function createXMLHttp(){if("undefined"!=typeof XMLHttpRequest){return new XMLHttpRequest}if(window.ActiveXObject){for(var e=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp","Microsoft.XmlHttp"],d=0;d<e.length;d++){try{return new ActiveXObject(e[d])}catch(f){}}}throw Error("XMLHttp object could not be created.")}function restorebox(b){divbox=document.getElementById("out-"+b);inbox=document.getElementById("inout-"+b);inbox2=document.getElementById("inout2-"+b);(parentbox=document.getElementById("box"+b))||(parentbox=divbox);thumb1=document.getElementById("box-"+b+"-thumb");icons=document.getElementById("icons-"+b);iconz=document.getElementById("iconz-"+b);if(divbox){icons&&(icons.style.display=oldiconsdislpay);jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin");big=0;gender&&(oldimgw1+="px",oldimgh1+="px",gender.style.width=oldimgw1,gender.style.height=oldimgh1);thumb1&&(oldimgw+="px",oldimgh+="px",thumb1.style.width=oldimgw,thumb1.style.height=oldimgh,thumb1.style.display=oldthumbdisp);divbox.style.height=oldheight;divbox.style.width=oldwidth;parentbox&&(parentbox.style.zIndex=oldz);inbox&&(inbox.style.display="none");inbox2&&(inbox2.style.display="block");if(fontdef=document.getElementById("fontdef-"+b)){fontdef.className=oldfont}if(namedef=document.getElementById("namedef-"+b)){namedef.className=oldname}if(addnamedef=document.getElementById("addnamedef-"+b)){addnamedef.className=oldaddname}}return !0}var menutimeouts=[];function show_submenu(t,s,r){var q=document.body.scrollWidth+document.documentElement.scrollLeft,o=document.getElementById(t);if(o&&o.style){for(var q=document.all?document.body.offsetWidth:document.body.scrollWidth+document.documentElement.scrollLeft-55,n=0,p=o.childNodes.length,m=0;m<p;m++){var k=o.childNodes[m];k.offsetWidth>n+5&&(n=k.offsetWidth)}o.offsetWidth<n&&(o.style.width=n+"px");if("down"==r&&(n=document.getElementById(s))){o.style.left=n.style.left,p=o.offsetLeft+o.offsetWidth+10,p>q&&(o.style.left=q-o.offsetWidth+"px")}if("right"==r&&(n=document.getElementById(s))){"ltr"==textDirection?(s=n.offsetLeft+n.offsetWidth-40,p=s+o.offsetWidth+10,p>q?o.style.right=n.offsetLeft+"px":o.style.left=s+"px"):o.style.left=n.offsetLeft-o.offsetWidth+"px",o.style.top=n.offsetTop+"px"}0>o.offsetLeft&&(o.style.left="0px");500<o.offsetHeight&&(o.style.height="400px",o.style.overflow="auto");o.style.visibility="visible"}clearTimeout(menutimeouts[t]);menutimeouts[t]=null}function hide_submenu(b){if(null!=menutimeouts[b]){if((element=document.getElementById(b))&&element.style){element.style.visibility="hidden"}clearTimeout(menutimeouts[b]);menutimeouts[b]=null}}function timeout_submenu(b){null==menutimeouts[b]&&(tout=setTimeout("hide_submenu('"+b+"')",100),menutimeouts[b]=tout)}function focusHandler(b){if(b=b?b:window.event){b.target?pastefield=b.target:b.srcElement&&(pastefield=b.srcElement)}}function loadHandler(){var d,c;for(d=0;d<document.forms.length;d++){for(c=0;c<document.forms[d].elements.length;c++){"text"==document.forms[d].elements[c].type&&null==document.forms[d].elements[c].onfocus&&(document.forms[d].elements[c].onfocus=focusHandler)}}}function statusDisable(b){b=document.getElementById(b);b.checked=!1;b.disabled=!0}function statusEnable(b){document.getElementById(b).disabled=!1}function statusChecked(b){document.getElementById(b).checked=!0}var monthLabels=[,"January","February","March","April","May","June","July","August","September","October","November","December"],monthShort=[,"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],daysOfWeek="SMTWTFS".split(""),weekStart=0;function cal_setMonthNames(z,y,x,w,u,t,v,s,q,r,p,o){monthLabels[1]=z;monthLabels[2]=y;monthLabels[3]=x;monthLabels[4]=w;monthLabels[5]=u;monthLabels[6]=t;monthLabels[7]=v;monthLabels[8]=s;monthLabels[9]=q;monthLabels[10]=r;monthLabels[11]=p;monthLabels[12]=o}function cal_setDayHeaders(k,h,p,o,m,l,n){daysOfWeek[0]=k;daysOfWeek[1]=h;daysOfWeek[2]=p;daysOfWeek[3]=o;daysOfWeek[4]=m;daysOfWeek[5]=l;daysOfWeek[6]=n}function cal_setWeekStart(b){0<=b&&7>b&&(weekStart=b)}function cal_toggleDate(f,e){var h=document.getElementById(f);if(!h){return !1}if("visible"==h.style.visibility){return h.style.visibility="hidden",!1}if("show"==h.style.visibility){return h.style.visibility="hide",!1}var g=document.getElementById(e);if(!g){return !1}g=/((\d+ (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC) )?\d+)/.exec(g.value)?new Date(RegExp.$1):new Date;h.innerHTML=cal_generateSelectorContent(e,f,g);if("hidden"==h.style.visibility){return h.style.visibility="visible",!1}"hide"==h.style.visibility&&(h.style.visibility="show");return !1}function cal_generateSelectorContent(h,e,n){var m;m='<table border="1"><tr>'+('<td><select name="'+h+'_daySelect" id="'+h+'_daySelect" onchange="return cal_updateCalendar(\''+h+"', '"+e+"');\">");for(i=1;32>i;i++){m+='<option value="'+i+'"',n.getDate()==i&&(m+=' selected="selected"'),m+=">"+i+"</option>"}m=m+"</select></td>"+('<td><select name="'+h+'_monSelect" id="'+h+'_monSelect" onchange="return cal_updateCalendar(\''+h+"', '"+e+"');\">");for(i=1;13>i;i++){m+='<option value="'+i+'"',n.getMonth()+1==i&&(m+=' selected="selected"'),m+=">"+monthLabels[i]+"</option>"}m+="</select></td>";m+='<td><input type="text" name="'+h+'_yearInput" id="'+h+'_yearInput" size="5" value="'+n.getFullYear()+'" onchange="return cal_updateCalendar(\''+h+"', '"+e+"');\" /></td></tr>";m+='<tr><td colspan="3">';m+='<table width="100%">';m+="<tr>";j=weekStart;for(i=0;7>i;i++){m+="<td ",m+='class="descriptionbox"',m+=">",m+=daysOfWeek[j],m+="</td>",j++,6<j&&(j=0)}m+="</tr>";var l=new Date(n.getFullYear(),n.getMonth(),1),k=l.getDay(),k=k-weekStart,l=l.getTime()-86400000*k+43200000,l=new Date(l);for(j=0;6>j;j++){m+="<tr>";for(i=0;7>i;i++){m+="<td ",m=l.getMonth()==n.getMonth()?l.getDate()==n.getDate()?m+'class="descriptionbox"':m+'class="optionbox"':m+'style="background-color:#EAEAEA; border: solid #AAAAAA 1px;"',m+='><a href="#" onclick="return cal_dateClicked(\''+h+"', '"+e+"', "+l.getFullYear()+", "+l.getMonth()+", "+l.getDate()+');">',m+=l.getDate(),m+="</a></td>",datemilli=l.getTime()+86400000,l=new Date(datemilli)}m+="</tr>"}m+="</table>";m+="</td></tr>";return m+="</table>"}function cal_setDateField(f,e,h,g){f=document.getElementById(f);if(!f){return !1}10>g&&(g="0"+g);f.value=g+" "+monthShort[h+1]+" "+e;return !1}function cal_updateCalendar(g,e){var l=document.getElementById(g+"_daySelect");if(!l){return !1}var k=document.getElementById(g+"_monSelect");if(!k){return !1}var h=document.getElementById(g+"_yearInput");if(!h){return !1}k=parseInt(k.options[k.selectedIndex].value);(l=new Date(h.value,k-1,l.options[l.selectedIndex].value))||alert("Date error "+l);cal_setDateField(g,l.getFullYear(),l.getMonth(),l.getDate());h=document.getElementById(e);if(!h){return alert("no dateDiv "+e),!1}h.innerHTML=cal_generateSelectorContent(g,e,l);return !1}function cal_dateClicked(g,e,l,k,h){cal_setDateField(g,l,k,h);cal_toggleDate(e,g);return !1}function findIndi(e,d,f){f="undefined"===typeof f?WT_GEDCOM:f;pastefield=e;nameElement=d;window.open("find.php?type=indi&ged="+encodeURIComponent(f),"_blank",find_window_specs);return !1}function findPlace(d,c){c="undefined"===typeof c?WT_GEDCOM:c;pastefield=d;window.open("find.php?type=place&ged="+encodeURIComponent(c),"_blank",find_window_specs);return !1}function findFamily(d,c){c="undefined"===typeof c?WT_GEDCOM:c;pastefield=d;window.open("find.php?type=fam&ged="+encodeURIComponent(c),"_blank",find_window_specs);return !1}function findMedia(e,d,f){f="undefined"===typeof f?WT_GEDCOM:f;pastefield=e;d||(d="0all");window.open("find.php?type=media&choose="+encodeURIComponent(d)+"&ged="+encodeURIComponent(f),"_blank",find_window_specs);return !1}function findSource(e,d,f){f="undefined"===typeof f?WT_GEDCOM:f;pastefield=e;nameElement=d;window.open("find.php?type=source&ged="+encodeURIComponent(f),"_blank",find_window_specs);return !1}function findnote(e,d,f){f="undefined"===typeof f?WT_GEDCOM:f;pastefield=e;nameElement=d;window.open("find.php?type=note&ged="+encodeURIComponent(f),"_blank",find_window_specs);return !1}function findRepository(d,c){c="undefined"===typeof c?WT_GEDCOM:c;pastefield=d;window.open("find.php?type=repo&ged="+encodeURIComponent(c),"_blank",find_window_specs);return !1}function findSpecialChar(b){pastefield=b;window.open("find.php?type=specialchar","_blank",find_window_specs);return !1}function findFact(d,c){c="undefined"===typeof c?WT_GEDCOM:c;pastefield=d;tags=d.value;window.open("find.php?type=facts&tags="+encodeURIComponent(tags)+"&ged="+encodeURIComponent(c),"_blank",find_window_specs);return !1}function ilinkitem(e,d,f){f="undefined"===typeof f?WT_GEDCOM:f;window.open("inverselink.php?mediaid="+encodeURIComponent(e)+"&linkto="+encodeURIComponent(d)+"&ged="+encodeURIComponent(f),"_blank",find_window_specs);return !1}function message(e,d,f){window.open("message.php?to="+encodeURIComponent(e)+"&method="+encodeURIComponent(d)+"&url="+encodeURIComponent(f),"_blank",mesg_window_specs);return !1}function valid_lati_long(e,d,f){txt=e.value.toUpperCase();txt=txt.replace(/(^\s*)|(\s*$)/g,"");txt=txt.replace(/ /g,":");txt=txt.replace(/\+/g,"");txt=txt.replace(/-/g,f);txt=txt.replace(/,/g,".");txt=txt.replace(/\uB0/g,":");txt=txt.replace(/\u27/g,":");txt=txt.replace(/^([0-9]+):([0-9]+):([0-9.]+)(.*)/g,function(k,g,n,m,l){k=parseFloat(g);k=k+n/60+m/3600;k=Math.round(10000*k)/10000;return l+k});txt=txt.replace(/^([0-9]+):([0-9]+)(.*)/g,function(h,g,l,k){h=parseFloat(g);h=Math.round(10000*(h+l/60))/10000;return k+h});txt=txt.replace(/(.*)([N|S|E|W]+)$/g,"$2$1");""!=txt&&(txt.charAt(0)!=f&&txt.charAt(0)!=d)&&(txt=d+txt);e.value=txt}function activate_colorbox(b){jQuery.extend(jQuery.colorbox.settings,{fixed:!0,current:"",previous:"ltr"==textDirection?"\u25c0":"\u25b6",next:"ltr"==textDirection?"\u25b6":"\u25c0",slideshowStart:"\u25cb",slideshowStop:"\u25cf",close:"\u2715"});b&&jQuery.extend(jQuery.colorbox.settings,b);jQuery("body").on("click","a.gallery",function(){jQuery("a[type^=image].gallery").colorbox({photo:!0,maxWidth:"95%",maxHeight:"95%",rel:"gallery",slideshow:!0,slideshowAuto:!1,onComplete:function(){jQuery(".cboxPhoto").wheelzoom();jQuery(".cboxPhoto img").on("click",function(c){c.preventDefault()})}})})};