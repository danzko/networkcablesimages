var edit_window_specs="width=650,height=600,left=175,top=100,resizable=1,scrollbars=1",indx_window_specs="width=600,height=500,left=200,top=150,resizable=1,scrollbars=1",news_window_specs="width=740,height=650,left=200,top=150,resizable=1,scrollbars=1",help_window_specs="width=500,height=400,left=250,top=200,resizable=1,scrollbars=1",find_window_specs="width=550,height=600,left=250,top=150,resizable=1,scrollbars=1",mesg_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",chan_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",mord_window_specs="width=500,height=600,left=250,top=100,resizable=1,scrollbars=1",assist_window_specs="width=900,height=800,left=70,top=70,resizable=1,scrollbars=1",gmap_window_specs="width=650,height=600,left=200,top=150,resizable=1,scrollbars=1",fam_nav_specs="width=300,height=600,left=817,top=150,resizable=1,scrollbars=1";function helpDialog(b,d){url="help_text.php?help="+b+"&mod="+d;dialog=jQuery("<div></div>").load(url+" .helpcontent").dialog({modal:!0,width:500,closeText:""});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close")});jQuery(".ui-dialog-title").load(url+" .helpheader");return !1}function modalDialog(b,d){jQuery(document).ajaxComplete(function(){jQuery(".ui-dialog").before('<div class="ui-widget-overlay" />')});dialog=jQuery('<div title="'+d+'"></div>').load(b).dialog({modal:!1,width:700,closeText:"",close:function(){jQuery(this).remove();jQuery(".ui-widget-overlay").remove()}});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close");jQuery(this).remove()});return !1}function modalNotes(b,d){dialog=jQuery('<div title="'+d+'"></div>').html(b).dialog({modal:!0,width:500,closeText:"",close:function(){jQuery(this).remove()}});jQuery(".ui-widget-overlay").on("click",function(){jQuery("div:ui-dialog:visible").dialog("close")});return !1}function modalDialogSubmitAjax(b){jQuery.ajax({type:"POST",url:jQuery(b).attr("action"),data:jQuery(b).serialize(),success:function(){window.location.reload()}});return !1}function closePopupAndReloadParent(b){parent.opener&&(null==b||""==b?parent.opener.location.reload():parent.opener.location=b);window.close()}var msX=0,msY=0;function MM_showHideLayers(){var f,h,e,g=MM_showHideLayers.arguments;for(f=0;f<g.length-3;f+=4){if(null!=(e=document.getElementById(g[f]))){e.style&&(div=e,e=e.style),h=g[f+2],"toggle"==h&&(h=-1!=e.visibility.indexOf("hid")?"show":"hide"),h="show"==h?"visible":"hide"==h?"hidden":h,e.visibility=h,"followmouse"==g[f+1]&&(pobj=document.getElementById(g[f+3]),null!=pobj?"auto"!=pobj.style.top&&"relatives"!=g[f+3]?(e.top=5+msY-parseInt(pobj.style.top)+"px","ltr"==textDirection&&(e.left=5+msX-parseInt(pobj.style.left)+"px"),"rtl"==textDirection&&(e.right=5+msX-parseInt(pobj.style.right)+"px")):(e.top="auto",pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,"rtl"==textDirection&&(pagewidth-=document.documentElement.scrollLeft),msX>pagewidth-160&&(msX=msX-150-pobj.offsetLeft),contentdiv=document.getElementById("content"),msX-=contentdiv.offsetLeft,"ltr"==textDirection&&(e.left=5+msX+"px"),e.zIndex=1000):(0<WT_SCRIPT_NAME.indexOf("fanchart")?(e.top=msY-20+"px",e.left=msX-20+"px"):-1==WT_SCRIPT_NAME.indexOf("index.php")?(Xadjust=document.getElementById("content").offsetLeft,e.left=5+(msX-Xadjust)+"px",e.top="auto"):(Xadjust=document.getElementById("content").offsetLeft,e.top=msY-50+"px",e.left=10+(msX-Xadjust)+"px"),e.zIndex=1000))}}}var show=!1;function togglechildrenbox(b){b=b?"."+b:"";show?(MM_showHideLayers("childbox"+b," ","hide"," "),show=!1):(MM_showHideLayers("childbox"+b," ","show"," "),show=!0);return !1}var lastfamilybox="",popupopen=0;function show_family_box(b,d){popupopen=1;lastfamilybox=b;"relatives"==d?MM_showHideLayers("I"+b+"links","followmouse","show",""+d):(famlinks=document.getElementById("I"+b+"links"),divbox=document.getElementById("out-"+b),parentbox=document.getElementById("box"+b),famlinks&&divbox&&parentbox?(famlinks.style.top="0px",famleft="ltr"==textDirection?parseInt(divbox.style.width)+15:0,isNaN(famleft)&&(famleft=0,famlinks.style.top=parentbox.offsetTop+"px"),pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,"rtl"==textDirection&&(pagewidth-=document.documentElement.scrollLeft),famleft+parseInt(parentbox.style.left)>pagewidth-100&&(famleft=25),famlinks.style.left=famleft+"px",-1!=WT_SCRIPT_NAME.indexOf("index.php")&&(famlinks.style.left="100%"),MM_showHideLayers("I"+b+"links"," ","show",""+d)):MM_showHideLayers("I"+b+"links","followmouse","show",""+d))}function toggle_family_box(b,d){1==popupopen&&(MM_showHideLayers("I"+lastfamilybox+"links"," ","hide",""+d),popupopen=0);b==lastfamilybox?lastfamilybox="":(popupopen=1,lastfamilybox=b,"relatives"==d?MM_showHideLayers("I"+b+"links","followmouse","show",""+d):(famlinks=document.getElementById("I"+b+"links"),divbox=document.getElementById("out-"+b),(parentbox=document.getElementById("box"+b))||(parentbox=document.getElementById(d+".0")),famlinks&&divbox&&parentbox?(divWidth=parseInt(divbox.style.width),linkWidth=parseInt(famlinks.style.width),parentWidth=parseInt(parentbox.style.width),famlinks.style.top="3px",famleft=divWidth+8,"rtl"==textDirection&&(famleft-=divWidth+linkWidth+5,"mozilla"!=browserType&&(famleft-=11)),pagewidth=document.documentElement.offsetWidth+document.documentElement.scrollLeft,famleft+parseInt(parentbox.style.left)>pagewidth-100&&(famleft=25),famlinks.style.left=famleft+"px",-1!=WT_SCRIPT_NAME.indexOf("index.php")&&(famlinks.style.left="100%"),MM_showHideLayers("I"+b+"links"," ","show",""+d)):MM_showHideLayers("I"+b+"links","followmouse","show",""+d)))}function hide_family_box(b){MM_showHideLayers("I"+b+"links","","hide","");popupopen=0;lastfamilybox=""}var timeouts=[];function family_box_timeout(b){tout=setTimeout("hide_family_box('"+b+"')",2500);timeouts[b]=tout}function clear_family_box_timeout(b){clearTimeout(timeouts[b])}function expand_layer(b){jQuery("#"+b+"_img").hasClass("icon-plus")?(jQuery("#"+b+"_img").removeClass("icon-plus").addClass("icon-minus"),jQuery("#"+b).show("fast")):(jQuery("#"+b+"_img").removeClass("icon-minus").addClass("icon-plus"),jQuery("#"+b).hide("fast"));return !1}function getMouseXY(b){IE?(msX=event.clientX+document.documentElement.scrollLeft,msY=event.clientY+document.documentElement.scrollTop):(msX=b.pageX,msY=b.pageY);return !0}function edit_interface(f,h){var e=h||edit_window_specs,g="edit_interface.php?"+jQuery.param(f)+"&accesstime="+accesstime+"&ged="+WT_GEDCOM;window.open(g,"_blank",e)}function edit_record(b,d){edit_interface({action:"edit",pid:b,linenum:d});return !1}function edit_raw(b){edit_interface({action:"editraw",pid:b});return !1}function edit_note(b){edit_interface({action:"editnote",pid:b,linenum:1});return !1}function edit_source(b){edit_interface({action:"editsource",pid:b,linenum:1});return !1}function add_record(e,f){var d=document.getElementById(f);d&&(d=d.options[d.selectedIndex].value,"OBJE"==d?window.open("addmedia.php?action=showmediaform&linkid="+e+"&ged="+WT_GEDCOM,"_blank",edit_window_specs):edit_interface({action:"add",pid:e,fact:d}));return !1}function addClipboardRecord(e,f){var d=document.getElementById(f);d&&edit_interface({action:"paste",pid:e,fact:d.options[d.selectedIndex].value.substr(10)});return !1}function reorder_media(b){edit_interface({action:"reorder_media",pid:b},mord_window_specs);return !1}function add_new_record(b,d){edit_interface({action:"add",pid:b,fact:d});return !1}function addnewchild(b,d){edit_interface({action:"addchild",gender:d,famid:b});return !1}function addnewspouse(b,d){edit_interface({action:"addspouse",famid:b,famtag:d});return !1}function addopfchild(b,d){edit_interface({action:"addopfchild",pid:b,gender:d});return !1}function addspouse(b,d){edit_interface({action:"addspouse",pid:b,famtag:d,famid:"new"});return !1}function linkspouse(b,d){edit_interface({action:"linkspouse",pid:b,famtag:d,famid:"new"});return !1}function add_famc(b){edit_interface({action:"addfamlink",pid:b,famtag:"CHIL"});return !1}function add_fams(b,d){edit_interface({action:"addfamlink",pid:b,famtag:d});return !1}function edit_name(b,d){edit_interface({action:"editname",pid:b,linenum:d});return !1}function add_name(b){edit_interface({action:"addname",pid:b});return !1}function addnewparent(b,d){edit_interface({action:"addnewparent",pid:b,famtag:d,famid:"new"});return !1}function addnewparentfamily(e,f,d){edit_interface({action:"addnewparent",pid:e,famtag:f,famid:d});return !1}function delete_fact(f,h,e,g){confirm(g)&&edit_interface({action:"delete",pid:f,linenum:h,mediaid:e});return !1}function delete_user(b,d){confirm(b)&&jQuery.post("action.php",{action:"delete-user",user_id:d,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function reorder_children(b){edit_interface({action:"reorder_children",pid:b});return !1}function masquerade(b){jQuery.post("action.php",{action:"masquerade",user_id:b,csrf:WT_CSRF_TOKEN},function(){location.reload()});return !1}function reorder_families(b){edit_interface({action:"reorder_fams",pid:b});return !1}function reply(b,d){window.open("message.php?to="+b+"&subject="+d+"&ged="+WT_GEDCOM,"_blank",mesg_window_specs);return !1}function delete_message(b){window.open("message.php?action=delete&id="+b,"_blank&ged="+WT_GEDCOM,mesg_window_specs);return !1}function change_family_members(b){edit_interface({action:"changefamily",famid:b});return !1}function addnewsource(b){pastefield=b;edit_interface({action:"addnewsource",pid:"newsour"},null,b);return !1}function addnewrepository(b){pastefield=b;edit_interface({action:"addnewrepository",pid:"newrepo"},null,b);return !1}function addnewnote(b){pastefield=b;edit_interface({action:"addnewnote",noteid:"newnote"},null,b);return !1}function addnewnote_assisted(b,d){pastefield=b;edit_interface({action:"addnewnote_assisted",noteid:"newnote",pid:d},assist_window_specs,b);return !1}function addmedia_links(e,f,d){pastefield=e;insertRowToTable(f,d);return !1}function valid_date(a){var c="JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),b=a.value,d=b.split("("),e="";1<d.length&&(b=d[0],e=d[1]);b=b.toUpperCase();b=b.replace(/\s+/," ");b=b.replace(/(^\s)|(\s$)/,"");b=b.replace(/(\d)([A-Z])/,"$1 $2");b=b.replace(/([A-Z])(\d)/,"$1 $2");b.match(/^Q ([1-4]) (\d\d\d\d)$/)&&(b="BET "+c[3*RegExp.$1-3]+" "+RegExp.$2+" AND "+c[3*RegExp.$1-1]+" "+RegExp.$2);if(/^([^\d]*)(\d+)[^\d](\d+)[^\d](\d+)$/i.exec(b)){var d=RegExp.$1,f=parseInt(RegExp.$2,10),h=parseInt(RegExp.$3,10),g=parseInt(RegExp.$4,10),l="DMY";if("undefined"!=typeof locale_date_format&&("MDY"==locale_date_format||"YMD"==locale_date_format)){l=locale_date_format}var k=(new Date).getFullYear(),m=k%100,k=k-m;if("DMY"==l&&31>=f&&12>=h||13<f&&31>=f&&12>=h&&31<g){b=d+f+" "+c[h-1]+" "+(100<=g?g:g<=m?g+k:g+k-100)}else{if("MDY"==l&&12>=f&&31>=h||13<h&&31>=h&&12>=f&&31<g){b=d+h+" "+c[f-1]+" "+(100<=g?g:g<=m?g+k:g+k-100)}else{if("YMD"==l&&12>=h&&31>=g||13<g&&31>=g&&12>=h&&31<f){b=d+g+" "+c[h-1]+" "+(100<=f?f:f<=m?f+k:f+k-100)}}}}b=b.replace(/^[>]([\w ]+)$/,"AFT $1");b=b.replace(/^[<]([\w ]+)$/,"BEF $1");b=b.replace(/^([\w ]+)[-]$/,"FROM $1");b=b.replace(/^[-]([\w ]+)$/,"TO $1");b=b.replace(/^[~]([\w ]+)$/,"ABT $1");b=b.replace(/^[*]([\w ]+)$/,"EST $1");b=b.replace(/^[#]([\w ]+)$/,"CAL $1");b=b.replace(/^([\w ]+) ?- ?([\w ]+)$/,"BET $1 AND $2");b=b.replace(/^([\w ]+) ?~ ?([\w ]+)$/,"FROM $1 TO $2");b.match(/^=([\d ()\/+*-]+)$/)&&(b=eval(RegExp.$1));b=b.replace(/(JAN)(?:UARY)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(FEB)(?:RUARY)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(MAR)(?:CH)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(APR)(?:IL)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(MAY) (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(JUN)(?:E)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(JUL)(?:Y)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(AUG)(?:UST)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(SEP)(?:TEMBER)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(OCT)(?:OBER)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(NOV)(?:EMBER)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(DEC)(?:EMBER)? (\d\d?)[, ]+(\d\d\d\d)/,"$2 $1 $3");b=b.replace(/(^| )(\d [A-Z]{3,5} \d{4})/,"$10$2");""!=e&&(b=b+" ("+e);a.value!==b&&(a.value=b)}var oldheight=0,oldwidth=0,oldz=0,oldleft=0,big=0,oldboxid="",oldimgw=0,oldimgh=0,oldimgw1=0,oldimgh1=0,diff=0,oldfont=0,oldname=0,oldthumbdisp=0,repositioned=0,oldiconsdislpay=0,rv=null;function expandbox(f,h){if(1==big&&(0<clength&&(fontdef.style.display="none"),restorebox(oldboxid,h),f==oldboxid)){return !0}jQuery(document).ready(function(){clength=jQuery(".compact_view").length});url=window.location.toString();divbox=document.getElementById("out-"+f);inbox=document.getElementById("inout-"+f);inbox2=document.getElementById("inout2-"+f);(parentbox=document.getElementById("box"+f))||(parentbox=divbox);gender=document.getElementById("box-"+f+"-gender");thumb1=document.getElementById("box-"+f+"-thumb");famlinks=document.getElementById("I"+f+"links");icons=document.getElementById("icons-"+f);iconz=document.getElementById("iconz-"+f);if(divbox){icons&&(oldiconsdislpay=icons.style.display,icons.style.display="block");jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin");oldboxid=f;big=1;oldheight=divbox.style.height;oldwidth=divbox.style.width;oldz=parentbox.style.zIndex;-1==url.indexOf("descendancy.php")&&(parentbox.style.zIndex="100");2!=h&&(divbox.style.width="300px",diff=300-parseInt(oldwidth),famlinks&&(famleft=parseInt(famlinks.style.left),famlinks.style.left=famleft+diff+"px"));divleft=parseInt(parentbox.style.left);"rtl"==textDirection&&(divleft=parseInt(parentbox.style.right));oldleft=divleft;divleft-=diff;repositioned=0;0>divleft&&(repositioned=1,divleft=0);divbox.style.height="auto";if(inbox){if(inbox.style.display="block",0<inbox.innerHTML.indexOf("LOADING")){var e=f.split(".")[0],g=createXMLHttp();g.open("get","expand_view.php?pid="+e,!0);g.onreadystatechange=function(){4==g.readyState&&(inbox.innerHTML=g.responseText)};g.send(null)}}else{inbox.style.display="none"}inbox2&&(inbox2.style.display="none");if(fontdef=document.getElementById("fontdef-"+f)){oldfont=fontdef.className,fontdef.className="detailsZoom",fontdef.style.display="block"}if(namedef=document.getElementById("namedef-"+f)){oldname=namedef.className,namedef.className="nameZoom"}if(addnamedef=document.getElementById("addnamedef-"+f)){oldaddname=addnamedef.className,addnamedef.className="nameZoom"}thumb1&&(oldthumbdisp=thumb1.style.display,thumb1.style.display="block",oldimgw=thumb1.offsetWidth,oldimgh=thumb1.offsetHeight,oldimgw&&(thumb1.style.width=2*oldimgw+"px"),oldimgh&&(thumb1.style.height=2*oldimgh+"px"));gender&&(oldimgw1=gender.offsetWidth,oldimgh1=gender.offsetHeight,oldimgw1&&(gender.style.width="15px"),oldimgh1&&(gender.style.height="15px"))}return !0}function createXMLHttp(){if("undefined"!=typeof XMLHttpRequest){return new XMLHttpRequest}if(window.ActiveXObject){for(var e=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp","Microsoft.XmlHttp"],f=0;f<e.length;f++){try{return new ActiveXObject(e[f])}catch(d){}}}throw Error("XMLHttp object could not be created.")}function restorebox(b){divbox=document.getElementById("out-"+b);inbox=document.getElementById("inout-"+b);inbox2=document.getElementById("inout2-"+b);(parentbox=document.getElementById("box"+b))||(parentbox=divbox);thumb1=document.getElementById("box-"+b+"-thumb");icons=document.getElementById("icons-"+b);iconz=document.getElementById("iconz-"+b);if(divbox){icons&&(icons.style.display=oldiconsdislpay);jQuery(iconz).hasClass("icon-zoomin")?jQuery(iconz).removeClass("icon-zoomin").addClass("icon-zoomout"):jQuery(iconz).removeClass("icon-zoomout").addClass("icon-zoomin");big=0;gender&&(oldimgw1+="px",oldimgh1+="px",gender.style.width=oldimgw1,gender.style.height=oldimgh1);thumb1&&(oldimgw+="px",oldimgh+="px",thumb1.style.width=oldimgw,thumb1.style.height=oldimgh,thumb1.style.display=oldthumbdisp);divbox.style.height=oldheight;divbox.style.width=oldwidth;parentbox&&(parentbox.style.zIndex=oldz);inbox&&(inbox.style.display="none");inbox2&&(inbox2.style.display="block");if(fontdef=document.getElementById("fontdef-"+b)){fontdef.className=oldfont}if(namedef=document.getElementById("namedef-"+b)){namedef.className=oldname}if(addnamedef=document.getElementById("addnamedef-"+b)){addnamedef.className=oldaddname}}return !0}var menutimeouts=[];function show_submenu(t,r,s){var q=document.body.scrollWidth+document.documentElement.scrollLeft,p=document.getElementById(t);if(p&&p.style){for(var q=document.all?document.body.offsetWidth:document.body.scrollWidth+document.documentElement.scrollLeft-55,o=0,m=p.childNodes.length,n=0;n<m;n++){var k=p.childNodes[n];k.offsetWidth>o+5&&(o=k.offsetWidth)}p.offsetWidth<o&&(p.style.width=o+"px");if("down"==s&&(o=document.getElementById(r))){p.style.left=o.style.left,m=p.offsetLeft+p.offsetWidth+10,m>q&&(p.style.left=q-p.offsetWidth+"px")}if("right"==s&&(o=document.getElementById(r))){"ltr"==textDirection?(r=o.offsetLeft+o.offsetWidth-40,m=r+p.offsetWidth+10,m>q?p.style.right=o.offsetLeft+"px":p.style.left=r+"px"):p.style.left=o.offsetLeft-p.offsetWidth+"px",p.style.top=o.offsetTop+"px"}0>p.offsetLeft&&(p.style.left="0px");500<p.offsetHeight&&(p.style.height="400px",p.style.overflow="auto");p.style.visibility="visible"}clearTimeout(menutimeouts[t]);menutimeouts[t]=null}function hide_submenu(b){if(null!=menutimeouts[b]){if((element=document.getElementById(b))&&element.style){element.style.visibility="hidden"}clearTimeout(menutimeouts[b]);menutimeouts[b]=null}}function timeout_submenu(b){null==menutimeouts[b]&&(tout=setTimeout("hide_submenu('"+b+"')",100),menutimeouts[b]=tout)}function focusHandler(b){if(b=b?b:window.event){b.target?pastefield=b.target:b.srcElement&&(pastefield=b.srcElement)}}function loadHandler(){var b,d;for(b=0;b<document.forms.length;b++){for(d=0;d<document.forms[b].elements.length;d++){"text"==document.forms[b].elements[d].type&&null==document.forms[b].elements[d].onfocus&&(document.forms[b].elements[d].onfocus=focusHandler)}}}var IE=document.all?!0:!1;IE||document.captureEvents(Event.MOUSEMOVE|Event.KEYDOWN|Event.KEYUP);document.onmousemove=getMouseXY;function toggleStatus(b){b=document.getElementById(b);b.disabled=!b.disabled}function statusDisable(b){b=document.getElementById(b);b.checked=!1;b.disabled=!0}function statusEnable(b){document.getElementById(b).disabled=!1}function statusChecked(b){document.getElementById(b).checked=!0}var monthLabels=[,"January","February","March","April","May","June","July","August","September","October","November","December"],monthShort=[,"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],daysOfWeek="SMTWTFS".split(""),weekStart=0;function cal_setMonthNames(z,x,y,w,v,u,s,t,q,r,p,o){monthLabels[1]=z;monthLabels[2]=x;monthLabels[3]=y;monthLabels[4]=w;monthLabels[5]=v;monthLabels[6]=u;monthLabels[7]=s;monthLabels[8]=t;monthLabels[9]=q;monthLabels[10]=r;monthLabels[11]=p;monthLabels[12]=o}function cal_setDayHeaders(k,p,g,o,n,m,l){daysOfWeek[0]=k;daysOfWeek[1]=p;daysOfWeek[2]=g;daysOfWeek[3]=o;daysOfWeek[4]=n;daysOfWeek[5]=m;daysOfWeek[6]=l}function cal_setWeekStart(b){0<=b&&7>b&&(weekStart=b)}function cal_toggleDate(f,h){var e=document.getElementById(f);if(!e){return !1}if("visible"==e.style.visibility){return e.style.visibility="hidden",!1}if("show"==e.style.visibility){return e.style.visibility="hide",!1}var g=document.getElementById(h);if(!g){return !1}g=/((\d+ (JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC) )?\d+)/.exec(g.value)?new Date(RegExp.$1):new Date;e.innerHTML=cal_generateSelectorContent(h,f,g);if("hidden"==e.style.visibility){return e.style.visibility="visible",!1}"hide"==e.style.visibility&&(e.style.visibility="show");return !1}function cal_generateSelectorContent(h,n,g){var m;m='<table border="1"><tr>'+('<td><select name="'+h+'_daySelect" id="'+h+'_daySelect" onchange="return cal_updateCalendar(\''+h+"', '"+n+"');\">");for(i=1;32>i;i++){m+='<option value="'+i+'"',g.getDate()==i&&(m+=' selected="selected"'),m+=">"+i+"</option>"}m=m+"</select></td>"+('<td><select name="'+h+'_monSelect" id="'+h+'_monSelect" onchange="return cal_updateCalendar(\''+h+"', '"+n+"');\">");for(i=1;13>i;i++){m+='<option value="'+i+'"',g.getMonth()+1==i&&(m+=' selected="selected"'),m+=">"+monthLabels[i]+"</option>"}m+="</select></td>";m+='<td><input type="text" name="'+h+'_yearInput" id="'+h+'_yearInput" size="5" value="'+g.getFullYear()+'" onchange="return cal_updateCalendar(\''+h+"', '"+n+"');\" /></td></tr>";m+='<tr><td colspan="3">';m+='<table width="100%">';m+="<tr>";j=weekStart;for(i=0;7>i;i++){m+="<td ",m+='class="descriptionbox"',m+=">",m+=daysOfWeek[j],m+="</td>",j++,6<j&&(j=0)}m+="</tr>";var l=new Date(g.getFullYear(),g.getMonth(),1),k=l.getDay(),k=k-weekStart,l=l.getTime()-86400000*k+43200000,l=new Date(l);for(j=0;6>j;j++){m+="<tr>";for(i=0;7>i;i++){m+="<td ",m=l.getMonth()==g.getMonth()?l.getDate()==g.getDate()?m+'class="descriptionbox"':m+'class="optionbox"':m+'style="background-color:#EAEAEA; border: solid #AAAAAA 1px;"',m+='><a href="#" onclick="return cal_dateClicked(\''+h+"', '"+n+"', "+l.getFullYear()+", "+l.getMonth()+", "+l.getDate()+');">',m+=l.getDate(),m+="</a></td>",datemilli=l.getTime()+86400000,l=new Date(datemilli)}m+="</tr>"}m+="</table>";m+="</td></tr>";return m+="</table>"}function cal_setDateField(f,h,e,g){f=document.getElementById(f);if(!f){return !1}10>g&&(g="0"+g);f.value=g+" "+monthShort[e+1]+" "+h;return !1}function cal_updateCalendar(g,l){var f=document.getElementById(g+"_daySelect");if(!f){return !1}var k=document.getElementById(g+"_monSelect");if(!k){return !1}var h=document.getElementById(g+"_yearInput");if(!h){return !1}k=parseInt(k.options[k.selectedIndex].value);(f=new Date(h.value,k-1,f.options[f.selectedIndex].value))||alert("Date error "+f);cal_setDateField(g,f.getFullYear(),f.getMonth(),f.getDate());h=document.getElementById(l);if(!h){return alert("no dateDiv "+l),!1}h.innerHTML=cal_generateSelectorContent(g,l,f);return !1}function cal_dateClicked(g,l,f,k,h){cal_setDateField(g,f,k,h);cal_toggleDate(l,g);return !1}function findIndi(e,f,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=e;nameElement=f;window.open("find.php?type=indi&ged="+d,"_blank",find_window_specs);return !1}function findPlace(b,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=b;window.open("find.php?type=place&ged="+d,"_blank",find_window_specs);return !1}function findFamily(b,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=b;window.open("find.php?type=fam&ged="+d,"_blank",find_window_specs);return !1}function findMedia(e,f,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=e;f||(f="0all");window.open("find.php?type=media&choose="+f+"&ged="+d,"_blank",find_window_specs);return !1}function findSource(e,f,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=e;nameElement=f;window.open("find.php?type=source&ged="+d,"_blank",find_window_specs);return !1}function findnote(e,f,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=e;nameElement=f;window.open("find.php?type=note&ged="+d,"_blank",find_window_specs);return !1}function findRepository(b,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=b;window.open("find.php?type=repo&ged="+d,"_blank",find_window_specs);return !1}function findSpecialChar(b){pastefield=b;window.open("find.php?type=specialchar","_blank",find_window_specs);return !1}function findFact(b,d){d="undefined"===typeof d?WT_GEDCOM:d;pastefield=b;tags=b.value;window.open("find.php?type=facts&tags="+tags+"&ged="+d,"_blank",find_window_specs);return !1}function ilinkitem(e,f,d){d="undefined"===typeof d?WT_GEDCOM:d;window.open("inverselink.php?mediaid="+e+"&linkto="+f+"&ged="+d,"_blank",find_window_specs);return !1}function message(f,h,e,g){window.open("message.php?to="+f+"&method="+h+"&url="+e+"&subject="+g,"_blank",mesg_window_specs);return !1}function include_css(e){var f=document.getElementsByTagName("head")[0],d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",e);f.appendChild(d)}function include_js(e){var f=document.getElementsByTagName("head")[0],d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",e);f.appendChild(d)}function findPosX(b){var d=0;if(b.offsetParent){for(;;){d+=b.offsetLeft;if(!b.offsetParent){break}b=b.offsetParent}}else{b.x&&(d+=b.x)}return d}function findPosY(b){var d=0;if(b.offsetParent){for(;"relative"!=b.style.position;){d+=b.offsetTop;if(!b.offsetParent){break}b=b.offsetParent}}else{b.y&&(d+=b.y)}return d}function activate_colorbox(b){jQuery.extend(jQuery.colorbox.settings,{fixed:!0,current:"",previous:"ltr"==textDirection?"\u25c0":"\u25b6",next:"ltr"==textDirection?"\u25b6":"\u25c0",slideshowStart:"\u25cb",slideshowStop:"\u25cf",close:"\u00d7"});b&&jQuery.extend(jQuery.colorbox.settings,b);jQuery("body").on("click","a.gallery",function(){jQuery("a[type^=image].gallery").colorbox({photo:!0,maxWidth:"95%",maxHeight:"95%",rel:"gallery",slideshow:!0,slideshowAuto:!1,onComplete:function(){jQuery(".cboxPhoto").wheelzoom();jQuery(".cboxPhoto img").on("click",function(c){c.preventDefault()})}})})};
