/*
 * bootstrap-filestyle
 * http://dev.tudosobreweb.com.br/bootstrap-filestyle/
 *
 * Copyright (c) 2013 Markus Vinicius da Silva Lima
 * Version 1.0.3
 * Licensed under the MIT license.
 */
!function(a){"use strict";var b=function(b,c){this.options=c,this.$elementFilestyle=[],this.$element=a(b)};b.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},icon:function(a){if(a===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(a!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find("i").remove())}},input:function(a){if(a===!0){if(!this.options.input){this.options.input=!0,this.$elementFilestyle.prepend(this.htmlInput());var b="",c=[];void 0===this.$element[0].files?c[0]={name:this.$element[0].value}:c=this.$element[0].files;for(var d=0;d<c.length;d++)b+=c[d].name.split("\\").pop()+", ";""!==b&&this.$elementFilestyle.find(":text").val(b.replace(/\, $/g,""))}}else{if(a!==!1)return this.options.input;this.options.input&&(this.options.input=!1,this.$elementFilestyle.find(":text").remove())}},buttonText:function(a){return void 0===a?this.options.buttonText:(this.options.buttonText=a,this.$elementFilestyle.find("label span").html(this.options.buttonText),void 0)},classButton:function(a){return void 0===a?this.options.classButton:(this.options.classButton=a,this.$elementFilestyle.find("label").attr({"class":this.options.classButton}),-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label i").addClass("icon-white"):this.$elementFilestyle.find("label i").removeClass("icon-white"),void 0)},classIcon:function(a){return void 0===a?this.options.classIcon:(this.options.classIcon=a,-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label").find("i").attr({"class":"icon-white "+this.options.classIcon}):this.$elementFilestyle.find("label").find("i").attr({"class":this.options.classIcon}),void 0)},classInput:function(a){return void 0===a?this.options.classInput:(this.options.classInput=a,this.$elementFilestyle.find(":text").addClass(this.options.classInput),void 0)},htmlIcon:function(){if(this.options.icon){var a="";return-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)&&(a=" icon-white "),'<i class="'+a+this.options.classIcon+'"></i> '}return""},htmlInput:function(){return this.options.input?'<input type="text" class="'+this.options.classInput+'" disabled> ':""},constructor:function(){var b=this,c="",d=this.$element.attr("id"),e=[];""!==d&&d||(d="filestyle-"+a(".bootstrap-filestyle").length,this.$element.attr({id:d})),c=this.htmlInput()+'<label for="'+d+'" class="'+this.options.classButton+'">'+this.htmlIcon()+"<span>"+this.options.buttonText+"</span>"+"</label>",this.$elementFilestyle=a('<div class="bootstrap-filestyle" style="display: inline;">'+c+"</div>");var f=this.$elementFilestyle.find("label"),g=f.parent();g.attr("tabindex","0").keypress(function(a){(13===a.keyCode||32===a.charCode)&&f.click()}),this.$element.css({position:"absolute",clip:"rect(0,0,0,0)"}).attr("tabindex","-1").after(this.$elementFilestyle),this.$element.change(function(){var a="";void 0===this.files?e[0]={name:this.value}:e=this.files;for(var c=0;c<e.length;c++)a+=e[c].name.split("\\").pop()+", ";""!==a?b.$elementFilestyle.find(":text").val(a.replace(/\, $/g,"")):b.$elementFilestyle.find(":text").val("")}),window.navigator.userAgent.search(/firefox/i)>-1&&this.$elementFilestyle.find("label").click(function(){return b.$element.click(),!1})}};var c=a.fn.filestyle;a.fn.filestyle=function(c,d){var e="",f=this.each(function(){if("file"===a(this).attr("type")){var f=a(this),g=f.data("filestyle"),h=a.extend({},a.fn.filestyle.defaults,c,"object"==typeof c&&c);g||(f.data("filestyle",g=new b(this,h)),g.constructor()),"string"==typeof c&&(e=g[c](d))}});return void 0!==typeof e?e:f},a.fn.filestyle.defaults={buttonText:"Choose file",input:!0,icon:!0,classButton:"btn",classInput:"input-large",classIcon:"icon-folder-open"},a.fn.filestyle.noConflict=function(){return a.fn.filestyle=c,this},a(".filestyle").each(function(){var b=a(this),c={buttonText:b.attr("data-buttonText"),input:"false"===b.attr("data-input")?!1:!0,icon:"false"===b.attr("data-icon")?!1:!0,classButton:b.attr("data-classButton"),classInput:b.attr("data-classInput"),classIcon:b.attr("data-classIcon")};b.filestyle(c)})}(window.jQuery);