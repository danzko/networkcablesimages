(function(b){b.fn.cssMap=function(d){var i={size:"850",tooltips:true,tooltipArrowHeight:5,cities:false,visibleList:false,visibleListContainerId:"",loadingText:"Loading ...",multipleClick:false,searchUrl:"search.php",searchLink:"Search",searchLinkVar:"region",searchLinkSeparator:"|",clicksLimit:0,clicksLimitAlert:"You can select only %d region! || regions!",agentsListId:"",agentsListSpeed:0,agentsListOnHover:false,pins:{enable:false,pinsId:"",markerClass:"cssmap-marker",pinTooltipClass:"cssmap-tooltip-content",markerPosition:"middle",tooltipPosition:"top",tooltipOnClick:false,tooltipFadeSpeed:0,clickableRegions:true},onClick:function(c){},onSecondClick:function(c){},onHover:function(c){},unHover:function(c){},onLoad:function(c){}};if(d){var k=b.extend(true,i,d||{}),j=b(window).width(),a=b(window).height();b(window).resize(function(){j=b(window).width();a=b(window).height()});return this.each(function(h){var x=".cssmap-pins";if(!b(this).attr("id")){b(this).attr("id","css-map"+(h+1))}if(k.pins.pinsId!==""&&k.pins.pinsId!="#"){x=k.pins.pinsId}var G="#"+b(this).attr("id"),z=b(G),B=z.find("ul").eq(0),A=b(B).attr("class").split(" ")[0],F=b(B).find("li"),C=b(x).find("li"),w=0,c=false,y="",D="",f=k.tooltips.toString(),E=k.pins.clickableRegions.toString(),g={init:function(){g.clearMap();z.addClass("css-map-container m"+k.size);var l=B.css("background-image").replace(/^url\("?([^\"\))]+)"?\)$/i,"$1");this.loader(l)},loader:function(n){var o=new Image(),m=b("<span />",{"class":"map-loader",text:k.loadingText}).appendTo(z),l={left:z.outerWidth()/2,marginLeft:m.outerWidth()/-2,marginTop:m.outerHeight()/-2,top:z.outerHeight()/2};m.css(l);b(B).addClass("css-map");b(k.agentsListId).find("LI").hide();b(o).load(function(){if(navigator.appVersion.indexOf("MSIE 7.")!=-1){var p=true}if(k.cities&&!p){z.append('<span class="cities '+A+'-cities" />')}if(p){z.addClass("ie")}if(E!=="false"){g.regions.init()}if(b(k.agentsListId).length){g.agentslist.init()}if(k.multipleClick){g.searchButton()}if(k.pins.enable){g.pins.init()}m.fadeOut("slow");k.onLoad(z)}).error(function(){m.fadeOut();b(B).removeClass()}).attr("src",n)},regions:{init:function(){var l=g.regions;l.hideTooltips();F.each(function(){var p=b(this),o=p.attr("class").split(" ")[0],n=p.children("A").eq(0),m=b(n).attr("href");if(typeof m==="undefined"||m.length<2){b(p).remove()}l.copyList(b(p),o,n,m);l.createSpans(b(p),o);g.selectRegion.init(b(p),o,n)});if(k.visibleList){l.createList(y);g.selectRegion.initVisibleList()}l.autoSelectRegion()},createSpans:function(r,p){var s='<span class="m">',o=[],u="",n=r.children("a").eq(0);if(f!="visible"&&f.split("-")[0]!="floating"){var m=b('<span class="tooltip-arrow" />').appendTo(n)}switch(A){case"argentina":u="ar";o=[3,18,18,17,12,17,15,14,21,13,12,17,18,8,19,22,22,17,11,20,20,12,10,9,2];break;case"australia":u="au";o=[3,21,5,15,8,6,15,13];break;case"austria":case"osterreich":u="at";o=[15,18,30,25,24,28,22,8,4];break;case"belgium":u="be";o=[13,6,19,28,25,29,22,29,24,16,23];break;case"brazil":case"brasil":u="br";o=[12,8,11,34,28,13,3,5,22,19,23,18,30,34,9,11,19,17,9,10,15,13,14,12,21,6,23];break;case"canada":u="ca";o=[8,11,10,3,19,20,6,31,17,2,21,3,12];break;case"chile":u="cl";o=[11,4,10,13,9,8,12,7,9,7,20,7,11,7,9];break;case"colombia":u="co";o=[22,30,8,5,6,21,21,11,30,18,23,13,23,12,17,18,16,18,11,14,23,15,12,15,5,6,2,16,11,13,14,21,14];break;case"continents":case"world-continents":u="c";o=[20,35,19,23,35,15,3];break;case"croatia":u="hr";o=[24,27,36,10,15,24,20,11,26,8,21,18,21,30,28,29,13,18,21,33,35];break;case"cuba":u="cu";o=[8,20,18,7,12,10,4,16,9,12,11,5,14,15,11,15];break;case"czech-republic":case"cesko":u="cs";o=[5,15,21,10,18,16,12,16,25,19,14,28,14,15];break;case"denmark":case"danmark":u="dk";o=[15,40,37,24,30,2];break;case"danmarks-kommuner":u="dkk";o=[9,5,14,14,10,9,7,7,6,14,16,9,8,7,9,8,8,7,7,8,6,12,11,23,11,13,7,16,6,16,16,18,25,18,17,21,11,23,5,15,24,10,19,13,18,12,24,23,24,14,26,16,18,8,16,11,18,19,17,13,5,17,14,21,6,11,18,14,12,8,11,14,5,10,9,19,11,17,12,13,22,6,9,17,22,15,18,13,10,14,13,12,11,16,16,27,20,25];break;case"europe":u="eu";o=[5,2,9,10,5,6,7,10,4,9,9,5,15,22,7,14,12,8,7,7,2,24,2,7,2,7,2,4,3,7,2,4,8,30,12,4,11,42,6,5,5,11,26,6,10,20,17,10,2,6,9,3];break;case"europe-russia":u="euru";o=[4,2,8,14,8,7,8,13,3,10,8,6,21,20,9,14,10,10,4,6,21,5,8,2,7,2,4,2,9,2,5,5,27,14,7,12,82,2,9,8,4,18,21,8,14,25,14,6,10,45,16,32,14,18,28];break;case"finland":u="fi";o=[8,22,28,22,26,14,15,29,15,43,21,23,28,48,24,18,15,19,18];break;case"france":u="fr";o=[13,25,25,14,27,14,25,21,8,19,12,13,28,15,18,27,11,26,17,25,24,34,2,2,2,2,2];break;case"france-departments":case"departements-francais":u="frd";o=[10,8,9,11,9,8,11,8,9,8,11,9,7,7,7,9,15,10,9,7,7,8,7,7,10,11,8,9,10,5,13,16,11,15,10,8,9,10,12,9,10,12,10,9,11,10,10,8,7,9,8,9,10,9,11,7,7,8,9,10,5,10,8,9,6,10,5,8,6,7,8,12,9,12,7,9,9,7,5,8,7,7,8,8,7,10,10,9,10,12,3,4,9,10,10,4,2,2,2,2,2];break;case"germany":case"deutschland":u="de";o=[31,41,7,38,6,8,38,25,64,37,24,9,25,31,20,33];break;case"baden-wurttemberg":u="dea";o=[26,8,25,16,17,29,17,14,18,13,7,15,12,6,11,25,5,18,21,6,14,11,18,13,5,16,19,15,6,21,19,14,19,20,15,16,18,22,9,14,16,7,13,15];break;case"bayern":u="deb";o=[8,8,16,3,17,5,10,3,9,6,10,11,17,3,17,4,9,11,12,3,9,11,7,13,14,8,14,7,2,14,8,10,9,7,6,3,8,8,13,13,4,5,2,4,12,10,6,9,10,15,4,7,4,12,4,10,7,12,13,6,6,8,14,11,15,6,12,11,19,14,3,10,11,15,3,8,16,2,14,12,3,13,14,4,6,4,14,9,14,14,4,14,11,6,14,4];break;case"berlin":u="dec";o=[18,15,21,15,17,18,19,17,22,16,17,25];break;case"brandenburg":u="ded";o=[16,11,8,31,16,3,16,18,20,18,25,22,4,28,15,20,23,18];break;case"bremen":u="dee";o=[14,11,12,8,8,17,7,12,18,14,7,31,11,11,11,8,6,12,9,10,9,8,12,8];break;case"hamburg":u="def";o=[14,21,17,24,23,36,23];break;case"hessen":u="deg";o=[13,6,14,13,14,16,12,19,13,19,4,17,12,19,10,18,8,4,9,11,21,22,15,14,21,6];break;case"mecklenburg-vorpommern":u="deh";o=[28,26,15,29,8,5,19,16];break;case"niedersachsen":u="dei";o=[10,11,4,13,14,13,3,17,4,18,11,12,11,7,9,10,9,17,10,10,13,12,11,14,13,13,12,2,15,3,9,7,9,21,17,6,8,15,11,10,9,8,3,10,12,4];break;case"nordrhein-westfalen":u="dej";o=[12,6,5,4,15,5,16,7,6,13,6,10,7,11,4,15,7,6,10,9,4,15,12,15,9,4,5,14,12,14,8,7,4,9,12,3,12,15,16,3,13,12,18,13,11,12,6,14,11,14,14,19,7];break;case"rheinland-pfalz":u="dek";o=[16,17,20,16,19,21,16,16,16,16,4,11,19,8,5,13,7,6,7,21,27,5,14,4,19,16,15,4,23,20,9,26,17,19,6,4];break;case"saarland":u="del";o=[21,22,26,28,29,19];break;case"sachsen":u="dem";o=[24,8,9,23,19,17,8,17,27,14,18,15,17];break;case"sachsen-anhalt":u="den";o=[20,25,26,14,11,6,17,19,7,21,23,23,28,12];break;case"schleswig-holstein":u="deo";o=[14,4,20,8,9,5,15,18,12,14,24,26,22,12,15];break;case"thuringen":u="dep";o=[8,10,5,10,6,20,21,18,15,5,19,8,16,14,21,17,10,17,8,17,21,5,17];break;case"greece":u="gr";o=[13,24,17,13,15,16,14,5,8,16,27,21,18,13];break;case"haiti":u="ht";o=[31,22,14,14,23,13,15,37,16,22];break;case"hungary":u="hu";o=[26,12,18,19,5,11,15,15,16,18,21,9,11,27,15,19,16,13,15,12];break;case"ireland":u="ie";o=[25,17,18,32,33,44,21,36,26,17,27,45,37,19,26,21,25,27,16,17,36,31,24,35,30,23,37,35,20,24,20,25];break;case"ireland-counties":u="iec";o=[19,16,18,32,25,45,4,35,21,6,6,23,12,42,4,34,21,25,20,26,26,3,21,17,15,31,33,23,25,31,30,24,8,24,33,19,2,20,21,23];break;case"italy":case"italia":u="it";o=[16,12,13,18,29,10,24,16,27,15,12,22,23,9,27,28,15,14,6,24];break;case"kazakhstan":u="kz";o=[31,32,22,17,28,35,31,20,18,26,25,18,17,16];break;case"lesotho":u="ls";o=[44,28,59,55,61,75,49,37,49,77];break;case"lithuania":u="lt";o=[33,53,29,26,41,40,31,31,46,61];break;case"mexico":u="mx";o=[3,9,10,10,12,16,13,5,3,13,7,10,7,16,7,7,4,8,12,11,8,5,7,11,13,11,11,12,3,15,8,14];break;case"netherlands":case"nederland":u="nl";o=[23,18,23,34,20,16,23,22,25,23,15,24];break;case"norway":case"norge":u="no";o=[10,10,14,14,13,10,13,12,19,17,3,7,10,13,16,16,9,18,7,4];break;case"norway-divided":case"norge-delt":u="nod";o=[15,19,21,14,23,16,17,17,21,25,3,9,15,18,26,13,15,19,12,4];break;case"peru":u="pe";o=[23,27,16,37,32,26,7,42,17,32,20,25,26,21,27,77,31,20,14,20,12,30,30,18,10,48];break;case"poland":case"polska":u="pl";o=[31,31,28,25,36,22,47,22,28,30,30,27,24,29,46,26];break;case"portugal":u="pt";o=[17,28,16,15,23,26,28,15,27,23,13,24,14,32,23,8,17,22,5,3];break;case"romania":u="ro";o=[20,22,17,16,23,13,16,16,13,6,21,23,17,21,22,16,18,19,13,16,16,23,17,15,27,14,21,25,20,23,26,12,19,18,14,18,12,31,14,20,11,14];break;case"russia":u="ru";o=[17,36,9,39,44,16,36,23,35];break;case"russia-central":u="rua";o=[16,17,17,24,15,16,22,16,15,7,27,12,16,20,15,26,14,17];break;case"russia-far-eastern":u="rub";o=[18,5,24,16,8,33,19,27,20];break;case"russia-north-caucasian":u="ruc";o=[32,9,13,17,12,33,18];break;case"russia-northwestern":u="rud";o=[48,19,6,18,34,11,16,25,9,13,3];break;case"russia-siberian":u="rue";o=[10,10,20,16,30,10,44,12,8,12,11,7];break;case"russia-southern":u="ruf";o=[18,27,41,46,45,43];break;case"russia-ural":u="rug";o=[12,22,20,40,15,33];break;case"russia-volga":u="ruh";o=[30,31,13,14,20,28,13,26,18,24,21,15,16,8];break;case"slovakia":case"slovensko":u="sk";o=[33,16,29,32,27,29,32,25];break;case"slovenia":u="si";o=[32,43,43,18,23,23,42,32,24,41,24,11];break;case"south-africa":u="za";o=[20,19,11,14,14,21,34,24,24,13];break;case"eastern-cape":u="zaec";o=[30,60,17,60,50,45,9,34];break;case"free-state":u="zafs";o=[54,61,34,70,61];break;case"gauteng":u="zagt";o=[45,30,41,44,29,48,32,19,62,19];break;case"kwazulu-natal":u="zanl";o=[29,35,57,38,59,45,27,42,55,42,46];break;case"limpopo":u="zalp";o=[57,43,31,36,64];break;case"mpumalanga":u="zamp";o=[49,86,70];break;case"northern-cape":u="zanc";o=[24,32,77,62,73];break;case"north-west":u="zanw";o=[32,42,65,56];break;case"western-cape":u="zawc";o=[37,36,43,40,50,20];break;case"south-america":u="sam";o=[80,30,100,52,36,21,18,6,18,44,10,13,36,6];break;case"spain":case"espana":u="es";o=[18,11,12,16,14,16,23,9,12,24,12,16,2,21,19,21,15,17,11,16,17,7,12,18,14,10,13,8,19,14,14,20,2,13,12,17,11,15,8,15,7,13,18,15,11,21,25,15,14,8,12,28];break;case"spain-autonomies":case"espana-autonomias":u="esa";o=[24,30,12,7,12,11,48,57,17,2,24,27,14,11,16,2,18,16,12];break;case"sweden":case"sverige":u="se";o=[7,30,20,6,13,39,14,17,13,30,11,15,7,9,11,10,19,34,28,10,18];break;case"switzerland":u="ch";o=[27,12,7,22,4,61,34,11,14,35,17,24,17,12,12,10,15,31,28,22,19,16,31,47,6,20];break;case"turkey":case"turkiye":u="tr";o=[16,8,12,12,7,11,19,17,7,7,9,12,5,10,6,6,8,10,8,10,10,8,9,13,13,13,6,7,10,10,18,8,11,9,10,6,6,4,11,9,13,10,8,14,8,10,13,4,6,8,9,7,23,10,12,11,9,12,13,10,7,10,8,6,8,6,10,12,8,7,16,7,8,10,6,8,6,8,3,10,5];break;case"ukraine":u="ua";o=[20,23,20,13,26,24,17,26,25,16,5,29,26,21,17,19,32,22,21,6,18,14,20,19,13,25,18];break;case"united-kingdom":u="uk";o=[31,23,10,18,24,28,30,31,24,9,8,9,10,12,12,14,17,8,16,23,11,6,14,17,7,28,19,14,19,20,4];break;case"uruguay":u="uy";o=[17,13,25,12,28,15,21,23,17,5,22,21,22,23,20,17,21,30,20];break;case"usa":u="usa";o=[5,6,8,6,18,2,4,5,10,9,5,11,11,4,5,5,12,6,7,9,6,9,14,7,10,10,5,14,6,7,3,10,10,3,7,6,4,5,4,8,3,6,15,3,5,10,5,3,11,8,2,2];break;case"venezuela":u="ve";o=[20,17,19,8,19,29,2,4,9,18,11,5,18,15,11,6,12,3,11,8,7,6,4,8,23];break;case"zimbabwe":u="zw";o=[8,8,47,38,47,49,49,62,54,54];break}for(var q=0;q<o.length;q++){var l=q+1;if(p==u+l){for(var t=1;t<o[q];t++){s+='<span class="s'+t+'" />'}break}}s+="</span>";r.prepend(s).append('<span class="bg" />')},showTooltip:function(q){var n=B.find(q).children("A")[0];if(f=="true"||f=="sticky"||f=="visible"){var r=B.outerWidth(),m=parseInt(b(n).outerHeight()*-1)-k.tooltipArrowHeight,p=parseInt(b(n).outerHeight()/-2),t=parseInt(b(n).outerWidth()/-2),u=b(n).position().left,o=b(n).position().top;if((t*-1)>u){b(n).addClass("tooltip-left").css("left",0);t=0}if((t*-1)+u>r){b(n).addClass("tooltip-right");t=0}if((m*-1)>o){b(n).addClass("tooltip-top");m=k.tooltipArrowHeight}if(b(n).hasClass("tooltip-middle")){m=p}n.style.marginLeft=t+"px";if(f=="visible"){n.style.marginTop=p+"px"}else{n.style.marginTop=m+"px"}}else{if(f.split("-")[0]=="floating"){var s=b(n).html(),l=b("<div />",{id:"map-tooltip",html:s}).appendTo("body")}}},hideTooltips:function(){var o=B.find("a");b("#map-tooltip").remove();for(var m=0;m<o.length;m++){var n=o[m],p=parseInt(b(n).outerWidth()/-2),l=parseInt(b(n).outerHeight()/-2);if(f=="visible"){n.style.marginTop=l+"px";n.style.marginLeft=p+"px"}else{n.style.marginTop="-9999px"}}},copyList:function(m,p,o,n){var l=o.html();if(typeof n!="undefined"&&n.length>=2){y+='<li class="'+p+'"><a href="'+n+'">'+l+"</a></li>"}},createList:function(m){var l='<ul class="map-visible-list">'+m+"</ul>";if(k.visibleListContainerId&&k.visibleListContainerId!="#"){b(k.visibleListContainerId).html(l)}else{b(B).after(l)}},autoSelectRegion:function(){var m=z.find(".active-region"),l=G+" ."+m.parent("li").attr("class");if(m.length){g.selectRegion.activated(b(l))}}},selectRegion:{init:function(m,n,p){var l=g.selectRegion,r=G+" ."+n,q=b(r).children("SPAN").eq(0),o=null;l.autoSelect(p);q.hover(function(){l.onHover(b(r))},function(){l.unHover(b(r))}).mousemove(function(s){if(f.split("-")[0]=="floating"){l.onMouseMove(b(r),s)}}).click(function(s){l.clicked(b(r));s.preventDefault()});b(p).focus(function(){l.onHover(b(r))}).blur(function(){l.unHover(b(r))}).keypress(function(s){o=(s.keyCode?s.keyCode:s.which);if(o===13){l.clicked(b(r))}}).click(function(s){l.clicked(b(r));s.preventDefault()})},initVisibleList:function(){var l=g.selectRegion;if(k.visibleListContainerId&&k.visibleListContainerId!="#"){var m=b(k.visibleListContainerId+" .map-visible-list").find("LI")}else{var m=b(G+" .map-visible-list").find("LI")}m.each(function(){var n=b(this).children("A"),o=G+" ."+b(this).attr("class");n.hover(function(){l.onHover(b(o))},function(){l.unHover(b(o))}).focus(function(){l.onHover(b(o))}).blur(function(){l.unHover(b(o))}).click(function(){l.clicked(b(o));return false}).keypress(function(){code=(e.keyCode?e.keyCode:e.which);if(code===13){l.clicked(b(o));return false}})})},onHover:function(l){var m=l.children("A").eq(0).attr("href");g.regions.hideTooltips();g.regions.showTooltip(l);l.addClass("focus");k.onHover(l);if(k.agentsListOnHover){g.agentslist.showAgent(m)}},onMouseMove:function(n,m){var u=b("#map-tooltip").eq(0),p=k.tooltipArrowHeight,s=10,v=15+p,o=b(u).outerHeight(),t=b(u).outerWidth(),r=b(window).scrollTop(),q=m.pageY-o-p,l=m.pageX-(t/2);if(p<3){p=3}switch(f){case"floating-left":case"floating-left-top":case"floating-top-left":if(m.clientX-t<=s){l=m.pageX+s}else{l=m.pageX-t-s}break;case"floating-right":case"floating-right-top":case"floating-top-right":if(j<=m.clientX+t+s){l=m.pageX-t-s}else{l=m.pageX+s}break;case"floating-middle":case"floating-middle-right":case"floating-right-middle":if(j<=m.clientX+t+s){l=m.pageX-t-s}else{l=m.pageX+s}if(r>=m.pageY-(o/2)-p){q=m.pageY+v-p}else{if(m.clientY+(o/2)>=a){q=m.pageY-o-p}else{q=m.pageY-(o/2)}}break;case"floating-middle-left":case"floating-left-middle":if(m.clientX-t<=s){l=m.pageX+s}else{l=m.pageX-t-s}if(r>=m.pageY-(o/2)-p){q=m.pageY+v-p}else{if(m.clientY+(o/2)>=a){q=m.pageY-o-p}else{q=m.pageY-(o/2)}}break;case"floating-bottom-left":case"floating-left-bottom":if(m.clientX-t<s){l=m.pageX+s}else{l=m.pageX-t-s}q=m.pageY+v;break;case"floating-bottom":case"floating-bottom-center":case"floating-center-bottom":if(m.clientX-(t/2)+s<=s){l=m.pageX+s}else{if(j<=m.clientX+(t/2)){l=m.pageX-t-s}else{l=m.pageX-(t/2)}}q=m.pageY+v;break;case"floating-bottom-right":case"floating-right-bottom":if(j<=m.clientX+t+s){l=m.pageX-t-s}else{l=m.pageX+s}q=m.pageY+v;break;default:if(m.clientX-(t/2)+s<=s){l=m.pageX+s}else{if(j<=m.clientX+(t/2)){l=m.pageX-t-s}else{l=m.pageX-(t/2)}}}if(r>=m.pageY-o-p){q=m.pageY+v}if(m.clientY+o+v>=a){q=m.pageY-o-p}u.css({left:l+"px",top:q+"px"})},unHover:function(l){var m=l.children("a").eq(0).attr("href");g.regions.hideTooltips();l.removeClass("focus");if(k.agentsListOnHover){g.agentslist.hideAgents(m);b(B).find(".active-region").each(function(){var n=b(this).children("a").eq(0).attr("href");g.agentslist.showAgent(n)})}k.unHover(l)},activated:function(q){var m=k.clicksLimitAlert.split(" %d ")[0],p=k.clicksLimitAlert.split(" %d ")[1],o=q.children("A").eq(0),n=o.attr("href"),l="";if(k.clicksLimit===0||!k.multipleClick){k.clicksLimit=Infinity}if(k.clicksLimit==1){l=p.split(" || ")[0]}else{l=p.split(" || ")[1]}if(q.hasClass("active-region")){q.removeClass("active-region");if(b(k.agentsListId).length&&n.charAt(0)=="#"){g.agentslist.hideAgents(n)}w--;c=false}else{if(w<k.clicksLimit){if(!k.multipleClick){z.find(".active-region").removeClass("active-region")}if(b(k.agentsListId).length&&n.charAt(0)=="#"){g.agentslist.showAgent(n)}w++;q.addClass("active-region")}else{alert(m+" "+k.clicksLimit+" "+l);c=true}}},clicked:function(m){var p=m.children("A").eq(0),l=p.attr("href"),o=p.attr("target"),n=p.attr("rel");g.selectRegion.activated(m);if(c===false){if(m.hasClass("active-region")){k.onClick(m)}else{k.onSecondClick(m)}if(typeof o!=="undefined"&&o!==false){window.open(l,o)}else{if(l!=="undefined"&&l.charAt(0)==="#"){if(b(k.agentsListId).length||k.multipleClick){return false}else{if(n!="nofollow"){window.location.hash=l}}}else{if(n!="nofollow"){window.location.href=l}else{return false}}}}},multiple:function(){var m=[],l=z.find(".map-search-link");F.each(function(){var n=b(this).children("A"),o=n.attr("href"),p;if(o!==undefined&&o.charAt(0)=="#"){p=o.slice(1)}else{if(/&/i.test(o)){p=o.slice(o.indexOf("?")+(k.searchLinkVar.length)+2,o.indexOf("&"))}else{p=o.slice(o.indexOf("?")+(k.searchLinkVar.length)+2)}}if(b(this).hasClass("active-region")){m.push(p)}});if(m.length){l.attr("href",k.searchUrl+"?"+k.searchLinkVar+"="+m.join(k.searchLinkSeparator))}else{l.attr("href",k.searchUrl)}},autoSelect:function(n){var l=n.attr("href"),m=window.location.hash;if(l!==undefined&&l.charAt(0)=="#"&&l==m){n.addClass("active-region");return false}}},searchButton:function(){var m=g.selectRegion,l=b("<a />",{href:k.searchUrl,"class":"map-search-link",text:k.searchLink});b(B).after(l);l.hover(function(){m.multiple()}).focus(function(){m.multiple()}).click(function(){m.multiple()}).keypress(function(){code=(e.keyCode?e.keyCode:e.which);if(code==13){m.multiple()}})},agentslist:{init:function(){var l=document.getElementById(k.agentsListId.slice(1)),m=l.getElementsByTagName("UL")[0];m.style.listStyleType="none !important";b(B).find(".active-region").each(function(){var n=b(this).children("A").eq(0).attr("href");g.agentslist.showAgent(n)})},showAgent:function(l){if(!k.multipleClick){b(k.agentsListId).find("LI").hide()}if(!k.agentsListOnHover){b(l+","+l+" LI").fadeIn(k.agentsListSpeed)}else{b(l+","+l+" LI").show()}},hideAgents:function(l){if(!k.agentsListOnHover){b(l+","+l+" LI").fadeOut(k.agentsListSpeed)}else{b(l+","+l+" LI").hide()}}},pins:{init:function(){var q=z.position().top,n=b(B).position().left,o=b(B).outerWidth(),m=parseInt(o/-2),l=b(B).outerHeight(),p={height:l,left:"50%",marginLeft:m,position:"absolute",top:q,width:o};b(x).css(p);C.each(function(){var u=b(this);g.pins.pinContent(u);var ae=u.find("."+k.pins.markerClass).eq(0),s=u.find("."+k.pins.pinTooltipClass).eq(0),t=ae.attr("href"),V=u.attr("data-cssmap-coords").split(","),U=parseInt(V[0]),X=parseInt(V[1]),ac=ae.outerWidth(),W=parseInt(ac/-2),v=parseInt(ae.outerHeight()),T=s.outerHeight(),r=s.outerWidth(),Y=parseInt(r/-2),ab=function(){switch(k.pins.markerPosition){case"middle":var H=X-(v/2);break;case"bottom":var H=X;break;default:var H=X-v;break}return H},Z=function(){switch(k.pins.tooltipPosition){case"hidden":var H="-9999em";break;case"bottom":var H=ab()+v;break;default:var H=ab()-T;break}return H},ad={left:U,marginLeft:W,position:"absolute",textAlign:"center",top:ab(),zIndex:200},aa={display:"block",left:U,marginLeft:Y,marginTop:"-9999em",opacity:0,position:"absolute",top:Z(),zIndex:201};ae.css(ad);s.css(aa);if(k.pins.tooltipOnClick){ae.click(function(){if(u.hasClass("hide-tooltip")){g.pins.pinClose(u,ae,s)}else{g.pins.pinOpen(u,ae,s)}})}else{ae.hover(function(){g.pins.pinOpen(u,ae,s)},function(){g.pins.pinClose(u,ae,s)})}ae.click(function(){if(t!==undefined&&t.charAt(0)=="#"){return false}})})},pinContent:function(n){var m=n.find("."+k.pins.pinTooltipClass),o=n.find("."+k.pins.markerClass);if(!m.length){n.wrapInner(b("<div />").addClass(k.pins.pinTooltipClass).hide())}else{m.hide()}if(!o.length){var l=b("<a />",{"class":k.pins.markerClass,href:"#",text:""}).appendTo(n)}},pinOpen:function(n,m,l){b(x).find(".hide-tooltip").each(function(){var r=b(this),q=r.find("."+k.pins.markerClass),o=r.find("."+k.pins.pinTooltipClass),p=q.outerWidth();g.pins.pinClose(r,q,o)});n.addClass("hide-tooltip");l.css("margin-top",0).animate({opacity:1},k.pins.tooltipFadeSpeed)},pinClose:function(n,m,l){n.removeClass("hide-tooltip");l.animate({opacity:0},k.pins.tooltipFadeSpeed,function(){b(this).css("margin-top","-9999em")})}},clearMap:function(){for(var l=100;l<2050;l+=5){D+=" m"+l}z.removeClass(D).removeClass("css-map-container");b(B).removeClass("css-map");z.find(".map-loader, .cities, .m, .bg, .map-visible-list, .map-search-link").remove();z.find("LI").removeClass("focus").removeClass("active-region")}};g.init()})}else{return this.html("<b>Error:</b> map size must be set!")}}})(jQuery);
