var qk=new function(){var t,e,n;this.go=function(t){u.go(t)};var i=new function(){this.show=function(){this.style.display="block"},this.hide=function(){this.style.display="none"}},o=new function(){this["goto"]=function(e){t[n].hide(),n=u.pageById(e),t[n].show()}},r=new function(){Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,e){var n=this[t],i=n,o=function(){return i},r=function(o){return n=i,i=e.call(this,t,n,o)};delete this[t]&&Object.defineProperty(this,t,{get:o,set:r,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(t){var e=this[t];delete this[t],this[t]=e}});var t={};this.inputToBind=function(t){var e=t.getAttribute("qk-datato"),n=e.substring(0,e.lastIndexOf(".")),e=e.substring(e.lastIndexOf(".")+1);i(n,window)[e]=t.value},this.bind=function(t){var e=t.innerHTML,o=i(t.getAttribute("qk-datafrom"),window),e=n(o,e,t);t.innerHTML=e};var e=function(e,n,i,o){e.watch(String(n),function(e,n,i){return t[e].e.innerHTML=t[e].u,setTimeout(r.bind,0,t[e].e),i}),t[String(n)]={e:i,u:o}},n=function(t,o,r){for(var u="",a=o.split(""),c=!1,l=!1,s=!1,f="";0<a.length;)if(tok=a.shift(),"["===tok)c?(l=!0,c=!1):c=!0;else if("]"===tok)if(s){var s=l=!1,d=i(f.substring(f.indexOf("data.")+5),t);e(t,f.substring(f.indexOf("data.")+5),r,o),u+=d}else s=!0;else l?f+=tok:u+=tok;return-1<u.indexOf("[[")&&(u=n(t,u,r)),u},i=function(t,e){for(var n=t.split("."),i=e;0<n.length;)i=i[n.shift()];return i}},u=new function(){var a=function(){Array.prototype.slice.call(document.querySelectorAll("a[qk-linkto]")).forEach(function(t){t.setAttribute("href","#"),t.addEventListener("click",function(){o["goto"](t.getAttribute("qk-linkto"))})}),Array.prototype.slice.call(document.querySelectorAll("input[qk-datato]")).forEach(function(t){t.addEventListener("input",function(){r.inputToBind(t)})})};this.pageById=function(e){for(var n=0,i=t.length;i>n;n++)if(t[n].getAttribute("qk-pageid")===e)return n;return-1},this.go=function(o){var c=Object.create(HTMLElement.prototype);c.show=i.show,c.hide=i.hide;var l=Object.create(HTMLElement.prototype);for(l.show=i.show,l.hide=i.hide,document.registerElement("qk-page",{prototype:c}),document.registerElement("qk-const",{prototype:l}),a(),t=document.querySelectorAll("qk-page[qk-pageid]"),e=document.querySelectorAll("[qk-datafrom]"),c=0,l=e.length;l>c;c++)r.bind(e[c]);for(o=n=u.pageById(o.home),c=0,l=t.length;l>c;c++)t[c].hide();t[o].show()}}};