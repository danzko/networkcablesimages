/**
  * v1.0.49 generated on: Tue Jun 14 2016 18:34:55 GMT-0500 (CDT)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved. See LICENSE (BSD).
  */
window.NGN.BUS=function(){var e=[],n=[],t=[],r={},i=function(e,n){var t=e.filter(function(e){return n.toLowerCase()===e[0].toLowerCase()});return 0===t.length?null:(t.length>1&&console.warn("NGN Event Bus: "+t[0][0]+" exists more than once."),t[0].filter(function(e,n){return 0!==n}))},u=function(n){return i.apply(this,[e,n])},s=function(e){return i.apply(this,[n,e])},o=function(e){return i.apply(this,[t,e])},c=function(e,n){return null===e||void 0===e||null===n||void 0===n};return Object.defineProperties(r,{subscribe:NGN.define(!0,!1,!1,function(n,t){if(c(n,t))throw new Error("subscribe() requires a topic and listener function as arguments.");var r=u(n);null!==r&&r.unshift(n),null===r&&(r=[n])&&e.push(r);var i=r.push(t);return e[e.map(function(e){return e[0]}).indexOf(n)]=r,{unsubscribe:function(){r=r.splice(i,1),0===r.length?e.splice(e.map(function(e){return e[0]}).indexOf(n),1):e[e.map(function(e){return e[0]}).indexOf(n)]=r}}}),subscribeOnce:NGN.define(!0,!1,!1,function(e,t){if(c(e,t))throw new Error("subscribeOnce() requires a topic and listener function as arguments.");var r=s(e);null!==r&&r.unshift(e),null===r&&(r=[e])&&n.push(r),r.push(t),n[n.map(function(e){return e[0]}).indexOf(e)]=r}),on:NGN.define(!0,!1,!1,function(){return this.subscribe.apply(this,arguments)}),once:NGN.define(!0,!1,!1,function(){return this.subscribeOnce.apply(this,arguments)}),bind:NGN.define(!0,!1,!0,function(e,n,r){n="string"==typeof n?[n]:n;var i=o(e);null!==i&&i.unshift(e),null===i&&(i=[e])&&t.push(i);var u=this,s=function(e){n.forEach(function(n){u.publish(n,void 0!==e?e:{})})},c=i.push(s);return t[t.map(function(e){return e[0]}).indexOf(e)]=i,{remove:function(){i=i.splice(c,1),0===i.length?t.splice(t.map(function(e){return e[0]}).indexOf(e),1):t[t.map(function(e){return e[0]}).indexOf(e)]=i}}}),execWildcardListeners:NGN.define(!1,!1,!1,function(e,n,t,r){var i={eventName:e};r=void 0===r?!0:r,t=t.filter(function(n){if(n[0].indexOf("*")>=0){var t=new RegExp(n[0].replace("*",".*","gi"));return t.test(e)}return!1}),r&&(t=t.map(function(e){return e.slice(1,e.length)})),t.forEach(function(e){e.forEach(function(e){n&&n.hasOwnProperty("callee")?e.apply(i,n):e.call(i,void 0!==n?n:{})})})}),execListeners:NGN.define(!1,!1,!1,function(e,n,t){var r={eventName:e};null!==t&&t.forEach(function(e){n&&n.hasOwnProperty("callee")?e.apply(r,e):e.call(r,void 0!==n?n:{})})}),publish:NGN.define(!0,!1,!1,function(t,r){var i=u(t),c=s(t),f=o(t);arguments.length>2&&(r=arguments,delete r[0]),this.execListeners(t,r,i),null!==c&&(n=n.filter(function(e){return e[0].toLowerCase()!==t.toLowerCase()}),this.execListeners(t,r,c)),this.execListeners(t,r,f),this.execWildcardListeners(t,r,e),this.execWildcardListeners(t,r,n),n=n.filter(function(e){if(e[0].indexOf("*")>=0){var n=new RegExp(e[0].replace("*",".*","gi"));return!n.test(t)}return!0}),this.execWildcardListeners(t,r,n,!1)}),clear:NGN.define(!1,!1,!1,function(r){var i=function(e){return e.filter(function(e){return e[0].toLowerCase()!==r.toLowerCase()})};e=i(e),n=i(n),t=i(t)}),emit:NGN.define(!0,!1,!1,function(){return this.publish.apply(this,arguments)}),subscribers:NGN._get(function(){var t={};return e.forEach(function(e){t[e[0]]={persist:e.length-1,adhoc:0}}),n.forEach(function(e){t[e[0]]=t[e[0]]||{persist:0},t[e[0]].adhoc=e.length-1}),t}),persistentSubscribers:NGN._get(function(){return e.map(function(e){return e[0]}).sort()}),adhocSubscribers:NGN._get(function(){return n.map(function(e){return e[0]}).sort()}),autoSubscribers:NGN._get(function(){return t.map(function(e){return e[0]}).sort()}),pool:NGN.define(!0,!1,!1,function(e,n,t){"string"!=typeof e&&(n=e,e="");var r=this,i={};Object.keys(n).forEach(function(t){"function"==typeof n[t]?i[t]=r.subscribe((e.trim()||"")+t,n[t]):console.warn((e.trim()||"")+t+" could not be pooled in the event bus because it's value is not a function.")}),t&&t(i)}),attach:NGN.define(!0,!1,!1,function(e,n){var t=this;return n=NGN.coalesce(n,!1),function(r){n&&r.hasOwnProperty("preventDefault")&&r.preventDefault();var i=NGN._slice(arguments);i.unshift(e),t.publish.apply(t,i)}}),queue:NGN.define(!0,!1,!1,function(e,n,t){if("number"==typeof n||t?n=n||300:(t=n,n=300),!this._queue.hasOwnProperty(e)){var r=this;this._queue=setTimeout(function(){delete r._queue[e],r.publish(e,t)},n)}}),_queue:NGN.define(!1,!0,!1,{})}),r}();