(function(window,undefined){var version="1.2.1";var intervals=[];var rSelector=/^\*|^\.[a-z][\w\d-]*|^#[^ ]+|^[a-z]+|^\[a-z]+/i;var rXpath=/^\.?\/{1,2}[a-zA-Z\*]+/;var rHTML=/<[^>]+>/;var rHyphenated=/-([a-zA-Z])/g;var rElementObject=/^\[object HTML([a-zA-Z]+)?Element\]$/;var rWindowObject=/^\[object Window\]$/;var rValidVarname=/^[a-zA-Z$_][a-zA-Z0-9$_]*$/;var compat={arr_indexOf:function(searchElement,fromIndex){var index=parseInt(fromIndex||0,10),len=this.length;index=index<0?len+index:index;index=!(index>0)?0:index;while(index<len&&index>=0){if(this[index]===searchElement){return index}index+=1}return -1},forEach:function(fn,oThis){var index,len;for(index=0,len=this.length;index<len;index+=1){fn.call(oThis,this[index],index,this)}},map:function(fn,oThis){var index,newArr=[],len;for(index=0,len=this.length;index<len;index+=1){newArr[index]=fn.call(oThis,this[index],index,this)}return newArr},reduce:function(fn,initialValue){var index,len,value,isValueSet=false;if(arguments.length>1){value=initialValue;isValueSet=true}for(index=0,len=this.length;index<len;index+=1){if(isValueSet){value=fn(value,this[index],index,this)}else{value=this[index];isValueSet=true}}return value}};var getMethod=function(obj,method){if(typeof XPCNativeWrapper==="function"&&typeof XPCNativeWrapper.unwrap==="function"){obj=XPCNativeWrapper.unwrap(obj)}else{if(obj.wrappedJSObject){obj=obj.wrappedJSObject}}if(obj.prototype&&typeof obj.prototype[method]==="function"){return obj.prototype[method]}};var core={arr_indexOf:getMethod(Array,"indexOf")||compat.arr_indexOf,concat:getMethod(Array,"concat"),filter:getMethod(Array,"filter")||compat.filter,forEach:getMethod(Array,"forEach")||compat.forEach,map:getMethod(Array,"map")||compat.map,reduce:getMethod(Array,"reduce")||compat.reduce,slice:getMethod(Array,"slice"),hasOwnProperty:getMethod(Object,"hasOwnProperty"),toString:getMethod(Object,"toString")};var JSL=function JSL(selector,context){return new JSL.fn.init(selector,context)};var handlers={stack:[],add:function(thisElement,type,fn){this.stack.push({element:thisElement,type:type,fn:fn})},get:function(thisElement,type){var events=[];type=typeof type==="string"?type:"*";JSL.each(this.stack,function(thisEventObj){if(thisElement===thisEventObj.element){if(type==="*"||thisEventObj.type===type){events.push(thisEventObj)}}});return events},remove:function(thisElement,type){var handlerIndices=[],that=this;JSL.each(handlers.get(thisElement,type),function(thisEventObj,index,array){handlerIndices.push(core.arr_indexOf.call(that.stack,thisEventObj))});JSL.each(handlerIndices,function(thisIndex){that.stack.splice(thisIndex,1)})}};function matchesSelector(element,selector){if(element&&typeof selector==="string"){if(typeof element.mozMatchesSelector==="function"){return element.mozMatchesSelector(selector)}else{if(typeof element.webkitMatchesSelector==="function"){return element.webkitMatchesSelector(selector)}else{if(typeof element.oMatchesSelector==="function"){return element.oMatchesSelector(selector)}else{if(typeof element.msMatchesSelector==="function"){return element.msMatchesSelector(selector)}}}}}return false}function call(a){return this(a)}function toCamelCase(string){return string.replace(rHyphenated,function(fullMatch,firstGroup){return firstGroup.toUpperCase()})}function walkTheDom(node,func){func(node);node=node.firstChild;while(node){walkTheDom(node,func);node=node.nextSibling}}function pluck(obj){var subs=this.split("."),ret=obj,i;for(i=0;i<subs.length;i+=1){ret=ret[subs[i]];if(ret==null){return""}}return ret}function sum(curValue,nextValue){return curValue+nextValue}function sumInt(curValue,nextValue){return parseInt(curValue,10)+parseInt(nextValue,10)}function error(errorString){if(typeof window.Error==="function"){throw new Error(errorString)}else{if(typeof window.console==="object"&&typeof console.error==="function"){console.error(errorString)}}}function cloneElement(thisElement){var newElement=thisElement.cloneNode(true);JSL.each(handlers.get(thisElement),function(thisEventObj){JSL.addEvent(newElement,thisEventObj.type,thisEventObj.fn)});return newElement}function getEachElements(array,selector,key,type){var newElementsArray=[],isValidSelector=typeof selector==="string"&&selector.trim()!=="";JSL.each(array,function(currentElement){while(currentElement=currentElement[key]){if(type>0?currentElement.nodeType===type:true){if(isValidSelector===false||JSL(currentElement).filter(selector).exists){newElementsArray.push(currentElement);return}}}});return newElementsArray}function doElementOperationOnEach(args,op){var newElementsArray=[],newElement,passedElements=JSL.create.apply(JSL,args);if(this.exists){if(JSL.typeOf(passedElements)==="array"){this.each(function(thisElement){JSL.each(passedElements,function(passedElement){var newElement=cloneElement(passedElement);newElementsArray.push(newElement);op(thisElement,newElement)})})}else{this.each(function(thisElement){var newElement=cloneElement(passedElements);newElementsArray.push(newElement);op(thisElement,newElement)})}}return newElementsArray}JSL.fn=JSL.prototype={isJSL:true,constructor:JSL,length:0,version:version,init:function(selector,context){var selectorStringValue=core.toString.call(selector),that=this,elems=[];switch(typeof selector){case"string":if(selector.match(rXpath)){elems=JSL.xpath({expression:selector,type:7,context:context})}else{if(selector.match(rHTML)){}else{if(selector.match(rSelector)){if(JSL.typeOf(context)==="array"){return that.find.call(context,selector)}else{if(typeof context==="string"){context=JSL(context);if(context.exists){return JSL(selector,context[0])}}else{if(context!=null&&context.isJSL===true&&context.exists){return JSL(selector,context[0])}else{context=context!=null&&context.querySelectorAll?context:document;elems=context.querySelectorAll(selector)}}}}}}break;case"object":if(selector!=null){if(selector.isJSL===true){return selector}else{if(core.hasOwnProperty.call(selector,"length")){elems=selector}else{if(selectorStringValue.match(rElementObject)||selectorStringValue.match(rWindowObject)){elems=[selector]}}}}break;default:if(selectorStringValue.match(rElementObject)||selectorStringValue.match(rWindowObject)){elems=[selector]}}that.length=elems.length;JSL.each(elems,function(value,index){that[index]=value});return that},add:function(selector,context){var newElements=JSL(selector,context).raw(),allElements=core.concat.call(this.raw(),newElements);return JSL(allElements)},addEvent:function(type,fn){return this.each(function(thisElement){JSL.addEvent(thisElement,type,fn)})},after:function(){var newElementsArray=doElementOperationOnEach.call(this,JSL.toArray(arguments),function(baseElement,newElement){var parent=baseElement.parentNode,next=baseElement.nextSibling;if(parent){if(next){parent.insertBefore(newElement,next)}else{parent.appendChild(newElement)}}});return JSL(newElementsArray)},append:function(){var newElementsArray=doElementOperationOnEach.call(this,JSL.toArray(arguments),function(baseElement,newElement){baseElement.appendChild(newElement)});return JSL(newElementsArray)},attribute:function(name,value){var ret="",valueIsValid=value!=null;if(typeof name==="string"&&this.exists){this.each(function(elem){if(valueIsValid){elem.setAttribute(name,value)}else{ret+=elem.getAttribute(name)||""}})}return valueIsValid?this:ret},before:function(){var newElementsArray=doElementOperationOnEach.call(this,JSL.toArray(arguments),function(baseElement,newElement){var parent=baseElement.parentNode;if(parent){parent.insertBefore(newElement,baseElement)}});return JSL(newElementsArray)},center:function(){return this.each(function(thisElement){thisElement=JSL(thisElement);thisElement.css("position","fixed");thisElement.css("top",Math.floor((window.innerHeight-thisElement.height)/2)+"px");thisElement.css("left",Math.floor((window.innerWidth-thisElement.width)/2)+"px")})},clone:function(){var clonedElements=core.map.call(this,cloneElement);return JSL(clonedElements)},css:function(name,value){if(typeof name==="string"){name=toCamelCase(name);if(typeof value==="string"){return this.each(function(thisElement){if(name in thisElement.style){thisElement.style[name]=value}})}return core.map.call(this,pluck,"style."+name).join("")}else{return this}},each:function(fn,oThis){if(this.exists){JSL.each(this,fn,oThis)}return this},get exists(){return this.length>0&&this[0]!=null},filter:function(selector){var newElementsArray=[];if(typeof selector==="string"){this.each(function(thisElement){if(matchesSelector(thisElement,selector)){newElementsArray.push(thisElement)}})}return JSL(newElementsArray)},find:function(selector){var arrayOfMatchesArrays=core.map.call(this,function(thisElement){var matches=thisElement.querySelectorAll(selector);return JSL.toArray(matches)});var singleArrayOfMatches=arrayOfMatchesArrays.length>0?core.reduce.call(arrayOfMatchesArrays,function(a,b){return core.concat.call(a,b)}):[];return JSL(singleArrayOfMatches)},first:function(){return this.get(0)},get:function(index){index=index==="first"?0:index==="last"?-1:parseInt(index,10);if(!isNaN(index)){return JSL(index<0?this[this.length+index]:this[index])}return JSL.toArray(this)},get height(){var arrayOfElemHeights=core.map.call(this,pluck,"offsetHeight");return core.reduce.call(arrayOfElemHeights,sum)},has:function(selector){var newElementsArray=[];if(typeof selector==="string"&&selector.match(rSelector)){this.each(function(thisElement){if(JSL(selector,thisElement).exists){newElementsArray.push(thisElement)}})}return JSL(newElementsArray)},hide:function(){return this.css("display","none")},is:function(selector){for(var i=0;i<this.length;i+=1){if(matchesSelector(this[i],selector)){return true}}return false},isnt:function(selector){return !this.is(selector)},last:function(selector){return this.get(-1)},next:function(selector){return JSL(getEachElements(this,selector,"nextSibling",1))},not:function(selector){var newElementsArray=[];if(typeof selector==="string"&&selector.match(rSelector)){this.each(function(thisElement){if(JSL(thisElement).isnt(selector)){newElementsArray.push(thisElement)}})}return JSL(newElementsArray)},parent:function(selector){return JSL(getEachElements(this,selector,"parentNode",1))},prepend:function(){var newElementsArray=doElementOperationOnEach.call(this,JSL.toArray(arguments),function(baseElement,newElement){var firstChild=baseElement.firstChild;if(firstChild){baseElement.insertBefore(newElement,firstChild)}});return JSL(newElementsArray)},prev:function(selector){return JSL(getEachElements(this,selector,"previousSibling",1))},prop:function(name,value){var valueIsValid=value!=null,ret;if(typeof name==="string"&&this.exists){this.each(function(thisElement){if(valueIsValid){thisElement[name]=value}else{if(typeof ret==="undefined"){ret=thisElement[name]}else{ret+=thisElement[name]}}})}return valueIsValid?this:ret},raw:function(){return[].slice.call(this,0)},remove:function(){return this.each(function(element){var parent=element.parentNode;if(element&&parent){parent.removeChild(element)}})},removeAttribute:function(attributeName){return this.each(function(thisElement){thisElement.removeAttribute(attributeName)})},removeEvent:function(type){return this.each(function(thisElement){JSL.removeEvent(thisElement,type)})},replace:function(){var newElementsArray=doElementOperationOnEach.call(this,JSL.toArray(arguments),function(baseElement,newElement){var parent=baseElement.parentNode;if(parent){parent.replaceChild(newElement,baseElement)}});return JSL(newElementsArray)},show:function(value){value=typeof value==="string"?value:"inline";return this.css("display",value)},text:function(passedText,append){if(typeof passedText==="string"){if(append!==true){this.each(function(thisElement){JSL(".//text()",thisElement).each(function(textNode){textNode.data=""})})}this.append("text",passedText);return this}return core.reduce.call(this,function(curValue,nextElement){return curValue+nextElement.textContent},"")},toggle:function(){return this.each(function(thisElement){thisElement=JSL(thisElement);if(thisElement.visible){thisElement.hide()}else{thisElement.show()}})},value:function(passedValue){var elem=this[0],tagName=elem&&elem.tagName||"",selectedOptions=[],rInputTypeBlacklist=/button|checkbox|file|image|radio|reset|submit/,passedValueType=JSL.typeOf(passedValue);if(passedValue==null){if(tagName==="SELECT"){if(elem.hasAttribute("multiple")){JSL.each(elem.options,function(thisOption){if(thisOption.selected){selectedOptions.push(thisOption.value)}});return selectedOptions}else{return elem.options[elem.selectedIndex].value}}else{if(tagName==="INPUT"&&!elem.type.match(rInputTypeBlacklist)){return elem.value}}if(tagName==="TEXTAREA"){return elem.value}}else{return this.each(function(thisElement){var tagName=thisElement.tagName;if(tagName==="SELECT"){if(thisElement.hasAttribute("multiple")&&passedValueType==="array"){JSL.each(thisElement.options,function(thisOption){JSL.each(passedValue,function(thisPassedValue){if(thisOption.value==thisPassedValue){thisOption.selected=true;return"stop"}else{thisOption.selected=false}})})}else{JSL.each(thisElement.options,function(thisOption){thisOption.selected=thisOption.value==passedValue})}}else{if(tagName==="INPUT"){if(!thisElement.type.match(rInputTypeBlacklist)){thisElement.value=passedValue}else{if(thisElement.type==="checkbox"||thisElement.type==="radio"){if(passedValueType==="array"){JSL.each(passedValue,function(thisPassedValue){if(thisElement.value==thisPassedValue){thisElement.checked=true;return"stop"}else{thisElement.checked=false}})}else{if(thisElement.value==passedValue){thisElement.checked=true}}}}}else{if(tagName==="TEXTAREA"){thisElement.value=passedValue}}}})}return null},get visible(){return Math.max(this.width,this.height)>0},get width(){var arrayOfElemHeights=core.map.call(this,pluck,"offsetWidth");return core.reduce.call(arrayOfElemHeights,sum)}};JSL.fn.init.prototype=JSL.fn;JSL.fn.extend=JSL.extend=function(obj){var name,copy;for(name in obj){copy=obj[name];if(!core.hasOwnProperty.call(this,name)&&typeof copy!=="undefined"){this[name]=copy}}};JSL.extend({addEvent:function(thisElement,type,fn){if(thisElement!=null&&typeof type==="string"&&typeof fn==="function"){if(typeof thisElement.addEventListener==="function"){thisElement.addEventListener(type,fn,false)}else{if(typeof thisElement.attachEvent==="function"){type="on"+type;thisElement.attachEvent(type,fn)}else{return}}handlers.add(thisElement,type,fn)}},addScript:function(contents,id,node){var newElement=document.createElement("script");newElement.id=id||("jsl-script-"+JSL.random(999));newElement.innerHTML=contents;node=node||document.head||document.querySelector("html > head");node.appendChild(newElement);return{remove:function(){node.removeChild(newElement)}}},addStyle:function(css,id,node){id=id||("jsl-style-"+JSL.random(999));node=node||document.head||document.querySelector("html > head");if(node){node.appendChild(JSL.create("style",{id:id,type:"text/css"},[JSL.create("text",css)]))}},alias:function(newAlias){if(typeof newAlias==="string"&&newAlias.match(rValidVarname)&&typeof window[newAlias]==="undefined"){window[newAlias]=JSL}},clearInterval:function(index){if(typeof index==="number"&&index<intervals.length){window.clearTimeout(intervals[index]);intervals[index]=null}},create:function(elementName,descObj,kidsArray){var argsLength=arguments.length,typeValue,prop,val,HTMLholder,ret,i;if(argsLength===2&&elementName==="text"&&typeof descObj==="string"){return document.createTextNode(descObj)}else{if(argsLength===1&&typeof elementName==="string"&&elementName.match(rHTML)){HTMLholder=document.createElement("div");HTMLholder.innerHTML=elementName;ret=[];ret.push.apply(ret,HTMLholder.childNodes);return ret.length>0?(ret.length===1?ret[0]:ret):null}else{if(argsLength>1&&typeof elementName==="string"&&typeof descObj==="object"){ret=document.createElement(elementName+"");for(prop in descObj){if(core.hasOwnProperty.call(descObj,prop)){val=descObj[prop];if(prop.indexOf("on")===0&&typeof val==="function"){JSL.addEvent(ret,prop.substring(2),val)}else{if(prop!=="style"&&prop!=="class"&&prop in ret&&typeof ret[prop]!=="undefined"){ret[prop]=val}else{ret.setAttribute(prop,val)}}}}if(JSL.typeOf(kidsArray)==="array"){JSL.each(kidsArray,function(kid){var val,item,i;if(typeof kid==="string"){val=JSL.create(kid);if(JSL.typeOf(val)==="array"){for(i=0;i<val.length;i+=1){ret.appendChild(val[i])}}else{if(JSL.typeOf(kid)==="element"){ret.appendChild(kid)}}}else{if(JSL.typeOf(kid)==="element"){ret.appendChild(kid)}}})}return ret}else{if(argsLength===1&&JSL.typeOf(elementName)==="element"){return elementName}}}}},each:function(passedArray,fn,oThis){var isOthisUndefined=typeof oThis!=="undefined",index,len,otherThis,value;for(index=0;index<passedArray.length;index+=1){value=passedArray[index];otherThis=isOthisUndefined?oThis:value;if(fn.call(otherThis,value,index,passedArray)==="stop"){break}}},loop:function(maxIterations,fn){var args=JSL.toArray(arguments),i;if(typeof maxIterations==="number"&&maxIterations>0&&typeof fn==="function"){args=args.slice(2);for(i=0;i<maxIterations;i+=1){fn.apply(null,args)}}},random:function(maxInteger){var rand=0;while(rand<=0||rand>maxInteger){rand=Math.floor(Math.random()*maxInteger)+1}return rand},removeEvent:function(thisElement,type){JSL.each(handlers.get(thisElement,type),function(thisEventObj){if(typeof thisElement.removeEventListener==="function"){thisEventObj.element.removeEventListener(thisEventObj.type,thisEventObj.fn,false)}else{if(typeof thisElement.detachEvent==="function"){type="on"+type;thisEventObj.element.detachEvent(thisEventObj.type,thisEventObj.fn)}}handlers.remove(thisElement,type)})},runAt:function(state,func,oThis){var args=JSL.toArray(arguments),intv,states=["uninitialized","loading","interactive","complete"],state=state.replace("start","loading").replace("end","complete");function runFunc(){func.apply(oThis,args.slice(3))}function checkState(){if(document.readyState===state){runFunc();JSL.clearInterval(intv)}}if(core.arr_indexOf.call(states,state)<=core.arr_indexOf.call(states,document.readyState)){runFunc()}else{intv=JSL.setInterval(checkState,200)}},setInterval:function(func,delay){var index=intervals.length,delay_orig=delay,count=1,startTime;function doRe(func,delay){return window.setTimeout(function(){var difference=(new Date().getTime())-startTime,correctTime=delay_orig*count,drift=difference-correctTime;func.call(null);if(drift>delay_orig){drift=delay_orig}if(intervals[index]!==null){intervals[index]=doRe(func,delay_orig-drift)}count+=1},delay)}startTime=new Date().getTime();intervals[index]=doRe(func,delay_orig);return index},toArray:function(arr){var newArr=[],len=arr.length||arr.snapshotLength,item,i;if(typeof len==="number"&&len>0){if(typeof arr.snapshotItem==="function"){for(i=0;(item=arr.snapshotItem(i));i+=1){newArr.push(item)}}else{newArr=core.slice.call(arr,0)}}return newArr},typeOf:function(value){var s=typeof value,ostr=core.toString.call(value);if(s==="object"||s==="function"){if(value){if(ostr==="[object Array]"){s="array"}else{if(ostr==="[object Text]"||ostr.match(rElementObject)){s="element"}else{if(ostr==="[object HTMLCollection]"){s="collection"}else{if(ostr==="[object NodeList]"){s="nodelist"}else{if(ostr==="[object Arguments]"){s="arguments"}}}}}}else{s="null"}}return s},xpath:function(obj){var type=obj.type||7,types={"1":"numberValue","2":"stringValue","3":"booleanValue","8":"singleNodeValue","9":"singleNodeValue"},expression=obj.expression,context=obj.context||document,doc=document,xp;if(typeof context.evaluate==="function"){doc=context}else{if(typeof context.ownerDocument.evaluate==="function"){doc=context.ownerDocument}}xp=doc.evaluate(expression,context,null,type,null);if(!expression){error("An expression must be supplied for JSL.xpath()");return null}if(types[type]){return xp[types[type]]}else{return JSL.toArray(xp)}}});window.JSL=window._J=JSL}(window));