var isNode=!1,isWebpack=!1;"undefined"!=typeof module&&module.exports&&(isNode=!0),"function"==typeof __webpack_require__&&(isNode=!1,isWebpack=!0);var reqfun=function(s){return function(s){return eval('require("'+s+'");')}}();if(isNode)var Request=reqfun("request");var Syncano=function(){function e(e){var t=e.substr(0,8);return"https://"===t?e=e.substr(8):t="","/"!==e.substr(-1)&&-1===e.indexOf("?")&&(e+="/"),t+e.replace(/\/\//g,"/")}function t(e){d=e}function n(e,t){return t.links&&Object.keys(t.links).forEach(function(n){b[e+"_"+n]=t.links[n]}),"undefined"==typeof b.instance_channels&&(b.instance_channels=b.instance_self+"channels/"),delete t.links,b}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")}function r(e){var t={},n=new XMLHttpRequest,r=e.type.toUpperCase();return"GET"===r&&(e.url+=(-1===e.url.indexOf("?")?"?":"&")+i(e.data)),n.open(r,e.url,!0),"GET"!==r&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=function(){if(n.status>=200&&n.status<400){var t="";try{t=JSON.parse(n.responseText)}catch(i){}e.success(t)}else e.error(n)},"GET"!==r?n.send(i(e.data)):n.send(),t}function s(e){var t=[];for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0,s=i.length;s>r;r++)t.push(n+"="+encodeURIComponent(i[r]));else if("object"==typeof i){for(var o in i)if(i.hasOwnProperty(o)){var c=n+"%5B"+o+"%5D";t.push(c+"="+encodeURIComponent(i[o]))}}else t.push(n+"="+encodeURIComponent(i))}return t.join("&")}function o(e){var t={url:e.url,method:e.type,strictSSL:!1,body:s(e.data)};"GET"!==e.type&&(t.headers={"content-type":"application/x-www-form-urlencoded","user-agent":"syncano-nodejs-4.0"}),Request(t,function(t,n,i){if(n.statusCode>=200&&n.statusCode<400){var r="";try{r=JSON.parse(i)}catch(s){}e.success(r)}else e.error({responseText:i})})}function c(e){for(var t=["updated_at","created_at","revision","links"],n=0;n<t.length;n++)delete e[t[n]];return e}function a(e,t){for(var n={},i=0,r=t.objects.length;r>i;i++)Object.defineProperty(t.objects[i],"delete",{value:function(t,n){return e.request("DELETE",this.links.self,{},t,n)},writable:!1,enumerable:!1,configurable:!1}),"undefined"!=typeof t.objects[i].name&&Object.defineProperty(n,t.objects[i].name,{value:t.objects[i],writable:!0,enumerable:!0,configurable:!1});return Object.defineProperty(n,"_items",{value:t.objects,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(n,"length",{value:n._items.length,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(n,"at",{value:function(e){return n._items[e]},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(n,"hasNextPage",{value:function(){return null!==t.next},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(n,"hasPrevPage",{value:function(){return null!==t.prev},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(n,"loadNextPage",{value:function(){return e.request("GET",t.next)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(n,"loadPrevPage",{value:function(){return e.request("GET",t.prev)},writable:!1,enumerable:!1,configurable:!1}),n}function u(e,t){Object.defineProperty(t,"createDataObject",{value:function(n,i,r){return e.createDataObject(t.name,n,i,r)},writable:!1,enumerable:!1,configurable:!1})}function f(e){"string"==typeof e?g=e:"object"==typeof e&&"string"==typeof e.instance&&(g=e.instance),this.Accounts={create:this.createAccount.bind(this),get:this.getAccount.bind(this),update:this.updateAccount.bind(this),resetKey:this.resetAccountKey.bind(this)},this.Instances={create:this.createInstance.bind(this),list:this.listInstances.bind(this),get:this.getInstance.bind(this),remove:this.removeInstance.bind(this),update:this.updateInstance.bind(this),listAdmins:this.listInstanceAdmins.bind(this)},this.Classes={create:this.createClass.bind(this),list:this.listClasses.bind(this),remove:this.removeClass.bind(this),get:this.getClass.bind(this),update:this.updateClass.bind(this)},this.DataObjects={create:this.createDataObject.bind(this),list:this.listDataObjects.bind(this),remove:this.removeDataObject.bind(this),get:this.getDataObject.bind(this),update:this.updateDataObject.bind(this)},this.ApiKeys={create:this.createApiKey.bind(this),list:this.listApiKeys.bind(this),get:this.getApiKey.bind(this),remove:this.removeApiKey.bind(this)},this.Users={create:this.createUser.bind(this),list:this.listUsers.bind(this),get:this.getUser.bind(this),update:this.updateUser.bind(this),remove:this.removeUser.bind(this)},this.Groups={create:this.createGroup.bind(this),list:this.listGroups.bind(this),get:this.getGroup.bind(this),remove:this.removeGroup.bind(this),addUser:this.addUserToGroup.bind(this)},this.Channels={create:this.createChannel.bind(this),list:this.listChannels.bind(this),get:this.getChannel.bind(this),update:this.updateChannel.bind(this),remove:this.removeChannel.bind(this),listen:this.channelListen.bind(this),getHistory:this.getChannelHistory.bind(this),publish:this.publishToChannel.bind(this)},this.CodeBoxes={create:this.createCodeBox.bind(this),list:this.listCodeBoxes.bind(this),listRuntimes:this.listCodeBoxRuntimes.bind(this),get:this.getCodeBox.bind(this),update:this.updateCodeBox.bind(this),remove:this.removeCodeBox.bind(this),traces:this.listCodeBoxTraces.bind(this),trace:this.getCodeBoxTrace.bind(this),run:this.runCodeBox.bind(this)},this.Invitations={create:this.createInvitation.bind(this),list:this.listInvitations.bind(this),get:this.getInvitation.bind(this),remove:this.removeInvitation.bind(this)},this.WebHooks={create:this.createWebHook.bind(this),list:this.listWebHooks.bind(this),get:this.getWebHook.bind(this),update:this.updateWebHook.bind(this),remove:this.removeWebHook.bind(this),run:this.runWebHook.bind(this),traces:this.listWebHookTraces.bind(this),trace:this.getWebHookTrace.bind(this)},this.Triggers={create:this.createTrigger.bind(this),list:this.listTriggers.bind(this),get:this.getTrigger.bind(this),update:this.updateTrigger.bind(this),remove:this.removeTrigger.bind(this),traces:this.listTriggerTraces.bind(this),trace:this.getTriggerTrace.bind(this)},this.Schedules={create:this.createSchedule.bind(this),list:this.listSchedules.bind(this),get:this.getSchedule.bind(this),remove:this.removeSchedule.bind(this),traces:this.listScheduleTraces.bind(this),trace:this.getScheduleTrace.bind(this)}}"undefined"==typeof console&&(console={log:function(){},error:function(){},warning:function(){}});var h="https://api.syncano.io/",d=null,l={},p={},b={},g=null,y=!0;f.prototype={setAlwaysAsync:function(e){y=e},connect:function(){var e;if(arguments.length>=2&&arguments[0].indexOf("@")>0)e=this.authWithPassword.apply(this,arguments),null!==g&&(e=e.then(function(){return this.setInstance(g)}.bind(this)));else{if(!(arguments.length>=1))throw new Error("Incorrect arguments");e=this.authWithApiKey.apply(this,arguments),null!==g&&(e=this.setInstance(g))}return e},authWithPassword:function(e,n,i,r){var s={email:e,password:n};return this.request("POST","v1/account/auth",s,function(e){l=e,t(e.account_key),"function"==typeof i&&i(e)}.bind(this),r)},authWithApiKey:function(e,n){t(e);var i=m();return l={account_key:e},"function"==typeof n&&n(l),i.resolve(l),i.promise},setInstance:function(e,t,i){return this.request("GET","v1/instances/"+e,{},function(e){p=e,n("instance",e),"function"==typeof t&&t(e)}.bind(this),i)},getInfo:function(){return{account:l,instance:p,links:b}},createInstance:function(e,t,n){if("string"==typeof e&&(e={name:e}),"undefined"==typeof e||"undefined"==typeof e.name)throw new Error("Missing instance name");return this.request("POST","v1/instances",e,t,n)},listInstances:function(e,t,n){return e=e||{},this.request("GET","v1/instances",e,t,n)},getInstance:function(e,t,n){if("object"==typeof e&&(e=e.name),"undefined"==typeof e||0===e.length)throw new Error("Missing instance name");return this.request("GET","v1/instances/"+e,{},t,n)},removeInstance:function(e,t,n){if("object"==typeof e&&(e=e.name),"undefined"==typeof e||0===e.length)throw new Error("Missing instance name");return this.request("DELETE","v1/instances/"+e,{},t,n)},updateInstance:function(e,t,n,i){if("undefined"==typeof e||0===e.length)throw new Error("Missing instance name");return this.request("PATCH","v1/instances/"+e,t,n,i)},listInstanceAdmins:function(e,t,n,i){if(t=t||{},"object"==typeof e&&(e=e.name),"undefined"==typeof e||0===e.length)throw new Error("Missing instance name");return this.request("GET","v1/instances/"+e+"/admins/",t,n,i)},createClass:function(e,t,i){if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");return e.description=e.description||"","string"!=typeof e.schema&&(e.schema=e.schema.toString()),this.request("POST",b.instance_classes,e,function(i){n("class_"+e.name,i),"function"==typeof t&&t(i)}.bind(this),i)},listClasses:function(e,t,n){return this.genericList(e,"instance_classes",t,n)},removeClass:function(e,t,n){return this.genericRemove(e,"instance_classes",t,n)},getClass:function(e,t,n){return this.genericGet(e,"instance_classes",function(e){u(this,e),"function"==typeof t&&t()}.bind(this),n)},updateClass:function(e,t,n,i){if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");if("object"==typeof e&&(t=e,e=e.name,delete t.name),"undefined"==typeof e||0===e.length)throw new Error("Missing class name");return"string"!=typeof t.schema&&(t.schema=t.schema.toString()),this.request("PATCH",b.instance_classes+e,t,n,i)},createAccount:function(e,t,n){return this.request("POST","v1/account/register/",e,t,n)},getAccount:function(e,t){return this.request("GET","v1/account/",{},e,t)},updateAccount:function(e,t,n){return this.request("PUT","v1/account/",e,t,n)},resetAccountKey:function(e,t){return this.request("POST","v1/account/reset_key",{},e,t)},createDataObject:function(e,t,n,i){if("object"==typeof e&&(t=e,e=e.class_name,delete t.class_name),"undefined"==typeof e)throw new Error("Missing name of the class");if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");var r=b.instance_classes+e+"/objects/";return this.request("POST",r,t,n,i)},listDataObjects:function(e,t,n,i){if("object"==typeof e&&(e=e.name),"undefined"==typeof e)throw new Error("Missing name of the class");if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");var r=b.instance_classes+e+"/objects/";return this.request("GET",r,t,n,i)},removeDataObject:function(e,t,n,i){if("object"==typeof e&&(t=e,e=e.class_name,delete t.class_name),"undefined"==typeof e)throw new Error("Missing name of the class");if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");var r;r="object"!=typeof t?t:t.id||t.pk;var s=b.instance_classes+e+"/objects/"+r;return this.request("DELETE",s,{},n,i)},getDataObject:function(e,t,n,i){if("object"==typeof e&&(t=e,e=e.class_name,delete t.class_name),"undefined"==typeof e)throw new Error("Missing name of the class");if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");var r;r="object"!=typeof t?t:t.id||t.pk;var s=b.instance_classes+e+"/objects/"+r;return this.request("GET",s,{},n,i)},updateDataObject:function(e,t,n,i){if("object"==typeof e&&(t=e,e=e.class_name,delete t.class_name),"undefined"==typeof e)throw new Error("Missing name of the class");if("undefined"==typeof b.instance_classes)throw new Error("Not connected to any instance");var r;t.id?(r=t.id,delete t.id):t.pk&&(r=t.pk,delete t.pk),t=c(t);var s=b.instance_classes+e+"/objects/"+r;return this.request("PATCH",s,t,n,i)},createApiKey:function(e,t,n){if(e=e||{},"undefined"==typeof b.instance_api_keys)throw new Error("Not connected to any instance");return this.request("POST",b.instance_api_keys,e,t,n)},listApiKeys:function(e,t,n){return this.genericList(e,"instance_api_keys",t,n)},getApiKey:function(e,t,n){return this.genericGet(e,"instance_api_keys",t,n)},removeApiKey:function(e,t,n){return this.genericRemove(e,"instance_api_keys",t,n)},createUser:function(e,t,n){if(e=e||{},"undefined"==typeof b.instance_users)throw new Error("Not connected to any instance");return this.request("POST",b.instance_users,e,t,n)},listUsers:function(e,t,n){return this.genericList(e,"instance_users",t,n)},getUser:function(e,t,n){return this.genericGet(e,"instance_users",t,n)},updateUser:function(e,t,n,i){if("object"==typeof e&&(t=e,e=t.id,delete t.id),"undefined"==typeof e)throw new Error("Missing user id");if("undefined"==typeof b.instance_users)throw new Error("Not connected to any instance");var r=this.request("PATCH",b.instance_users+e,t,n,i);return delete t.username,delete t.password,Object.keys(t).length>0&&(r=r.then(function(e){var r=e.profile.links.self;return this.request("PATCH",r,t,n,i)}.bind(this),i)),r},removeUser:function(e,t,n){return this.genericRemove(e,"instance_users",t,n)},createGroup:function(e,t,n){var i={label:e};if("undefined"==typeof b.instance_groups)throw new Error("Not connected to any instance");return this.request("POST",b.instance_groups,i,t,n)},listGroups:function(e,t,n){return this.genericList(e,"instance_groups",t,n)},getGroup:function(e,t,n){return this.genericGet(e,"instance_groups",t,n)},removeGroup:function(e,t,n){return this.genericRemove(e,"instance_groups",t,n)},addUserToGroup:function(e,t,n){var i=e.group;if(delete e.group,"undefined"==typeof b.instance_groups)throw new Error("Not connected to any instance");if("undefined"==typeof i)throw new Error("Missing group id");if("undefined"==typeof e.user)throw new Error("Missing user id");return this.request("POST",b.instance_groups+i+"/users/",e,t,n)},createCodeBox:function(e,t,n){if("object"!=typeof e)throw new Error("Missing parameters object");if("undefined"==typeof b.instance_codeboxes)throw new Error("Not connected to any instance");return"undefined"==typeof e.runtime_name&&(e.runtime_name="nodejs"),"undefined"!=typeof e.source&&(e.source=encodeURIComponent(e.source)),this.request("POST",b.instance_codeboxes,e,t,n)},listCodeBoxes:function(e,t,n){return this.genericList(e,"instance_codeboxes",t,n)},listCodeBoxRuntimes:function(e,t,n){return this.genericList(e,"instance_runtimes",t,n)},getCodeBox:function(e,t,n){return this.genericGet(e,"instance_codeboxes",t,n)},updateCodeBox:function(e,t,n,i){if("object"==typeof e&&(t=e,e=t.id,delete t.id),"undefined"==typeof e)throw new Error("Missing codebox id");if("undefined"==typeof b.instance_codeboxes)throw new Error("Not connected to any instance");return"undefined"!=typeof t.source&&(t.source=encodeURIComponent(t.source)),this.request("PATCH",b.instance_codeboxes+e,t,n,i)},removeCodeBox:function(e,t,n){return this.genericRemove(e,"instance_codeboxes",t,n)},runCodeBox:function(e,t,n,i){if("object"!=typeof t)throw new Error("Missing parameters object");if("undefined"==typeof b.instance_codeboxes)throw new Error("Not connected to any instance");return this.request("POST",b.instance_codeboxes+"/"+e+"/run/",t,n,i)},listCodeBoxTraces:function(e,t,n,i){return"object"==typeof e&&(e=e.id),this.request("GET",b.instance_codeboxes+e+"/traces/",t,n,i)},getCodeBoxTrace:function(e,t,n,i,r){return"object"==typeof e&&(e=e.id),"object"==typeof t&&(t=t.id),this.request("GET",b.instance_codeboxes+e+"/traces/"+t+"/",n,i,r)},createInvitation:function(e,t,n){if("object"!=typeof e)throw new Error("Missing parameters object");if("undefined"==typeof b.instance_invitations)throw new Error("Not connected to any instance");return"undefined"==typeof e.role&&(e.role="read"),this.request("POST",b.instance_invitations,e,t,n)},listInvitations:function(e,t,n){return this.genericList(e,"instance_invitations",t,n)},getInvitation:function(e,t,n){return this.genericGet(e,"instance_invitations",t,n)},removeInvitation:function(e,t,n){return this.genericRemove(e,"instance_invitations",t,n)},createWebHook:function(e,t,n){if("object"!=typeof e)throw new Error("Missing parameters object");if("object"==typeof e.codebox&&(e.codebox=e.codebox.id||e.codebox.pk),"undefined"==typeof b.instance_webhooks)throw new Error("Not connected to any instance");return this.request("POST",b.instance_webhooks,e,t,n)},listWebHooks:function(e,t,n){return this.genericList(e,"instance_webhooks",t,n)},getWebHook:function(e,t,n){return this.genericGet(e,"instance_webhooks",t,n)},removeWebHook:function(e,t,n){return this.genericRemove(e,"instance_webhooks",t,n)},updateWebHook:function(e,t,n,i){if("object"==typeof e&&(e=e.slug),"undefined"==typeof e)throw new Error("Missing webhook slug");if("undefined"==typeof b.instance_webhooks)throw new Error("Not connected to any instance");return this.request("PATCH",b.instance_webhooks+e,t,n,i)},runWebHook:function(e,t,n){if("object"==typeof e&&(e=e.slug),"undefined"==typeof e)throw new Error("Missing webhook slug");if("undefined"==typeof b.instance_webhooks)throw new Error("Not connected to any instance");return this.request("GET",b.instance_webhooks+e+"/run",{},t,n)},listWebHookTraces:function(e,t,n,i){return"object"==typeof e&&(e=e.id),this.request("GET",b.instance_webhooks+e+"/traces/",t,n,i)},getWebHookTrace:function(e,t,n,i,r){return"object"==typeof e&&(e=e.id),"object"==typeof t&&(t=t.id),this.request("GET",b.instance_webhooks+e+"/traces/"+t+"/",n,i,r)},createTrigger:function(e,t,n){if("object"!=typeof e)throw new Error("Missing parameters object");if("object"==typeof e.codebox&&(e.codebox=e.codebox.id),"object"==typeof e.klass&&(e.klass=e.klass.name),"undefined"==typeof b.instance_triggers)throw new Error("Not connected to any instance");return this.request("POST",b.instance_triggers,e,t,n)},listTriggers:function(e,t,n){return this.genericList(e,"instance_triggers",t,n)},getTrigger:function(e,t,n){return this.genericGet(e,"instance_triggers",t,n)},updateTrigger:function(e,t,n,i){if("object"==typeof e&&(e=e.id),"undefined"==typeof e)throw new Error("Missing identifier");if("undefined"==typeof b.instance_triggers)throw new Error("Not connected to any instance");return this.request("PATCH",b.instance_triggers+e,t,n,i)},removeTrigger:function(e,t,n){return this.genericRemove(e,"instance_triggers",t,n)},listTriggerTraces:function(e,t,n,i){return"object"==typeof e&&(e=e.id),this.request("GET",b.instance_triggers+e+"/traces/",t,n,i)},getTriggerTrace:function(e,t,n,i,r){return"object"==typeof e&&(e=e.id),"object"==typeof t&&(t=t.id),this.request("GET",b.instance_triggers+e+"/traces/"+t+"/",n,i,r)},createSchedule:function(e,t,n){if("object"!=typeof e)throw new Error("Missing parameters object");if("object"==typeof e.codebox&&(e.codebox=e.codebox.id),"undefined"==typeof b.instance_schedules)throw new Error("Not connected to any instance");return this.request("POST",b.instance_schedules,e,t,n)},listSchedules:function(e,t,n){return this.genericList(e,"instance_schedules",t,n)},getSchedule:function(e,t,n){return this.genericGet(e,"instance_schedules",t,n)},removeSchedule:function(e,t,n){return this.genericRemove(e,"instance_schedules",t,n)},listScheduleTraces:function(e,t,n,i){return"object"==typeof e&&(e=e.id),this.request("GET",b.instance_schedules+e+"/traces/",t,n,i)},getScheduleTrace:function(e,t,n,i,r){return"object"==typeof e&&(e=e.id),"object"==typeof t&&(t=t.id),this.request("GET",b.instance_schedules+e+"/traces/"+t+"/",n,i,r)},createChannel:function(e,t,n){if("undefined"==typeof b.instance_self)throw new Error("Not connected to any instance");return this.request("POST",b.instance_channels,e,t,n)},listChannels:function(e,t,n){return this.request("GET",b.instance_channels,e,t,n)},getChannel:function(e,t,n){return this.genericGet(e,"instance_channels",t,n)},removeChannel:function(e,t,n){return this.genericRemove(e,"instance_channels",t,n)},updateChannel:function(e,t,n,i){if("object"==typeof e&&(e=e.name),"undefined"==typeof b.instance_channels)throw new Error("Not connected to any instance");return this.request("PATCH",b.instance_channels+e,t,n,i)},channelListen:function(t,n){if("string"!=typeof t&&(t=t.name),"string"!=typeof t)throw new Error("Missing channel name");var i=e(h+b.instance_channels+t+"/poll/");null!==d&&(i+=(-1===i.indexOf("?")?"?":"&")+"api_key="+d+"&format=json"),function r(){$.ajax({url:i,success:function(e){n(e)},dataType:"json",complete:function(n){n.responseJSON&&n.responseJSON.id&&(i=[e(h+b.instance_channels),t+"/poll/?last_id="+n.responseJSON.id,"&api_key="+d+"&format=json"].join("")),r()},timeout:3e4})}()},publishToChannel:function(e,t,n,i){if("string"!=typeof e&&(e=e.name),"string"!=typeof e)throw new Error("Missing channel name");var r={payload:JSON.stringify(t)},s=b.instance_channels+e+"/publish/";return this.request("POST",s,r,n,i)},getChannelHistory:function(e,t,n,i){if(t=t||{},"string"!=typeof e&&(e=e.name),"string"!=typeof e)throw new Error("Missing channel name");var r=b.instance_channels+e+"/history/";return this.request("GET",r,t,n,i)},genericList:function(e,t,n,i){e=e||{};var r=b[t];if("undefined"==typeof r)throw new Error("Not connected to any instance");return this.request("GET",r,e,n,i)},genericGet:function(e,t,n,i){var r=b[t];if("undefined"==typeof r)throw new Error("Not connected to any instance");if("object"==typeof e&&(e=e.id||e.name||e.slug),!e)throw new Error("Missing identifier");return this.request("GET",r+e,{},n,i)},genericRemove:function(e,t,n,i){var r=b[t];if("undefined"==typeof r)throw new Error("Not connected to any instance");if("object"==typeof e&&(e=e.id||e.name||e.slug),!e)throw new Error("Missing identifier");return this.request("DELETE",r+e,{},n,i)},request:function(t,n,i,s,c){var u=m(),f=function(e){"function"==typeof s&&s(e),u.resolve(e)},l=function(e){"function"==typeof c&&c(e),u.reject(e)};if("undefined"==typeof n)l("Missing request method");else{i=i||{},"undefined"!==i.payload&&(i.payload=JSON.stringify(i.payload));var p=e(h+n);null!==d&&(p+=(-1===p.indexOf("?")?"?":"&")+"api_key="+d+"&format=json");var b={type:t,url:p,data:i};b.success=function(e){f("object"==typeof e&&"undefined"!=typeof e.objects&&"undefined"!=typeof e.prev&&"undefined"!=typeof e.next?a(this,e):e)}.bind(this),b.error=function(e){var t="Error sending request: "+n;if(e.responseText)try{t=JSON.parse(e.responseText),t.detail&&(t=t.detail)}catch(i){t=e.responseText}l(t)},isNode?isNode&&o(b):r(b)}return u.promise}},f.Schema=function(){this.data=[]},f.Schema.prototype={addField:function(e,t,n){var i={name:e,type:t};return"reference"===t&&(i.target=n),this.data.push(i),this},addOrderIndex:function(){return this.data[this.data.length-1].order_index=!0,this},addFilterIndex:function(){return this.data[this.data.length-1].filter_index=!0,this},toString:function(){return JSON.stringify(this.data)}};var m=function(e){"use strict";function t(e){g(function(){throw e})}function n(t){return this.then(t,e)}function i(t){return this.then(e,t)}function r(t,n){return this.then(function(e){return h(t)?t.apply(null,d(e)?e:[e]):m.onlyFuncs?e:t},n||e)}function s(e){function t(){e()}return this.then(t,t),this}function o(e){return this.then(function(t){return h(e)?e.apply(null,d(t)?t.splice(0,0,void 0)&&t:[void 0,t]):m.onlyFuncs?t:e},function(t){return e(t)})}function c(n){return this.then(e,n?function(e){throw n(e),e}:t)}function a(e,t){var n=b(e);if(1===n.length&&d(n[0])){if(!n[0].length)return m.fulfilled([]);n=n[0]}var i=[],r=m(),s=n.length;if(s)for(var o=function(e){n[e]=m.promisify(n[e]),n[e].then(function(o){i[e]=t?n[e]:o,--s||r.resolve(i)},function(o){t?(i[e]=n[e],--s||r.resolve(i)):r.reject(o)})},c=0,a=s;a>c;c++)o(c);else r.resolve(i);return r.promise}function u(e,t){return e.then(h(t)?t:function(){return t})}function f(e){var t=b(e);1===t.length&&d(t[0])&&(t=t[0]);for(var n=m(),i=0,r=t.length,s=m.resolved();r>i;i++)s=u(s,t[i]);return n.resolve(s),n.promise}var h=function(e){return"function"==typeof e},d=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},l=function(e){return!(!e||!(typeof e).match(/function|object/))},p=function(t){return t===!1||t===e||null===t},b=function(e,t){return[].slice.call(e,t)},g=function(e){setTimeout(e,0)},m=function(t){function a(){if(0!==v){var e,t=w,n=0,i=t.length,r=~v?0:1;for(w=[];i>n;n++)(e=t[n][r])&&e(d)}}function u(e){function t(e){return function(t){return n?void 0:(n=!0,e(t))}}var n=!1;if(v)return this;try{var i=l(e)&&e.then;if(h(i)){if(e===_)throw new Error("Promise can't resolve itself");return i.call(e,t(u),t(f)),this}}catch(r){return t(f)(r),this}return b(function(){d=e,v=1,a()}),this}function f(e){return v||b(function(){try{throw e}catch(t){d=t}v=-1,a()}),this}var d,b=(e!==t?t:y)?g:function(e){e()},v=0,w=[],_={then:function(e,t){var n=m();return w.push([function(t){try{n.resolve(p(e)?t:h(e)?e(t):m.onlyFuncs?t:e)}catch(i){n.reject(i)}},function(e){if((p(t)||!h(t)&&m.onlyFuncs)&&n.reject(e),t)try{n.resolve(h(t)?t(e):t)}catch(i){n.reject(i)}}]),0!==v&&b(a),n.promise},success:n,error:i,"catch":i,otherwise:i,apply:r,spread:r,ensure:s,nodify:o,rethrow:c,isPending:function(){return 0===v},getStatus:function(){return v}};return _.toSource=_.toString=_.valueOf=function(){return d===e?this:d},{promise:_,resolve:u,fulfill:u,reject:f}};return m.deferred=m.defer=m,m.nextTick=g,m.onlyFuncs=!0,m.resolved=m.fulfilled=function(e){return m(!0).resolve(e).promise},m.rejected=function(e){return m(!0).reject(e).promise},m.wait=function(e){var t=m();return setTimeout(t.resolve,e||0),t.promise},m.delay=function(e,t){var n=m();return setTimeout(function(){try{n.resolve(h(e)?e.apply(null):e)}catch(t){n.reject(t)}},t||0),n.promise},m.promisify=function(e){return e&&h(e.then)?e:m.resolved(e)},m.all=function(){return a(arguments,!1)},m.resolveAll=function(){return a(arguments,!0)},m.sequence=function(){return f(arguments)},m}();return f}();(isNode||isWebpack)&&(module.exports=Syncano);