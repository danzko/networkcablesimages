(function(){var cssRules=null;var init=function(){var i;for(i=0;i<document.styleSheets.length;i++){processStyleSheet(document.styleSheets[i])}$("body").trigger("cutty")};var setCssRules=function(){var i;for(i=0;i<document.styleSheets.length;i++){ss=document.styleSheets[i];var ownerNode=ss.ownerNode||ss.owningElement;if(ownerNode.getAttribute("data-cutty-bypass")===null){cssRules=(ss.cssRules!==undefined)?"cssRules":"rules";break}}};var registerEvent=function(kids,event,option,extras){if(option!="off"){$(kids).each(function(index,kid){if($(kid).data(event+"|"+option)!=true||option=="trigger"){eventInfo={kid:kid,option:option,extras:extras};$(kid).on(event,eventInfo,theUltimateCallback);$(kid).data(event+"|"+option,true)}})}};var theUltimateCallback=function(e){kid=e.data.kid;option=e.data.option;extras=e.data.extras;newEvent=e.type;switch(option){case"once":newEvent+="|once";if($(e.target).data(newEvent+"|executed")!=true&&!onKid(kid,newEvent)){addToKid(kid,newEvent)}$(e.target).data(newEvent+"|executed",true);break;case"clear":newEvent+="|clear";clearKid(kid);addToKid(kid,newEvent);break;case"state":newEvent+="|state";clearStatesOnKid(kid);addToKid(kid,newEvent);break;case"toggle":offEvent=newEvent+"|off";newEvent=newEvent+"|toggle";if(onKid(kid,newEvent)){addToKid(kid,offEvent);rmFromKid(kid,newEvent)}else{addToKid(kid,newEvent);rmFromKid(kid,offEvent)}break;case"trigger":parseTrigger=/^([^\(]+)\(([^\)]+)\)$/;triggerInfo=parseTrigger.exec(extras);if(triggerInfo&&triggerInfo.length>2){event=triggerInfo[1];triggerKids=triggerInfo[2];switch(triggerKids){case"next":triggerKids=$(kid).next();if(!triggerKids.length){triggerKids=$(kid).siblings().first()}break;case"prev":triggerKids=$(kid).prev();if(!triggerKids.length){triggerKids=$(kid).siblings().last()}break;case"parent":triggerKids=$(kid).parent();break;case"self":triggerKids=$(kid);break;default:triggerKids=$(triggerKids);break}triggerKids.trigger(event)}break;default:if(!onKid(kid,newEvent)){addToKid(kid,newEvent)}break}};var getCurrentEvents=function(kid){currentEvents=$(kid).attr("on");currentEvents=(typeof currentEvents=="undefined")?"":currentEvents;return currentEvents};var onKid=function(kid,event){currentEvents=getCurrentEvents(kid).split(" ");var i;for(i=0;i<currentEvents.length;i++){if(event==currentEvents[i]){return true}}return false};var addToKid=function(kid,event){currentEvents=getCurrentEvents(kid);newEvents=currentEvents+" "+event;newEvents=newEvents.trim();$(kid).attr("on",newEvents)};var rmFromKid=function(kid,event){currentEvents=getCurrentEvents(kid).split(" ");newEvents="";var i;for(i=0;i<currentEvents.length;i++){if(event!=currentEvents[i]){newEvents+=currentEvents[i]+" "}}newEvents=newEvents.trim();$(kid).attr("on",newEvents)};var clearStatesOnKid=function(kid){stateRegex=/\|state$/;newEvents="";currentEvents=getCurrentEvents(kid).split(" ");var i;for(i=0;i<currentEvents.length;i++){if(!stateRegex.exec(currentEvents[i])){newEvents+=currentEvents[i]+" "}}newEvents=newEvents.trim();$(kid).attr("on",newEvents)};var clearKid=function(kid){$(kid).attr("on","")};var processStyleSheet=function(styleSheet){if(cssRules==null){setCssRules()}var ownerNode=styleSheet.ownerNode||styleSheet.owningElement;if(ownerNode.getAttribute("data-cutty-bypass")===null&&styleSheet[cssRules]&&styleSheet[cssRules].length>0){if(ownerNode.getAttribute("data-cutty-processed")===null){var i,j,rule;for(i=0;i<styleSheet[cssRules].length;i++){rule=styleSheet[cssRules][i];if(rule[cssRules]&&rule[cssRules].length>0){for(j=0;j<rule[cssRules].length;j++){processSelector(rule[cssRules][j].selectorText,rule[cssRules][j].style)}}else{processSelector(rule.selectorText,rule.style)}}ownerNode.setAttribute("data-cutty-processed","")}}};var processSelector=function(longSelector,style){if(!longSelector){return}var multiRegex=/(\[on\~\=[\'\"][^\'\"]+[\'\"]\])+/;var singleRegex=/on\~\=[\'\"]([^\'\"]+)[\'\"]/;selectors=longSelector.split(",");var i;for(i=0;i<selectors.length;i++){selector=selectors[i].trim();multiResult=multiRegex.exec(selector);if(multiResult!=null){baseSelector=selector.substring(0,multiResult.index);onSelectors=multiResult[0].split("][");var j;for(j=0;j<onSelectors.length;j++){onSelector=onSelectors[j];singleResult=singleRegex.exec(onSelector);if(singleResult){withOptions=singleResult[1].split("|");event=withOptions[0];register=true;option="";extras="";if(withOptions.length>1){option=withOptions[1]}if(withOptions.length>2){extras=withOptions[2]}if(register){registerEvent(baseSelector,event,option,extras)}}}}}};$(init)})();