(function(g){function b(a,d){this instanceof b?(this._val=a,this._fns={}):(a=a.bind(d),c?a():(c=f.push(a),a(),c=0))}function h(){var a=d;d={};e=0;for(var b in a)c=b-1,f[c]();c=0}"undefined"!==typeof module&&module.exports?module.exports=b:"function"===typeof define&&define.amd?define([],function(){return b}):g.Reactor=b;var c=0,f=[],d={},e=0;b.prototype.depend=function(){c&&(this._fns[c]=!0)};b.prototype.act=function(){for(var a in this._fns)d[a]=!0;e||(e=setTimeout(h,0))};b.prototype.get=function(){this.depend();return this._val};b.prototype.set=function(a){this._val!==a&&(this._val=a,this.act())}})(this);
