/**
 * @file better-dom.js
 * @overview better-dom: Live extension playground
 * @version 2.1.0-beta.1 Thu, 27 Nov 2014 08:44:32 GMT
 * @copyright 2013-2014 Maksim Chemerisuk
 * @license MIT
 * @see https://github.com/chemerisuk/better-dom
 */
!function(){"use strict";function a(){}function b(c){if(!(this instanceof b)){if(c){var d=c["__2001000-beta001__"];return d?d:new b(c)}return new a}c&&(this[0]=c,c["__2001000-beta001__"]=this),this._={_handlers:[],_watchers:{},_extensions:[]}}function c(a,b){var c=arguments[2];void 0===c&&(c="$Element");var d="http://chemerisuk.github.io/better-dom/"+c+".html#"+a,e="invalid call `"+c+("DOM"===c?".":"#")+a+"(";e+=u.map.call(b,function(a){return String(a)}).join(", ")+")`;",this.message=e+" check "+d+" to verify the function arguments"}function d(a,b){c.call(this,a,b,"DOM")}function e(a){Y.forEach(function(b){b(a,!0)}),u.each.call(a.children,e)}function f(a,c,d,e,f,g){if("number"==typeof a){var h=c["__2001000-beta001__"];return h?h[a]:void 0}if(9>n)switch(a){case"which":return c.keyCode;case"button":var i=c.button;return 1&i?1:2&i?3:4&i?2:0;case"pageX":return c.clientX+k.scrollLeft-k.clientLeft;case"pageY":return c.clientY+k.scrollTop-k.clientTop;case"preventDefault":return function(){return c.returnValue=!1};case"stopPropagation":return function(){return c.cancelBubble=!0}}switch(a){case"type":return d;case"defaultPrevented":return"defaultPrevented"in c?c.defaultPrevented:c.returnValue===!1;case"target":return b(f);case"currentTarget":return b(g);case"relatedTarget":return b(c.relatedTarget||c[(c.toElement===e?"from":"to")+"Element"])}var j=c[a];return"function"==typeof j?function(){return j.apply(c,arguments)}:j}function g(a,b,c,d,e,h){var k=e[0],l=qb[a],m=P(b,k),o=function(b){if(b=b||i.event,g.skip!==a&&(o._type!==q||b.srcUrn===a)){var l=b.target||b.srcElement||j,p=m?m(l):k,r=d||[];p&&(h&&e.off(a,c),r=d?r.map(function(c){return f(c,b,a,k,l,p)}):u.slice.call(b["__2001000-beta001__"]||[0],1),c.apply(e,r)===!1&&(9>n?b.returnValue=!1:b.preventDefault()))}};return l&&(o=l(o,a)||o),9>n&&!("on"+(o._type||a)in k)&&(o._type=q),o.type=a,o.callback=c,o.selector=b,o}var h=Array.prototype.slice,i=window,j=i.document,k=j.documentElement,l=i.navigator.userAgent,m=i.ScriptEngineMajorVersion,n=m&&m(),o=~l.indexOf("Android")&&l.indexOf("Chrome")<0,p=i.WebKitAnimationEvent?"-webkit-":"",q="dataavailable";b.prototype={constructor:function(a){return b(a&&1===a.nodeType?a:null)},toString:function(){var a=this[0];return a?"<"+a.tagName.toLowerCase()+">":""},version:"2.1.0-beta.1"},a.prototype=new b;var r=new b(k),s=Array.prototype,t=j.getElementsByTagName("head")[0],u={computeStyle:function(a){return i.getComputedStyle?i.getComputedStyle(a):a.currentStyle},injectElement:function(a){return a&&1===a.nodeType?t.appendChild(a):void 0},every:s.every,each:s.forEach,filter:s.filter,map:s.map,slice:s.slice,isArray:Array.isArray,keys:Object.keys,safeInvoke:function(a,b,c,d){"string"==typeof b&&(b=a[b]);try{return b.call(a,c,d)}catch(e){return i.setTimeout(function(){throw e},1),!1}},register:function(c,d){d=d||function(){},Object.keys(c).forEach(function(e){var f=d(e)||function(){return this};b.prototype[e]=c[e],a.prototype[e]=f})}};c.prototype=new TypeError,d.prototype=new TypeError;var v=i.DOM;r.noConflict=function(){return i.DOM===r&&(i.DOM=v),r},i.DOM=r;var w={"(":1,")":2,"^":3,">":4,"+":5,"*":6,"`":7,"[":8,".":8,"#":8},x=/`[^`]*`|\[[^\]]*\]|\.[^()>^+*`[#]+|[^()>^+*`[#.]+|\^+|./g,y=/\s*([\w\-]+)(?:=((?:`([^`]*)`)|[^\s]*))?/g,z=/(\$+)(?:@(-)?(\d+)?)?/g,A=/\./g,B=/\$/g,C={"":""},D=function(a,b,c,d){var e=c&&c.indexOf('"')>=0?"'":'"';return"string"==typeof d?c=d:"string"!=typeof c&&(c=b)," "+b+"="+e+c+e},E=function(a,b){return function(c){var d=b?c.lastIndexOf("<"):c.indexOf(">");return c.slice(0,d)+a+c.slice(d)}},F=function(a){return C[a]||(C[a]="<"+a+"></"+a+">")},G=function(a,b){var c,d=Array(a);for(c=0;a>c;++c)d[c]=b.replace(z,function(b,d,e,f){var g=(e?a-c-1:c)+(f?+f:1);return(d+g).slice(-d.length).replace(B,"0")});return d},H=/[&<>"']/g,I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};"area base br col hr img input link meta param command keygen source".split(" ").forEach(function(a){C[a]="<"+a+">"}),r.emmet=function(a,b){var c,e,f;if("string"!=typeof a)throw new d("emmet",arguments);if(b&&(a=r.format(a,b)),a in C)return C[a];var g=[],h=[];f=a.match(x),c=0,e=f.length;for(var i;e>c;){i=f[c++];var j=i[0],k=w[j];if(k){if("("!==i)for(var l=0,m="^"===j?i.length:1;m>l;++l)for(;g[0]!==j&&w[g[0]]>=k;){var n=g.shift();if(h.push(n),"^"===j&&">"===n)break}")"===i?g.shift():(("["===j||"`"===j)&&h.push(i.slice(1,-1)),"."===j&&h.push(i.slice(1).replace(A," ")),g.unshift(j))}else h.push(i)}c=e=f=void 0,h=h.concat(g),g=[],c=0,e=h.length;for(var o;e>c;){if(o=h[c++],o in w){var p=g.shift(),q=g.shift();switch("string"==typeof q&&(q=[F(q)]),o){case".":p=E(' class="'+p+'"');break;case"#":p=E(' id="'+p+'"');break;case"[":p=E(p.replace(y,D));break;case"*":q=G(+p,q.join(""));break;case"`":g.unshift(q),q=[p.replace(H,function(a){return I[a]})];break;default:p="string"==typeof p?F(p):p.join(""),">"===o?p=E(p,!0):q.push(p)}o="function"==typeof p?q.map(p):q}g.unshift(o)}return c=e=void 0,h=1===h.length?F(g[0]):g[0].join("")};var J=C,K=j.createElement("body"),L=function(a){return function(c,d){var e,f;if(c&&c in J)e=j.createElement(c),a&&(e=[new b(e)]);else for(c=c.trim(),c="<"===c[0]&&">"===c[c.length-1]?d?r.format(c,d):c:r.emmet(c,d),K.innerHTML=c,e=a?[]:null;f=K.firstChild;)if(K.removeChild(f),1===f.nodeType){if(!a){e=f;break}e.push(new b(f))}return a?e:b(e)}};r.create=L(""),r.createAll=L("All");var M,N=/^(\w*)(?:#([\w\-]+))?(?:\[([\w\-\=]+)\])?(?:\.([\w\-]+))?$/,O="m oM msM mozM webkitM".split(" ").reduce(function(a,b){var c=b+"atchesSelector";return a||k[c]&&c},null),P=function(a,b){if("string"!=typeof a)return null;var c=N.exec(a);return c&&(c[1]&&(c[1]=c[1].toLowerCase()),c[3]&&(c[3]=c[3].split("=")),c[4]&&(c[4]=" "+c[4]+" ")),function(d){var e,f,g,h;for(c||O||(h=(b||document).querySelectorAll(a));d&&1===d.nodeType;d=d.parentNode){if(c)g=!(c[1]&&d.nodeName.toLowerCase()!==c[1]||c[2]&&d.id!==c[2]||c[3]&&(c[3][1]?d.getAttribute(c[3][0])!==c[3][1]:!d.hasAttribute(c[3][0]))||c[4]&&!((" "+d.className+" ").indexOf(c[4])>=0));else if(O)g=d[O](a);else{e=0,f=h.length;for(var i;f>e;)if(i=h[e++],i===d)return i;e=f=void 0}if(g||!b||d===b)break}return g&&d}},Q=/^(?:on|do)[A-Z]/,R=function(a,c,d,e){var f=d.hasOwnProperty("constructor")&&d.constructor,g=P(a);return function(a,h){var i=b(a);if(!~i._._extensions.indexOf(e)&&g(a)&&(i._._extensions.push(e),h===!0||c(i)!==!1)){var j=Object.keys(d).filter(function(a){var b=d[a];return Q.exec(a)?(i[a]=function(){return b.apply(i,arguments)},!h):"constructor"!==a?(i[a]=b,!h&&"_"===a[0]):void 0});f&&u.safeInvoke(i,f),j.forEach(function(a){delete i[a]})}}},S=[],T=function(){return!0},U=function(){return!1};if(r.extend=function(a,c,e){if(2===arguments.length&&(e=c,c=!0),"boolean"==typeof c&&(c=c?T:U),"function"==typeof e&&(e={constructor:e}),!e||"object"!=typeof e||"function"!=typeof c)throw new d("extend",arguments);if("*"===a)u.keys(e).forEach(function(a){b.prototype[a]=e[a]});else{var f=R(a,c,e,S.length);S.push(f),u.each.call(j.querySelectorAll(a),f),r.importStyles(a,M)}},10>n){var V=u.filter.call(j.scripts,function(a){return a.src.indexOf("better-dom-legacy.js")>=0});if(V.length<1)throw new Error("In order to use live extensions in IE < 10 you have to include extra files. See https://github.com/chemerisuk/better-dom#notes-about-old-ies for details.");M="-ms-behavior:url("+V[0].src.replace(".js",".htc")+") !important",j.attachEvent("on"+q,function(){var a=i.event;a.srcUrn===q&&S.forEach(function(b){b(a.srcElement)})})}else{var W="DOM2001000-beta001",X=r.extend;M=p+"animation-name:"+W+" !important;",M+=p+"animation-duration:1ms !important",r.extend=function(){r.importStyles("@"+p+"keyframes "+W,"from {opacity:.99} to {opacity:1}"),(r.extend=X).apply(r,arguments)},j.addEventListener(p?"webkitAnimationStart":"animationstart",function(a){a.animationName===W&&(S.forEach(function(b){b(a.target)}),a.stopImmediatePropagation())},!0)}var Y=S,Z=/\{([\w\-]+)\}/g;r.format=function(a,b){return"string"!=typeof a&&(a=String(a)),b&&"object"==typeof b||(b={}),a.replace(Z,function(a,c,d){return c in b&&(a=b[c],"function"==typeof a&&(a=a(d)),a=String(a)),a})};var $=i.requestAnimationFrame,_=i.cancelAnimationFrame;$&&_||["ms","moz","webkit","o"].some(function(a){return $=i[a+"RequestAnimationFrame"],_=i[a+"CancelAnimationFrame"],!!$}),r.nextFrame=function(a){return $?$.call(i,a):i.setTimeout(a,1e3/60)},r.cancelFrame=function(a){_?_.call(i,a):i.clearTimeout(a)},r.importScripts=function(){var a=h.call(arguments,0),b=function(){var c,e=a.shift(),f=typeof e;if("string"===f)c=j.createElement("script"),c.src=e,c.onload=b,c.async=!0,u.injectElement(c);else if("function"===f)e();else if(e)throw new d("importScripts",arguments)};b()};var ab=u.injectElement(j.createElement("style")),bb=ab.sheet||ab.styleSheet,cb=bb.cssRules||bb.rules;r.importStyles=function(a,b){if("string"!=typeof a||"string"!=typeof b)throw new d("importStyles",arguments);a.split(",").forEach(function(a){try{bb.cssRules?bb.insertRule(a+"{"+b+"}",cb.length):bb.addRule(a,b)}catch(c){}})},r.mock=function(b,c){if(!b)return new a;var d=r.create(b,c);return e(d[0]),d};var db=function(a){return function(d){if(a){if(d&&"string"!=typeof d)throw new c("children",arguments)}else if(d&&"number"!=typeof d)throw new c("child",arguments);var e=this[0],f=P(d),g=e.children;return 9>n&&(g=u.filter.call(g,function(a){return 1===a.nodeType})),a?(f&&(g=u.filter.call(g,f)),u.map.call(g,b)):(0>d&&(d=g.length+d),b(g[d]))}};u.register({child:db(!1),children:db(!0)},function(b){return"child"===b?function(){return new a}:function(){return[]}});var eb=/[\n\t\r]/g,fb=function(a,b){var d="contains"===a?"hasClass":a+"Class";return k.classList&&(b=function(b,c){return b[0].classList[a](c)}),"hasClass"===d||"toggleClass"===d?function(a,e){if("boolean"==typeof e&&"toggleClass"===d)return this[e?"addClass":"removeClass"](a),e;if("string"!=typeof a)throw new c(d,arguments);return b(this,a)}:function(){var a,e,f=arguments;a=0,e=f.length;for(var g;e>a;){if(g=f[a++],"string"!=typeof g)throw new c(d,arguments);b(this,g)}return a=e=void 0,this}};u.register({hasClass:fb("contains",function(a,b){return(" "+a[0].className+" ").replace(eb," ").indexOf(" "+b+" ")>=0}),addClass:fb("add",function(a,b){a.hasClass(b)||(a[0].className+=" "+b)}),removeClass:fb("remove",function(a,b){a[0].className=(" "+a[0].className+" ").replace(eb," ").replace(" "+b+" "," ").trim()}),toggleClass:fb("toggle",function(a,b){var c=a.hasClass(b);return c?a.removeClass(b):a[0].className+=" "+b,!c})},function(a){return"hasClass"===a||"toggleClass"===a?function(){return!1}:void 0}),u.register({clone:function(a){if("boolean"!=typeof a)throw new c("clone",arguments);var d,e=this[0];return 9>n?(d=r.create(e.outerHTML),a||d.set("")):d=new b(e.cloneNode(a)),d}},function(){return function(){return new a}}),u.register({contains:function(a){var d=this[0];if(a instanceof b){var e=a[0];return e===d?!0:d.contains?d.contains(e):16&d.compareDocumentPosition(e)}throw new c("contains",arguments)}},function(){return function(){return!1}});var gb=/\-./g,hb=["Webkit","O","Moz","ms"],ib={get:{},set:{},find:function(a,b){var c=a.replace(gb,function(a){return a[1].toUpperCase()});return c in b||(c=hb.map(function(a){return a+c[0].toUpperCase()+c.slice(1)}).filter(function(a){return a in b})[0]),this.get[a]=this.set[a]=c}},jb=["Top","Right","Bottom","Left"],kb={font:["fontStyle","fontSize","/","lineHeight","fontFamily"],padding:jb.map(function(a){return"padding"+a}),margin:jb.map(function(a){return"margin"+a}),"border-width":jb.map(function(a){return"border"+a+"Width"}),"border-style":jb.map(function(a){return"border"+a+"Style"})};" float fill-opacity font-weight line-height opacity orphans widows z-index zoom ".split(" ").forEach(function(a){var b=a.replace(gb,function(a){return a[1].toUpperCase()});"float"===a?(b="cssFloat"in k.style?"cssFloat":"styleFloat",ib.get[a]=ib.set[a]=b):(ib.get[a]=b,ib.set[a]=function(a,c){c[b]=a.toString()})}),u.keys(kb).forEach(function(a){var b=kb[a];ib.get[a]=function(a){var c=[],d=function(b,d){return c.push("/"===b?b:a[b]),!c[d]};return b.some(d)?"":c.join(" ")},ib.set[a]=function(c,d){c&&"cssText"in d?d.cssText+=";"+a+":"+c:b.forEach(function(a){return d[a]="number"==typeof c?c+"px":c.toString()})}});var lb=ib;u.register({css:function(a,b){var d,e=this,f=arguments.length,g=this[0],h=g.style;if(1===f&&("string"==typeof a||u.isArray(a))){var i=function(a){var b=lb.get[a]||lb.find(a,h),c="function"==typeof b?b(h):h[b];return c||(d||(d=u.computeStyle(g)),c="function"==typeof b?b(d):d[b]),c};return"string"==typeof a?i(a):a.map(i).reduce(function(b,c,d){return b[a[d]]=c,b},{})}if(2===f&&"string"==typeof a){var j=lb.set[a]||lb.find(a,h);"function"==typeof b&&(b=b.call(this,this.css(a))),null==b&&(b=""),"function"==typeof j?j(b,h):h[j]="number"==typeof b?b+"px":b.toString()}else{if(1!==f||!a||"object"!=typeof a)throw new c("css",arguments);u.keys(a).forEach(function(b){e.css(b,a[b])})}return this}},function(){return function(a){return 1===arguments.length&&u.isArray(a)?{}:1!==arguments.length||"string"!=typeof a?this:void 0}}),u.register({define:function(a,b,d){var e=this,f=this[0];if("string"!=typeof a||"function"!=typeof b||"function"!=typeof d)throw new c("define",arguments);var g=f.getAttribute(a),h=9>n?"toUpperCase":"toLowerCase",i=a[h](),j=f.setAttribute,k=f.removeAttribute;return Object.defineProperty(f,a,{get:function(){var a=f.getAttribute(i,1);return b.call(e,a)},set:function(a){var b=d.call(e,a);null==b?k.call(f,i,1):j.call(f,i,b,1)}}),f.setAttribute=function(c,d,g){a===c[h]()?f[a]=b.call(e,d):j.call(f,c,d,g)},f.removeAttribute=function(c,d){a===c[h]()?f[a]=b.call(e,null):k.call(f,c,d)},f[a]=b.call(this,g),this}});var mb=j.getElementsByClassName?/^(?:(\w+)|\.([\w\-]+))$/:/^(?:(\w+))$/,nb=/'|\\/g,ob=function(a){return function(d){if("string"!=typeof d)throw new c("find"+a,arguments);var e,f,g,h,i=this[0],j=mb.exec(d);return j?(e=j[1]?i.getElementsByTagName(d):i.getElementsByClassName(j[2]),e&&!a&&(e=e[0])):(f=!0,g="DOM2001000-beta001",h=i,this!==r&&((f=i.getAttribute("id"))?g=f.replace(nb,"\\$&"):i.setAttribute("id",g),g="[id='"+g+"'] ",d=g+d.split(",").join(","+g)),e=u.safeInvoke(h,"querySelector"+a,d),f||i.removeAttribute("id")),a?u.map.call(e,b):b(e)}};u.register({find:ob(""),findAll:ob("All")},function(b){return"find"===b?function(){return new a}:function(){return[]}});var pb={};"onfocusin"in k?(pb.focus=function(a){a._type="focusin"},pb.blur=function(a){a._type="focusout"}):pb.focus=pb.blur=function(a){a.capturing=!0},j.createElement("input").validity&&(pb.invalid=function(a){a.capturing=!0}),9>n&&["submit","change","reset"].forEach(function(a){pb[a]=function(a){a._type="_"}});var qb=pb,rb=g;u.register({fire:function(a){var b,d,e,f=this[0];if("string"!=typeof a)throw new c("fire",arguments);var g=qb[a],h={};return g&&(h=g(h)||h),d=h._type||a,9>n?(b=j.createEventObject(),b["__2001000-beta001__"]=arguments,"on"+d in f||(d=q),d===q&&(b.srcUrn=a),f.fireEvent("on"+d,b),e=b.returnValue!==!1):(b=j.createEvent("HTMLEvents"),b["__2001000-beta001__"]=arguments,b.initEvent(d,!0,!0),e=f.dispatchEvent(b)),e&&f[a]&&(rb.skip=a,u.safeInvoke(f,a),rb.skip=null),e}},function(){return function(){return!0}});var sb={get:{},set:{}},tb=document.createElement("body");"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" ").forEach(function(a){sb.get[a.toLowerCase()]=function(b){return b[a]}}),sb.get.style=function(a){return a.style.cssText},sb.set.style=function(a,b){a.style.cssText=b},sb.get.title=function(a){return a===k?j.title:a.title},sb.set.title=function(a,b){(a===k?j:a).title=b},sb.get.undefined=function(a){var b;switch(a.tagName){case"SELECT":return~a.selectedIndex?a.options[a.selectedIndex].value:"";case"OPTION":b=a.hasAttribute("value")?"value":"text";break;default:b=a.type&&"value"in a?"value":"innerHTML"}return a[b]},sb.set.value=function(a,b){"SELECT"===a.tagName?u.every.call(a.options,function(a){return!(a.selected=a.value===b)})&&(a.selectedIndex=-1):a[9>n&&"textarea"===a.type?"innerText":"value"]=b},sb.get.type=function(a){return a.getAttribute("type")||a.type},9>n&&(sb.get.textContent=function(a){return a.innerText},sb.set.textContent=function(a,b){a.innerText=b},sb.set.innerHTML=function(a,b){try{a.innerHTML=b}catch(c){a.innerText="",tb.innerHTML=b;for(var d;d=tb.firstChild;)a.appendChild(d)}});var ub=sb,vb=/[A-Z]/g,wb=function(a,b){b=b.replace(vb,function(a){return"-"+a.toLowerCase()});var c=a.getAttribute("data-"+b);if(null!=c&&"{"===c[0]&&"}"===c[c.length-1])try{c=JSON.parse(c)}catch(d){}return c};u.register({get:function(a){var b=this,d=this[0],e=ub.get[a];if(e)return e(d,a);if("string"==typeof a){if(a in d)return d[a];if("_"!==a[0])return d.getAttribute(a);var f=a.slice(1),g=this._;return f in g||(g[f]=wb(d,f)),g[f]}if(u.isArray(a))return a.reduce(function(a,c){return a[c]=b.get(c),a},{});throw new c("get",arguments)}},function(){return function(){return void 0}});var xb=function(a,c,d,e){return function(){var a=h.call(arguments,0),f=this,g=this[0];if(d&&!g.parentNode)return this;var i=c?"":j.createDocumentFragment();return a.forEach(function(a){"function"==typeof a&&(a=a.call(f)),"string"==typeof a?"string"==typeof i?i+=a.trim():a=r.createAll(a):a instanceof b&&(a=[a]),u.isArray(a)&&("string"==typeof i&&(a=r.createAll(i).concat(a),i=j.createDocumentFragment()),a.forEach(function(a){i.appendChild(a[0])}))}),"string"==typeof i?g.insertAdjacentHTML(c,i):e(g,i),this}};u.register({after:xb("after","afterend",!0,function(a,b){a.parentNode.insertBefore(b,a.nextSibling)}),before:xb("before","beforebegin",!0,function(a,b){a.parentNode.insertBefore(b,a)}),prepend:xb("prepend","afterbegin",!1,function(a,b){a.insertBefore(b,a.firstChild)}),append:xb("append","beforeend",!1,function(a,b){a.appendChild(b)}),replace:xb("replace","",!0,function(a,b){a.parentNode.replaceChild(b,a)}),remove:xb("remove","",!0,function(a){a.parentNode.removeChild(a)})}),u.register({map:function(a,b){if("function"!=typeof a)throw new c("map",arguments);return[a.call(b,this)]}},function(){return function(){return[]}});var yb=function(a){var b=u.computeStyle(a);return"hidden"===b.visibility||"none"===b.display},zb={":focus":function(a){return a===j.activeElement},":visible":function(a){return!yb(a)},":hidden":yb};u.register({matches:function(a){if(!a||"string"!=typeof a)throw new c("matches",arguments);var b=zb[a]||P(a);return!!b(this[0])}},function(){return function(){return!1}}),u.register({off:function(a,b,d){if("string"!=typeof a)throw new c("off",arguments);void 0===d&&(d=b,b=void 0);var e=this[0];return this._._handlers=this._._handlers.filter(function(c){var f=a!==c.type;return f=f||b&&b!==c.selector,(f=f||d&&d!==c.callback)?!0:(a=c._type||c.type,void(9>n?e.detachEvent("on"+a,c):e.removeEventListener(a,c,!!c.capturing)))}),this}}),u.register({offset:function(){var a=this[0],b=k.clientTop,c=k.clientLeft,d=i.pageYOffset||k.scrollTop,e=i.pageXOffset||k.scrollLeft,f=a.getBoundingClientRect();return{top:f.top+d-b,left:f.left+e-c,right:f.right+e-c,bottom:f.bottom+d-b,width:f.right-f.left,height:f.bottom-f.top}}},function(){return function(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}});var Ab=function(a){return function(b,d,e,f){var g=this;if("string"==typeof b){if("function"==typeof e&&(f=e,"string"==typeof d?e=null:(e=d,d=null)),"function"==typeof d&&(f=d,d=null,e=null),"function"!=typeof f)throw new c(a,arguments);var h=this[0],i=rb(b,d,f,e,this,"once"===a);i&&(9>n?h.attachEvent("on"+(i._type||b),i):h.addEventListener(i._type||b,i,!!i.capturing),this._._handlers.push(i))}else{if("object"!=typeof b)throw new c(a,arguments);u.isArray(b)?b.forEach(function(b){g[a](b,d,e,f)}):u.keys(b).forEach(function(c){g[a](c,b[c])})}return this}};u.register({on:Ab("on"),once:Ab("once")}),u.register({set:function(a,b){var d=this,e=this[0];if(1===arguments.length&&(b="function"==typeof a?a:null==a?"":String(a),"[object Object]"!==b)){var f=e.tagName;a="INPUT"===f||"TEXTAREA"===f||"SELECT"===f||"OPTION"===f?"value":"innerHTML"}var g,h=ub.set[a],i=this._._watchers[a];if((i||"function"==typeof b)&&(g=this.get(a)),"string"==typeof a)"_"===a[0]?this._[a.slice(1)]=b:("function"==typeof b&&(b=b.call(this,g)),h?h(e,b):null==b?e.removeAttribute(a):a in e?e[a]=b:e.setAttribute(a,b),(9>n||o)&&(e.className=e.className));else if(u.isArray(a))a.forEach(function(a){d.set(a,b)});else{if("object"!=typeof a)throw new c("set",arguments);u.keys(a).forEach(function(b){d.set(b,a[b])})}return i&&g!==b&&i.forEach(function(a){u.safeInvoke(d,a,b,g)}),this}});var Bb=function(a,d,e){return function(f){if(f&&"string"!=typeof f)throw new c(a,arguments);var g=P(f),h=e?[]:null,i=this[0];for("closest"===a&&g||(i=i[d]);i;i=i[d])if(1===i.nodeType&&(!g||g(i))){if(!e)break;h.push(i)}return e?u.map.call(h,b):b(i)}};u.register({next:Bb("next","nextSibling"),prev:Bb("prev","previousSibling"),nextAll:Bb("nextAll","nextSibling",!0),prevAll:Bb("prevAll","previousSibling",!0),closest:Bb("closest","parentNode")},function(b){return"All"===b.slice(-3)?function(){return[]}:function(){return new a}});var Cb=["timing-function","property","duration","delay"].map(function(a){return"transition-"+a}),Db=function(a){var b=parseFloat(a)||0;return b&&"ms"!==a.slice(-2)?1e3*b:b},Eb=function(a){var b=a[3],c=a[2];return Math.max.apply(Math,c.map(function(a,c){return Db(a)+(Db(b[c])||0)}))};Cb.concat("animation-duration").forEach(function(a){lb.find(a,k.style)});var Fb=function(a,b,c,d,e){var f,g;if(o||10>n)return null;if(c){if(g=Db(b[lb.get["animation-duration"]]),!g)return;f=[p+"animation-direction:"+(d?"normal":"reverse"),p+"animation-name:"+c,"visibility:inherit"]}else{var h=Cb.map(function(a,c){return b[lb.get[a]].split(c?", ":/, (?!\d)/)});if(g=Eb(h),!g)return;if(h[1].indexOf("all")<0){var i=h[1].indexOf("visibility");0>i&&(i=h[2].indexOf("0s")),0>i&&(i=h[1].length),h[0][i]="linear",h[1][i]="visibility",h[d?2:3][i]="0s",h[d?3:2][i]=g+"ms"}f=h.map(function(a,b){for(var c=0,d=a.length;d>c;++c)a[c]=a[c]||a[c-1]||"initial";return p+Cb[b]+":"+a.join(", ")}),f.push("visibility:"+(d?"hidden":"inherit"),"will-change:"+h[1].join(", "))}return{cssText:f.join(";"),initialCssText:a.style.cssText,handleEvent:function(b){if(b.target===a){if(c){if(b.animationName!==c)return}else if("visibility"!==b.propertyName)return;b.stopPropagation(),e()}}}},Gb=p?"webkitTransitionEnd":"transitionend",Hb=p?"webkitAnimationEnd":"animationend",Ib=function(a,b){return function(d,e){var f=this;if("string"!=typeof d&&(e=d,d=null),e&&"function"!=typeof e)throw new c(a,arguments);var g=this[0],h=g.style,i=u.computeStyle(g),j=b,l=this._._frameId,m=function(){n?(g.removeEventListener(o,n,!0),h.cssText=n.initialCssText):f.set("aria-hidden",String(j)),h.visibility=j?"hidden":"inherit",f._._frameId=null,e&&e.call(f)};if("boolean"!=typeof j&&(j="hidden"!==i.visibility),l&&r.cancelFrame(l),k.contains(g)){var n=Fb(g,i,d,j,m),o=d?Hb:Gb;this._._frameId=r.nextFrame(n?function(){g.addEventListener(o,n,!0),h.cssText=n.initialCssText+n.cssText,f.set("aria-hidden",String(j))}:m)}else m();return this}};u.register({show:Ib("show",!1),hide:Ib("hide",!0),toggle:Ib("toggle")}),u.register({watch:function(a,b){var c=this._._watchers;return c[a]||(c[a]=[]),c[a].push(b),this},unwatch:function(a,b){var c=this._._watchers;return c[a]&&(c[a]=c[a].filter(function(a){return a!==b})),this}})}();