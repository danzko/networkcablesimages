/*! CSS Critic - v2.0.0 - 2016-10-30
* http://www.github.com/cburgmer/csscritic
* Copyright (c) 2016 Christoph Burgmer, Copyright (c) 2012, 2013 ThoughtWorks, Inc.; Licensed MIT */
/* Integrated dependencies:
 * imagediff.js (MIT License),
 * ayepromise (BSD License & WTFPL),
 * url (MIT License),
 * CSSOM (MIT License),
 * xmlserializer (MIT License),
 * css-font-face-src (BSD License),
 * inlineresources (MIT License),
 * rasterizeHTML.js (MIT License) */

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.csscritic = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var inject = require('./../node_modules/cssify');
var css = ".cssCriticNiceReporter{font-family:sans-serif;font-size:16px}.cssCriticNiceReporter a{text-decoration:none;color:inherit}.cssCriticNiceReporter .comparison .title .titleLink:hover,.cssCriticNiceReporter .componentLabel:hover,.cssCriticNiceReporter .errorText a{text-decoration:underline}.cssCriticNiceReporter button{padding:2px 10px;border-radius:3px;border:none;background-color:#00c04e;font-size:inherit;font-family:inherit}.cssCriticNiceReporter button[disabled]{background-color:#ddd}.cssCriticNiceReporter button:hover{background-color:#24d66c}.cssCriticNiceReporter button:not([disabled]):active{background-color:#4cec8d}.cssCriticNiceReporter .errorText{color:#591100;margin-bottom:1em}.cssCriticNiceReporter .errorText:not(:empty)::before{content:\" \";margin-right:5px;margin-top:-.3rem;width:1.4rem;height:1.4rem;vertical-align:top;display:inline-block;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik04OTYgMTI4cTIwOSAwIDM4NS41IDEwM3QyNzkuNSAyNzkuNSAxMDMgMzg1LjUtMTAzIDM4NS41LTI3OS41IDI3OS41LTM4NS41IDEwMy0zODUuNS0xMDMtMjc5LjUtMjc5LjUtMTAzLTM4NS41IDEwMy0zODUuNSAyNzkuNS0yNzkuNSAzODUuNS0xMDN6bTEyOCAxMjQ3di0xOTBxMC0xNC05LTIzLjV0LTIyLTkuNWgtMTkycS0xMyAwLTIzIDEwdC0xMCAyM3YxOTBxMCAxMyAxMCAyM3QyMyAxMGgxOTJxMTMgMCAyMi05LjV0OS0yMy41em0tMi0zNDRsMTgtNjIxcTAtMTItMTAtMTgtMTAtOC0yNC04aC0yMjBxLTE0IDAtMjQgOC0xMCA2LTEwIDE4bDE3IDYyMXEwIDEwIDEwIDE3LjV0MjQgNy41aDE4NXExNCAwIDIzLjUtNy41dDEwLjUtMTcuNXoiLz48L3N2Zz4K) center center/90% no-repeat}.cssCriticNiceReporter .errorText ul{margin:.2em 0}.cssCriticNiceReporter .header{padding:15px;opacity:1;transition-property:background-color,opacity;transition-duration:1s,0s;transition-delay:0s,0s}.cssCriticNiceReporter .header.scrolling{z-index:1;background-color:#fff;margin-top:-8px;margin-bottom:-8px;border-top:8px solid #fff}.cssCriticNiceReporter .fixedHeaderAnchorTarget{height:130px;margin-top:-130px;display:block;visibility:hidden}.cssCriticNiceReporter .header.pass{background-color:#00c04e}.cssCriticNiceReporter .header.fail{background-color:#ff3100}.cssCriticNiceReporter .timeTaken{float:right;padding:.5em 0 0 1em}.cssCriticNiceReporter .statusText{margin-top:.55rem;display:inline-block}.cssCriticNiceReporter .statusText .runAll{display:block;margin-top:.5em;text-decoration:underline}.cssCriticNiceReporter .acceptAll{display:none;margin:-4px 0 -4px 1em}.cssCriticNiceReporter .acceptAll.active{display:inline-block}.cssCriticNiceReporter .cssCriticVersion{display:block;margin:0 0 .3rem;font-size:.7rem}.cssCriticNiceReporter .header.small:not(:hover){opacity:.85;transition-duration:1s,1s;transition-delay:0s,.5s}.cssCriticNiceReporter .header .optional{max-height:200px;transition:max-height .2s;margin:0 -3px -4px;padding:0 3px 4px;overflow:hidden}.cssCriticNiceReporter .header.small:not(:hover) .optional{max-height:0}.cssCriticNiceReporter .header.small:not(:hover) .timeTaken{display:none}.cssCriticNiceReporter .progressBar{margin:0;list-style:none;padding:0}.cssCriticNiceReporter .progressBar:empty::after{content:'';width:0;height:0;border:.63rem solid;border-radius:50%;display:inline-block;opacity:.15}.cssCriticNiceReporter .progressBar li{display:inline-block;vertical-align:top;margin-right:-.4rem;transition:color 1s}.cssCriticNiceReporter .progressBar a{width:0;height:0;border:.63rem solid;border-radius:50%;display:block}.cssCriticNiceReporter .progressBar .pending{color:grey}.cssCriticNiceReporter .progressBar .passed{color:#048337}.cssCriticNiceReporter .progressBar .failed{color:#b62705}.cssCriticNiceReporter .progressBar .error{color:#591100}.cssCriticNiceReporter .progressBar .referenceMissing{color:#ff0}.cssCriticNiceReporter .progressBar a:focus{outline:0}.cssCriticNiceReporter .progressBar .hasRenderErrors{position:relative}.cssCriticNiceReporter .progressBar .hasRenderErrors a::after{content:' ';position:absolute;top:0;left:0;right:0;bottom:0;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMDg4IDEyNDh2MjI0cTAgMjYtMTkgNDV0LTQ1IDE5aC0yNTZxLTI2IDAtNDUtMTl0LTE5LTQ1di0yMjRxMC0yNiAxOS00NXQ0NS0xOWgyNTZxMjYgMCA0NSAxOXQxOSA0NXptMzAtMTA1NmwtMjggNzY4cS0xIDI2LTIwLjUgNDV0LTQ1LjUgMTloLTI1NnEtMjYgMC00NS41LTE5dC0yMC41LTQ1bC0yOC03NjhxLTEtMjYgMTcuNS00NXQ0NC41LTE5aDMyMHEyNiAwIDQ0LjUgMTl0MTcuNSA0NXoiLz48L3N2Zz4K) center center/70% no-repeat}.cssCriticNiceReporter .componentLabel{margin:1.8em 0 .5em 15px;font-size:1.15rem}.cssCriticNiceReporter .toc{display:inline-block;list-style:none;padding:3px;margin:1rem -3px 0;font-size:.9rem;background:rgba(255,255,255,.3)}.cssCriticNiceReporter .tocEntry{display:inline-block;margin-right:.8rem}.cssCriticNiceReporter .tocEntry:last-child{margin-right:0}.cssCriticNiceReporter .comparison{background-color:#f5f5f5;padding:15px;margin:4px 0 0}.cssCriticNiceReporter .comparison .title{font-weight:400}.cssCriticNiceReporter .fakeTarget+.comparison,.cssCriticNiceReporter :target+.comparison{padding-left:10px;border-left:5px solid rgba(0,0,0,.15)}.cssCriticNiceReporter .comparison .title .externalLink{vertical-align:top;display:inline-block;width:18px;height:18px;margin-left:.2rem;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNDA4IDkyOHYzMjBxMCAxMTktODQuNSAyMDMuNXQtMjAzLjUgODQuNWgtODMycS0xMTkgMC0yMDMuNS04NC41dC04NC41LTIwMy41di04MzJxMC0xMTkgODQuNS0yMDMuNXQyMDMuNS04NC41aDcwNHExNCAwIDIzIDl0OSAyM3Y2NHEwIDE0LTkgMjN0LTIzIDloLTcwNHEtNjYgMC0xMTMgNDd0LTQ3IDExM3Y4MzJxMCA2NiA0NyAxMTN0MTEzIDQ3aDgzMnE2NiAwIDExMy00N3Q0Ny0xMTN2LTMyMHEwLTE0IDktMjN0MjMtOWg2NHExNCAwIDIzIDl0OSAyM3ptMzg0LTg2NHY1MTJxMCAyNi0xOSA0NXQtNDUgMTktNDUtMTlsLTE3Ni0xNzYtNjUyIDY1MnEtMTAgMTAtMjMgMTB0LTIzLTEwbC0xMTQtMTE0cS0xMC0xMC0xMC0yM3QxMC0yM2w2NTItNjUyLTE3Ni0xNzZxLTE5LTE5LTE5LTQ1dDE5LTQ1IDQ1LTE5aDUxMnEyNiAwIDQ1IDE5dDE5IDQ1eiIvPjwvc3ZnPgo=) center center/90% no-repeat;opacity:.3}.cssCriticNiceReporter .comparison .title .externalLink:hover{opacity:.5}.cssCriticNiceReporter .comparison .parameters,.cssCriticNiceReporter .comparison .parameters dd,.cssCriticNiceReporter .comparison .parameters dt{display:inline-block;margin:0}.cssCriticNiceReporter .comparison .parameters{margin-left:1.5em;color:#444}.cssCriticNiceReporter .comparison .parameters dt{font-style:italic}.cssCriticNiceReporter .comparison .parameters dt::after{content:\":\"}.cssCriticNiceReporter .comparison .parameters dd{margin-left:.5em;margin-right:.7em}.cssCriticNiceReporter .comparison .parameters dd::after{content:\",\"}.cssCriticNiceReporter .comparison .parameters dd:last-child::after{content:\"\"}.cssCriticNiceReporter .running.comparison .referenceImageContainer{opacity:.2}.cssCriticNiceReporter .comparison .referenceImageContainer:empty{display:none}.cssCriticNiceReporter .comparison .imageWrapper{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAKUlEQVQ4jWNYt27df2Lwo0ePiMIMowaOGjgsDSRWIbEWjxo4auCwNBAAenk4PB4atggAAAAASUVORK5CYII=) -5px -5px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.cssCriticNiceReporter .comparison canvas,.cssCriticNiceReporter .comparison img{display:block}.cssCriticNiceReporter .comparison .pageImageContainer,.cssCriticNiceReporter .comparison .referenceImageContainer{border:1px solid #000}.cssCriticNiceReporter .comparison .outerPageImageContainer,.cssCriticNiceReporter .comparison .referenceImageContainer{position:relative;display:inline-block}.cssCriticNiceReporter .comparison .referenceImageContainer .diff{max-height:0;max-width:0;opacity:0}.cssCriticNiceReporter .passed.comparison .referenceImageContainer{display:none}.cssCriticNiceReporter .failed.comparison .referenceImageContainer{margin-bottom:4px}.cssCriticNiceReporter .failed.comparison .referenceImageContainer:hover .diff{max-height:none;max-width:none;opacity:1;transition:opacity 1s}.cssCriticNiceReporter .failed.comparison .referenceImageContainer:hover .imageWrapper{opacity:.5;transition:opacity 1s;position:absolute;top:0;left:0;right:0;bottom:0}.cssCriticNiceReporter .failed.comparison .pageImageContainer,.cssCriticNiceReporter .failed.comparison .referenceImageContainer,.cssCriticNiceReporter .referenceMissing.comparison .pageImageContainer,.cssCriticNiceReporter .referenceMissing.comparison .referenceImageContainer{margin-left:65px}.cssCriticNiceReporter .comparison iframe{border:none;display:block;background:0 0}.cssCriticNiceReporter .comparison.realView .pageImageContainer{border-style:dashed}.cssCriticNiceReporter .comparison .toggleView{vertical-align:top;position:absolute;top:0;height:30px;right:-45px;width:30px;font-size:.7rem;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNjY0IDk2MHEtMTUyLTIzNi0zODEtMzUzIDYxIDEwNCA2MSAyMjUgMCAxODUtMTMxLjUgMzE2LjV0LTMxNi41IDEzMS41LTMxNi41LTEzMS41LTEzMS41LTMxNi41cTAtMTIxIDYxLTIyNS0yMjkgMTE3LTM4MSAzNTMgMTMzIDIwNSAzMzMuNSAzMjYuNXQ0MzQuNSAxMjEuNSA0MzQuNS0xMjEuNSAzMzMuNS0zMjYuNXptLTcyMC0zODRxMC0yMC0xNC0zNHQtMzQtMTRxLTEyNSAwLTIxNC41IDg5LjV0LTg5LjUgMjE0LjVxMCAyMCAxNCAzNHQzNCAxNCAzNC0xNCAxNC0zNHEwLTg2IDYxLTE0N3QxNDctNjFxMjAgMCAzNC0xNHQxNC0zNHptODQ4IDM4NHEwIDM0LTIwIDY5LTE0MCAyMzAtMzc2LjUgMzY4LjV0LTQ5OS41IDEzOC41LTQ5OS41LTEzOS0zNzYuNS0zNjhxLTIwLTM1LTIwLTY5dDIwLTY5cTE0MC0yMjkgMzc2LjUtMzY4dDQ5OS41LTEzOSA0OTkuNSAxMzkgMzc2LjUgMzY4cTIwIDM1IDIwIDY5eiIvPjwvc3ZnPgo=) center center/80% no-repeat;opacity:.3}.cssCriticNiceReporter .comparison .toggleView:hover{opacity:.5}.cssCriticNiceReporter .comparison.realView .toggleView{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01NTUgMTMzNWw3OC0xNDFxLTg3LTYzLTEzNi0xNTl0LTQ5LTIwM3EwLTEyMSA2MS0yMjUtMjI5IDExNy0zODEgMzUzIDE2NyAyNTggNDI3IDM3NXptMzg5LTc1OXEwLTIwLTE0LTM0dC0zNC0xNHEtMTI1IDAtMjE0LjUgODkuNXQtODkuNSAyMTQuNXEwIDIwIDE0IDM0dDM0IDE0IDM0LTE0IDE0LTM0cTAtODYgNjEtMTQ3dDE0Ny02MXEyMCAwIDM0LTE0dDE0LTM0em0zNjMtMTkxcTAgNy0xIDktMTA1IDE4OC0zMTUgNTY2dC0zMTYgNTY3bC00OSA4OXEtMTAgMTYtMjggMTYtMTIgMC0xMzQtNzAtMTYtMTAtMTYtMjggMC0xMiA0NC04Ny0xNDMtNjUtMjYzLjUtMTczdC0yMDguNS0yNDVxLTIwLTMxLTIwLTY5dDIwLTY5cTE1My0yMzUgMzgwLTM3MXQ0OTYtMTM2cTg5IDAgMTgwIDE3bDU0LTk3cTEwLTE2IDI4LTE2IDUgMCAxOCA2dDMxIDE1LjUgMzMgMTguNSAzMS41IDE4LjUgMTkuNSAxMS41cTE2IDEwIDE2IDI3em0zNyA0NDdxMCAxMzktNzkgMjUzLjV0LTIwOSAxNjQuNWwyODAtNTAycTggNDUgOCA4NHptNDQ4IDEyOHEwIDM1LTIwIDY5LTM5IDY0LTEwOSAxNDUtMTUwIDE3Mi0zNDcuNSAyNjd0LTQxOS41IDk1bDc0LTEzMnEyMTItMTggMzkyLjUtMTM3dDMwMS41LTMwN3EtMTE1LTE3OS0yODItMjk0bDYzLTExMnE5NSA2NCAxODIuNSAxNTN0MTQ0LjUgMTg0cTIwIDM0IDIwIDY5eiIvPjwvc3ZnPgo=);opacity:1}.cssCriticNiceReporter .comparison .accept{vertical-align:top;position:absolute;top:0;bottom:0;left:0;width:50px;font-size:.7rem}.cssCriticNiceReporter .accepted.comparison .accept{font-size:1.4rem}.cssCriticNiceReporter .comparison button span{transform:rotate(-90deg);display:block}.cssCriticNiceReporter .comparison .referenceImageContainer{opacity:1;max-height:1000000px}.cssCriticNiceReporter .accepted.comparison .referenceImageContainer{opacity:0;max-height:0;border-width:0;transition:max-height 1ms ease 1s,opacity 1s,border-width 1ms ease 1s}.cssCriticNiceReporter .comparison:hover .referenceImageContainer::after{position:absolute;top:0;right:0;transform:translateX(100%);margin-right:-8px;padding:4px;white-space:nowrap;background-color:#000;opacity:.55;color:#fff;font-size:.9rem;border-radius:5px}.cssCriticNiceReporter .failed.comparison:hover .referenceImageContainer::after{content:\"< Hover over the reference image to highlight changes\"}.cssCriticNiceReporter .failed.comparison .referenceImageContainer:hover::after{display:none}.cssCriticNiceReporter .browserWarning::before{content:\"⚠\";font-size:1.2rem;padding-right:5px;vertical-align:middle}.cssCriticNiceReporter .browserWarning{position:fixed;top:0;left:0;width:100%;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:2;background-color:rgba(182,39,5,.85);color:#fff;font-size:1.2rem;border:2px solid #000;padding:20px}";
inject(css, undefined, '_1c4ids2');
module.exports = css;

},{"./../node_modules/cssify":4}],2:[function(require,module,exports){
!function(e,t){"function"==typeof define&&define.amd?define(["ayepromise","imagediff","rasterizeHTML"],function(r,n,o){return e.csscritic=t(r,n,o)}):"object"==typeof exports?module.exports=t(require("ayepromise"),require("imagediff"),require("rasterizehtml"),require("../build/csscritic.concat.css")):e.csscritic=t(e.ayepromise,e.imagediff,e.rasterizeHTML)}(this,function(e,t,r){var n={};n.browserRenderer=function(e,t,r){"use strict";var n,o={},a={},i=function(){return n||(n=t()),n},s=function(e){return e.map(function(e){return e.msg})},c=function(e){throw console.error(e),e},u=function(e){var t={cache:"repeated",cacheBucket:a,width:e.width,height:e.height,executeJs:!0,executeJsTimeout:50,baseUrl:e.baseUrl};return["hover","active","focus","target"].forEach(function(r){e[r]&&(t[r]=e[r])}),r.drawHTML(e.html,t).then(function(e){var t=s(e.errors);return{image:e.image,errors:t}},c)},l=function(t,r){return e.loadBlobAsText(t).then(function(e){return u({html:e,baseUrl:r.url,width:r.width,height:r.height,hover:r.hover,active:r.active,focus:r.focus,target:r.target})})},d=function(t,r){return e.loadBlobAsDataURI(t).then(e.getImageForUrl).then(function(e){return{image:e,errors:[]}},function(){return l(t,r)})};return o.render=function(t){return i().execute(function(){return e.loadAsBlob(t.url).then(function(e){return d(e,t)})})},o},n.indexeddbstorage=function(t){"use strict";var r={},n=function(e){e.createObjectStore("references",{keyPath:"testCase"})},o=function(){var t=e.defer(),r=indexedDB.open("csscritic",1);return r.onsuccess=function(e){var r=e.target.result;t.resolve(r)},r.onupgradeneeded=function(e){var t=e.target.result;n(t)},t.promise},a=function(e){var r=t.excludeKeys(e,"url"),n=t.serializeMap(r),o=e.url;return n&&(o+=","+n),o};return r.storeReferenceImage=function(r,n,i){var s,c=e.defer();s=t.getDataURIForImage(n);var u=a(r);return o().then(function(e){var t=e.transaction(["references"],"readwrite").objectStore("references").put({testCase:u,reference:{imageUri:s,viewport:i}});t.onsuccess=function(){e.close(),c.resolve()}}),c.promise},r.readReferenceImage=function(r){var n=e.defer(),i=a(r);return o().then(function(e){var r=e.transaction(["references"]).objectStore("references").get(i);r.onsuccess=function(){if(e.close(),void 0===r.result||void 0===r.result.reference||void 0===r.result.reference.imageUri)return void n.reject();var o=r.result.reference;t.getImageForUrl(o.imageUri).then(function(e){var t=o.viewport||{width:e.width,height:e.height};n.resolve({image:e,viewport:t})},n.reject)}}),n.promise},r},n.jobQueue=function(){"use strict";var t={},r=[],n=!1,o=function(e){var t=e.func();return e.resolve(t),t},a=function(){var e;r.length>0?(n=!0,e=r.shift(),o(e).then(a,a)):n=!1},i=function(t){var r=e.defer();return{func:t,resolve:r.resolve,promise:r.promise}};return t.execute=function(e){var t=i(e);return r.push(t),n||a(),t.promise},t},n.main=function(e,t,r,n,o){"use strict";var a,i={},s=[];i.component=function(e){a=e};var c=function(e){return"string"==typeof e?{url:e}:e};i.add=function(e){var t=r.clone(c(e));a&&void 0===t.component&&(t.component=a),s.push(t)};var u=function(e){return r.all(e.map(function(e){return n.readReferenceImage(e).then(function(t){return{testCase:e,referenceImage:t.image,viewport:t.viewport}},function(){return{testCase:e}})}))},l=function(e){return e.map(function(e){return{configuredComparison:e,selected:!o||o.isComparisonSelected(e)}})},d=function(e){return r.all(e.map(function(e){var r=e.selected;return t.doReportConfiguredComparison(e.configuredComparison,r)}))},f=function(r){return e.compare(r).then(function(e){return t.doReportComparison(e).then(function(){return e})})};return i.execute=function(){var e,n;return u(s).then(function(t){return e=l(t),d(e)}).then(function(){var t=e.filter(function(e){return e.selected}).map(function(e){return e.configuredComparison});return r.all(t.map(f))}).then(function(e){n=r.hasTestSuitePassed(e)}).then(function(){return t.doReportTestSuite(n)}).then(function(){return n})},i},n.regression=function(e,t,r){"use strict";var n={},o=1,a=function(e,t){t&&r.diff(e,t)},i=function(e,r){return a(e,r),t.workAroundTransparencyIssueInFirefox(e)},s=function(e,t){var n;return i(e,t).then(function(e){return t?(n=r.equal(e,t,o),n?"passed":"failed"):"referenceMissing"})},c=function(e,r,n,o,a,i){var s={status:e,testCase:r,viewport:t.clone(n),renderErrors:o};return a&&(s.pageImage=a),i&&(s.referenceImage=i),s},u=function(e){return e.originalError&&e.originalError.message?e.message+": "+e.originalError.message:e.message},l=function(t,r,n){return e.render({url:t.url,hover:t.hover,active:t.active,focus:t.focus,target:t.target,width:r.width,height:r.height}).then(function(e){return s(e.image,n).then(function(o){return c(o,t,r,e.errors,e.image,n)})},function(e){var n=[];return e&&n.push(u(e)),c("error",t,r,n)})},d=function(e){var t=800,r=100;return{width:e.width||t,height:e.height||r}};return n.compare=function(e){var t=e.viewport;return void 0===e.referenceImage&&(t=d(e.testCase)),l(e.testCase,t,e.referenceImage)},n},n.reporting=function(e,t,r){"use strict";var n={},o=[];n.addReporter=function(e){o.push(e)};var a=function(e){return void 0===e.width&&void 0===e.height},i=function(r){var n,o;r.pageImage&&(n=r.viewport.width,o=r.viewport.height,a(r.testCase)&&(r.resizePageImage=function(t,a){return n=t,o=a,e.render({url:r.testCase.url,hover:r.testCase.hover,active:r.testCase.active,width:t,height:a}).then(function(e){return r.pageImage=e.image,e.image})}),r.acceptPage=function(){t.storeReferenceImage(r.testCase,r.pageImage,{width:n,height:o})})},s=function(e,t){return t?e.reportSelectedComparison:e.reportDeselectedComparison};return n.doReportConfiguredComparison=function(e,t){return r.all(o.map(function(r){var n=s(r,t);if(n)return n(e)}))},n.doReportComparison=function(e){var t=r.clone(e);return i(t),r.all(o.map(function(e){if(e.reportComparison)return e.reportComparison(t)}))},n.doReportTestSuite=function(e){return r.all(o.map(function(t){if(t.reportTestSuite)return t.reportTestSuite({success:e})}))},n},n.util=function(){"use strict";var t={};t.getDataURIForImage=function(e){var t=window.document.createElement("canvas"),r=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,r.drawImage(e,0,0),t.toDataURL("image/png")},t.getImageForUrl=function(t){var r=e.defer(),n=new window.Image;return n.onload=function(){r.resolve(n)},n.onerror=function(){r.reject()},n.src=t,r.promise};var r=function(e){var t;return t=e.indexOf("?")<0?"?":"&",e+t+"_="+Date.now()};t.ajax=function(t){var n=e.defer(),o=new XMLHttpRequest;o.onload=function(){200===o.status||0===o.status?n.resolve(o.response):n.reject()},o.onerror=function(){n.reject()};try{o.open("get",r(t),!0),o.send()}catch(e){n.reject()}return n.promise},t.loadAsBlob=function(t){var n=e.defer(),o=new XMLHttpRequest;o.onload=function(){200===o.status||0===o.status?n.resolve(o.response):n.reject(new Error(o.statusText))},o.onerror=function(e){n.reject(e)};try{o.open("get",r(t),!0),o.responseType="blob",o.send()}catch(e){n.reject(e)}return n.promise},t.loadBlobAsText=function(t){var r=e.defer(),n=new FileReader;return n.onload=function(e){r.resolve(e.target.result)},n.onerror=function(){r.reject()},n.readAsText(t),r.promise},t.loadBlobAsDataURI=function(t){var r=e.defer(),n=new FileReader;return n.onload=function(e){r.resolve(e.target.result)},n.onerror=function(){r.reject()},n.readAsDataURL(t),r.promise},t.excludeKeys=function(e){var t=Array.prototype.slice.call(arguments,1),r={};return Object.keys(e).forEach(function(n){t.indexOf(n)===-1&&(r[n]=e[n])}),r},t.serializeMap=function(e){var t=[],r=Object.keys(e);return r.sort(),r.forEach(function(r){t.push(r+"="+e[r])}),t.join(",")},t.clone=function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r};var n=function(t){var r=e.defer();return r.resolve(t),r.promise};return t.workAroundTransparencyIssueInFirefox=function(e){var r;try{r=t.getDataURIForImage(e)}catch(t){return n(e)}return t.getImageForUrl(r)},t.hasTestSuitePassed=function(e){var t=e.filter(function(e){return"passed"!==e.status}),r=0===t.length,n=e.length>0;return n&&r},t.all=function(t){var r=e.defer(),n=t.length,o=[],a=function(e,t){n-=1,o[t]=e,0===n&&r.resolve(o)};return 0===t.length?(r.resolve([]),r.promise):(t.forEach(function(e,t){e&&e.then?e.then(function(e){a(e,t)},function(e){r.reject(e)}):a(e,t)}),r.promise)},t},n.fallbackFilter=function(e){"use strict";var t={},r="csscriticFallbackFilter",n=function(e){return e.component?e.component+" "+e.desc:e.desc};return t.isComparisonSelected=function(e){var t=sessionStorage.getItem(r);return!t||(!(!e.testCase.desc||n(e.testCase)!==t)||(!(!e.testCase.component||e.testCase.component!==t)||(!t||e.testCase.url===t)))},t.filterFor=function(t){var o;o=t.desc?n(t):t.url,sessionStorage.setItem(r,o),e.reload()},t.filterForComponent=function(t){sessionStorage.setItem(r,t),e.reload()},t.clearFilter=function(){sessionStorage.removeItem(r),e.reload()},t},n.niceReporter=function(e,r,n,o,a,i){"use strict";var s,c={},u=function(e){return e.toString().replace(/&/g,"&amp;").replace(new RegExp("<"),"&lt;","g").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},l=function(e,t){return e.replace(/\{\{(\w+)\}\}/g,function(e,r){var n=void 0!==t[r]?t[r]:"";return u(n)})},d=function(e){var t=document.createElement("body");return t.insertAdjacentHTML("beforeend",e),t.firstChild},f=function(e,t){return e.querySelector("."+t)},p=function(e){return e.replace(/ /g,"_")},m="header",g="timeTaken",h="progressBar",v="statusText",C="optional",w=function(e){var t=e.getBoundingClientRect(),r=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft;return{top:t.top+r,left:t.left+n,right:t.right-t.width+n,height:t.height}},y=function(e){return e+"px"},b=function(t){var r,n="scrolling",o="small",a=50,i=!1,s=!1,c=document.createElement("div");e.addEventListener("scroll",function(){e.scrollY>0?(i||(i=!0,r=w(t),t.classList.add(n),t.style.position="fixed",t.style.top=y(r.top),t.style.left=y(r.left),t.style.right=y(r.right),c.style.height=y(r.height),t.parentElement.insertBefore(c,t)),!s&&e.scrollY>a?(s=!0,t.classList.add(o)):s&&e.scrollY<=a&&(s=!1,t.classList.remove(o))):i&&(i=!1,t.classList.remove(n),t.classList.remove(o),t.style.position="",t.style.top="",t.style.left="",t.style.right="",t.parentElement.removeChild(c))})},I=function(e){var t=d(l('<header class="{{headerClassName}}"><span class="{{timeTakenClassName}}"></span><a href="http://cburgmer.github.io/csscritic/" class="cssCriticVersion">CSS Critic {{packageVersion}}</a><ul class="{{progressBarClassName}}"></ul><div class="{{headerOptionalClassName}}"><div class="{{statusTextClassName}}" class="statusText"></div></div></header>',{headerClassName:m,timeTakenClassName:g,progressBarClassName:h,headerOptionalClassName:C,statusTextClassName:v,packageVersion:i}));b(t),e.appendChild(t)},k=function(e){var t=d('<div class="cssCriticNiceReporter"></div>');return I(t),e.appendChild(t),t},x=function(e,t){void 0===s&&(s=document.title),document.title="("+t+"/"+e+") "+s},S=function(e,t){for(e+="";e.length<t;)e="0"+e;return e},T=function(e){var t=Math.floor(e/1e3),r=e%1e3;return t+"."+S(r,3)},L=function(e,t){var r=f(e,g);r.textContent="finished in "+T(t)+"s"},R=function(e,t){var r=f(e,m);r.classList.add(t?"pass":"fail")},F=function(e){var t="tocParent",r=e.querySelector("."+t);return r||(r=d(l('<div class="{{className}}"><ul class="toc"></ul></div>',{className:t})),e.querySelector("."+C).appendChild(r)),r.querySelector("ul")},U=function(e,t,r){var n=F(e),a=d(l('<li class="tocEntry"><a href="#{{linkTarget}}">{{headline}}</a></li>',{linkTarget:p(r),headline:t}));o&&o.install(a.querySelector("a")),n.appendChild(a)},N=function(e,t){n.filterForComponent&&(e.onclick=function(e){n.filterForComponent(t),e.preventDefault()})},E=function(e,t){var r=n.filterUrlForComponent?n.filterUrlForComponent(t):"#",o=d(l('<h2 class="componentLabel"><a href="{{filterUrl}}">{{headline}}</a></h2>',{headline:t,filterUrl:r}));N(o,t),e.appendChild(o)},j=function(e){var t=r.excludeKeys(e,"url"),n=r.serializeMap(t),o=e.url;return n?o+","+n:o},q="running",A="referenceImageContainer",D="errorText",M=function(e){var t=d('<div class="imageWrapper"></div>');return t.appendChild(e),t},H=function(e){return"string"==typeof e?"'"+e+"'":e},B=function(e){var t=r.excludeKeys(e,"url","desc","component"),n=Object.keys(t);return n.length?(n.sort(),'<dl class="parameters">'+n.map(function(e){return l("<dt>{{key}}</dt><dd>{{value}}</dd>",{key:e,value:H(t[e])})}).join("\n")+"</dl>"):""},P=function(e,t){n.filterFor&&(e.onclick=function(e){n.filterFor(t),e.preventDefault()})},O=function(e,t,r,o){var a="titleLink",i=n.filterUrlFor?n.filterUrlFor(t):"#",s=d(l('<section class="comparison {{runningComparisonClassName}}"><h3 class="title"><a class="{{titleLinkClassName}}" href="{{filterUrl}}">{{title}}</a> <a class="externalLink" href="{{url}}"></a>'+B(t)+'</h3><div class="{{errorContainerClassName}}"></div><div><div class="{{referenceImageContainerClassName}}"></div></div></section>',{url:t.url,title:t.desc?t.desc:t.url,filterUrl:i,runningComparisonClassName:q,errorContainerClassName:D,referenceImageContainerClassName:A,titleLinkClassName:a})),c=d(l('<span class="fixedHeaderAnchorTarget" id="{{id}}"></span>',{id:p(o)})),u=s.querySelector("."+A),f=s.querySelector("."+a);return r&&u.appendChild(M(r)),P(f,t),e.appendChild(c),e.appendChild(s),s},V=function(e){var t,r=document.createElement("canvas");return r.height=e.height,r.width=e.width,t=r.getContext("2d"),t.putImageData(e,0,0),r},z=function(e,r){return t.diff(e,r,{align:"top"})},W=function(e){var t,r=e.data;for(t=0;t<r.length;t+=4)0===r[t]&&0===r[t+1]&&0===r[t+2]?r[t+3]=0:(r[t]=0,r[t+1]=0,r[t+2]=255,r[t+3]=255);return e},K=function(e,t){var r=z(e,t),n=V(W(r));return n.classList.add("diff"),n},Q=function(e){var t,r=document.createElement("canvas"),n=e.naturalWidth,o=e.naturalHeight;return r.width=n,r.height=o,t=r.getContext("2d"),t.drawImage(e,0,0,n,o),r.style.width=n+"px",r.style.height=o+"px",r},Y=function(e,t,r){var n=r.querySelector("."+A);n.appendChild(K(e,t))},_="toggleView",J="accept",X=function(e){var t=e.querySelector("."+J);t.setAttribute("disabled","disabled"),t.textContent="✓",e.classList.add("accepted")},G=function(e,t){var r=d(l('<button class="{{acceptClassName}}"><span>Accept</span></button>',{acceptClassName:J}));return r.onclick=function(){e(),X(t)},r},Z=function(e,t){var r=document.createElement("iframe");return r.width=e.width,r.height=e.height,r.src=t,r.scrolling="no",r},$=function(e,t,r,n,o){n.innerHTML="",r?(n.appendChild(M(Z(e,t))),o.classList.add("realView")):(n.appendChild(M(e)),o.classList.remove("realView"))},ee=function(e,t,r,n){var o,a="pageImageContainer",i=d(l('<div class="outerPageImageContainer"><div class="{{pageImageContainerClassName}}"></div><button class="{{toggleViewClassName}}" title="Toggle DOM view"></button></div>',{pageImageContainerClassName:a,toggleViewClassName:_})),s=i.querySelector("."+a),c=i.querySelector("."+_),u=!1,f=!1;return t&&(o=G(function(){f=!0,t()},n),i.appendChild(o)),$(e,r,u,s,n),c.onclick=function(){u=!u,$(e,r,u,s,n),t&&(u?o.setAttribute("disabled","disabled"):f||o.removeAttribute("disabled"))},i},te=function(e,t,r,n,o){Y(t,e,o),o.appendChild(ee(Q(e),r,n,o))},re=function(e,t,r,n){n.appendChild(ee(Q(e),t,r,n))},ne='Make sure the path lies within the <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">same origin</a> as this document.',oe=function(e,t){var r=d(l('<span>The page "{{url}}" could not be rendered. </span>',{url:e})),n=t.querySelector("."+D);n.appendChild(r)},ae=function(e,t){var r=d(l("<span>Had the following errors rendering the page:<ul></ul>"+ne+"</span>")),n=r.querySelector("ul"),o=t.querySelector("."+D);e.map(function(e){return d(l("<li>{{msg}}</li>",{msg:e}))}).forEach(function(e){n.appendChild(e)}),o.appendChild(r)},ie=function(e,t){t.classList.remove(q),t.classList.add(e)},se="pending",ce=function(e){var t;return e.desc?(t=e.component?e.component+" ":"",t+e.desc):j(e)},ue=function(e,t,r){var n=f(e,h),a='<li><a href="#{{linkTarget}}" title="{{title}}"></a></li>',i='<li><a title="{{title}}"></a></li>',s=r?a:i,c=d(l(s,{linkTarget:r?p(r):"",title:ce(t)}));return c.classList.add(se),n.appendChild(c),o&&o.install(c.querySelector("a")),c},le=function(e,t,r){r.classList.remove(se),r.classList.add(e),t>0&&r.classList.add("hasRenderErrors")},de=function(e,t,r){return 1===e?t:r},fe=function(e,t){var r="{{total}} "+de(e,"entry","entries")+", ";return t<e&&(r="{{selected}} of "+r),l("<span>"+r+"</span>",{total:e,selected:t})},pe=function(e,t,r){var n,o="{{issues}} "+de(e,"needs","need")+" some love",a="all good",i="nothing here yet",s=t===r&&0===e;return n=0===t?i:s?a:o,l("<span>"+n+"</span>",{issues:e})},me="acceptAll",ge=function(){return d(l('<button class="{{acceptAllClassName}}">... accept all (I know what I\'m doing)</button>',{acceptAllClassName:me}))},he=function(e,t){var r=f(e,v),n=r.querySelector("."+me);t.length>2&&(n.classList.add("active"),n.onclick=function(){t.forEach(function(e){e.acceptPage(),X(e.entry)}),n.setAttribute("disabled","disabled")})},ve=function(e){n.clearFilter&&(e.onclick=function(e){n.clearFilter(),e.preventDefault()})},Ce=function(e,t,r,o,a){var i=n.clearFilterUrl?n.clearFilterUrl():"#",s=d(l('<a class="runAll" href="{{url}}">Run all</a>',{url:i})),c=f(e,v);c.innerHTML="",c.appendChild(d(fe(t,r))),c.appendChild(d(pe(o,r,a))),c.appendChild(ge()),t>r&&(ve(s),c.appendChild(s))},we=function(){return a.drawHTML("<b></b>").then(function(e){var t=document.createElement("canvas"),r=t.getContext("2d");try{return r.drawImage(e.image,0,0),t.toDataURL("image/png"),!0}catch(e){return!1}})},ye=!1,be=function(e){ye||(ye=!0,we().then(function(t){t||e.appendChild(d('<div class="browserWarning">Your browser is currently not supported, as it does not support reading rendered HTML from the canvas (<a href="https://code.google.com/p/chromium/issues/detail?id=294129">Chrome #294129</a>, <a href="https://bugs.webkit.org/show_bug.cgi?id=17352">Safari #17352</a>). How about trying Firefox?</div>'))}))};return c.NiceReporter=function(e){var t,r,n,o=0,a=0,i=0,s=0,c={},u={},l=[],d=function(){return t||(t=k(e||document.body)),t},f=function(){o+=1,r||(r=Date.now()),be(d()),x(o,i),Ce(d(),o,a,s)};return{reportDeselectedComparison:function(e){f(),ue(d(),e.testCase)},reportSelectedComparison:function(e){var t=j(e.testCase);a+=1,e.testCase.component&&e.testCase.component!==n&&(n=e.testCase.component,E(d(),e.testCase.component),U(d(),e.testCase.component,t)),f();var r=ue(d(),e.testCase,t);c[t]=r;var o=O(d(),e.testCase,e.referenceImage,t);u[t]=o},reportComparison:function(e){var t=j(e.testCase),r=c[t],n=u[t];i+=1,"passed"!==e.status&&(s+=1),x(o,i),Ce(d(),o,a,s,i),le(e.status,e.renderErrors.length,r),"failed"===e.status?(te(e.pageImage,e.referenceImage,e.acceptPage,e.testCase.url,n),l.push(e)):"referenceMissing"===e.status?(re(e.pageImage,e.acceptPage,e.testCase.url,n),l.push(e)):"passed"===e.status?re(e.pageImage,void 0,e.testCase.url,n):"error"===e.status&&oe(e.testCase.url,n),e.renderErrors.length>0&&ae(e.renderErrors,n),ie(e.status,n)},reportTestSuite:function(e){var t=l.map(function(e){var t=j(e.testCase);return{acceptPage:e.acceptPage,entry:u[t]}});x(o,i),Ce(d(),o,a,s,i),L(d(),r?Date.now()-r:0),R(d(),e.success),he(d(),t)}}},c},n.pageNavigationHandlingFallback=function(){"use strict";var e={},t="fakeTarget",r=function(){var e=Array.prototype.slice.call(document.querySelectorAll("."+t));e.forEach(function(e){e.classList.remove(t)})},n=function(e){e.classList.add(t)},o=function(e){var t;r(),e?(t=document.getElementById(e),t.scrollIntoView(),n(t)):window.scrollTo(0,0)},a=!1,i=function(){a||(a=!0,window.onpopstate=function(e){o(e.state)})};return e.install=function(e){i(),e.onclick=function(e){var t=decodeURIComponent(e.target.href),r=t.substr(t.indexOf("#")+1);o(r),history.pushState(r,r),e.preventDefault()}},e},n.urlQueryFilter=function(e){"use strict";var t={},r="filter",n=function(e){var t=e.replace(/^\?/,"");return t?t.split("&").map(function(e){var t,r,n=e.indexOf("=");return n>=0?(t=e.substr(0,n),r=e.substr(n+1)):t=e,{key:t,value:r}}):[]},o=function(e){return e.value?e.key+"="+e.value:e.key},a=function(){var t=n(e.search).filter(function(e){return e.key===r}).pop();if(t)return decodeURIComponent(t.value)},i=function(e){return e.component?e.component+" "+e.desc:e.desc},s=a(),c=n(e.search);t.isComparisonSelected=function(e){return!s||(!(!e.testCase.desc||i(e.testCase)!==s)||(!(!e.testCase.component||e.testCase.component!==s)||e.testCase.url===s))};var u=function(e){var t=c.filter(function(e){return e.key!==r});return e&&t.push({key:r,value:encodeURIComponent(e)}),"?"+t.map(o).join("&")};return t.filterUrlForComponent=function(e){return u(e)},t.filterUrlFor=function(e){return u(e.desc?i(e):e.url)},t.clearFilterUrl=function(){return u()},t},n.packageVersion="2.0.0";var o=function(){"use strict";var e=function(e,t){return function(){return e.apply(null,arguments),t}},o=function(e,t){return e.substr(0,t.length)===t},a=function(){return o(window.location.href,"file://")},i=n.packageVersion||"dev",s=n.util(),c=n.indexeddbstorage(s),u=n.browserRenderer(s,n.jobQueue,r),l=n.reporting(u,c,s),d=n.regression(u,s,t),f=n.urlQueryFilter(window.location),p=n.fallbackFilter(window.location),m=a()?p:f,g=n.main(d,l,s,c,m),h=n.pageNavigationHandlingFallback(window.location),v=n.niceReporter(window,s,m,a()?h:void 0,r,i),C={};return C.add=e(g.add,C),C.component=e(g.component,C),C.execute=g.execute,C.addReporter=e(l.addReporter,C),C.NiceReporter=v.NiceReporter,C}();return o});
},{"../build/csscritic.concat.css":1,"ayepromise":3,"imagediff":17,"rasterizehtml":18}],3:[function(require,module,exports){
!function(n,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():n.ayepromise=e()}(this,function(){"use strict";var n={},e=function(){var n=!1;return function(e){return function(){n||(n=!0,e.apply(null,arguments))}}},t=function(n){var e=n&&n.then;if("object"==typeof n&&"function"==typeof e)return function(){return e.apply(n,arguments)}},r=function(e,t){var r=n.defer(),o=function(n,e){setTimeout(function(){var t;try{t=n(e)}catch(n){return void r.reject(n)}t===r.promise?r.reject(new TypeError("Cannot resolve promise with itself")):r.resolve(t)},1)},u=function(n){e&&e.call?o(e,n):r.resolve(n)},c=function(n){t&&t.call?o(t,n):r.reject(n)};return{promise:r.promise,handle:function(n,e){n===i?u(e):c(e)}}},o=0,i=1,u=2;return n.defer=function(){var n,c=o,f=[],a=function(e,t){c=e,n=t,f.forEach(function(e){e.handle(c,n)}),f=null},l=function(n){a(i,n)},p=function(n){a(u,n)},s=function(e,t){var i=r(e,t);return c===o?f.push(i):i.handle(c,n),i.promise},v=function(n){var t=e();try{n(t(d),t(p))}catch(n){t(p)(n)}},d=function(n){var e;try{e=t(n)}catch(n){return void p(n)}e?v(e):l(n)},h=e();return{resolve:h(d),reject:h(p),promise:{then:s,fail:function(n){return s(null,n)}}}},n});
},{}],4:[function(require,module,exports){
"use strict";function injectStyleTag(e,t,n){var r=e.getElementById(t);if(r)n(r);else{var l=e.getElementsByTagName("head")[0];r=e.createElement("style"),null!=t&&(r.id=t),n(r),l.appendChild(r)}return r}module.exports=function(e,t,n){var r=t||document;if(r.createStyleSheet){var l=r.createStyleSheet();return l.cssText=e,l.ownerNode}return injectStyleTag(r,n,function(t){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e})},module.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=e,t.appendChild(n),n};
},{}],5:[function(require,module,exports){

},{}],6:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var f=t.write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,h===-1?0:a-h)){if(h===-1&&(h=a),a-h+1===s)return h*o}else h!==-1&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":7,"ieee754":8,"isarray":9}],7:[function(require,module,exports){
"use strict";function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p,a=o.length;n=placeHoldersCount(o),p=new Arr(3*a/4-n),t=n>0?a-4:a;var l=0;for(r=0,e=0;r<t;r+=4,e+=3)u=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],p[l++]=u>>16&255,p[l++]=u>>8&255,p[l++]=255&u;return 2===n?(u=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,p[l++]=255&u):1===n&&(u=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,p[l++]=u>>8&255,p[l++]=255&u),p}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=16383,a=0,l=e-t;a<l;a+=p)n.push(encodeChunk(o,a,a+p>l?l:a+p));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;
},{}],8:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],9:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],10:[function(require,module,exports){
(function (global){
!function(e){function o(e){throw new RangeError(T[e])}function n(e,o){for(var n=e.length,r=[];n--;)r[n]=o(e[n]);return r}function r(e,o){var r=e.split("@"),t="";r.length>1&&(t=r[0]+"@",e=r[1]),e=e.replace(S,".");var u=e.split("."),i=n(u,o).join(".");return t+i}function t(e){for(var o,n,r=[],t=0,u=e.length;t<u;)o=e.charCodeAt(t++),o>=55296&&o<=56319&&t<u?(n=e.charCodeAt(t++),56320==(64512&n)?r.push(((1023&o)<<10)+(1023&n)+65536):(r.push(o),t--)):r.push(o);return r}function u(e){return n(e,function(e){var o="";return e>65535&&(e-=65536,o+=P(e>>>10&1023|55296),e=56320|1023&e),o+=P(e)}).join("")}function i(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function f(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function c(e,o,n){var r=0;for(e=n?M(e/j):e>>1,e+=M(e/o);e>L*C>>1;r+=b)e=M(e/L);return M(r+(L+1)*e/(e+m))}function l(e){var n,r,t,f,l,s,d,a,p,h,v=[],g=e.length,w=0,m=I,j=A;for(r=e.lastIndexOf(E),r<0&&(r=0),t=0;t<r;++t)e.charCodeAt(t)>=128&&o("not-basic"),v.push(e.charCodeAt(t));for(f=r>0?r+1:0;f<g;){for(l=w,s=1,d=b;f>=g&&o("invalid-input"),a=i(e.charCodeAt(f++)),(a>=b||a>M((x-w)/s))&&o("overflow"),w+=a*s,p=d<=j?y:d>=j+C?C:d-j,!(a<p);d+=b)h=b-p,s>M(x/h)&&o("overflow"),s*=h;n=v.length+1,j=c(w-l,n,0==l),M(w/n)>x-m&&o("overflow"),m+=M(w/n),w%=n,v.splice(w++,0,m)}return u(v)}function s(e){var n,r,u,i,l,s,d,a,p,h,v,g,w,m,j,F=[];for(e=t(e),g=e.length,n=I,r=0,l=A,s=0;s<g;++s)v=e[s],v<128&&F.push(P(v));for(u=i=F.length,i&&F.push(E);u<g;){for(d=x,s=0;s<g;++s)v=e[s],v>=n&&v<d&&(d=v);for(w=u+1,d-n>M((x-r)/w)&&o("overflow"),r+=(d-n)*w,n=d,s=0;s<g;++s)if(v=e[s],v<n&&++r>x&&o("overflow"),v==n){for(a=r,p=b;h=p<=l?y:p>=l+C?C:p-l,!(a<h);p+=b)j=a-h,m=b-h,F.push(P(f(h+j%m,0))),a=M(j/m);F.push(P(f(a,0))),l=c(r,w,u==i),r=0,++u}++r,++n}return F.join("")}function d(e){return r(e,function(e){return F.test(e)?l(e.slice(4).toLowerCase()):e})}function a(e){return r(e,function(e){return O.test(e)?"xn--"+s(e):e})}var p="object"==typeof exports&&exports&&!exports.nodeType&&exports,h="object"==typeof module&&module&&!module.nodeType&&module,v="object"==typeof global&&global;v.global!==v&&v.window!==v&&v.self!==v||(e=v);var g,w,x=2147483647,b=36,y=1,C=26,m=38,j=700,A=72,I=128,E="-",F=/^xn--/,O=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=b-y,M=Math.floor,P=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:t,encode:u},decode:l,encode:s,toASCII:a,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(p&&h)if(module.exports==p)h.exports=g;else for(w in g)g.hasOwnProperty(w)&&(p[w]=g[w]);else e.punycode=g}(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],11:[function(require,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],12:[function(require,module,exports){
"use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};
},{}],13:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":11,"./encode":12}],14:[function(require,module,exports){
"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}var punycode=require("punycode"),util=require("./util");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=h!==-1&&h<t.indexOf("#")?"?":"#",a=t.split(r),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(r);var n=t;if(n=n.trim(),!e&&1===t.split("#").length){var i=simplePathPattern.exec(n);if(i)return this.path=n,this.href=n,this.pathname=i[1],i[2]?(this.search=i[2],s?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):s&&(this.search="",this.query={}),this}var l=protocolPattern.exec(n);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,n=n.substr(l.length)}if(e||l||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===n.substr(0,2);!p||l&&hostlessProtocol[l]||(n=n.substr(2),this.slashes=!0)}if(!hostlessProtocol[l]&&(p||l&&!slashedProtocol[l])){for(var c=-1,f=0;f<hostEndingChars.length;f++){var m=n.indexOf(hostEndingChars[f]);m!==-1&&(c===-1||m<c)&&(c=m)}var v,g;g=c===-1?n.lastIndexOf("@"):n.lastIndexOf("@",c),g!==-1&&(v=n.slice(0,g),n=n.slice(g+1),this.auth=decodeURIComponent(v)),c=-1;for(var f=0;f<nonHostChars.length;f++){var m=n.indexOf(nonHostChars[f]);m!==-1&&(c===-1||m<c)&&(c=m)}c===-1&&(c=n.length),this.host=n.slice(0,c),n=n.slice(c),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var P=this.hostname.split(/\./),f=0,d=P.length;f<d;f++){var q=P[f];if(q&&!q.match(hostnamePartPattern)){for(var b="",O=0,j=q.length;O<j;O++)b+=q.charCodeAt(O)>127?"x":q[O];if(!b.match(hostnamePartPattern)){var x=P.slice(0,f),U=P.slice(f+1),C=q.match(hostnamePartStart);C&&(x.push(C[1]),U.unshift(C[2])),U.length&&(n="/"+U.join(".")+n),this.hostname=x.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=punycode.toASCII(this.hostname));var A=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+A,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!unsafeProtocol[u])for(var f=0,d=autoEscape.length;f<d;f++){var E=autoEscape[f];if(n.indexOf(E)!==-1){var I=encodeURIComponent(E);I===E&&(I=escape(E)),n=n.split(E).join(I)}}var R=n.indexOf("#");R!==-1&&(this.hash=n.substr(R),n=n.slice(0,R));var S=n.indexOf("?");if(S!==-1?(this.search=n.substr(S),this.query=n.substr(S+1),s&&(this.query=querystring.parse(this.query)),n=n.slice(0,S)):s&&(this.search="",this.query={}),n&&(this.pathname=n),slashedProtocol[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",k=this.search||"";this.path=A+k}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&r!==!1?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),s+r+e+o+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||v||e.host&&t.pathname,P=y,d=e.pathname&&e.pathname.split("/")||[],c=t.pathname&&t.pathname.split("/")||[],q=e.protocol&&!slashedProtocol[e.protocol];if(q&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),y=y&&(""===c[0]||""===d[0])),g)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=c;else if(c.length)d||(d=[]),d.pop(),d=d.concat(c),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(q){e.hostname=e.host=d.shift();var b=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");b&&(e.auth=b.shift(),e.host=e.hostname=b.shift())}return e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var O=d.slice(-1)[0],j=(e.host||t.host||d.length>1)&&("."===O||".."===O)||""===O,x=0,U=d.length;U>=0;U--)O=d[U],"."===O?d.splice(U,1):".."===O?(d.splice(U,1),x++):x&&(d.splice(U,1),x--);if(!y&&!P)for(;x--;x)d.unshift("..");!y||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),j&&"/"!==d.join("/").substr(-1)&&d.push("");var C=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(q){e.hostname=e.host=C?"":d.length?d.shift():"";var b=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");b&&(e.auth=b.shift(),e.host=e.hostname=b.shift())}return y=y||e.host&&d.length,y&&!C&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"./util":15,"punycode":10,"querystring":13}],15:[function(require,module,exports){
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}],16:[function(require,module,exports){
"use strict";module.exports=function(){return document.createElement("canvas")};
},{}],17:[function(require,module,exports){
(function (Buffer){
!function(t,e){var a=this;if("undefined"!=typeof module){try{var n=require("canvas")}catch(t){throw new Error(t.message+"\nPlease see https://github.com/HumbleSoftware/js-imagediff#cannot-find-module-canvas\n")}module.exports=e(a,t,n)}else"function"==typeof define&&"object"==typeof define.amd?define(e):a[t]=e(a,t)}("imagediff",function(t,e,a){function n(t,e){var n=a?new a:document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n}function i(t,e){return F.width=t,F.height=e,P.clearRect(0,0,t,e),P.createImageData(t,e)}function r(){return a}function o(t){return c(t,L)}function h(t){return c(t,R)}function u(t){return c(t,H)}function f(t){return!(!t||!c(t,S)||typeof t.width===B||typeof t.height===B||typeof t.data===B)}function d(t){return o(t)||h(t)||u(t)||f(t)}function c(t,e){return"object"==typeof t&&!!Object.prototype.toString.apply(t).match(e)}function g(t){var e,a,n,i=t.height,r=t.width,o=t.data;for(F.width=r,F.height=i,e=P.getImageData(0,0,r,i),a=e.data,n=t.data.length;n--;)a[n]=o[n];return e}function s(t){return o(t)?l(t):h(t)?m(t):u(t)?v(t):f(t)?t:void 0}function l(t){var e=t.height,a=t.width;return F.width=a,F.height=e,P.clearRect(0,0,a,e),P.drawImage(t,0,0),P.getImageData(0,0,a,e)}function m(t){var e=t.height,a=t.width,n=t.getContext("2d");return n.getImageData(0,0,a,e)}function v(t){var e=t.canvas,a=e.height,n=e.width;return t.getImageData(0,0,n,a)}function p(t){var e=s(t),a=n(e.width,e.height),i=a.getContext("2d");return i.putImageData(e,0,0),a}function w(t,e){return t.width===e.width}function b(t,e){return t.height===e.height}function I(t,e){return b(t,e)&&w(t,e)}function C(t,e,a){var n,i=t.data,r=e.data,o=i.length;if(a=a||0,!I(t,e))return!1;for(n=o;n--;)if(i[n]!==r[n]&&Math.abs(i[n]-r[n])>a)return!1;return!0}function y(t,e,a){return(I(t,e)?D:M)(t,e,a)}function D(t,e,a){var n,r=t.height,o=t.width,h=i(o,r),u=t.data,f=e.data,d=h.data,c=d.length;for(n=0;n<c;n+=4)d[n]=Math.abs(u[n]-f[n]),d[n+1]=Math.abs(u[n+1]-f[n+1]),d[n+2]=Math.abs(u[n+2]-f[n+2]),d[n+3]=Math.abs(255-Math.abs(u[n+3]-f[n+3]));return h}function M(t,e,a){function n(t){"top"===p?(r=0,o=0):(r=Math.floor((c-t.height)/2),o=Math.floor((g-t.width)/2))}var r,o,h,u,f,d,c=Math.max(t.height,e.height),g=Math.max(t.width,e.width),s=i(g,c),l=t.data,m=e.data,v=s.data,p=a&&a.align;for(f=v.length-1;f>0;f-=4)v[f]=255;for(n(t),h=t.height;h--;)for(u=t.width;u--;)f=4*((h+r)*g+(u+o)),d=4*(h*t.width+u),v[f+0]=l[d+0],v[f+1]=l[d+1],v[f+2]=l[d+2];for(n(e),h=e.height;h--;)for(u=e.width;u--;)f=4*((h+r)*g+(u+o)),d=4*(h*e.width+u),v[f+0]=Math.abs(v[f+0]-m[d+0]),v[f+1]=Math.abs(v[f+1]-m[d+1]),v[f+2]=Math.abs(v[f+2]-m[d+2]);return s}function x(){var t;for(t=0;t<arguments.length;t++)if(!d(arguments[t]))throw{name:"ImageTypeError",message:"Submitted object was not an image."}}function j(t,e){return t=document.createElement(t),t&&e&&(t.innerHTML=e),t}function E(t,e,a){var n,i,r=p(t);a=a||Function,n=r.toDataURL().replace(/^data:image\/\w+;base64,/,""),i=new Buffer(n,"base64"),require("fs").writeFile(e,i,a)}var q,T,R=/\[object (Canvas|HTMLCanvasElement)\]/i,H=/\[object CanvasRenderingContext2D\]/i,L=/\[object (Image|HTMLImageElement)\]/i,S=/\[object ImageData\]/i,B="undefined",F=n(),P=F.getContext("2d"),A=t[e];return T={toBeImageData:function(){return q.isImageData(this.actual)},toImageDiffEqual:function(t,e){return typeof document!==B&&(this.message=function(){var e,a=j("div"),i=j("div","<div>Actual:</div>"),r=j("div","<div>Expected:</div>"),o=j("div","<div>Diff:</div>"),h=q.diff(this.actual,t),u=n();return u.height=h.height,u.width=h.width,a.style.overflow="hidden",i.style.float="left",r.style.float="left",o.style.float="left",e=u.getContext("2d"),e.putImageData(h,0,0),i.appendChild(p(this.actual)),r.appendChild(p(t)),o.appendChild(u),a.appendChild(i),a.appendChild(r),a.appendChild(o),[a,"Expected not to be equal."]}),q.equal(this.actual,t,e)}},q={createCanvas:n,createImageData:i,getCanvasRef:r,isImage:o,isCanvas:h,isContext:u,isImageData:f,isImageType:d,toImageData:function(t){return x(t),f(t)?g(t):s(t)},equal:function(t,e,a){return x(t,e),t=s(t),e=s(e),C(t,e,a)},diff:function(t,e,a){return x(t,e),t=s(t),e=s(e),y(t,e,a)},jasmine:T,noConflict:function(){return t[e]=A,q}},"undefined"!=typeof module&&(q.imageDataToPNG=E),q});
}).call(this,require("buffer").Buffer)

},{"buffer":6,"canvas":16,"fs":5}],18:[function(require,module,exports){
!function(e,t){"function"==typeof define&&define.amd?define(["url","css-mediaquery","xmlserializer","sane-domparser-error","ayepromise","inlineresources"],function(n,r,o,i,u,c){return e.rasterizeHTML=t(n,r,o,i,u,c)}):"object"==typeof exports?module.exports=t(require("url"),require("css-mediaquery"),require("xmlserializer"),require("sane-domparser-error"),require("ayepromise"),require("inlineresources")):e.rasterizeHTML=t(e.url,e.cssMediaQuery,e.xmlserializer,e.sanedomparsererror,e.ayepromise,e.inlineresources)}(this,function(e,t,n,r,o,i){var u=function(e){"use strict";var t={},n=[];t.joinUrl=function(t,n){return t?e.resolve(t,n):n},t.getConstantUniqueIdFor=function(e){return n.indexOf(e)<0&&n.push(e),n.indexOf(e)},t.clone=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n};var r=function(e){return"object"==typeof e&&null!==e},o=function(e){return r(e)&&Object.prototype.toString.apply(e).match(/\[object (Canvas|HTMLCanvasElement)\]/i)};return t.parseOptionalParameters=function(e){var n={canvas:null,options:{}};return null==e[0]||o(e[0])?(n.canvas=e[0]||null,n.options=t.clone(e[1])):n.options=t.clone(e[0]),n},t}(e),c=function(e,t){"use strict";var n={},r=function(e,t,n){var r=e[t];return e[t]=function(){var e=Array.prototype.slice.call(arguments);return n.apply(this,[e,r])},r};return n.baseUrlRespectingXhr=function(t,n){var o=function(){var o=new t;return r(o,"open",function(t,r){var o=t.shift(),i=t.shift(),u=e.joinUrl(n,i);return r.apply(this,[o,u].concat(t))}),o};return o},n.finishNotifyingXhr=function(e){var n=0,o=0,i=!1,u=t.defer(),c=function(){var e=n-o;e<=0&&i&&u.resolve({totalCount:n})},a=function(){var t=new e;return r(t,"send",function(e,t){return n+=1,t.apply(this,arguments)}),t.addEventListener("load",function(){o+=1,c()}),t};return a.waitForRequestsToFinish=function(){return i=!0,c(),u.promise},a},n}(u,o),a=function(){"use strict";var e={},t=function(e){return Array.prototype.slice.call(e)};e.addClassName=function(e,t){e.className+=" "+t},e.addClassNameRecursively=function(t,n){e.addClassName(t,n),t.parentNode!==t.ownerDocument&&e.addClassNameRecursively(t.parentNode,n)};var n=function(e,n){var r=e.parentStyleSheet,o=t(r.cssRules).indexOf(e);r.insertRule(n,o+1),r.deleteRule(o)},r=function(e,t){var r=e.cssText.replace(/^[^\{]+/,""),o=t+" "+r;n(e,o)},o=function(e){return t(e).reduce(function(e,t){return e+t.cssText},"")},i=function(e){e.textContent=o(e.sheet.cssRules)},u=function(e){var t=document.implementation.createHTMLDocument(""),n=document.createElement("style");n.textContent=e.textContent,t.body.appendChild(n),e.sheet=n.sheet},c=function(e){return"((?:^|[^.#:\\w])|(?=\\W))("+e.join("|")+")(?=\\W|$)"},a=function(e,n,o){var a=c(n);t(e.querySelectorAll("style")).forEach(function(e){"undefined"==typeof e.sheet&&u(e);var n=t(e.sheet.cssRules).filter(function(e){return e.selectorText&&new RegExp(a,"i").test(e.selectorText)});n.length&&(n.forEach(function(e){var t=e.selectorText.replace(new RegExp(a,"gi"),function(e,t,n){return t+o(n)});t!==e.selectorText&&r(e,t)}),i(e))})};return e.rewriteCssSelectorWith=function(e,t,n){a(e,[t],function(){return n})},e.lowercaseCssTypeSelectors=function(e,t){a(e,t,function(e){return e.toLowerCase()})},e.findHtmlOnlyNodeNames=function(e){var t,n=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),r={},o={};do t=n.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===n.currentNode.namespaceURI?r[t]=!0:o[t]=!0;while(n.nextNode());return Object.keys(r).filter(function(e){return!o[e]})},e}(),s=function(e){"use strict";var t={},n=function(e){return Array.prototype.slice.call(e)},r={active:!0,hover:!0,focus:!1,target:!1};return t.fakeUserAction=function(t,n,o){var i=t.querySelector(n),u=":"+o,c="rasterizehtml"+o;i&&(r[o]?e.addClassNameRecursively(i,c):e.addClassName(i,c),e.rewriteCssSelectorWith(t,u,"."+c))},t.persistInputValues=function(e){var t=e.querySelectorAll("input"),r=e.querySelectorAll("textarea"),o=function(e){return"checkbox"===e.type||"radio"===e.type};n(t).filter(o).forEach(function(e){e.checked?e.setAttribute("checked",""):e.removeAttribute("checked")}),n(t).filter(function(e){return!o(e)}).forEach(function(e){e.setAttribute("value",e.value)}),n(r).forEach(function(e){e.textContent=e.value})},t.rewriteTagNameSelectorsToLowerCase=function(t){e.lowercaseCssTypeSelectors(t,e.findHtmlOnlyNodeNames(t))},t}(a),l=function(e){"use strict";var t,n={},r=function(){var e='<svg id="svg" xmlns="http://www.w3.org/2000/svg" width="10" height="10"><style>@media (max-width: 1em) { svg { background: #00f; } }</style></svg>',t="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("img");return n.src=t,n},i=function(e,t,n,r){var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var i,u=o.getContext("2d");return u.drawImage(e,0,0),i=u.getImageData(0,0,1,1).data,i[0]===t&&i[1]===n&&i[2]===r},u=function(){var e=r(),t=o.defer();return document.querySelector("body").appendChild(e),e.onload=function(){document.querySelector("body").removeChild(e);try{t.resolve(!i(e,0,0,255))}catch(e){t.resolve(!0)}},e.onerror=function(){t.reject()},t.promise};n.needsEmWorkaround=function(){return void 0===t&&(t=u()),t};var c=function(e){return Array.prototype.slice.call(e)},a=function(e){return c(e).map(function(e){return e.cssText}).join("\n")},s=function(e,t){return"@media "+e+"{"+a(t)+"}"},l=function(e,t,n){try{e.insertRule(n,t+1)}catch(e){return}e.deleteRule(t)},f=function(e,t){var n=e.parentStyleSheet,r=c(n.cssRules).indexOf(e);l(n,r,t)},d=function(e){e.textContent=a(e.sheet.cssRules)},m=function(e){var t=e.modifier?e.modifier+"-"+e.feature:e.feature;return e.value?"("+t+": "+e.value+")":"("+t+")"},h=function(e){var t=[];return e.inverse&&t.push("not"),t.push(e.type),e.expressions.length>0&&t.push("and "+e.expressions.map(m).join(" and ")),t.join(" ")};n.serializeQuery=function(e){var t=e.map(h);return t.join(", ")};var v=function(e){return 16*e},p=function(e){var t=/^((?:\d+\.)?\d+)em/.exec(e);return t?v(parseFloat(t[1]))+"px":e},g=function(t){var r=e.parse(t),o=!1;if(r.forEach(function(e){e.expressions.forEach(function(e){var t=p(e.value);o|=t!==e.value,e.value=t})}),o)return n.serializeQuery(r)},y=function(e){var t=!1;return e.forEach(function(e){var n=g(e.media.mediaText);n&&f(e,s(n,e.cssRules)),t|=!!n}),t};return n.workAroundWebKitEmSizeIssue=function(e){var t=e.querySelectorAll("style");c(t).forEach(function(e){var t=c(e.sheet.cssRules).filter(function(e){return e.type===window.CSSRule.MEDIA_RULE}),n=y(t);n&&d(e)})},n}(t),f=function(e,t,n,r,o){"use strict";var i={},u=function(e,t,n,r){var o=e.createElement(t);return o.style.visibility="hidden",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",o.style.top=-1e4-r+"px",o.style.left=-1e4-n+"px",e.getElementsByTagName("body")[0].appendChild(o),o};i.executeJavascript=function(e,r){var i=u(o.document,"iframe",r.width,r.height),c=e.outerHTML,a=[],s=n.defer(),l=r.executeJsTimeout||0,f=function(){var e=i.contentDocument;o.document.getElementsByTagName("body")[0].removeChild(i),s.resolve({document:e,errors:a})},d=function(){var e=n.defer();return l>0?setTimeout(e.resolve,l):e.resolve(),e.promise},m=i.contentWindow.XMLHttpRequest,h=t.finishNotifyingXhr(m),v=t.baseUrlRespectingXhr(h,r.baseUrl);return i.onload=function(){d().then(h.waitForRequestsToFinish).then(f)},i.contentDocument.open(),i.contentWindow.XMLHttpRequest=v,i.contentWindow.onerror=function(e){a.push({resourceType:"scriptExecution",msg:e})},i.contentDocument.write("<!DOCTYPE html>"),i.contentDocument.write(c),i.contentDocument.close(),s.promise};var c=function(e,t,n){var r=e.createElement("iframe");return r.style.width=t+"px",r.style.height=n+"px",r.style.visibility="hidden",r.style.position="absolute",r.style.top=-1e4-n+"px",r.style.left=-1e4-t+"px",r.sandbox="allow-same-origin",r.scrolling="no",r},a=function(e,t,n){var r=Math.floor(e/n),i=Math.floor(t/n);return c(o.document,r,i)},s=function(e,t,n,r){return{width:Math.max(e.width*r,t),height:Math.max(e.height*r,n)}},l=function(e,t){var n=e.querySelector(t);if(n)return n;if(e.ownerDocument.querySelector(t)===e)return e;throw{message:"Clipping selector not found"}},f=function(e,t,n,r,i){var u,c,a,f,d,m,h,v,p=Math.max(e.scrollWidth,e.clientWidth),g=Math.max(e.scrollHeight,e.clientHeight);return t?(m=l(e,t),h=m.getBoundingClientRect(),u=h.top,c=h.left,a=h.width,f=h.height):(u=0,c=0,a=p,f=g),v=s({width:a,height:f},n,r,i),d=o.getComputedStyle(e.ownerDocument.documentElement).fontSize,{left:c,top:u,width:v.width,height:v.height,viewportWidth:p,viewportHeight:g,rootFontSize:d}},d=function(e,t){var n=e.tagName;return t.querySelector(n)},m=function(e){var t=e.tagName.toLowerCase();return"html"===t||"body"===t?e.outerHTML:'<body style="margin: 0;">'+e.outerHTML+"</body>"};i.calculateDocumentContentSize=function(e,t){var r,i=n.defer(),u=t.zoom||1;return r=a(t.width,t.height,u),o.document.getElementsByTagName("body")[0].appendChild(r),r.onload=function(){var n,c=r.contentDocument;try{n=f(d(e,c),t.clip,t.width,t.height,u),i.resolve(n)}catch(e){i.reject(e)}finally{o.document.getElementsByTagName("body")[0].removeChild(r)}},r.contentDocument.open(),r.contentDocument.write("<!DOCTYPE html>"),r.contentDocument.write(m(e)),r.contentDocument.close(),i.promise},i.parseHtmlFragment=function(e){var t=o.document.implementation.createHTMLDocument("");t.documentElement.innerHTML=e;var n=t.querySelector("body").firstChild;if(!n)throw"Invalid source";return n};var h=function(e,t){var n,r,i,u,c=/<html((?:\s+[^>]*)?)>/im.exec(t),a=o.document.implementation.createHTMLDocument("");if(c)for(n="<div"+c[1]+"></div>",a.documentElement.innerHTML=n,i=a.querySelector("div"),r=0;r<i.attributes.length;r++)u=i.attributes[r],e.documentElement.setAttribute(u.name,u.value)};i.parseHTML=function(e){var t=o.document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,h(t,e),t};var v=function(e){try{return r.failOnParseError(e)}catch(e){throw{message:"Invalid source",originalError:e}}};i.validateXHTML=function(e){var t=new DOMParser,n=t.parseFromString(e,"application/xml");v(n)};var p=null,g=function(e,t){return"none"===t||"repeated"===t?(null!==p&&"repeated"===t||(p=Date.now()),e+"?_="+p):e},y=function(t,r){var o=new window.XMLHttpRequest,i=e.joinUrl(r.baseUrl,t),u=g(i,r.cache),c=n.defer(),a=function(e){c.reject({message:"Unable to load page",originalError:e})};o.addEventListener("load",function(){200===o.status||0===o.status?c.resolve(o.responseXML):a(o.statusText)},!1),o.addEventListener("error",function(e){a(e)},!1);try{o.open("GET",u,!0),o.responseType="document",o.send(null)}catch(e){a(e)}return c.promise};return i.loadDocument=function(e,t){return y(e,t).then(function(e){return v(e)})},i}(u,c,o,r,window),d=function(e,t){"use strict";var n,r={},o=function(e,t){return t?URL.createObjectURL(new Blob([e],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)},i=function(e){e instanceof Blob&&URL.revokeObjectURL(e)},u='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',c=function(t){var n=document.createElement("canvas"),r=new Image,o=e.defer();return r.onload=function(){var e=n.getContext("2d");try{e.drawImage(r,0,0),n.toDataURL("image/png"),o.resolve(!0)}catch(e){o.resolve(!1)}},r.onerror=o.reject,r.src=t,o.promise},a=function(){var e=o(u,!0);return c(e).then(function(t){return i(e),!t&&c(o(u,!1)).then(function(e){return e})},function(){return!1})},s=function(){if(t.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch(e){}return!1},l=function(){var n=e.defer();return s&&t.URL?a().then(function(e){n.resolve(!e)},function(){n.reject()}):n.resolve(!1),n.promise},f=function(){return void 0===n&&(n=l()),n},d=function(e){return f().then(function(t){return o(e,t)})};return r.renderSvg=function(t){var n,r,o=e.defer(),u=function(){r.onload=null,r.onerror=null},c=function(){n&&i(n)};return r=new Image,r.onload=function(){u(),c(),o.resolve(r)},r.onerror=function(){c(),o.reject()},d(t).then(function(e){n=e,r.src=n},o.reject),o.promise},r}(o,window),m=function(e,t,n,r,o){"use strict";var i={},u=function(e,t){var n=t||1,r={width:e.width,height:e.height,"font-size":e.rootFontSize};return 1!==n&&(r.style="transform:scale("+n+"); transform-origin: 0 0;"),r},c=function(e){var t,n,r,o;t=Math.round(e.viewportWidth),n=Math.round(e.viewportHeight),r=-e.left,o=-e.top;var i={x:r,y:o,width:t,height:n};return i},a=function(e){var t=e.style||"";e.style=t+"float: left;"},s=function(e){e.externalResourcesRequired=!0},l=function(){return'<style scoped="">html::-webkit-scrollbar { display: none; }</style>'},f=function(e){var t=Object.keys(e);return t.length?" "+t.map(function(t){return t+'="'+e[t]+'"'}).join(" "):""},d=function(e,n,r){var i=o.serializeToString(e);t.validateXHTML(i);var d=c(n);return a(d),s(d),'<svg xmlns="http://www.w3.org/2000/svg"'+f(u(n,r))+">"+l()+"<foreignObject"+f(d)+">"+i+"</foreignObject></svg>"};return i.getSvgForDocument=function(e,t,o){return n.rewriteTagNameSelectorsToLowerCase(e),r.needsEmWorkaround().then(function(n){return n&&r.workAroundWebKitEmSizeIssue(e),d(e,t,o)})},i.drawDocumentAsSvg=function(e,r){return["hover","active","focus","target"].forEach(function(t){r[t]&&n.fakeUserAction(e,r[t],t)}),t.calculateDocumentContentSize(e,r).then(function(t){return i.getSvgForDocument(e,t,r.zoom)})},i}(u,f,s,l,n),h=function(e,t,n,r,o,i){"use strict";var u={},c=function(e){return{message:"Error rendering page",originalError:e}},a=function(e){return o.renderSvg(e).then(function(t){return{image:t,svg:e}},function(e){throw c(e)})},s=function(e,t){try{t.getContext("2d").drawImage(e,0,0)}catch(e){throw c(e)}},l=function(e,t,n){return r.drawDocumentAsSvg(e,n).then(a).then(function(e){return t&&s(e.image,t),e})},f=function(e,r){return t.executeJavascript(e,r).then(function(e){var t=e.document;return n.persistInputValues(t),{document:t,errors:e.errors}})};return u.rasterize=function(t,n,r){var o;return o=e.clone(r),o.inlineScripts=r.executeJs===!0,i.inlineReferences(t,o).then(function(e){return r.executeJs?f(t,r).then(function(t){return{element:t.document.documentElement,errors:e.concat(t.errors)}}):{element:t,errors:e}}).then(function(e){return l(e.element,n,r).then(function(t){return{image:t.image,svg:t.svg,errors:e.errors}})})},u}(u,f,s,m,d,i),v=function(e,t,n){"use strict";var r={},o=function(e,t){var n=300,r=200,o=e?e.width:n,i=e?e.height:r,u=void 0!==t.width?t.width:o,c=void 0!==t.height?t.height:i;return{width:u,height:c}},i=function(t){var n,r=o(t.canvas,t.options);return n=e.clone(t.options),n.width=r.width,n.height=r.height,n};r.drawDocument=function(){var t=arguments[0],r=Array.prototype.slice.call(arguments,1),o=e.parseOptionalParameters(r),u=t.documentElement?t.documentElement:t;return n.rasterize(u,o.canvas,i(o))};var u=function(e,n,o){var i=t.parseHTML(e);return r.drawDocument(i,n,o)};r.drawHTML=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e.parseOptionalParameters(n);return u(t,r.canvas,r.options)};var c=function(t,n,r){var o=document.implementation.createHTMLDocument("");o.replaceChild(t.documentElement,o.documentElement);var i=r?e.clone(r):{};return r.baseUrl||(i.baseUrl=n),{document:o,options:i}},a=function(e,n,o){return t.loadDocument(e,o).then(function(t){var i=c(t,e,o);return r.drawDocument(i.document,n,i.options)})};return r.drawURL=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e.parseOptionalParameters(n);return a(t,r.canvas,r.options)},r}(u,f,h);return v});
},{"ayepromise":3,"css-mediaquery":19,"inlineresources":43,"sane-domparser-error":48,"url":14,"xmlserializer":49}],19:[function(require,module,exports){
"use strict";function matchQuery(e,r){return parseQuery(e).some(function(e){var t=e.inverse,a="all"===e.type||r.type===e.type;if(a&&t||!a&&!t)return!1;var s=e.expressions.every(function(e){var t=e.feature,a=e.modifier,s=e.value,c=r[t];if(!c)return!1;switch(t){case"orientation":case"scan":return c.toLowerCase()===s.toLowerCase();case"width":case"height":case"device-width":case"device-height":s=toPx(s),c=toPx(c);break;case"resolution":s=toDpi(s),c=toDpi(c);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":s=toDecimal(s),c=toDecimal(c);break;case"grid":case"color":case"color-index":case"monochrome":s=parseInt(s,10)||1,c=parseInt(c,10)||0}switch(a){case"min":return c>=s;case"max":return c<=s;default:return c===s}});return s&&!t||!s&&t})}function parseQuery(e){return e.split(",").map(function(e){e=e.trim();var r=e.match(RE_MEDIA_QUERY),t=r[1],a=r[2],s=r[3]||"",c={};return c.inverse=!!t&&"not"===t.toLowerCase(),c.type=a?a.toLowerCase():"all",s=s.match(/\([^\)]+\)/g)||[],c.expressions=s.map(function(e){var r=e.match(RE_MQ_EXPRESSION),t=r[1].toLowerCase().match(RE_MQ_FEATURE);return{modifier:t[1],feature:t[2],value:r[2]}}),c})}function toDecimal(e){var r,t=Number(e);return t||(r=e.match(/^(\d+)\s*\/\s*(\d+)$/),t=r[1]/r[2]),t}function toDpi(e){var r=parseFloat(e),t=String(e).match(RE_RESOLUTION_UNIT)[1];switch(t){case"dpcm":return r/2.54;case"dppx":return 96*r;default:return r}}function toPx(e){var r=parseFloat(e),t=String(e).match(RE_LENGTH_UNIT)[1];switch(t){case"em":return 16*r;case"rem":return 16*r;case"cm":return 96*r/2.54;case"mm":return 96*r/2.54/10;case"in":return 96*r;case"pt":return 72*r;case"pc":return 72*r/12;default:return r}}exports.match=matchQuery,exports.parse=parseQuery;var RE_MEDIA_QUERY=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,RE_MQ_EXPRESSION=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,RE_MQ_FEATURE=/^(?:(min|max)-)?(.+)/,RE_LENGTH_UNIT=/(em|rem|px|cm|mm|in|pt|pc)?$/,RE_RESOLUTION_UNIT=/(dpi|dpcm|dppx)?$/;
},{}],20:[function(require,module,exports){
module.exports=function(){function r(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function t(r,t,n,e,u,o){this.message=r,this.expected=t,this.found=n,this.offset=e,this.line=u,this.column=o,this.name="SyntaxError"}function n(r){function n(t){function n(t,n,e){var u,o;for(u=n;u<e;u++)o=r.charAt(u),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return O!==t&&(O>t&&(O=0,P={line:1,column:1,seenCR:!1}),n(P,O,t),O=t),P}function e(r){M<Q||(M>Q&&(Q=M,T=[]),T.push(r))}function u(e,u,o){function i(r){var t=1;for(r.sort(function(r,t){return r.description<t.description?-1:r.description>t.description?1:0});t<r.length;)r[t-1]===r[t]?r.splice(t,1):t++}function c(r,t){function n(r){function t(r){return r.charCodeAt(0).toString(16).toUpperCase()}return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(r){return"\\x0"+t(r)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(r){return"\\x"+t(r)}).replace(/[\u0180-\u0FFF]/g,function(r){return"\\u0"+t(r)}).replace(/[\u1080-\uFFFF]/g,function(r){return"\\u"+t(r)})}var e,u,o,i=new Array(r.length);for(o=0;o<r.length;o++)i[o]=r[o].description;return e=r.length>1?i.slice(0,-1).join(", ")+" or "+i[r.length-1]:i[0],u=t?'"'+n(t)+'"':"end of input","Expected "+e+" but "+u+" found."}var l=n(o),a=o<r.length?r.charAt(o):null;return null!==u&&i(u),new t(null!==e?e:c(u,a),u,a,o,l.line,l.column)}function o(){var r,t;return r=i(),r===v&&(r=M,t=[],t!==v&&(N=r,t=y()),r=t),r}function i(){var t,n,u,o,l,a;if(t=M,n=c(),n!==v){for(u=[],o=h();o!==v;)u.push(o),o=h();if(u!==v)if(44===r.charCodeAt(M)?(o=C,M++):(o=v,0===W&&e(F)),o!==v){for(l=[],a=h();a!==v;)l.push(a),a=h();l!==v?(a=i(),a!==v?(N=t,n=R(n,a),t=n):(M=t,t=A)):(M=t,t=A)}else M=t,t=A;else M=t,t=A}else M=t,t=A;return t===v&&(t=M,n=c(),n!==v&&(N=t,n=w(n)),t=n),t}function c(){var r;return r=l(),r===v&&(r=f()),r}function l(){var r,t,n,e;if(r=M,t=a(),t!==v){if(n=[],e=h(),e!==v)for(;e!==v;)n.push(e),e=h();else n=A;n!==v?(e=s(),e!==v?(N=r,t=E(t,e),r=t):(M=r,r=A)):(M=r,r=A)}else M=r,r=A;return r===v&&(r=M,t=a(),t!==v&&(N=r,t=b(t)),r=t),r}function a(){var t,n,u,o;return t=M,r.substr(M,4)===S?(n=S,M+=4):(n=v,0===W&&e(j)),n!==v?(u=p(),u!==v?(41===r.charCodeAt(M)?(o=q,M++):(o=v,0===W&&e(B)),o!==v?(N=t,n=U(u),t=n):(M=t,t=A)):(M=t,t=A)):(M=t,t=A),t}function s(){var t,n,u,o;return t=M,r.substr(M,7)===V?(n=V,M+=7):(n=v,0===W&&e(k)),n!==v?(u=p(),u!==v?(41===r.charCodeAt(M)?(o=q,M++):(o=v,0===W&&e(B)),o!==v?(N=t,n=U(u),t=n):(M=t,t=A)):(M=t,t=A)):(M=t,t=A),t}function f(){var t,n,u,o;return t=M,r.substr(M,6)===z?(n=z,M+=6):(n=v,0===W&&e(D)),n!==v?(u=p(),u!==v?(41===r.charCodeAt(M)?(o=q,M++):(o=v,0===W&&e(B)),o!==v?(N=t,n=G(u),t=n):(M=t,t=A)):(M=t,t=A)):(M=t,t=A),t}function p(){var t,n,u;if(t=M,n=[],H.test(r.charAt(M))?(u=r.charAt(M),M++):(u=v,0===W&&e(I)),u!==v)for(;u!==v;)n.push(u),H.test(r.charAt(M))?(u=r.charAt(M),M++):(u=v,0===W&&e(I));else n=A;return n!==v&&(N=t,n=J(n)),t=n}function h(){var t;return K.test(r.charAt(M))?(t=r.charAt(M),M++):(t=v,0===W&&e(L)),t}var d,g=arguments.length>1?arguments[1]:{},v={},x={start:o},m=o,y=function(){return[]},A=v,C=",",F={type:"literal",value:",",description:'","'},R=function(r,t){return[r].concat(t)},w=function(r){return[r]},E=function(r,t){return{url:r,format:t}},b=function(r){return{url:r}},S="url(",j={type:"literal",value:"url(",description:'"url("'},q=")",B={type:"literal",value:")",description:'")"'},U=function(r){return r},V="format(",k={type:"literal",value:"format(",description:'"format("'},z="local(",D={type:"literal",value:"local(",description:'"local("'},G=function(r){return{local:r}},H=/^[^)]/,I={type:"class",value:"[^)]",description:"[^)]"},J=function(r){return X.extractValue(r.join(""))},K=/^[ \t\r\n\f]/,L={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},M=0,N=0,O=0,P={line:1,column:1,seenCR:!1},Q=0,T=[],W=0;if("startRule"in g){if(!(g.startRule in x))throw new Error("Can't start parsing from rule \""+g.startRule+'".');m=x[g.startRule]}var X=require("../util");if(d=m(),d!==v&&M===r.length)return d;throw d!==v&&M<r.length&&e({type:"end",description:"end of input"}),u(null,T,Q)}return r(t,Error),{SyntaxError:t,parse:n}}();
},{"../util":22}],21:[function(require,module,exports){
var grammar=require("./grammar");exports.SyntaxError=function(r,t){this.message=r,this.offset=t},exports.parse=function(r){try{return grammar.parse(r)}catch(r){throw new exports.SyntaxError(r.message,r.offset)}},exports.serialize=function(r){return r.map(function(r){var t;return r.url?(t='url("'+r.url+'")',r.format&&(t+=' format("'+r.format+'")')):t='local("'+r.local+'")',t}).join(", ")};
},{"./grammar":20}],22:[function(require,module,exports){
var trimCSSWhitespace=function(t){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return t.replace(e,"$1")},unquoteString=function(t){var e=/^"(.*)"$/,r=/^'(.*)'$/;return e.test(t)?t.replace(e,"$1"):r.test(t)?t.replace(r,"$1"):t};exports.extractValue=function(t){return unquoteString(trimCSSWhitespace(t))};
},{}],23:[function(require,module,exports){
var CSSOM={CSSRule:require("./CSSRule").CSSRule,MatcherList:require("./MatcherList").MatcherList};CSSOM.CSSDocumentRule=function(){CSSOM.CSSRule.call(this),this.matcher=new CSSOM.MatcherList,this.cssRules=[]},CSSOM.CSSDocumentRule.prototype=new CSSOM.CSSRule,CSSOM.CSSDocumentRule.prototype.constructor=CSSOM.CSSDocumentRule,CSSOM.CSSDocumentRule.prototype.type=10,Object.defineProperty(CSSOM.CSSDocumentRule.prototype,"cssText",{get:function(){for(var e=[],t=0,S=this.cssRules.length;t<S;t++)e.push(this.cssRules[t].cssText);return"@-moz-document "+this.matcher.matcherText+" {"+e.join("")+"}"}}),exports.CSSDocumentRule=CSSOM.CSSDocumentRule;
},{"./CSSRule":29,"./MatcherList":35}],24:[function(require,module,exports){
var CSSOM={CSSStyleDeclaration:require("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:require("./CSSRule").CSSRule};CSSOM.CSSFontFaceRule=function(){CSSOM.CSSRule.call(this),this.style=new CSSOM.CSSStyleDeclaration,this.style.parentRule=this},CSSOM.CSSFontFaceRule.prototype=new CSSOM.CSSRule,CSSOM.CSSFontFaceRule.prototype.constructor=CSSOM.CSSFontFaceRule,CSSOM.CSSFontFaceRule.prototype.type=5,Object.defineProperty(CSSOM.CSSFontFaceRule.prototype,"cssText",{get:function(){return"@font-face {"+this.style.cssText+"}"}}),exports.CSSFontFaceRule=CSSOM.CSSFontFaceRule;
},{"./CSSRule":29,"./CSSStyleDeclaration":30}],25:[function(require,module,exports){
var CSSOM={CSSRule:require("./CSSRule").CSSRule,CSSStyleSheet:require("./CSSStyleSheet").CSSStyleSheet,MediaList:require("./MediaList").MediaList};CSSOM.CSSImportRule=function(){CSSOM.CSSRule.call(this),this.href="",this.media=new CSSOM.MediaList,this.styleSheet=new CSSOM.CSSStyleSheet},CSSOM.CSSImportRule.prototype=new CSSOM.CSSRule,CSSOM.CSSImportRule.prototype.constructor=CSSOM.CSSImportRule,CSSOM.CSSImportRule.prototype.type=3,Object.defineProperty(CSSOM.CSSImportRule.prototype,"cssText",{get:function(){var e=this.media.mediaText;return"@import url("+this.href+")"+(e?" "+e:"")+";"},set:function(e){for(var t,S,r=0,i="",a="";S=e.charAt(r);r++)switch(S){case" ":case"\t":case"\r":case"\n":case"\f":"after-import"===i?i="url":a+=S;break;case"@":i||e.indexOf("@import",r)!==r||(i="after-import",r+="import".length,a="");break;case"u":if("url"===i&&e.indexOf("url(",r)===r){if(t=e.indexOf(")",r+1),t===-1)throw r+': ")" not found';r+="url(".length;var o=e.slice(r,t);o[0]===o[o.length-1]&&('"'!==o[0]&&"'"!==o[0]||(o=o.slice(1,-1))),this.href=o,r=t,i="media"}break;case'"':if("url"===i){if(t=e.indexOf('"',r+1),!t)throw r+": '\"' not found";this.href=e.slice(r+1,t),r=t,i="media"}break;case"'":if("url"===i){if(t=e.indexOf("'",r+1),!t)throw r+': "\'" not found';this.href=e.slice(r+1,t),r=t,i="media"}break;case";":"media"===i&&a&&(this.media.mediaText=a.trim());break;default:"media"===i&&(a+=S)}}}),exports.CSSImportRule=CSSOM.CSSImportRule;
},{"./CSSRule":29,"./CSSStyleSheet":32,"./MediaList":36}],26:[function(require,module,exports){
var CSSOM={CSSRule:require("./CSSRule").CSSRule,CSSStyleDeclaration:require("./CSSStyleDeclaration").CSSStyleDeclaration};CSSOM.CSSKeyframeRule=function(){CSSOM.CSSRule.call(this),this.keyText="",this.style=new CSSOM.CSSStyleDeclaration,this.style.parentRule=this},CSSOM.CSSKeyframeRule.prototype=new CSSOM.CSSRule,CSSOM.CSSKeyframeRule.prototype.constructor=CSSOM.CSSKeyframeRule,CSSOM.CSSKeyframeRule.prototype.type=9,Object.defineProperty(CSSOM.CSSKeyframeRule.prototype,"cssText",{get:function(){return this.keyText+" {"+this.style.cssText+"} "}}),exports.CSSKeyframeRule=CSSOM.CSSKeyframeRule;
},{"./CSSRule":29,"./CSSStyleDeclaration":30}],27:[function(require,module,exports){
var CSSOM={CSSRule:require("./CSSRule").CSSRule};CSSOM.CSSKeyframesRule=function(){CSSOM.CSSRule.call(this),this.name="",this.cssRules=[]},CSSOM.CSSKeyframesRule.prototype=new CSSOM.CSSRule,CSSOM.CSSKeyframesRule.prototype.constructor=CSSOM.CSSKeyframesRule,CSSOM.CSSKeyframesRule.prototype.type=8,Object.defineProperty(CSSOM.CSSKeyframesRule.prototype,"cssText",{get:function(){for(var e=[],S=0,s=this.cssRules.length;S<s;S++)e.push("  "+this.cssRules[S].cssText);return"@"+(this._vendorPrefix||"")+"keyframes "+this.name+" { \n"+e.join("\n")+"\n}"}}),exports.CSSKeyframesRule=CSSOM.CSSKeyframesRule;
},{"./CSSRule":29}],28:[function(require,module,exports){
var CSSOM={CSSRule:require("./CSSRule").CSSRule,MediaList:require("./MediaList").MediaList};CSSOM.CSSMediaRule=function(){CSSOM.CSSRule.call(this),this.media=new CSSOM.MediaList,this.cssRules=[]},CSSOM.CSSMediaRule.prototype=new CSSOM.CSSRule,CSSOM.CSSMediaRule.prototype.constructor=CSSOM.CSSMediaRule,CSSOM.CSSMediaRule.prototype.type=4,Object.defineProperty(CSSOM.CSSMediaRule.prototype,"cssText",{get:function(){for(var e=[],S=0,i=this.cssRules.length;S<i;S++)e.push(this.cssRules[S].cssText);return"@media "+this.media.mediaText+" {"+e.join("")+"}"}}),exports.CSSMediaRule=CSSOM.CSSMediaRule;
},{"./CSSRule":29,"./MediaList":36}],29:[function(require,module,exports){
var CSSOM={};CSSOM.CSSRule=function(){this.parentRule=null,this.parentStyleSheet=null},CSSOM.CSSRule.UNKNOWN_RULE=0,CSSOM.CSSRule.STYLE_RULE=1,CSSOM.CSSRule.CHARSET_RULE=2,CSSOM.CSSRule.IMPORT_RULE=3,CSSOM.CSSRule.MEDIA_RULE=4,CSSOM.CSSRule.FONT_FACE_RULE=5,CSSOM.CSSRule.PAGE_RULE=6,CSSOM.CSSRule.KEYFRAMES_RULE=7,CSSOM.CSSRule.KEYFRAME_RULE=8,CSSOM.CSSRule.MARGIN_RULE=9,CSSOM.CSSRule.NAMESPACE_RULE=10,CSSOM.CSSRule.COUNTER_STYLE_RULE=11,CSSOM.CSSRule.SUPPORTS_RULE=12,CSSOM.CSSRule.DOCUMENT_RULE=13,CSSOM.CSSRule.FONT_FEATURE_VALUES_RULE=14,CSSOM.CSSRule.VIEWPORT_RULE=15,CSSOM.CSSRule.REGION_STYLE_RULE=16,CSSOM.CSSRule.prototype={constructor:CSSOM.CSSRule},exports.CSSRule=CSSOM.CSSRule;
},{}],30:[function(require,module,exports){
var CSSOM={};CSSOM.CSSStyleDeclaration=function(){this.length=0,this.parentRule=null,this._importants={}},CSSOM.CSSStyleDeclaration.prototype={constructor:CSSOM.CSSStyleDeclaration,getPropertyValue:function(t){return this[t]||""},setProperty:function(t,r,e){if(this[t]){var i=Array.prototype.indexOf.call(this,t);i<0&&(this[this.length]=t,this.length++)}else this[this.length]=t,this.length++;this[t]=r,this._importants[t]=e},removeProperty:function(t){if(!(t in this))return"";var r=Array.prototype.indexOf.call(this,t);if(r<0)return"";var e=this[t];return this[t]="",Array.prototype.splice.call(this,r,1),e},getPropertyCSSValue:function(){},getPropertyPriority:function(t){return this._importants[t]||""},getPropertyShorthand:function(){},isPropertyImplicit:function(){},get cssText(){for(var t=[],r=0,e=this.length;r<e;++r){var i=this[r],o=this.getPropertyValue(i),s=this.getPropertyPriority(i);s&&(s=" !"+s),t[r]=i+": "+o+s+";"}return t.join(" ")},set cssText(t){var r,e;for(r=this.length;r--;)e=this[r],this[e]="";Array.prototype.splice.call(this,0,this.length),this._importants={};var i=CSSOM.parse("#bogus{"+t+"}").cssRules[0].style,o=i.length;for(r=0;r<o;++r)e=i[r],this.setProperty(i[r],i.getPropertyValue(e),i.getPropertyPriority(e))}},exports.CSSStyleDeclaration=CSSOM.CSSStyleDeclaration,CSSOM.parse=require("./parse").parse;
},{"./parse":40}],31:[function(require,module,exports){
var CSSOM={CSSStyleDeclaration:require("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:require("./CSSRule").CSSRule};CSSOM.CSSStyleRule=function(){CSSOM.CSSRule.call(this),this.selectorText="",this.style=new CSSOM.CSSStyleDeclaration,this.style.parentRule=this},CSSOM.CSSStyleRule.prototype=new CSSOM.CSSRule,CSSOM.CSSStyleRule.prototype.constructor=CSSOM.CSSStyleRule,CSSOM.CSSStyleRule.prototype.type=1,Object.defineProperty(CSSOM.CSSStyleRule.prototype,"cssText",{get:function(){var e;return e=this.selectorText?this.selectorText+" {"+this.style.cssText+"}":""},set:function(e){var t=CSSOM.CSSStyleRule.parse(e);this.style=t.style,this.selectorText=t.selectorText}}),CSSOM.CSSStyleRule.parse=function(e){for(var t,S,r,s=0,l="selector",a=s,i="",c={selector:!0,value:!0},o=new CSSOM.CSSStyleRule,n="";r=e.charAt(s);s++)switch(r){case" ":case"\t":case"\r":case"\n":case"\f":if(c[l])switch(e.charAt(s-1)){case" ":case"\t":case"\r":case"\n":case"\f":break;default:i+=" "}break;case'"':if(a=s+1,t=e.indexOf('"',a)+1,!t)throw'" is missing';i+=e.slice(s,t),s=t-1;break;case"'":if(a=s+1,t=e.indexOf("'",a)+1,!t)throw"' is missing";i+=e.slice(s,t),s=t-1;break;case"/":if("*"===e.charAt(s+1)){if(s+=2,t=e.indexOf("*/",s),t===-1)throw new SyntaxError("Missing */");s=t+1}else i+=r;break;case"{":"selector"===l&&(o.selectorText=i.trim(),i="",l="name");break;case":":"name"===l?(S=i.trim(),i="",l="value"):i+=r;break;case"!":"value"===l&&e.indexOf("!important",s)===s?(n="important",s+="important".length):i+=r;break;case";":"value"===l?(o.style.setProperty(S,i.trim(),n),n="",i="",l="name"):i+=r;break;case"}":if("value"===l)o.style.setProperty(S,i.trim(),n),n="",i="";else{if("name"===l)break;i+=r}l="selector";break;default:i+=r}return o},exports.CSSStyleRule=CSSOM.CSSStyleRule;
},{"./CSSRule":29,"./CSSStyleDeclaration":30}],32:[function(require,module,exports){
var CSSOM={StyleSheet:require("./StyleSheet").StyleSheet,CSSStyleRule:require("./CSSStyleRule").CSSStyleRule};CSSOM.CSSStyleSheet=function(){CSSOM.StyleSheet.call(this),this.cssRules=[]},CSSOM.CSSStyleSheet.prototype=new CSSOM.StyleSheet,CSSOM.CSSStyleSheet.prototype.constructor=CSSOM.CSSStyleSheet,CSSOM.CSSStyleSheet.prototype.insertRule=function(e,S){if(S<0||S>this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");var t=CSSOM.parse(e).cssRules[0];return t.parentStyleSheet=this,this.cssRules.splice(S,0,t),S},CSSOM.CSSStyleSheet.prototype.deleteRule=function(e){if(e<0||e>=this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");this.cssRules.splice(e,1)},CSSOM.CSSStyleSheet.prototype.toString=function(){for(var e="",S=this.cssRules,t=0;t<S.length;t++)e+=S[t].cssText+"\n";return e},exports.CSSStyleSheet=CSSOM.CSSStyleSheet,CSSOM.parse=require("./parse").parse;
},{"./CSSStyleRule":31,"./StyleSheet":37,"./parse":40}],33:[function(require,module,exports){
var CSSOM={};CSSOM.CSSValue=function(){},CSSOM.CSSValue.prototype={constructor:CSSOM.CSSValue,set cssText(t){var e=this._getConstructorName();throw new Error('DOMException: property "cssText" of "'+e+'" is readonly and can not be replaced with "'+t+'"!')},get cssText(){var t=this._getConstructorName();throw new Error('getter "cssText" of "'+t+'" is not implemented!')},_getConstructorName:function(){var t=this.constructor.toString(),e=t.match(/function\s([^\(]+)/),o=e[1];return o}},exports.CSSValue=CSSOM.CSSValue;
},{}],34:[function(require,module,exports){
var CSSOM={CSSValue:require("./CSSValue").CSSValue};CSSOM.CSSValueExpression=function(e,r){this._token=e,this._idx=r},CSSOM.CSSValueExpression.prototype=new CSSOM.CSSValue,CSSOM.CSSValueExpression.prototype.constructor=CSSOM.CSSValueExpression,CSSOM.CSSValueExpression.prototype.parse=function(){for(var e,r=this._token,s=this._idx,n="",t="",i="",S=[];;++s){if(n=r.charAt(s),""===n){i="css expression error: unfinished expression!";break}switch(n){case"(":S.push(n),t+=n;break;case")":S.pop(n),t+=n;break;case"/":(e=this._parseJSComment(r,s))?e.error?i="css expression error: unfinished comment in expression!":s=e.idx:(e=this._parseJSRexExp(r,s))?(s=e.idx,t+=e.text):t+=n;break;case"'":case'"':e=this._parseJSString(r,s,n),e?(s=e.idx,t+=e.text):t+=n;break;default:t+=n}if(i)break;if(0===S.length)break}var o;return o=i?{error:i}:{idx:s,expression:t}},CSSOM.CSSValueExpression.prototype._parseJSComment=function(e,r){var s,n=e.charAt(r+1);if("/"===n||"*"===n){var t,i,S=r;if("/"===n?i="\n":"*"===n&&(i="*/"),t=e.indexOf(i,S+1+1),t!==-1)return t=t+i.length-1,s=e.substring(r,t+1),{idx:t,text:s};var o="css expression error: unfinished comment in expression!";return{error:o}}return!1},CSSOM.CSSValueExpression.prototype._parseJSString=function(e,r,s){var n,t=this._findMatchedIdx(e,r,s);return t!==-1&&(n=e.substring(r,t+s.length),{idx:t,text:n})},CSSOM.CSSValueExpression.prototype._parseJSRexExp=function(e,r){var s=e.substring(0,r).replace(/\s+$/,""),n=[/^$/,/\($/,/\[$/,/\!$/,/\+$/,/\-$/,/\*$/,/\/\s+/,/\%$/,/\=$/,/\>$/,/<$/,/\&$/,/\|$/,/\^$/,/\~$/,/\?$/,/\,$/,/delete$/,/in$/,/instanceof$/,/new$/,/typeof$/,/void$/],t=n.some(function(e){return e.test(s)});if(t){var i="/";return this._parseJSString(e,r,i)}return!1},CSSOM.CSSValueExpression.prototype._findMatchedIdx=function(e,r,s){for(var n,t=r,i=-1;;){if(n=e.indexOf(s,t+1),n===-1){n=i;break}var S=e.substring(r+1,n),o=S.match(/\\+$/);if(!o||o[0]%2===0)break;t=n}var a=e.indexOf("\n",r+1);return a<n&&(n=i),n},exports.CSSValueExpression=CSSOM.CSSValueExpression;
},{"./CSSValue":33}],35:[function(require,module,exports){
var CSSOM={};CSSOM.MatcherList=function(){this.length=0},CSSOM.MatcherList.prototype={constructor:CSSOM.MatcherList,get matcherText(){return Array.prototype.join.call(this,", ")},set matcherText(t){for(var e=t.split(","),r=this.length=e.length,i=0;i<r;i++)this[i]=e[i].trim()},appendMatcher:function(t){Array.prototype.indexOf.call(this,t)===-1&&(this[this.length]=t,this.length++)},deleteMatcher:function(t){var e=Array.prototype.indexOf.call(this,t);e!==-1&&Array.prototype.splice.call(this,e,1)}},exports.MatcherList=CSSOM.MatcherList;
},{}],36:[function(require,module,exports){
var CSSOM={};CSSOM.MediaList=function(){this.length=0},CSSOM.MediaList.prototype={constructor:CSSOM.MediaList,get mediaText(){return Array.prototype.join.call(this,", ")},set mediaText(t){for(var i=t.split(","),e=this.length=i.length,r=0;r<e;r++)this[r]=i[r].trim()},appendMedium:function(t){Array.prototype.indexOf.call(this,t)===-1&&(this[this.length]=t,this.length++)},deleteMedium:function(t){var i=Array.prototype.indexOf.call(this,t);i!==-1&&Array.prototype.splice.call(this,i,1)}},exports.MediaList=CSSOM.MediaList;
},{}],37:[function(require,module,exports){
var CSSOM={};CSSOM.StyleSheet=function(){this.parentStyleSheet=null},exports.StyleSheet=CSSOM.StyleSheet;
},{}],38:[function(require,module,exports){
var CSSOM={CSSStyleSheet:require("./CSSStyleSheet").CSSStyleSheet,CSSStyleRule:require("./CSSStyleRule").CSSStyleRule,CSSMediaRule:require("./CSSMediaRule").CSSMediaRule,CSSStyleDeclaration:require("./CSSStyleDeclaration").CSSStyleDeclaration,CSSKeyframeRule:require("./CSSKeyframeRule").CSSKeyframeRule,CSSKeyframesRule:require("./CSSKeyframesRule").CSSKeyframesRule};CSSOM.clone=function e(S){var r=new CSSOM.CSSStyleSheet,t=S.cssRules;if(!t)return r;for(var l={1:CSSOM.CSSStyleRule,4:CSSOM.CSSMediaRule,8:CSSOM.CSSKeyframesRule,9:CSSOM.CSSKeyframeRule},a=0,C=t.length;a<C;a++){var y=t[a],s=r.cssRules[a]=new l[y.type],u=y.style;if(u){for(var i=s.style=new CSSOM.CSSStyleDeclaration,n=0,o=u.length;n<o;n++){var R=i[n]=u[n];i[R]=u[R],i._importants[R]=u.getPropertyPriority(R)}i.length=u.length}y.hasOwnProperty("keyText")&&(s.keyText=y.keyText),y.hasOwnProperty("selectorText")&&(s.selectorText=y.selectorText),y.hasOwnProperty("mediaText")&&(s.mediaText=y.mediaText),y.hasOwnProperty("cssRules")&&(s.cssRules=e(y).cssRules)}return r},exports.clone=CSSOM.clone;
},{"./CSSKeyframeRule":26,"./CSSKeyframesRule":27,"./CSSMediaRule":28,"./CSSStyleDeclaration":30,"./CSSStyleRule":31,"./CSSStyleSheet":32}],39:[function(require,module,exports){
"use strict";exports.CSSStyleDeclaration=require("./CSSStyleDeclaration").CSSStyleDeclaration,exports.CSSRule=require("./CSSRule").CSSRule,exports.CSSStyleRule=require("./CSSStyleRule").CSSStyleRule,exports.MediaList=require("./MediaList").MediaList,exports.CSSMediaRule=require("./CSSMediaRule").CSSMediaRule,exports.CSSImportRule=require("./CSSImportRule").CSSImportRule,exports.CSSFontFaceRule=require("./CSSFontFaceRule").CSSFontFaceRule,exports.StyleSheet=require("./StyleSheet").StyleSheet,exports.CSSStyleSheet=require("./CSSStyleSheet").CSSStyleSheet,exports.CSSKeyframesRule=require("./CSSKeyframesRule").CSSKeyframesRule,exports.CSSKeyframeRule=require("./CSSKeyframeRule").CSSKeyframeRule,exports.MatcherList=require("./MatcherList").MatcherList,exports.CSSDocumentRule=require("./CSSDocumentRule").CSSDocumentRule,exports.CSSValue=require("./CSSValue").CSSValue,exports.CSSValueExpression=require("./CSSValueExpression").CSSValueExpression,exports.parse=require("./parse").parse,exports.clone=require("./clone").clone;
},{"./CSSDocumentRule":23,"./CSSFontFaceRule":24,"./CSSImportRule":25,"./CSSKeyframeRule":26,"./CSSKeyframesRule":27,"./CSSMediaRule":28,"./CSSRule":29,"./CSSStyleDeclaration":30,"./CSSStyleRule":31,"./CSSStyleSheet":32,"./CSSValue":33,"./CSSValueExpression":34,"./MatcherList":35,"./MediaList":36,"./StyleSheet":37,"./clone":38,"./parse":40}],40:[function(require,module,exports){
var CSSOM={};CSSOM.parse=function(e){for(var r,t,a,S,l,s,n,u,i,o,c=0,m="before-selector",b="",f={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0,"documentRule-begin":!0},C=new CSSOM.CSSStyleSheet,R=C,p="",h=/@(-(?:\w+-)+)?keyframes/g,y=function(r){var t=e.substring(0,c).split("\n"),a=t.length,S=t.pop().length+1,l=new Error(r+" (line "+a+", char "+S+")");throw l.line=a,l.char=S,l.styleSheet=C,l};o=e.charAt(c);c++)switch(o){case" ":case"\t":case"\r":case"\n":case"\f":f[m]&&(b+=o);break;case'"':r=c+1;do r=e.indexOf('"',r)+1,r||y('Unmatched "');while("\\"===e[r-2]);switch(b+=e.slice(c,r),c=r-1,m){case"before-value":m="value";break;case"importRule-begin":m="importRule"}break;case"'":r=c+1;do r=e.indexOf("'",r)+1,r||y("Unmatched '");while("\\"===e[r-2]);switch(b+=e.slice(c,r),c=r-1,m){case"before-value":m="value";break;case"importRule-begin":m="importRule"}break;case"/":"*"===e.charAt(c+1)?(c+=2,r=e.indexOf("*/",c),r===-1?y("Missing */"):c=r+1):b+=o,"importRule-begin"===m&&(b+=" ",m="importRule");break;case"@":if(e.indexOf("@-moz-document",c)===c){m="documentRule-begin",i=new CSSOM.CSSDocumentRule,i.__starts=c,c+="-moz-document".length,b="";break}if(e.indexOf("@media",c)===c){m="atBlock",l=new CSSOM.CSSMediaRule,l.__starts=c,c+="media".length,b="";break}if(e.indexOf("@import",c)===c){m="importRule-begin",c+="import".length,b+="@import";break}if(e.indexOf("@font-face",c)===c){m="fontFaceRule-begin",c+="font-face".length,n=new CSSOM.CSSFontFaceRule,n.__starts=c,b="";break}h.lastIndex=c;var k=h.exec(e);if(k&&k.index===c){m="keyframesRule-begin",u=new CSSOM.CSSKeyframesRule,u.__starts=c,u._vendorPrefix=k[1],c+=k[0].length-1,b="";break}"selector"===m&&(m="atRule"),b+=o;break;case"{":"selector"===m||"atRule"===m?(S.selectorText=b.trim(),S.style.__starts=c,b="",m="before-name"):"atBlock"===m?(l.media.mediaText=b.trim(),R=t=l,l.parentStyleSheet=C,b="",m="before-selector"):"fontFaceRule-begin"===m?(t&&(n.parentRule=t),n.parentStyleSheet=C,S=n,b="",m="before-name"):"keyframesRule-begin"===m?(u.name=b.trim(),t&&(u.parentRule=t),u.parentStyleSheet=C,R=t=u,b="",m="keyframeRule-begin"):"keyframeRule-begin"===m?(S=new CSSOM.CSSKeyframeRule,S.keyText=b.trim(),S.__starts=c,b="",m="before-name"):"documentRule-begin"===m&&(i.matcher.matcherText=b.trim(),t&&(i.parentRule=t),R=t=i,i.parentStyleSheet=C,b="",m="before-selector");break;case":":"name"===m?(a=b.trim(),b="",m="before-value"):b+=o;break;case"(":if("value"===m)if("expression"===b.trim()){var d=new CSSOM.CSSValueExpression(e,c).parse();d.error?y(d.error):(b+=d.expression,c=d.idx)}else m="value-parenthesis",b+=o;else b+=o;break;case")":"value-parenthesis"===m&&(m="value"),b+=o;break;case"!":"value"===m&&e.indexOf("!important",c)===c?(p="important",c+="important".length):b+=o;break;case";":switch(m){case"value":S.style.setProperty(a,b.trim(),p),p="",b="",m="before-name";break;case"atRule":b="",m="before-selector";break;case"importRule":s=new CSSOM.CSSImportRule,s.parentStyleSheet=s.styleSheet.parentStyleSheet=C,s.cssText=b+o,C.cssRules.push(s),b="",m="before-selector";break;default:b+=o}break;case"}":switch(m){case"value":S.style.setProperty(a,b.trim(),p),p="";case"before-name":case"name":S.__ends=c+1,t&&(S.parentRule=t),S.parentStyleSheet=C,R.cssRules.push(S),b="",m=R.constructor===CSSOM.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":t||y("Unexpected }"),R.__ends=c+1,C.cssRules.push(R),R=C,t=null,b="",m="before-selector"}break;default:switch(m){case"before-selector":m="selector",S=new CSSOM.CSSStyleRule,S.__starts=c;break;case"before-name":m="name";break;case"before-value":m="value";break;case"importRule-begin":m="importRule"}b+=o}return C},exports.parse=CSSOM.parse,CSSOM.CSSStyleSheet=require("./CSSStyleSheet").CSSStyleSheet,CSSOM.CSSStyleRule=require("./CSSStyleRule").CSSStyleRule,CSSOM.CSSImportRule=require("./CSSImportRule").CSSImportRule,CSSOM.CSSMediaRule=require("./CSSMediaRule").CSSMediaRule,CSSOM.CSSFontFaceRule=require("./CSSFontFaceRule").CSSFontFaceRule,CSSOM.CSSStyleDeclaration=require("./CSSStyleDeclaration").CSSStyleDeclaration,CSSOM.CSSKeyframeRule=require("./CSSKeyframeRule").CSSKeyframeRule,CSSOM.CSSKeyframesRule=require("./CSSKeyframesRule").CSSKeyframesRule,CSSOM.CSSValueExpression=require("./CSSValueExpression").CSSValueExpression,CSSOM.CSSDocumentRule=require("./CSSDocumentRule").CSSDocumentRule;
},{"./CSSDocumentRule":23,"./CSSFontFaceRule":24,"./CSSImportRule":25,"./CSSKeyframeRule":26,"./CSSKeyframesRule":27,"./CSSMediaRule":28,"./CSSStyleDeclaration":30,"./CSSStyleRule":31,"./CSSStyleSheet":32,"./CSSValueExpression":34}],41:[function(require,module,exports){
"use strict";var cssSupport=require("./cssSupport"),trimCSSWhitespace=function(r){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return r.replace(e,"$1")};exports.extractCssUrl=function(r){var e,t=/^url\(([^\)]+)\)/;if(!t.test(r))throw new Error("Invalid url");return e=t.exec(r)[1],cssSupport.unquoteString(trimCSSWhitespace(e))};var sliceBackgroundDeclaration=function(r){var e,t="\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*",n="(url\\("+t+"\\)|[^,\\s]+)",u="(?:\\s*"+n+")+",s="^\\s*("+u+")(?:\\s*,\\s*("+u+"))*\\s*$",c=new RegExp(u,"g"),a=[],o=function(r){var e,t=new RegExp(n,"g"),u=[];for(e=t.exec(r);e;)u.push(e[1]),e=t.exec(r);return u};if(r.match(new RegExp(s))){for(e=c.exec(r);e;)a.push(o(e[0])),e=c.exec(r);return a}return[]},findBackgroundImageUrlInValues=function(r){var e,t;for(e=0;e<r.length;e++)try{return t=exports.extractCssUrl(r[e]),{url:t,idx:e}}catch(r){}};exports.parse=function(r){var e=sliceBackgroundDeclaration(r);return e.map(function(r){var e=findBackgroundImageUrlInValues(r);return e?{preUrl:r.slice(0,e.idx),url:e.url,postUrl:r.slice(e.idx+1)}:{preUrl:r}})},exports.serialize=function(r){var e=r.map(function(r){var e=[].concat(r.preUrl);return r.url&&e.push('url("'+r.url+'")'),r.postUrl&&(e=e.concat(r.postUrl)),e.join(" ")});return e.join(", ")};
},{"./cssSupport":42}],42:[function(require,module,exports){
"use strict";var cssom;try{cssom=require("cssom")}catch(e){}exports.unquoteString=function(e){var r=/^"(.*)"$/,t=/^'(.*)'$/;return r.test(e)?e.replace(r,"$1"):t.test(e)?e.replace(t,"$1"):e};var rulesForCssTextFromBrowser=function(e){var r,t=document.implementation.createHTMLDocument(""),s=document.createElement("style");return s.textContent=e,t.body.appendChild(s),r=s.sheet.cssRules,Array.prototype.slice.call(r)},browserHasBackgroundImageUrlIssue=function(){var e=rulesForCssTextFromBrowser("a{background:url(i)}");return!e.length||e[0].cssText.indexOf("url()")>=0}(),browserHasFontFaceUrlIssue=function(){var e=rulesForCssTextFromBrowser('@font-face { font-family: "f"; src: url("f"); }');return!e.length||/url\(['"]*\)/.test(e[0].cssText)}(),browserHasBackgroundImageUrlSetIssue=function(){var e=rulesForCssTextFromBrowser("a{background:url(old)}");return e[0].style.setProperty("background","url(new)",""),e[0].style.getPropertyValue("background").indexOf("old")>=0}();exports.rulesForCssText=function(e){return(browserHasBackgroundImageUrlIssue||browserHasFontFaceUrlIssue||browserHasBackgroundImageUrlSetIssue)&&cssom&&cssom.parse?cssom.parse(e).cssRules:rulesForCssTextFromBrowser(e)},exports.cssRulesToText=function(e){return e.reduce(function(e,r){return e+r.cssText},"")},exports.exchangeRule=function(e,r,t){var s=e.indexOf(r);e[s]=exports.rulesForCssText(t)[0]},exports.changeFontFaceRuleSrc=function(e,r,t){var s="@font-face { font-family: "+r.style.getPropertyValue("font-family")+"; ";r.style.getPropertyValue("font-style")&&(s+="font-style: "+r.style.getPropertyValue("font-style")+"; "),r.style.getPropertyValue("font-weight")&&(s+="font-weight: "+r.style.getPropertyValue("font-weight")+"; "),s+="src: "+t+"}",exports.exchangeRule(e,r,s)};
},{"cssom":39}],43:[function(require,module,exports){
"use strict";var util=require("./util"),inlineImage=require("./inlineImage"),inlineScript=require("./inlineScript"),inlineCss=require("./inlineCss"),cssSupport=require("./cssSupport"),getUrlBasePath=function(e){return util.joinUrl(e,".")},parameterHashFunction=function(e){var n=e.map(function(n,t){return t===e.length-1&&(n={baseUrl:getUrlBasePath(n.baseUrl)}),JSON.stringify(n)});return n},memoizeFunctionOnCaching=function(e,n){return n.cache!==!1&&"none"!==n.cache&&n.cacheBucket?util.memoize(e,parameterHashFunction,n.cacheBucket):e},requestExternalsForStylesheet=function(e,n,t){var r=cssSupport.rulesForCssText(e);return inlineCss.loadCSSImportsForRules(r,n,t).then(function(n){return inlineCss.loadAndInlineCSSResourcesForRules(r,t).then(function(t){var s=n.errors.concat(t.errors),u=n.hasChanges||t.hasChanges;return u&&(e=cssSupport.cssRulesToText(r)),{hasChanges:u,content:e,errors:s}})})},loadAndInlineCssForStyle=function(e,n,t){var r=e.textContent,s=memoizeFunctionOnCaching(requestExternalsForStylesheet,n);return s(r,t,n).then(function(n){return n.hasChanges&&(e.childNodes[0].nodeValue=n.content),util.cloneArray(n.errors)})},getCssStyleElements=function(e){var n=e.getElementsByTagName("style");return Array.prototype.filter.call(n,function(e){return!e.attributes.type||"text/css"===e.attributes.type.value})};exports.loadAndInlineStyles=function(e,n){var t,r=getCssStyleElements(e),s=[],u=[];return t=util.clone(n),t.baseUrl=t.baseUrl||util.getDocumentBaseUrl(e),util.all(r.map(function(e){return loadAndInlineCssForStyle(e,t,u).then(function(e){s=s.concat(e)})})).then(function(){return s})};var substituteLinkWithInlineStyle=function(e,n){var t,r=e.parentNode;n=n.trim(),n&&(t=e.ownerDocument.createElement("style"),t.type="text/css",t.appendChild(e.ownerDocument.createTextNode(n)),r.insertBefore(t,e)),r.removeChild(e)},requestStylesheetAndInlineResources=function(e,n){return util.ajax(e,n).then(function(e){var n=cssSupport.rulesForCssText(e);return{content:e,cssRules:n}}).then(function(n){var t=inlineCss.adjustPathsOfCssResources(e,n.cssRules);return{content:n.content,cssRules:n.cssRules,hasChanges:t}}).then(function(e){return inlineCss.loadCSSImportsForRules(e.cssRules,[],n).then(function(n){return{content:e.content,cssRules:e.cssRules,hasChanges:e.hasChanges||n.hasChanges,errors:n.errors}})}).then(function(e){return inlineCss.loadAndInlineCSSResourcesForRules(e.cssRules,n).then(function(n){return{content:e.content,cssRules:e.cssRules,hasChanges:e.hasChanges||n.hasChanges,errors:e.errors.concat(n.errors)}})}).then(function(e){var n=e.content;return e.hasChanges&&(n=cssSupport.cssRulesToText(e.cssRules)),{content:n,errors:e.errors}})},loadLinkedCSS=function(e,n){var t=e.attributes.href.value,r=util.getDocumentBaseUrl(e.ownerDocument),s=util.clone(n);!s.baseUrl&&r&&(s.baseUrl=r);var u=memoizeFunctionOnCaching(requestStylesheetAndInlineResources,n);return u(t,s).then(function(e){return{content:e.content,errors:util.cloneArray(e.errors)}})},getCssStylesheetLinks=function(e){var n=e.getElementsByTagName("link");return Array.prototype.filter.call(n,function(e){return e.attributes.rel&&"stylesheet"===e.attributes.rel.value&&(!e.attributes.type||"text/css"===e.attributes.type.value)})};exports.loadAndInlineCssLinks=function(e,n){var t=getCssStylesheetLinks(e),r=[];return util.all(t.map(function(e){return loadLinkedCSS(e,n).then(function(n){substituteLinkWithInlineStyle(e,n.content+"\n"),r=r.concat(n.errors)},function(e){r.push({resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url})})})).then(function(){return r})},exports.loadAndInlineImages=inlineImage.inline,exports.loadAndInlineScript=inlineScript.inline,exports.inlineReferences=function(e,n){var t=[],r=[exports.loadAndInlineImages,exports.loadAndInlineStyles,exports.loadAndInlineCssLinks];return n.inlineScripts!==!1&&r.push(exports.loadAndInlineScript),util.all(r.map(function(r){return r(e,n).then(function(e){t=t.concat(e)})})).then(function(){return t})};
},{"./cssSupport":42,"./inlineCss":44,"./inlineImage":45,"./inlineScript":46,"./util":47}],44:[function(require,module,exports){
"use strict";var ayepromise=require("ayepromise"),util=require("./util"),cssSupport=require("./cssSupport"),backgroundValueParser=require("./backgroundValueParser"),fontFaceSrcValueParser=require("css-font-face-src"),updateCssPropertyValue=function(r,e,n){r.style.setProperty(e,n,r.style.getPropertyPriority(e))},findBackgroundImageRules=function(r){return r.filter(function(r){return r.type===window.CSSRule.STYLE_RULE&&(r.style.getPropertyValue("background-image")||r.style.getPropertyValue("background"))})},findBackgroundDeclarations=function(r){var e=[];return r.forEach(function(r){r.style.getPropertyValue("background-image")?e.push({property:"background-image",value:r.style.getPropertyValue("background-image"),rule:r}):r.style.getPropertyValue("background")&&e.push({property:"background",value:r.style.getPropertyValue("background"),rule:r})}),e},findFontFaceRules=function(r){return r.filter(function(r){return r.type===window.CSSRule.FONT_FACE_RULE&&r.style.getPropertyValue("src")})},findCSSImportRules=function(r){return r.filter(function(r){return r.type===window.CSSRule.IMPORT_RULE&&r.href})},findExternalBackgroundUrls=function(r){var e=[];return r.forEach(function(r,n){r.url&&!util.isDataUri(r.url)&&e.push(n)}),e},findExternalFontFaceUrls=function(r){var e=[];return r.forEach(function(r,n){r.url&&!util.isDataUri(r.url)&&e.push(n)}),e};exports.adjustPathsOfCssResources=function(r,e){var n=findBackgroundImageRules(e),t=findBackgroundDeclarations(n),u=!1;return t.forEach(function(e){var n,t=backgroundValueParser.parse(e.value),a=findExternalBackgroundUrls(t);a.length>0&&(a.forEach(function(e){var n=t[e].url,u=util.joinUrl(r,n);t[e].url=u}),n=backgroundValueParser.serialize(t),updateCssPropertyValue(e.rule,e.property,n),u=!0)}),findFontFaceRules(e).forEach(function(n){var t,a,o=n.style.getPropertyValue("src");try{t=fontFaceSrcValueParser.parse(o)}catch(r){return}a=findExternalFontFaceUrls(t),a.length>0&&(a.forEach(function(e){var n=t[e].url,u=util.joinUrl(r,n);t[e].url=u}),cssSupport.changeFontFaceRuleSrc(e,n,fontFaceSrcValueParser.serialize(t)),u=!0)}),findCSSImportRules(e).forEach(function(n){var t=n.href,a=util.joinUrl(r,t);cssSupport.exchangeRule(e,n,"@import url("+a+");"),u=!0}),u};var substituteRule=function(r,e,n){var t=r.indexOf(e);r.splice(t,1),n.forEach(function(e,n){r.splice(t+n,0,e)})},fulfilledPromise=function(r){var e=ayepromise.defer();return e.resolve(r),e.promise},loadAndInlineCSSImport=function(r,e,n,t){var u,a=e.href;return a=cssSupport.unquoteString(a),u=util.joinUrl(t.baseUrl,a),n.indexOf(u)>=0?(substituteRule(r,e,[]),fulfilledPromise([])):(n.push(u),util.ajax(a,t).then(function(u){var o=cssSupport.rulesForCssText(u);return exports.loadCSSImportsForRules(o,n,t).then(function(n){return exports.adjustPathsOfCssResources(a,o),substituteRule(r,e,o),n.errors})},function(r){throw{resourceType:"stylesheet",url:r.url,msg:"Unable to load stylesheet "+r.url}}))};exports.loadCSSImportsForRules=function(r,e,n){var t=findCSSImportRules(r),u=[],a=!1;return util.all(t.map(function(t){return loadAndInlineCSSImport(r,t,e,n).then(function(r){u=u.concat(r),a=!0},function(r){u.push(r)})})).then(function(){return{hasChanges:a,errors:u}})};var loadAndInlineBackgroundImages=function(r,e){var n=backgroundValueParser.parse(r),t=findExternalBackgroundUrls(n),u=!1;return util.collectAndReportErrors(t.map(function(r){var t=n[r].url;return util.getDataURIForImageURL(t,e).then(function(e){n[r].url=e,u=!0},function(r){throw{resourceType:"backgroundImage",url:r.url,msg:"Unable to load background-image "+r.url}})})).then(function(r){return{backgroundValue:backgroundValueParser.serialize(n),hasChanges:u,errors:r}})},iterateOverRulesAndInlineBackgroundImages=function(r,e){var n=findBackgroundImageRules(r),t=findBackgroundDeclarations(n),u=[],a=!1;return util.all(t.map(function(r){return loadAndInlineBackgroundImages(r.value,e).then(function(e){e.hasChanges&&(updateCssPropertyValue(r.rule,r.property,e.backgroundValue),a=!0),u=u.concat(e.errors)})})).then(function(){return{hasChanges:a,errors:u}})},loadAndInlineFontFace=function(r,e){var n,t,u=!1;try{n=fontFaceSrcValueParser.parse(r)}catch(r){n=[]}return t=findExternalFontFaceUrls(n),util.collectAndReportErrors(t.map(function(r){var t=n[r],a=t.format||"woff";return util.binaryAjax(t.url,e).then(function(r){var e=btoa(r);t.url="data:font/"+a+";base64,"+e,u=!0},function(r){throw{resourceType:"fontFace",url:r.url,msg:"Unable to load font-face "+r.url}})})).then(function(r){return{srcDeclarationValue:fontFaceSrcValueParser.serialize(n),hasChanges:u,errors:r}})},iterateOverRulesAndInlineFontFace=function(r,e){var n=findFontFaceRules(r),t=[],u=!1;return util.all(n.map(function(n){var a=n.style.getPropertyValue("src");return loadAndInlineFontFace(a,e).then(function(e){e.hasChanges&&(cssSupport.changeFontFaceRuleSrc(r,n,e.srcDeclarationValue),u=!0),t=t.concat(e.errors)})})).then(function(){return{hasChanges:u,errors:t}})};exports.loadAndInlineCSSResourcesForRules=function(r,e){var n=!1,t=[];return util.all([iterateOverRulesAndInlineBackgroundImages,iterateOverRulesAndInlineFontFace].map(function(u){return u(r,e).then(function(r){n=n||r.hasChanges,t=t.concat(r.errors)})})).then(function(){return{hasChanges:n,errors:t}})};
},{"./backgroundValueParser":41,"./cssSupport":42,"./util":47,"ayepromise":3,"css-font-face-src":21}],45:[function(require,module,exports){
"use strict";var util=require("./util"),encodeImageAsDataURI=function(t,e){var r=null;t.hasAttribute("src")?r=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?r=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(r=t.getAttribute("href"));var a=util.getDocumentBaseUrl(t.ownerDocument),n=util.clone(e);return!n.baseUrl&&a&&(n.baseUrl=a),util.getDataURIForImageURL(r,n).then(function(t){return t},function(t){throw{resourceType:"image",url:t.url,msg:"Unable to load image "+t.url}})},filterExternalImages=function(t){return t.filter(function(t){var e=null;return t.hasAttribute("src")?e=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?e=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(e=t.getAttribute("href")),null!==e&&!util.isDataUri(e)})},filterInputsForImageType=function(t){return Array.prototype.filter.call(t,function(t){return"image"===t.type})},toArray=function(t){return Array.prototype.slice.call(t)};exports.inline=function(t,e){var r=toArray(t.getElementsByTagName("img")),a=toArray(t.getElementsByTagName("image")),n=filterInputsForImageType(t.getElementsByTagName("input"));r=r.concat(a),r=r.concat(n);var u=filterExternalImages(r);return util.collectAndReportErrors(u.map(function(t){return encodeImageAsDataURI(t,e).then(function(e){t.attributes.src?t.attributes.src.value=e:t.attributes["xlink:href"]?t.attributes["xlink:href"].value=e:t.attributes.href&&(t.attributes.href.value=e)})}))};
},{"./util":47}],46:[function(require,module,exports){
"use strict";var util=require("./util"),loadLinkedScript=function(t,e){var r=t.attributes.src.value,n=util.getDocumentBaseUrl(t.ownerDocument),i=util.clone(e);return!i.baseUrl&&n&&(i.baseUrl=n),util.ajax(r,i).fail(function(t){throw{resourceType:"script",url:t.url,msg:"Unable to load script "+t.url}})},escapeClosingTags=function(t){return t.replace(/<\//g,"<\\/")},substituteExternalScriptWithInline=function(t,e){t.attributes.removeNamedItem("src"),t.textContent=escapeClosingTags(e)},getScripts=function(t){var e=t.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})};exports.inline=function(t,e){var r=getScripts(t);return util.collectAndReportErrors(r.map(function(t){return loadLinkedScript(t,e).then(function(e){substituteExternalScriptWithInline(t,e)})}))};
},{"./util":47}],47:[function(require,module,exports){
"use strict";var url=require("url"),ayepromise=require("ayepromise");exports.getDocumentBaseUrl=function(e){return"about:blank"!==e.baseURI?e.baseURI:null},exports.clone=function(e){var r,t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},exports.cloneArray=function(e){return Array.prototype.slice.apply(e,[0])},exports.joinUrl=function(e,r){return e?url.resolve(e,r):r},exports.isDataUri=function(e){return/^data:/.test(e)},exports.all=function(e){var r=ayepromise.defer(),t=e.length,n=[];return 0===e.length?(r.resolve([]),r.promise):(e.forEach(function(e,o){e.then(function(e){t-=1,n[o]=e,0===t&&r.resolve(n)},function(e){r.reject(e)})}),r.promise)},exports.collectAndReportErrors=function(e){var r=[];return exports.all(e.map(function(e){return e.fail(function(e){r.push(e)})})).then(function(){return r})};var lastCacheDate=null,getUncachableURL=function(e,r){return r===!1||"none"===r||"repeated"===r?(null!==lastCacheDate&&"repeated"===r||(lastCacheDate=Date.now()),e+"?_="+lastCacheDate):e};exports.ajax=function(e,r){var t,n=new window.XMLHttpRequest,o=ayepromise.defer(),a=exports.joinUrl(r.baseUrl,e),u=function(){o.reject({msg:"Unable to load url",url:a})};t=getUncachableURL(a,r.cache),n.addEventListener("load",function(){200===n.status||0===n.status?o.resolve(n.response):u()},!1),n.addEventListener("error",u,!1);try{n.open("GET",t,!0),n.overrideMimeType(r.mimeType),n.send(null)}catch(e){u()}return o.promise},exports.binaryAjax=function(e,r){var t=exports.clone(r);return t.mimeType="text/plain; charset=x-user-defined",exports.ajax(e,t).then(function(e){for(var r="",t=0;t<e.length;t++)r+=String.fromCharCode(255&e.charCodeAt(t));return r})};var detectMimeType=function(e){var r=function(e,r){return e.substring(0,r.length)===r};return r(e,"<?xml")||r(e,"<svg")?"image/svg+xml":"image/png"};exports.getDataURIForImageURL=function(e,r){return exports.binaryAjax(e,r).then(function(e){var r=btoa(e),t=detectMimeType(e);return"data:"+t+";base64,"+r})};var uniqueIdList=[],constantUniqueIdFor=function(e){return uniqueIdList.indexOf(e)<0&&uniqueIdList.push(e),uniqueIdList.indexOf(e)};exports.memoize=function(e,r,t){if("object"!=typeof t)throw new Error("cacheBucket is not an object");return function(){var n,o=Array.prototype.slice.call(arguments),a=r(o),u=constantUniqueIdFor(e);return t[u]&&t[u][a]?t[u][a]:(n=e.apply(null,o),t[u]=t[u]||{},t[u][a]=n,n)}};
},{"ayepromise":3,"url":14}],48:[function(require,module,exports){
"use strict";var innerXML=function(e){var r=new XMLSerializer;return Array.prototype.map.call(e.childNodes,function(e){return r.serializeToString(e)}).join("")},getParseError=function(e){return"parsererror"===e.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===e.documentElement.namespaceURI?e.documentElement:("xml"===e.documentElement.tagName||"html"===e.documentElement.tagName)&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"parsererror"===e.documentElement.childNodes[0].nodeName?e.documentElement.childNodes[0]:"html"===e.documentElement.tagName&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"body"===e.documentElement.childNodes[0].nodeName&&e.documentElement.childNodes[0].childNodes&&e.documentElement.childNodes[0].childNodes.length&&"parsererror"===e.documentElement.childNodes[0].childNodes[0].nodeName?e.documentElement.childNodes[0].childNodes[0]:void 0},errorMessagePatterns=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")],extractParseError=function(e){var r,n,t=innerXML(e);for(r=0;r<errorMessagePatterns.length;r++)if(n=errorMessagePatterns[r].exec(t))return n[1]},failOnParseError=function(e){var r;if(null===e)throw new Error("Parse error");var n=getParseError(e);if(void 0!==n)throw r=extractParseError(n)||"Parse error",new Error(r)};exports.failOnParseError=function(e){return failOnParseError(e),e};
},{}],49:[function(require,module,exports){
var removeInvalidCharacters=function(e){return e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},serializeAttributeValue=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},serializeTextContent=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},serializeAttribute=function(e){var r=e.value;return" "+e.name+'="'+serializeAttributeValue(r)+'"'},getTagName=function(e){var r=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(r=r.toLowerCase()),r},serializeNamespace=function(e,r){var a=Array.prototype.map.call(e.attributes||e.attrs,function(e){return e.name}).indexOf("xmlns")>=0;return a||!r&&e.namespaceURI===e.parentNode.namespaceURI?"":' xmlns="'+e.namespaceURI+'"'},serializeChildren=function(e){return Array.prototype.map.call(e.childNodes,function(e){return nodeTreeToXHTML(e)}).join("")},serializeTag=function(e,r){var a="<"+getTagName(e);return a+=serializeNamespace(e,r),Array.prototype.forEach.call(e.attributes||e.attrs,function(e){a+=serializeAttribute(e)}),e.childNodes.length>0?(a+=">",a+=serializeChildren(e),a+="</"+getTagName(e)+">"):a+="/>",a},serializeText=function(e){var r=e.nodeValue||e.value||"";return serializeTextContent(r)},serializeComment=function(e){return"<!--"+e.data.replace(/-/g,"&#45;")+"-->"},serializeCDATA=function(e){return"<![CDATA["+e.nodeValue+"]]>"},nodeTreeToXHTML=function(e,r){var a=r&&r.rootNode;return"#document"===e.nodeName||"#document-fragment"===e.nodeName?serializeChildren(e):e.tagName?serializeTag(e,a):"#text"===e.nodeName?serializeText(e):"#comment"===e.nodeName?serializeComment(e):"#cdata-section"===e.nodeName?serializeCDATA(e):void 0};exports.serializeToString=function(e){return removeInvalidCharacters(nodeTreeToXHTML(e,{rootNode:!0}))};
},{}]},{},[2])(2)
});


//# sourceMappingURL=csscritic.allinone.js.map