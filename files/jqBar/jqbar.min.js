(function(e){e.fn.extend({jqbar:function(t){var n=e.extend({animationSpeed:2e3,barLength:200,orientation:"h",barWidth:15,barColor:"red",label:"&nbsp;",value:100},t);return this.each(function(){function a(e){var i=parseInt(e.attr("data-value"));if(i>100){i=100;alert("max value cannot exceed 100 percent")}var s=n.barLength*i/100;if(n.orientation=="h"){e.animate({width:s},{duration:2e3,step:function(e){var t=parseInt(e/n.barLength*100);if(isNaN(t))t=0;r.find(".bar-percent").html(t+"%")}})}else{var o=n.barLength-n.barLength*i/100;e.animate({top:o},{duration:2e3,step:function(e){var t=parseInt((n.barLength-parseInt(e))/n.barLength*100);if(isNaN(t))t=0;r.find(".bar-percent").html(Math.abs(t)+"%")}});r.find(".bar-percent").animate({top:o-t},2e3)}}var t=0;var r=e(this);if(n.orientation=="h"){r.addClass("jqbar horizontal").append('<span class="bar-label"></span><span class="bar-level-wrapper"><span class="bar-level"></span></span><span class="bar-percent"></span>');var i=r.find(".bar-label").html(n.label);var s=r.find(".bar-level").attr("data-value",n.value);var o=r.find(".bar-level-wrapper");s.css({height:n.barWidth,width:0,backgroundColor:n.barColor});var u=r.find(".bar-percent");u.html("0")}else{r.addClass("jqbar vertical").append('<span class="bar-percent"></span><span class="bar-level-wrapper"><span class="bar-level"></span></span><span class="bar-label"></span>');var i=r.find(".bar-label").html(n.label);var s=r.find(".bar-level").attr("data-value",n.value);var o=r.find(".bar-level-wrapper");r.css("height",n.barLength);s.css({height:n.barLength,top:n.barLength,width:n.barWidth,backgroundColor:n.barColor});o.css({height:n.barLength,width:n.barWidth});var u=r.find(".bar-percent");u.html("0");t=parseInt(u.outerHeight());u.css({top:n.barLength-t+"px"})}a(s)})}})})(jQuery)
