"use strict";var coliru=(function(){function displayColiruOutput(codeBlock,compileArea){compileArea.removeChild(compileArea.firstChild);var sourceCode=codeBlock.textContent;coliru.compile(coliru.makeSourceRunnable(sourceCode),function(response,state){if(state=="running"){compileArea.textContent="Running...\n"}else{if(state=="error"){compileArea.textContent="Error: "+reponse}else{compileArea.textContent="";if(response!=""){var outputArea=document.createElement("pre");compileArea.appendChild(outputArea);outputArea.className+=" coliru-output";outputArea.className+=" go";outputArea.textContent=response}var status=document.createElement("div");compileArea.appendChild(status);status.className+=" coliru-status";if(state==0){status.textContent="Success"}else{status.textContent="Failed (return code "+state+")"}var credit=document.createElement("div");compileArea.appendChild(credit);credit.className+=" coliru-credit";credit.innerHTML+=["Powered by <a ",'href="http://coliru.stacked-crooked.com/">',"Coliru</a>"].join("")}}compileArea.setAttribute("data-coliru-state",state)})}function createCompileButton(compileArea,compileAction){var compileButton=document.createElement("span");compileButton.textContent="Run this code";compileButton.className+=" runbutton";compileButton.onclick=compileAction;compileButton.onkeydown=compileAction;compileArea.appendChild(compileButton)}return{compile:function(sourceCode,compileReadyResponse){var linkOptions="";for(var i=0;i<coliru.linkLibraries.length;++i){linkOptions+="-l"+coliru.linkLibraries[i]+" "}var compileCommand=["clang++ -std=c++11 ","-O2 -Wall -pedantic -pthread ","main.cpp ",linkOptions,"&& ./a.out; echo COLIRUSTATUS $?"].join("");var coliruConnection=new XMLHttpRequest();coliruConnection.onreadystatechange=function(){if(coliruConnection.readyState==4){if(coliruConnection.status!=200){compileReadyResponse(coliruConnection.response,"error")}else{var rawResponse=coliruConnection.response;var pattern=/^([\s\S]*)COLIRUSTATUS (\d+)\n$/m;var splitResponse=rawResponse.match(pattern);compileReadyResponse(splitResponse[1],parseInt(splitResponse[2]))}}else{compileReadyResponse(coliruConnection.response,"running")}};coliruConnection.open("POST","http://coliru.stacked-crooked.com/compile",true);coliruConnection.send(JSON.stringify({cmd:compileCommand,src:sourceCode}))},linkLibraries:[],magicIncludes:[],makeSourceRunnable:function(sourceCode){if(coliru.containsMainMethod(sourceCode)){return sourceCode}else{var runnableSourceCode="";for(var i=0;i<coliru.magicIncludes.length;++i){runnableSourceCode+="#include <"+coliru.magicIncludes[i]+">\n"}runnableSourceCode+="int main() {\n"+sourceCode+"\n}";return runnableSourceCode}},containsMainMethod:function(sourceCode){return sourceCode.match(/int\s+main\([^\)]*\)\s*[\{;]/)},createCompileArea:function(codeBlock){var compileArea=document.createElement("div");compileArea.className+=" coliru";compileArea.setAttribute("data-coliru-state","not-run");createCompileButton(compileArea,function(codeBlock,compileArea){return function(){displayColiruOutput(codeBlock,compileArea)}}(codeBlock,compileArea));var preCode=codeBlock.parentNode;preCode.parentNode.insertBefore(compileArea,preCode.nextSibling)},updateCodeBlock:function(codeBlock){if(codeBlock.getAttribute("data-lang")=="c++"&&codeBlock.parentNode.tagName=="PRE"){coliru.createCompileArea(codeBlock)}},addRunButtonsToCodeBlocks:function(){var els=document.getElementsByTagName("code");for(var i=0;i<els.length;++i){coliru.updateCodeBlock(els[i])}}}})();