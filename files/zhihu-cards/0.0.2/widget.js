(function(e){var t="//cdn.jsdelivr.net/zhihu-card/0.0.1/";var r,a=0;var i,n,d,h;function u(t){if(e.querySelectorAll){return e.querySelectorAll("."+t)}var a=e.getElementsByTagName("div");var i=[];for(r=0;r<a.length;r++){if(~a[r].className.split(" ").indexOf(t)){i.push(a[r])}}return i}function l(e,t){return e.getAttribute("data-"+t)}function s(e){if(window.addEventListener){window.addEventListener("message",function(t){if(e.id===t.data.sender){e.height=t.data.height}},false)}}function c(r){var i=l(r,"theme")||"zhihu";cardurl=t+"theme/"+i+".html";var n=l(r,"userhash");if(!n){return}a+=1;var d=l(r,"width");var h=l(r,"height");var u=l(r,"key1");var c=l(r,"key2");var v=l(r,"key3");var f="ghcard-"+n+"-"+a;var o=e.createElement("iframe");o.setAttribute("id",f);o.setAttribute("frameborder",0);o.setAttribute("scrolling",0);o.setAttribute("allowtransparency",true);var g=cardurl+"?userhash="+n+"&identity="+f;g+="&key1="+u+"&key2="+c+"&key3="+v;o.src=g;o.width=d||Math.min(r.parentNode.clientWidth||400,400);if(h){o.height=h}s(o);r.parentNode.replaceChild(o,r);return o}var v=u("zhihu-card");for(r=0;r<v.length;r++){c(v[r])}})(document);
