/*! ReStable v0.1 by Alessandro Benoit */
(function(e,t,n){e.fn.ReStable=function(r){function o(t,n){var r=[],i={},o=e(t).find("tr").first().children("td"),u=0,a;if(s.rowHeaders){o=o.slice(1)}o.each(function(){r.push(e(this).text())});e(t).find("tr").slice(1).each(function(){var t=e(this);u++;e.each(r,function(e,n){e++;if(s.rowHeaders){if(!i[n]){i[n]={}}i[n][t.children("td:nth-child(1)").text()]=t.children("td:nth-child("+(e+1)+")").text()}else{if(!i[u]){i[u]={}}i[u][n]=t.children("td:nth-child("+e+")").text()}})});console.log(i);a=e("<ul/>",{"class":"tabletolist "+(s.rowHeaders?"rh":"nrh"),id:"tabletolist"+n}).insertBefore(e(t));e.each(i,function(t,n){var r=e("<li/>",{html:s.rowHeaders?'<span class="titles">'+t+"</span>":""}).appendTo(a);var i=e("<ul/>").appendTo(r);e.each(n,function(t,n){e("<li/>",{html:'<span class="row_headers">'+t+'</span> <span class="row_data">'+n+"</span>"}).appendTo(i)})});return a}var s=e.extend({rowHeaders:true,maxWidth:480},r);this.each(function(){function a(){if(e(t).width()>parseInt(s.maxWidth)){e(r).show();if(u){e(u).hide()}}else{e(r).hide();if(u){e(u).show()}else{u=o(r,n)}}}var r=e(this),u;n++;a();e(t).resize(function(){a()})})};e.ReStable=function(t){e("table").ReStable(t)}})(jQuery,this,0)