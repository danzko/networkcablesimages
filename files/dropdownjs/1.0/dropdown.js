if(jQuery)(function($){$.extend($.fn,{dropdown:function(method,data){switch(method){case'hide':hide();return $(this);case'attach':return $(this).attr('data-dropdown',data);case'detach':hide();return $(this).removeAttr('data-dropdown');case'disable':return $(this).addClass('dropdown-disabled');case'enable':hide();return $(this).removeClass('dropdown-disabled');}}});function show(event){var trigger=$(this),dropdown=$(trigger.attr('data-dropdown')),isOpen=trigger.hasClass('dropdown-open');if($(event.target).hasClass('dropdown-ignore'))return;event.preventDefault();event.stopPropagation();hide();if(isOpen||trigger.hasClass('dropdown-disabled'))return;trigger.addClass('dropdown-open');dropdown.data('dropdown-trigger',trigger).show();position();dropdown.trigger('show',{dropdown:dropdown,trigger:trigger});}
function hide(event){var targetGroup=event?$(event.target).parents().addBack():null;if(targetGroup&&targetGroup.is('.dropdown')){if(targetGroup.is('.dropdown-menu')){if(!targetGroup.is('A'))return;}else{return;}}
$(document).find('.dropdown:visible').each(function(){var dropdown=$(this);dropdown.hide().removeData('dropdown-trigger').trigger('hide',{dropdown:dropdown});});$(document).find('.dropdown-open').removeClass('dropdown-open');}
function position(){var dropdown=$('.dropdown:visible').eq(0),trigger=dropdown.data('dropdown-trigger'),hOffset=trigger?parseInt(trigger.attr('data-horizontal-offset')||0,10):null,vOffset=trigger?parseInt(trigger.attr('data-vertical-offset')||0,10):null;if(dropdown.length===0||!trigger)return;if(dropdown.hasClass('dropdown-relative')){dropdown.css({left:dropdown.hasClass('dropdown-anchor-right')?trigger.position().left-(dropdown.outerWidth(true)- trigger.outerWidth(true))- parseInt(trigger.css('margin-right'))+ hOffset:trigger.position().left+ parseInt(trigger.css('margin-left'))+ hOffset,top:trigger.position().top+ trigger.outerHeight(true)- parseInt(trigger.css('margin-top'))+ vOffset});}else{dropdown.css({left:dropdown.hasClass('dropdown-anchor-right')?trigger.offset().left-(dropdown.outerWidth()- trigger.outerWidth())+ hOffset:trigger.offset().left+ hOffset,top:trigger.offset().top+ trigger.outerHeight()+ vOffset});}}
$(document).on('click.dropdown','[data-dropdown]',show);$(document).on('click.dropdown',hide);$(window).on('resize',position);})(jQuery);
