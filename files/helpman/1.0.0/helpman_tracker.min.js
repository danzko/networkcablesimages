!function(a){"use strict";var b=function(a,b,c,d){function n(b){var c=b.origin||b.originalEvent.origin;if(c===a&&"string"==typeof b.data){var d=null;try{d=JSON.parse(b.data)}catch(a){}d&&"object"==typeof d&&!(d instanceof Array)&&"msg_type"in d&&"xdsc_read"===d.msg_type&&"namespace"in d&&d.namespace===e&&(j=d.cookies,g=!0,q())}}function o(){h=!0,q()}function p(a){i.push(a),q()}function q(){if(h||g)for(;i.length>0;)i.pop()(h)}function r(b,c,d){var f={namespace:e,msg_type:"xdsc_write",cookie_name:b,cookie_val:c,expires_days:d};document.getElementById("xdomain_cookie_"+k).contentWindow.postMessage(JSON.stringify(f),a)}function s(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(0===e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return""}function t(a,b,c){var d=new Date;d.setTime(d.getTime()+1e3*c*60*60*24),document.cookie=a+"="+b+"; expires="+d.toUTCString()}function u(a,b,c){return g||h?(c=c||l,c=null===b||void 0===b?-100:c,m||t(a,b,c),h||r(a,b,c),void(j[a]=b)):i.push(function(d){u(a,b,c)})}function v(a,b,c){function d(b,d,e){u(a,d,c),"function"==typeof e&&e(d)}if(c=c||l,!m){var e=s(a);if(e)return p(function(a){d(!a,e)}),b(e)}p(function(c){if(c)return d(!1,null,b);var e=a in j?j[a]:null;d(!c,e,b)})}"//"===a.substr(0,2)&&(a=("https:"===window.location.protocol?"https:":"http:")+a);var e=b||"xdsc",f=d||6e3,g=!1,h=!1,i=[],j={},k=(new Date).getTime(),l=30,m=!!c;window.addEventListener("message",n);var w=document.createElement("iframe");w.style.display="none",w.id="xdomain_cookie_"+k;var x={namespace:e,window_origin:window.location.origin,iframe_origin:a};return w.src=a+"/xdomain_cookie.html#"+encodeURIComponent(JSON.stringify(x)),document.body.appendChild(w),setTimeout(function(){g||o()},f),{get:v,set:u}};a.xDomainCookie=b}(this);
