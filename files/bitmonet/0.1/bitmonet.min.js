var bitmonet=undefined;var animatingTimerWidth=false;var timer=null;var checkModalTimer=null;var invoiceCheckTimer=null;(function(){var t=document.getElementsByTagName("script"),e=t[t.length-1].getAttribute("src");window.bitmonet_url=e.substr(0,e.lastIndexOf("/")+1)})();(function(t){window.bitmonetDialog=function s(i){var i=i||new Object;this.company=i.company||"The Washington Post";this.heading=i.heading||"Continue Reading with a Bitcoin Pass";this.logo=i.logo||false;this.subtitle="You've read <span class='bitmonet-limit'>15</span> free articles - grab a Bitcoin pass to keep going!";this.useSubtitle="Activate a pass to keep reading!";this.optionData=[{name:"Article Pass",description:"Read just this article",price:"10&cent;",value:10,note:"We hope you enjoy your article. Remember not to clear your cookies!","class":"articlePass"},{name:"Hour Pass",description:"1 hour of unlimited access",price:"$1",value:100,note:"Please remember not to clear your brower's cookies during this time.","class":"hourPass"},{name:"Day Pass",description:"All-you-can-read news, all day",price:"$3",value:300,note:"Please remember not to clear your brower's cookies during this time.","class":"dayPass"}];if(i.optionData!==undefined){for(var n=0;n<i.optionData.length;n++){if(i.optionData[n]!==undefined){for(var a in i.optionData[n]){if(i.optionData[n][a]!==undefined||i.optionData[n][a]!=="null"){this.optionData[n][a]=i.optionData[n][a]}}}}}this.footerText="Powered by Bitmonet.";this.footerLink="/";this.footerLinkText="Learn More";this.successURL=i.successURL||null;this.articleUponClick=i.articleUponClick||null;this.bitpayCreatePath=i.bitpayCreatePath||"http://bitmonet-rails.herokuapp.com/create_invoice";this.bitpayCheckPath=i.bitpayCheckPath||"http://bitmonet-rails.herokuapp.com/check_invoice";this.invoices=i.invoices||[];this.currentInvoice=i.currentInvoice||null;this.showThanks=i.showThanks||false;this.articleTypeIndex=i.articleTypeIndex||0;this.requireShowFromCheck=null;this.detectByMeta=i.detectByMeta||true;this.metaName=i.metaName||"bitmonet-article";this.metaContent=i.metaContent||"bitmonet-article";this.metaIdAttr=i.metaIdAttr||"bitmonet-articleId";this.numberClickedNeedBuy=i.numberClickedNeedBuy||15;this.articleClickRefreshRate=i.articleClickRefreshRate||7;this.detectByClassAndDataAttr=i.detectByClassAndDataAttr||false;this.clickClass=i.clickClass||"bitmonet-articleClick";this.clickDataAttr=i.clickDataAttr||"bitmonetArticleID";this.homeLink=i.homeLink||window.location.host;this.redirectPage=i.redirectPage||null;this.bitmonetFilesPath=i.bitmonetFilesPath||"/";var s=JSON.parse(e("bitmonet-parameters"));if(s){if(s.showThanks){this.showThanks=s.showThanks}if(s.articleTypeIndex){this.articleTypeIndex=s.articleTypeIndex}}if(i.numberClickedNeedBuy==0){this.numberClickedNeedBuy=0}this.bitmonetDomString='            <div id="bitmonet-grayOut"></div>            <div id="bitmonet-dialog">                <div class="bitmonet-relativeWrap">                    <div class="close EIEO"></div>                    <div class="bitmonet-content">                        <div class="bitmonet-header">                            <h4>'+this.company+"</h4>                            "+(this.logo?'<img src="'+this.logo+'" />':'<div class="bitmonet-logo"></div>')+'                            <p class="bitmonet-heading">'+this.heading+'</p>                            <p class="bitmonet-subtitle buyPass">                                '+this.subtitle+'                            </p>                        </div>                        <div class="bitmonet-purchaseOptions">                            <div class="bitmonet-purchaseOption articlePass EIEO">                                <div class="bitmonet-icon medium book"></div>                                <h5>'+this.optionData[0].name+'</h5>                                <p class="bitmonet-purchaseDesc">'+this.optionData[0].description+'</p>                                    <a class="bitmonet-buyLink" target="_blank">                                        <div class="bitmonet-button orange EIEO buyPass">                                            BUY FOR '+this.optionData[0].price+'                                        </div>                                    </a>                            </div>                            <div class="bitmonet-purchaseOption hourPass EIEO">                                <div class="bitmonet-icon medium clock"></div>                                <h5>'+this.optionData[1].name+'</h5>                                <p class="bitmonet-purchaseDesc">'+this.optionData[1].description+'</p>                                    <a class="bitmonet-buyLink" target="_blank">                                        <div class="bitmonet-button orange EIEO buyPass">                                            BUY FOR '+this.optionData[1].price+'                                        </div>                                    </a>                            </div>                            <div class="bitmonet-purchaseOption dayPass EIEO">                                <div class="bitmonet-icon medium happyFace"></div>                                <h5>'+this.optionData[2].name+'</h5>                                <p class="bitmonet-purchaseDesc">'+this.optionData[2].description+'</p>                                    <a class="bitmonet-buyLink" target="_blank">                                        <div class="bitmonet-button orange EIEO buyPass">                                            BUY FOR '+this.optionData[2].price+'                                        </div>                                    </a>                            </div>                            <div style="clear: both;"></div>                        </div>                    </div>                </div>                <div class="bitmonet-iframe">                    <div class="close EIEO"></div>                    <h4 class="bitmonet-passToBuy">                        Get Your <span class="bitmonet-passType">Article Pass</span>                    </h4>                    <iframe id="bitmonet-iframe" frameborder="0" border="0" src=""></iframe>                    <div class="bitmonet-expired">                        This transaction has expired. Would you like to                         <span class="bitmonet-reTryBitPay">try again?</span>                        <br /><br />                        <div class="bitmonet-cancelIframe EIEO">Go Back</div>                    </div>                    <div class="bitmonet-otherWindow">                        The payment is pending in another window.                         <br /><br />Please check back after you are done paying.                        <br /><br />                        <div class="bitmonet-cancelIframe EIEO">Go Back</div>                    </div>                    <div class="bitmonet-cancelIframe EIEO">Cancel</div>                </div>                <div class="bitmonet-thankYou">                    <div class="close EIEO"></div>                    <h4 class="bitmonet-thanksTitle">                        Thank you for purchasing a<span class="bitmonet-passType">n Article Pass</span>!                    </h4>                    <p>                        <span class="bitmonet-passNote">'+this.optionData[2].note+'</span>                         <br /> <br />                        If you have any questions, please call us at 1-800-477-4679.                    </p>                    <div class="bitmonet-thanksContinue EIEO">Continue</div>                </div>                <div class="bitmonet-footer">                '+this.footerText+' <a href="'+this.footerLink+'">'+this.footerLinkText+'</a>                </div>            </div>            <div id="bitmonet-timer" class="">                <div class="bitmonet-timerIcon EIEO"></div>                <div class="bitmonet-timerDescription">                    <div class="bitmonet-timerTime">                        <span class="bitmonet-hours bitmonet-timeNumber">0</span>                        <span class="bitmonet-timeSeparator">:</span>                        <span class="bitmonet-minutes bitmonet-timeNumber">00</span>                        <span class="bitmonet-timeSeparator">:</span>                        <span class="bitmonet-seconds bitmonet-timeNumber">00</span>                    </div>                    <div class="bitmonet-passType"></div>                </div>                <div class="bitmonet-timerToggle show EIEO">^</div>                <div style="clear: both;"></div>            </div>';this.initialize=function(e){t("head").append('<link href="'+window.bitmonet_url+'bitmonet.css" rel="stylesheet" type="text/css">');t("head").append('<link rel="stylesheet" media="(max-width: 420px)" href="'+window.bitmonet_url+'bitmonet_small.css" />');t("body").append(this.bitmonetDomString);t(".bitmonet-limit").text(this.numberClickedNeedBuy);var i=this;t("#bitmonet-dialog .close").on("click",function(){i.checkThanksAndReverse();if(!i.requireShowFromCheck){t("body").css("height","");t("body").css("width","");t("body").css("overflow","");t("#bitmonet-grayOut").fadeOut();t("#bitmonet-dialog").fadeOut()}else{window.location=i.redirectPage||i.homeLink}});t(document).keyup(function(e){if(e.which=="27"){t("#bitmonet-dialog .close").trigger("click")}});t(document).click(function(e){var i=t("#bitmonet-dialog").is(":visible");var n=t(e.target).attr("id")!="bitmonet-dialog";var a=t(e.target).parents("#bitmonet-dialog").length<=0;if(i&&n&&a){t("#bitmonet-dialog .close").trigger("click")}});t(window).resize(function(){i.check_body_padding_set_overlay();i.set_bmd_position()});t("#bitmonet-timer").on("mouseover",function(){if(!animatingTimerWidth&&!t(this).hasClass("timer-clicked")){t(this).stop().animate({bottom:"-1px"},"fast")}}).on("mouseout",function(){if(!animatingTimerWidth&&!t(this).hasClass("timer-clicked")){t(this).stop().animate({bottom:"-10px"},"fast")}});t("#bitmonet-timer").on("click",function(){if(t(this).hasClass("timer-clicked")){t(this).find(".bitmonet-timerDescription").fadeOut("fast",function(){animatingTimerWidth=true;t("#bitmonet-timer").stop().animate({width:"60px",bottom:"-10px"},"normal",function(){animatingTimerWidth=false;t(this).find(".bitmonet-timerToggle").text("^")})});t(this).removeClass("timer-clicked")}else{animatingTimerWidth=true;t(this).animate({width:"132px",bottom:"-1px"},"normal",function(){t(this).find(".bitmonet-timerDescription").fadeIn();animatingTimerWidth=false;t(this).find(".bitmonet-timerToggle").text("x")});t(this).addClass("timer-clicked")}});t(".bitmonet-thankYou .bitmonet-thanksContinue").on("click",function(){if(!i.requireShowFromCheck){t("#bitmonet-dialog .close").trigger("click")}else{i.checkThanksAndReverse();return false}});t(".bitmonet-purchaseOption > .bitmonet-buyLink").on("click",function(){var e=t(this).parent().find("h5").first().text();t(".bitmonet-iframe").find(".bitmonet-passType").text(e);bitmonet.articleTypeIndex=t(this).parent().index();var n=bitmonet.optionData[bitmonet.articleTypeIndex].class;t(".bitmonet-iframe").find("h4").first().addClass(n);i.onm_window_parameters();if(windowWidth>500){i.createInvoice(bitmonet.optionData[bitmonet.articleTypeIndex].value/100);return false}else{i.createInvoice(bitmonet.optionData[bitmonet.articleTypeIndex].value/100,true)}});t(".bitmonet-cancelIframe").on("click",function(){t(".bitmonet-iframe:visible, .bitmonet-otherWindow:visible").fadeOut("normal",function(){t(".bitmonet-relativeWrap").show()})});t(".bitmonet-reTryBitPay").on("click",function(){if(t(window).width()>500){i.createInvoice(bitmonet.optionData[bitmonet.articleTypeIndex].value/100)}else{var e=bitmonet.optionData[bitmonet.articleTypeIndex].value/100;var n=t(t(".bitmonet-buyLink")[bitmonet.articleTypeIndex]);i.createInvoice(e,n,true)}});window.onbeforeunload=function(){i.saveParameters()};i.saveParameters()};this.show=function(){this.check_body_padding_set_overlay();this.set_bmd_position();t("#bitmonet-grayOut").fadeIn();t("#bitmonet-dialog").fadeIn();t("body").css("height","100%");t("body").css("width","100%");t("body").css("overflow","hidden")};this.showThankYouDom=function(e){if(e&&t(".bitmonet-iframe").is(":visible")){t(".bitmonet-iframe").fadeOut("normal",function(){t(".bitmonet-thankYou").show()})}else if(e){t(".bitmonet-relativeWrap").fadeOut("normal",function(){t(".bitmonet-thankYou").show()})}else{t(".bitmonet-relativeWrap").hide();t(".bitmonet-thankYou").show()}var i=bitmonet.articleTypeIndex;var n=bitmonet.optionData[i].name;if(i==0||i==1){n="n "+n}else{n=" "+n}t(".bitmonet-thankYou .bitmonet-passType").text(n);t(".bitmonet-thankYou .bitmonet-passNote").text(bitmonet.optionData[bitmonet.articleTypeIndex].note);t(".bitmonet-thankYou h4").addClass(bitmonet.optionData[bitmonet.articleTypeIndex].class);bitmonet.show()};this.reverseThankYouDom=function(){t(".bitmonet-thankYou").fadeOut("normal",function(){t(".bitmonet-relativeWrap").fadeIn()})};this.checkThanksAndReverse=function(){if(this.showThanks){this.reverseThankYouDom();this.showThanks=false;this.saveParameters()}};this.createInvoice=function(e,i,n){var a="";var s=this;t.ajax({type:"GET",url:s.bitpayCreatePath,data:{price:e,currency:"USD"},dataType:"jsonp",success:function(e){if(typeof e!=="object"||!e.hasOwnProperty("id")){alert("An error occurred, please try again later.");return}s.invoices.push(e.id);s.currentInvoice=e.id;s.saveParameters();if(i){window.location=e.url}else{a=e.url+"&view=iframe";t(".bitmonet-iframe").find("iframe").first().attr("src",a);t(".bitmonet-relativeWrap").hide();t(".bitmonet-expired").hide();t(".bitmonet-otherWindow").hide();t(".bitmonet-iframe").show();t("#bitmonet-iframe").show();t(".bitmonet-iframe .bitmonet-cancelIframe").show()}o(e.id)},error:function(){alert("An error occurred, please try again later.")}})};this.onm_window_parameters=function(){windowWidth=t(window).width();windowHeight=t(window).height();documentWidth=t(document).width();documentHeight=t(document).height();vScrollPosition=t(document).scrollTop();hScrollPosition=t(document).scrollLeft()};this.set_bmd_position=function(){this.onm_window_parameters();var e=windowWidth<=420;if(e){t("#bitmonet-dialog").css("top","0px");t("#bitmonet-dialog").css("left","0px");return}var i=478;var n=700;if(t("#bitmonet-dialog").is(":visible")){i=t("#bitmonet-dialog").outerHeight();n=t("#bitmonet-dialog").outerWidth()}var a=windowHeight/2-i/2;a=a<0?0:a;var o=windowWidth/2-n/2;o=o<0?0:o;t("#bitmonet-dialog").css("top",a+"px");t("#bitmonet-dialog").css("left",o+"px")};this.check_body_padding_set_overlay=function(){this.onm_window_parameters();var e=windowWidth<=420;if(e){return}var i=this.get_number_from_px(t("body").css("margin-top"));var n=this.get_number_from_px(t("body").css("margin-bottom"));var a=this.get_number_from_px(t("body").css("margin-left"));var o=this.get_number_from_px(t("body").css("margin-right"));t("#bitmonet-grayOut").css("top","-"+i+"px");t("#bitmonet-grayOut").css("left","-"+a+"px");t("#bitmonet-grayOut").css("width",t(document).width()+o+"px");t("#bitmonet-grayOut").css("height",t(document).height()+n+"px")};this.get_number_from_px=function(t){var e=t.indexOf("px");return parseInt(t.substring(0,e))};this.setCookie=function(t,e,i){var n=new Date;n.setDate(n.getDate()+i);var a=escape(e)+(i==null?"":"; expires="+n.toUTCString());var o=window.location.host;if(o.indexOf("www.")!=-1){o=o.substring(3)}else if(o[0]!="."){o="."+o}var s=";domain="+o+";path=/";document.cookie=t+"="+a+s};this.getParamters=function(){var t=["company","heading","logo","subtitle","useSubtitle","optionData","footerText","footerLink","footerLinkText","successURL","articleUponClick","pageCodes","bitpayCreatePath","bitpayCheckPath","currentInvoice","showThanks","articleTypeIndex","requireShowFromCheck","detectByMeta","metaName","metaContent","metaIdAttr","numberClickedNeedBuy","articleClickRefreshRate","detectByClassAndDataAttr","clickClass","clickDataAttr","homeLink","redirectPage","bitmonetFilesPath"];var e={};for(var i in t){var n=t[i];e[n]=this[n]}return e};this.saveParameters=function(){var t=JSON.stringify(this.getParamters());this.setCookie("bitmonet-parameters",t,30)}};t(document).ready(function(){if(bitmonet===undefined){var i=JSON.parse(e("bitmonet-parameters"));bitmonet=new bitmonetDialog(i);bitmonet.initialize()}var a=window.location.pathname;var s=bitmonet.successURL||bitmonet.homeLink;if(a.indexOf(s)!==-1){var r=unescape(window.location.search.split("?")[1]);var m="&order[total_native][cents]";var c=r.indexOf(m);if(c==-1){return}var l=c+m.length+1;var d=r.indexOf("&",l+m.length+1);d=d===-1?r.length-1:d;var b=parseFloat(r.substring(l,d));var h=bitmonet.articleUponClick;n(b,h)}for(var u in bitmonet.invoices){o(bitmonet.invoices[u],true)}if(bitmonet.currentInvoice!=null){bitmonet.onm_window_parameters();if(windowWidth<500){t(".bitmonet-relativeWrap").hide();t("#bitmonet-iframe").hide();t(".bitmonet-iframe").fadeIn();t(".bitmonet-iframe > .bitmonet-cancelIframe").hide();t(".bitmonet-otherWindow").show();o(bitmonet.currentInvoice)}else{o(bitmonet.currentInvoice,true)}if(!t("#bitmonet-dialog").is(":visible")){bitmonet.show()}}});t(window).load(function(){if(bitmonet.detectByMeta){t("meta").each(function(){var n=t(this).attr("name")==bitmonet.metaName;var a=t(this).attr("content")==bitmonet.metaContent;if(n&&a){var o=window.location.pathname;var s=t(this).attr(bitmonet.metaIdAttr);var r=JSON.parse(e("bitmonet-articlesTracked"))||{};if(r=="null"){r={}}bitmonet.articleUponClick=o;if(!r[o]){r[o]=s;bitmonet.setCookie("bitmonet-articlesTracked",JSON.stringify(r),365)}var m=Object.keys(r).length;var c=m>bitmonet.numberClickedNeedBuy||bitmonet.numberClickedNeedBuy<1;var l=i();if(c&&!l){setTimeout(function(){bitmonet.show()},100);bitmonet.requireShowFromCheck=true}else{bitmonet.requireShowFromCheck=false}bitmonet.saveParameters()}else if(n&&!a){bitmonet.redirectPage=window.location.pathname;bitmonet.saveParameters()}})}if(bitmonet&&bitmonet.showThanks){bitmonet.showThankYouDom()}});function e(t){var e=document.cookie;var i=e.indexOf(" "+t+"=");if(i==-1){i=e.indexOf(t+"=")}if(i==-1){e=null}else{i=e.indexOf("=",i)+1;var n=e.indexOf(";",i);if(n==-1){n=e.length}e=unescape(e.substring(i,n))}return e}function i(){var t=window.location.href;var i=JSON.parse(e("bitmonet-dayPasses"));var n=false;var o=-1;var s=[];for(var r in i){var m=i[r];if(m.activated){var c=(new Date-new Date(m.start))/1e3/60/60;if(c>=24){s.push(r)}else if(!n){n=true;var l=new Date(m.start);l.setHours(l.getHours()+24);a(l);return true}else if(n){i[r].activated=false}}else if(o==-1){o=r}}for(var d=s.length-1;d>=0;d--){if(s[d]<o){o--}i.splice(s[d],1)}if(i){bitmonet.setCookie("bitmonet-dayPasses",JSON.stringify(i),365)}var b=JSON.parse(e("bitmonet-hourPasses"));var h=false;var u=-1;s=[];for(var f in b){var m=b[f];if(m.activated){var c=(new Date-new Date(m.start))/1e3/60/60;if(c>=1){s.push(f)}else if(!h&&!n){h=true;var l=new Date(m.start);l.setHours(l.getHours()+1);a(l);return true}else if(h){b[f].activated=false}}else if(u==-1){u=f}}for(var d=s.length-1;d>=0;d--){if(s[d]<u){u--}b.splice(s[d],1)}if(b){bitmonet.setCookie("bitmonet-hourPasses",JSON.stringify(b),365)}var v=JSON.parse(e("bitmonet-articlePasses"));var p=false;var w=-1;for(var k in v){var m=v[k];if(t.indexOf(m.link)!=-1){if(!m.activated){m.activated=true}bitmonet.setCookie("bitmonet-articlePasses",JSON.stringify(v),365);p=true;return true}else if((!m.activated||!m.link)&&w==-1){w=k}}if(!n&&!h&&!p){if(o!=-1){i[o].start=new Date;i[o].activated=true;n=true;var l=new Date(i[o].start);l.setHours(l.getHours()+24);a(l);bitmonet.setCookie("bitmonet-dayPasses",JSON.stringify(i),365);return true}else if(u!=-1){b[u].start=new Date;b[u].activated=true;h=true;var l=new Date(b[u].start);l.setHours(l.getHours()+1);a(l);bitmonet.setCookie("bitmonet-hourPasses",JSON.stringify(b),365);return true}else if(w!=-1){if(!bitmonet.articleUponClick){alert("wtf?");debugger}v[w].link=bitmonet.articleUponClick;v[w].activated=true;p=true;bitmonet.setCookie("bitmonet-articlePasses",JSON.stringify(v),365);return true}else{return false}}return n||h||p}function n(t,i){if(t==bitmonet.optionData[0].value){var n=JSON.parse(e("bitmonet-articlePasses"))||[];var a={link:null,activated:false};n.push(a);bitmonet.setCookie("bitmonet-articlePasses",JSON.stringify(n),365);bitmonet.showThanks=true;bitmonet.articleTypeIndex=0;bitmonet.saveParameters();if(i!==undefined){window.location=i||bitmonet.homeLink}}else if(t==bitmonet.optionData[1].value){var o=JSON.parse(e("bitmonet-hourPasses"))||[];var a={start:new Date,activated:false};o.push(a);bitmonet.setCookie("bitmonet-hourPasses",JSON.stringify(o),365);bitmonet.showThanks=true;bitmonet.articleTypeIndex=1;bitmonet.saveParameters();if(i!==undefined){window.location=i||bitmonet.homeLink}}else if(t==bitmonet.optionData[2].value){var s=JSON.parse(e("bitmonet-dayPasses"))||[];var a={start:new Date,activated:false};s.push(a);bitmonet.setCookie("bitmonet-dayPasses",JSON.stringify(s),365);bitmonet.showThanks=true;bitmonet.articleTypeIndex=2;bitmonet.saveParameters();if(i!==undefined){window.location=i||bitmonet.homeLink}}else{alert("something went wrong! This pass doesn't exist")}}function a(n){clearTimeout(timer);var o=n-new Date;var s=0;var r=0;var m=0;if(o>=0){var s=Math.floor(o/1e3/60/60);o-=s*1e3*60*60;var r=Math.floor(o/1e3/60);o-=r*1e3*60;var m=Math.floor(o/1e3);o-=m*1e3}s=s<10?"0"+s:s;t("#bitmonet-timer .bitmonet-hours").text(s);r=r<10?"0"+r:r;t("#bitmonet-timer .bitmonet-minutes").text(r);m=m<10?"0"+m:m;t("#bitmonet-timer .bitmonet-seconds").text(m);if(!t("#bitmonet-timer").hasClass("timer-visible")){t("#bitmonet-timer").addClass("timer-visible");t("#bitmonet-timer").stop().animate({bottom:"-5px"})}if((n-new Date)/1e3>1){timer=setTimeout(function(){a(n)},1e3)}else{if(t("#bitmonet-timer").hasClass("timer-visible")){t("#bitmonet-timer").removeClass("timer-visible");t("#bitmonet-timer").stop().animate({bottom:"-62px"})}clearTimeout(timer);var c=JSON.parse(e("bitmonet-articlesTracked"))||{};var l=Object.keys(c).length;var d=l>bitmonet.numberClickedNeedBuy||bitmonet.numberClickedNeedBuy<1;var b=i();if(d&&!b){bitmonet.show();bitmonet.requireShowFromCheck=true}else{bitmonet.requireShowFromCheck=false}}}function o(e,a){clearTimeout(invoiceCheckTimer);t.ajax({type:"GET",url:bitmonet.bitpayCheckPath,data:{id:e},dataType:"jsonp",error:function(){invoiceCheckTimer=setTimeout(function(){o(e)},1e3)},success:function(s){if(typeof s!=="object"||!s.hasOwnProperty("id")){invoiceCheckTimer=setTimeout(function(){o(e)},1e3);return}if(a==undefined&&s.status=="new"){invoiceCheckTimer=setTimeout(function(){o(s.id)},1e3)}else if(a==undefined&&s.status=="expired"||s.status=="invalid"){t("#bitmonet-iframe:visible, .bitmonet-cancelIframe:visible, .bitmonet-otherWindow:visible").fadeOut("normal",function(){t(".bitmonet-expired").fadeIn();if(bitmonet.currentInvoice!=null){bitmonet.currentInvoice=null;bitmonet.saveParameters()}})}else if(s.status=="paid"||s.status=="confirmed"||s.status=="complete"){if(jQuery.inArray(s.id,bitmonet.invoices)!=-1){bitmonet.invoices.splice(jQuery.inArray(s.id,bitmonet.invoices),1);bitmonet.saveParameters()}if(bitmonet.currentInvoice!=null){bitmonet.currentInvoice=null;bitmonet.saveParameters()}n(s.price*100);i();bitmonet.requireShowFromCheck=false;if(!t("#bitmonet-dialog").is(":visible")){bitmonet.show()}bitmonet.showThankYouDom(true)}else if(a){source=s.url+"&view=iframe";t(".bitmonet-iframe").find("iframe").first().attr("src",source);t(".bitmonet-relativeWrap").hide();t(".bitmonet-expired").hide();t(".bitmonet-otherWindow").hide();t(".bitmonet-iframe").show();t("#bitmonet-iframe").show();t(".bitmonet-iframe .bitmonet-cancelIframe").show();var r=bitmonet.optionData[bitmonet.articleTypeIndex].name;t(".bitmonet-iframe").find(".bitmonet-passType").text(r);var m=bitmonet.optionData[bitmonet.articleTypeIndex].class;t(".bitmonet-iframe").find("h4").first().addClass(m);if(!t("#bitmonet-dialog").is(":visible")){bitmonet.show()}}}})}})(jQuery);