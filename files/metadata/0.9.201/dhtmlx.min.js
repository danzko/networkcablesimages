/*
 Product Name: dhtmlxSuite
 Version: 4.5
 Edition: Professional
 License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
 Copyright UAB Dinamenta http://www.dhtmlx.com
 http://dhtmlx.com/docs/faq-lic.shtml#q1
 */

"undefined"==typeof window.dhx4&&(window.dhx4={version:"4.5",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(a,c){var e=document.createElement("DIV");e.className=a;null!=document.body.firstChild?document.body.insertBefore(e,document.body.firstChild):document.body.appendChild(e);var g=e[c||"offsetWidth"];e.parentNode.removeChild(e);return g},lastId:1,newId:function(){return this.lastId++},zim:{data:{},
step:5,first:function(){return 100},last:function(){var a=this.first(),c;for(c in this.data)a=Math.max(a,this.data[c]);return a},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){null!=this.data[a]&&(this.data[a]=null,delete this.data[a])}},s2b:function(a){"string"==typeof a&&(a=a.toLowerCase());return 1==a||1==a||"true"==a||"1"==a||"yes"==a||"y"==a||"on"==a},s2j:function(a){var c=null;dhx4.temp=null;try{eval("dhx4.temp="+a)}catch(e){dhx4.temp=null}c=dhx4.temp;
dhx4.temp=null;return c},absLeft:function(a){"string"==typeof a&&(a=document.getElementById(a));return this.getOffset(a).left},absTop:function(a){"string"==typeof a&&(a=document.getElementById(a));return this.getOffset(a).top},_aOfs:function(a){for(var c=0,e=0;a;)c+=parseInt(a.offsetTop),e+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:c,left:e}},_aOfsRect:function(a){a=a.getBoundingClientRect();var c=document.body,e=document.documentElement,g=a.left+(window.pageXOffset||e.scrollLeft||c.scrollLeft)-
(e.clientLeft||c.clientLeft||0);return{top:Math.round(a.top+(window.pageYOffset||e.scrollTop||c.scrollTop)-(e.clientTop||c.clientTop||0)),left:Math.round(g)}},getOffset:function(a){return a.getBoundingClientRect?this._aOfsRect(a):this._aOfs(a)},_isObj:function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length},_copyObj:function(a){if(this._isObj(a)){var c={},e;for(e in a)c[e]="object"==typeof a[e]&&null!=a[e]?this._copyObj(a[e]):a[e]}else for(c=[],e=0;e<a.length;e++)c[e]="object"==
typeof a[e]&&null!=a[e]?this._copyObj(a[e]):a[e];return c},screenDim:function(){var a=0<=navigator.userAgent.indexOf("MSIE"),c={};c.left=document.body.scrollLeft;c.right=c.left+(window.innerWidth||document.body.clientWidth);c.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);c.bottom=c.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return c},selectTextRange:function(a,
c,e){a="string"==typeof a?document.getElementById(a):a;var g=a.value.length;c=Math.max(Math.min(c,g),0);e=Math.min(e,g);if(a.setSelectionRange)try{a.setSelectionRange(c,e)}catch(h){}else if(a.createTextRange){a=a.createTextRange();a.moveStart("character",c);a.moveEnd("character",e-g);try{a.select()}catch(l){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var a={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",
msTransition:"transitionend",transition:"transitionend"},c;for(c in a)0==this.transData.transProp&&null!=document.documentElement.style[c]&&(this.transData.transProp=c,this.transData.transEv=a[c])}return this.transData},_xmlNodeValue:function(a){for(var c="",e=0;e<a.childNodes.length;e++)c+=null!=a.childNodes[e].nodeValue?a.childNodes[e].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return c}},window.dhx4.isIE=0<=navigator.userAgent.indexOf("MSIE")||0<=navigator.userAgent.indexOf("Trident"),
window.dhx4.isIE6=null==window.XMLHttpRequest&&0<=navigator.userAgent.indexOf("MSIE"),window.dhx4.isIE7=0<=navigator.userAgent.indexOf("MSIE 7.0")&&0>navigator.userAgent.indexOf("Trident"),window.dhx4.isIE8=0<=navigator.userAgent.indexOf("MSIE 8.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE9=0<=navigator.userAgent.indexOf("MSIE 9.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE10=0<=navigator.userAgent.indexOf("MSIE 10.0")&&0<=navigator.userAgent.indexOf("Trident")&&
1!=window.navigator.pointerEnabled,window.dhx4.isIE11=0<=navigator.userAgent.indexOf("Trident")&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=0<=navigator.userAgent.indexOf("Edge"),window.dhx4.isOpera=0<=navigator.userAgent.indexOf("Opera"),window.dhx4.isChrome=0<=navigator.userAgent.indexOf("Chrome")&&!window.dhx4.isEdge,window.dhx4.isKHTML=(0<=navigator.userAgent.indexOf("Safari")||0<=navigator.userAgent.indexOf("Konqueror"))&&!window.dhx4.isEdge,window.dhx4.isFF=0<=navigator.userAgent.indexOf("Firefox"),
window.dhx4.isIPad=0<=navigator.userAgent.search(/iPad/gi),window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(a){return window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==a.pointerType||window.dhx4.isEdge&&"mouse"==a.pointerType},_touchOn:function(a){null==a&&(a=document.body);a.style.touchAction=a.style.msTouchAction=""},_touchOff:function(a){null==a&&(a=document.body);
a.style.touchAction=a.style.msTouchAction="none"}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:"undefined"!=typeof window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}));
"undefined"==typeof window.dhx4.template&&(window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(a,c,e){return a.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(a,h,l,m){a=window.dhx4.trim(m);l=null;m=[c[h]];if(0<a.length){a=a.split(":");for(var n=[],r=0;r<a.length;r++)0<r&&null!=n[n.length-1].match(/\\$/)?n[n.length-1]=n[n.length-1].replace(/\\$/,"")+":"+a[r]:n.push(a[r]);l=n[0];for(r=1;r<n.length;r++)m.push(n[r])}return"string"==
typeof l&&"function"==typeof window.dhx4.template[l]?window.dhx4.template[l].apply(window.dhx4.template,m):0<h.length&&"undefined"!=typeof c[h]?1==e?window.dhx4.trim(c[h]):String(c[h]):""})},window.dhx4.template.date=function(a,c){if(null!=a){if(a instanceof Date)return window.dhx4.date2str(a,c);a=a.toString();return null!=a.match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(a)),c):a}return""},window.dhx4.template.maxlength=function(a,c){return String(a).substr(0,c)},window.dhx4.template.number_format=
function(a,c,e,g){c=window.dhx4.template._parseFmt(c,e,g);return 0==c?a:window.dhx4.template._getFmtValue(a,c)},window.dhx4.template.lowercase=function(a){if("undefined"==typeof a||null==a)a="";return String(a).toLowerCase()},window.dhx4.template.uppercase=function(a){if("undefined"==typeof a||null==a)a="";return String(a).toUpperCase()},window.dhx4.template._parseFmt=function(a,c,e){a=a.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==a||4!=a.length)return!1;c={i_len:!1,i_sep:"string"==typeof c?
c:",",d_len:!1,d_sep:"string"==typeof e?e:".",s_bef:"string"==typeof a[1]?a[1]:"",s_aft:"string"==typeof a[3]?a[3]:""};e=a[2].split(".");null!=e[1]&&(c.d_len=e[1].length);e=e[0].split(",");1<e.length&&(c.i_len=e[e.length-1].length);return c},window.dhx4.template._getFmtValue=function(a,c){var e=String(a).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=e&&5==e.length){var g="";null!=e[1]&&(g+=e[1]);g+=c.s_bef;if(!1!==c.i_len){for(var h=0,l="",m=e[2].length-1;0<=m;m--)l=""+e[2].charAt(m)+l,++h==
c.i_len&&0<m&&(l=c.i_sep+l,h=0);g+=l}else g+=e[2];if(!1!==c.d_len){for(null==e[4]&&(e[4]="");e[4].length<c.d_len;)e[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+c.d_len+"}/);");e=e[4].match(dhx4.temp);null!=e&&(g+=c.d_sep+e);dhx4.temp=null}return g+=c.s_aft}return a});
"undefined"==typeof window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:"January February March April May June July August September October November December".split(" "),monthShortName:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayFullName:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayShortName:"Su Mo Tu We Th Fr Sa".split(" ")}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(a,c,e){if(null==
c||"undefnied"==typeof c)c=window.dhx4.dateFormat[window.dhx4.dateLang];if(null==e||"undefnied"==typeof e)e=window.dhx4.dateStrings[window.dhx4.dateLang];if(a instanceof Date)var g=function(a){return 1==String(a).length?"0"+String(a):a},h=String(c||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(c){switch(c){case "%d":return g(a.getDate());case "%j":return a.getDate();case "%D":return e.dayShortName[a.getDay()];case "%l":return e.dayFullName[a.getDay()];case "%m":return g(a.getMonth()+1);case "%n":return a.getMonth()+
1;case "%M":return e.monthShortName[a.getMonth()];case "%F":return e.monthFullName[a.getMonth()];case "%y":return g(a.getYear()%100);case "%Y":return a.getFullYear();case "%g":return(a.getHours()+11)%12+1;case "%h":return g((a.getHours()+11)%12+1);case "%G":return a.getHours();case "%H":return g(a.getHours());case "%i":return g(a.getMinutes());case "%s":return g(a.getSeconds());case "%a":return 11<a.getHours()?"pm":"am";case "%A":return 11<a.getHours()?"PM":"AM";case "%%":return"%";case "%u":return a.getMilliseconds();
case "%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;c=a.getTimezoneOffset();var h=Math.abs(Math.floor(c/60)),n=Math.abs(c)-60*h;return(0<c?"-":"+")+g(h)+":"+g(n);default:return c}});return h||String(a)},window.dhx4.str2date=function(a,c,e){if(null==c||"undefnied"==typeof c)c=window.dhx4.dateFormat[window.dhx4.dateLang];if(null==e||"undefnied"==typeof e)e=window.dhx4.dateStrings[window.dhx4.dateLang];c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,
"\\$&");var g=[],h=[];c=c.replace(/%[a-z]/gi,function(a){switch(a){case "%d":case "%m":case "%y":case "%h":case "%H":case "%i":case "%s":return h.push(a),"(\\d{2})";case "%D":case "%l":case "%M":case "%F":return h.push(a),"([a-zéûäа-яё]{1,})";case "%j":case "%n":case "%g":case "%G":return h.push(a),"(\\d{1,2})";case "%Y":return h.push(a),"(\\d{4})";case "%a":return h.push(a),"([a|p]m)";case "%A":return h.push(a),"([A|P]M)";case "%u":return h.push(a),"(\\d{1,6})";case "%P":return h.push(a),"([+-]\\d{1,2}:\\d{1,2})"}return a});
c=a.match(new RegExp(c,"i"));if(null==c||c.length-1!=h.length)return"Invalid Date";for(a=1;a<c.length;a++)g.push(c[a]);var l={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};c={};var m={};for(a=0;a<h.length;a++)if("undefined"!=typeof l[h[a]]){var n=l[h[a]];c[n]||(c[n]=[],m[n]=[]);c[n].push(g[a]);m[n].push(h[a])}g=[];h=[];for(a=1;7>=a;a++)if(null!=c[a])for(l=0;l<c[a].length;l++)g.push(c[a][l]),h.push(m[a][l]);c=new Date;
c.setDate(1);c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);m=function(a,c){for(var e=0;e<c.length;e++)if(c[e].toLowerCase()==a)return e;return-1};for(a=0;a<g.length;a++)switch(h[a]){case "%d":case "%j":case "%n":case "%m":case "%Y":case "%H":case "%G":case "%i":case "%s":case "%u":if(!isNaN(g[a]))c[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[h[a]]](Number(g[a])+
("%m"==h[a]||"%n"==h[a]?-1:0));break;case "%M":case "%F":l=m(g[a].toLowerCase(),e[{"%M":"monthShortName","%F":"monthFullName"}[h[a]]]);0<=l&&c.setMonth(l);break;case "%y":isNaN(g[a])||(l=Number(g[a]),c.setFullYear(l+(50<l?1900:2E3)));break;case "%g":case "%h":isNaN(g[a])||(l=Number(g[a]),12>=l&&0<=l&&c.setHours(l+(0<=m("pm",g)?12==l?0:12:12==l?-12:0)));break;case "%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=g[a])}return c});
"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(a){if("string"!==typeof a)return a;a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE)var c=(new window.DOMParser).parseFromString(a,"text/xml");else window.ActiveXObject!==window.undefined&&(c=new window.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},xmltop:function(a,c,e){if(("undefined"==typeof c.status||400>c.status)&&(xml=c.responseXML?c.responseXML||c:dhx4.ajax.parse(c.responseText||
c))&&null!==xml.documentElement)try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(a)[0]}catch(g){}-1!==e&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",c,e]);return document.createElement("DIV")},xpath:function(a,c){c.nodeName||(c=c.responseXML||c);if(dhx4.isIE)try{return c.selectNodes(a)||[]}catch(e){return[]}else{for(var g=[],h,l=(c.ownerDocument||c).evaluate(a,c,null,XPathResult.ANY_TYPE,null);h=l.iterateNext();)g.push(h);return g}},query:function(a){dhx4.ajax._call(a.method||
"GET",a.url,a.data||"",a.async||!0,a.callback,null,a.headers)},get:function(a,c){return this._call("GET",a,null,!0,c)},getSync:function(a){return this._call("GET",a,null,!1)},put:function(a,c,e){return this._call("PUT",a,c,!0,e)},del:function(a,c,e){return this._call("DELETE",a,c,!0,e)},post:function(a,c,e){1==arguments.length?c="":2!=arguments.length||"function"!=typeof c&&"function"!=typeof window[c]?c=String(c):(e=c,c="");return this._call("POST",a,c,!0,e)},postSync:function(a,c){c=null==c?"":
String(c);return this._call("POST",a,c,!1)},getLong:function(a,c){this._call("GET",a,null,!0,c,{url:a})},postLong:function(a,c,e){2!=arguments.length||"function"!=typeof c&&!typeof window[c]||(e=c,c="");this._call("POST",a,c,!0,e,{url:a,postData:c})},_call:function(a,c,e,g,h,l,m){var n=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);
1==g&&(n.onreadystatechange=function(){(4==n.readyState||1==r&&3==n.readyState)&&(200==n.status&&""!=n.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:n,filePath:c,async:g}]))&&window.setTimeout(function(){"function"==typeof h&&h.apply(window,[{xmlDoc:n,filePath:c,async:g}]);null!=l&&("undefined"!=typeof l.postData?dhx4.ajax.postLong(l.url,l.postData,h):dhx4.ajax.getLong(l.url,h));n=h=null},1)});"GET"==a&&1!=this.cache&&(c+=(0<=c.indexOf("?")?"&":"?")+"dhxr"+(new Date).getTime()+"=1");n.open(a,
c,g);if(null!=m)for(var u in m)n.setRequestHeader(u,m[u]);else"POST"==a||"PUT"==a||"DELETE"==a?n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==a&&(e=null);n.setRequestHeader("X-Requested-With","XMLHttpRequest");n.send(e);return{xmlDoc:n,filePath:c,async:g}}});
"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(a,c,e,g,h){if("clear"==h){for(var l in a._dhxdataload)a._dhxdataload[l]=null,delete a._dhxdataload[l];a._loadData=null;a._dhxdataload=null;a.load=null;a.loadStruct=null}else if(a._dhxdataload={initObj:c,xmlToJson:e,xmlRootTag:g,onBeforeXLS:null},a._loadData=function(a,c,e){2==arguments.length&&(e=c,c=null);var g=null;3==arguments.length&&(e=arguments[2]);if("string"==typeof a){var h=a.replace(/^\s{1,}/,"").replace(/\s{1,}$/,
"");(new RegExp("^<"+this._dhxdataload.xmlRootTag)).test(h.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(g=dhx4.ajax.parse(a),null!=g&&(g=this[this._dhxdataload.xmlToJson].apply(this,[g])));null!=g||null==h.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==h.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(g=dhx4.s2j(h));if(null==g){this.callEvent("onXLS",[]);g=[];if("function"==typeof this._dhxdataload.onBeforeXLS&&(h=this._dhxdataload.onBeforeXLS.apply(this,[a]),null!=h&&"object"==typeof h&&(null!=h.url&&(a=h.url),null!=
h.params)))for(var l in h.params)g.push(l+"="+encodeURIComponent(h.params[l]));var x=this,y=function(c){var g=null,g=0<=(c.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)||null!=c.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?x[x._dhxdataload.xmlToJson].apply(x,[c.xmlDoc.responseXML]):dhx4.s2j(c.xmlDoc.responseText);null!=g&&x[x._dhxdataload.initObj].apply(x,[g,a]);x.callEvent("onXLE",[]);null!=e&&("function"==typeof e?e.apply(x,[]):"function"==typeof window[e]&&window[e].apply(x,
[]));x=y=e=null},g=g.join("&")+("string"==typeof c?"&"+c:"");"post"==dhx4.ajax.method?dhx4.ajax.post(a,g,y):"get"==dhx4.ajax.method&&dhx4.ajax.get(a+(0<g.length?(0<a.indexOf("?")?"&":"?")+g:""),y);return}}else g="object"==typeof a.documentElement||"undefined"!=typeof a.tagName&&"undefined"!=typeof a.getElementsByTagName&&0<a.getElementsByTagName(this._dhxdataload.xmlRootTag).length?this[this._dhxdataload.xmlToJson].apply(this,[a]):window.dhx4._copyObj(a);null!=g&&this[this._dhxdataload.initObj].apply(this,
[g]);null!=e&&("function"==typeof e?e.apply(this,[]):"function"==typeof window[e]&&window[e].apply(this,[]),e=null)},null!=h)for(l in c={struct:"loadStruct",data:"load"},h)1==h[l]&&(a[c[l]]=function(){return this._loadData.apply(this,arguments)});a=null});
"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(a,c){"clear"==c?(a.detachAllEvents(),a.dhxevs=null,a.attachEvent=null,a.detachEvent=null,a.checkEvent=null,a.callEvent=null,a.detachAllEvents=null):(a.dhxevs={data:{}},a.attachEvent=function(a,c){a=String(a).toLowerCase();this.dhxevs.data[a]||(this.dhxevs.data[a]={});var h=window.dhx4.newId();this.dhxevs.data[a][h]=c;return h},a.detachEvent=function(a){for(var c in this.dhxevs.data){var h=0,l;for(l in this.dhxevs.data[c])l==
a?(this.dhxevs.data[c][l]=null,delete this.dhxevs.data[c][l]):h++;0==h&&(this.dhxevs.data[c]=null,delete this.dhxevs.data[c])}},a.checkEvent=function(a){a=String(a).toLowerCase();return null!=this.dhxevs.data[a]},a.callEvent=function(a,c){a=String(a).toLowerCase();if(null==this.dhxevs.data[a])return!0;var h=!0,l;for(l in this.dhxevs.data[a])h=this.dhxevs.data[a][l].apply(this,c)&&h;return h},a.detachAllEvents=function(){for(var a in this.dhxevs.data){for(var c in this.dhxevs.data[a])this.dhxevs.data[a][c]=
null,delete this.dhxevs.data[a][c];this.dhxevs.data[a]=null;delete this.dhxevs.data[a]}});a=null},dhx4._eventable(dhx4));
window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(a){return""==a},isNotEmpty:function(a){return a instanceof Array?0<a.length:""==!a},isValidBoolean:function(a){return!!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return!!a.toString().match(/(^-?\d+$)/)},
isValidNumeric:function(a){return!!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return!!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(a){return(a=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/))&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3]&&59>=a[4]&&59>=a[5]&&59>=a[6])||!1},isValidDate:function(a){return(a=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/))&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3])||!1},isValidTime:function(a){return(a=
a.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/))&&!!(24>=a[1]&&59>=a[2]&&59>=a[3])||!1},isValidIPv4:function(a){return(a=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/))&&!!(255>=a[1]&&255>=a[2]&&255>=a[3]&&255>=a[4])||!1},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&!0||!1}},
dhtmlxValidation=new dhtmlxValidation);
"undefined"==typeof window.dhtmlx&&(window.dhtmlx={extend:function(a,c){for(var e in c)a[e]||(a[e]=c[e]);return a},extend_api:function(a,c,e){var g=window[a];g&&(window[a]=function(a){if(a&&"object"==typeof a&&!a.tagName){var e=g.apply(this,c._init?c._init(a):arguments),m;for(m in dhtmlx)if(c[m])this[c[m]](dhtmlx[m]);for(m in a)if(c[m])this[c[m]](a[m]);else 0===m.indexOf("on")&&this.attachEvent(m,a[m])}else e=g.apply(this,arguments);c._patch&&c._patch(this);return e||this},window[a].prototype=g.prototype,
e&&dhtmlx.extend(window[a].prototype,e))},url:function(a){return-1!=a.indexOf("?")?"&":"?"}});function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};
dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,c){a.onmousedown=this.preCreateDragCopy;a.dragStarter=c;this.addDragLanding(a,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,c){a.dragLanding=c};
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!a&&!window.event||2!=(a||event).button){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;
window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();a&&a.preventDefault&&a.preventDefault();return!1}};
dhtmlDragAndDropObject.prototype.callDrag=function(a){a||(a=window.event);dragger=window.dhtmlDragAndDrop;if(!(100>(new Date).valueOf()-dragger.downtime)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=
0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(a,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var c=dragger.gldragNode;dragger.gldragNode.old&&(c=dragger.gldragNode.old);c.parentNode.removeChild(c);var e=dragger.dragNode.pWindow;c.pWindow&&c.pWindow.dhtmlDragAndDrop.lastLanding&&c.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(c.pWindow.dhtmlDragAndDrop.lastLanding);_isIE?(c=document.createElement("Div"),c.innerHTML=
dragger.dragNode.outerHTML,dragger.dragNode=c.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);e.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||
document.documentElement.scrollTop)+"px";dragger.checkLanding(a.srcElement?a.srcElement:a.target,a)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var c=parent.frames[window.name].frameElement.offsetParent,e=0,g=0;c;)e+=c.offsetLeft,g+=c.offsetTop,c=c.offsetParent;parent.dhtmlDragAndDrop&&(c=parent.dhtmlDragAndDrop.calculateFramePosition(1),e+=1*c.split("_")[0],g+=1*c.split("_")[1]);if(a)return e+"_"+g;this.fx=e;this.fy=g}return"0_0"};
dhtmlDragAndDropObject.prototype.checkLanding=function(a,c){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,c.clientX,c.clientY,c),this.lastLanding_scr=_isIE?c.srcElement:c.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,c):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,c.clientX,c.clientY,c),this.lastLanding=
0,this._onNotFound&&this._onNotFound())};
dhtmlDragAndDropObject.prototype.stopDrag=function(a,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var e=dragger.lastLanding;dragger.lastLanding=null;e&&e.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,e,_isIE?event.srcElement:a.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=
0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var c=0;c<window.frames.length;c++)try{window.frames[c]!=a&&window.frames[c].dhtmlDragAndDrop&&window.frames[c].dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(g){}};
dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,c){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&c&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());
try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var g=0;g<window.frames.length;g++)try{window.frames[g]!=a&&window.frames[g].dhtmlDragAndDrop&&window.frames[g].dhtmlDragAndDrop.initFrameRoute(window,!a||c?1:0)}catch(h){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0);-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0);
-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||
-1!=navigator.appVersion.indexOf("MSIE 10.0")||7<document.documentMode)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));if("undefined"==typeof window.dhtmlxEvent)var dhtmlxEvent=function(a,c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e)};null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2E3);
"undefined"==typeof dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){function a(){if(e){var a=document.createEvent("HTMLEvents");a.initEvent("dblclick",!0,!0);e.dispatchEvent(a);c=e=null}}var c,e,g,h;dhtmlxEvent(document.body,"touchstart",function(l){e=l.touches[0].target;g=l.touches[0].clientX;h=l.touches[0].clientY;c=window.setTimeout(a,dhtmlxEvent.touchDelay)});dhtmlxEvent(document.body,"touchmove",function(a){c&&(50<Math.abs(a.touches[0].clientX-g)||50<Math.abs(a.touches[0].clientY-h))&&
(window.clearTimeout(c),c=e=!1)});dhtmlxEvent(document.body,"touchend",function(a){c&&(window.clearTimeout(c),c=e=!1)});dhtmlxEvent.initTouch=function(){}});window.dhtmlx||(dhtmlx={});dhtmlx.assert=function(a,c){a||dhtmlx.error(c)};dhtmlx.assert_enabled=function(){return!1};dhtmlx.assert_event=function(a,c){a._event_check||(a._event_check={},a._event_check_size={});for(var e in c){a._event_check[e.toLowerCase()]=c[e];var g=-1,h;for(h in c[e])g++;a._event_check_size[e.toLowerCase()]=g}};
dhtmlx.assert_method_info=function(a,c,e,g){for(var h=[],l=0;l<g.length;l++)h.push(g[l][0]+" : "+g[l][1]+"\n   "+g[l][2].describe()+(g[l][3]?"; optional":""));return a.name+"."+c+"\n"+e+"\n Arguments:\n - "+h.join("\n - ")};dhtmlx.assert_method=function(a,c){for(var e in c)dhtmlx.assert_method_process(a,e,c[e].descr,c[e].args,c[e].min||99,c[e].skip)};
dhtmlx.assert_method_process=function(a,c,e,g,h,l){var m=a[c];l||(a[c]=function(){if(arguments.length!=g.length&&arguments.length<h)dhtmlx.log("warn","Incorrect count of parameters\n"+a[c].describe()+"\n\nExpecting "+g.length+" but have only "+arguments.length);else for(var e=0;e<g.length;e++)g[e][3]||g[e][2](arguments[e])||dhtmlx.log("warn","Incorrect method call\n"+a[c].describe()+"\n\nActual value of "+(e+1)+" parameter: {"+typeof arguments[e]+"} "+arguments[e]);return m.apply(this,arguments)});
a[c].describe=function(){return dhtmlx.assert_method_info(a,c,e,g)}};dhtmlx.assert_event_call=function(a,c,e){a._event_check&&(a._event_check[c]?dhtmlx.isNotDefined(e)?dhtmlx.log("warn","Event without parameters :"+c):a._event_check_size[c]!=e.length&&dhtmlx.log("warn","Incorrect event call, expected "+a._event_check_size[c]+" parameter(s), but have "+e.length+" parameter(s), for "+c+" event"):dhtmlx.log("warn","Not expected event call :"+c))};
dhtmlx.assert_event_attach=function(a,c){a._event_check&&!a._event_check[c]&&dhtmlx.log("warn","Unknown event name: "+c)};dhtmlx.assert_property=function(a,c){a._settings_check||(a._settings_check={});dhtmlx.extend(a._settings_check,c)};dhtmlx.assert_check=function(a,c){if("object"==typeof a)for(var e in a)dhtmlx.assert_settings(e,a[e],c)};
dhtmlx.assert_settings=function(a,c,e){if(e=e||this._settings_check){if(!e[a])return dhtmlx.log("warn","Unknown propery: "+a);for(var g=!1,h=0;h<e[a].length;h++){var l=e[a][h];if("string"!=typeof l&&("function"==typeof l?g=g||l(c):"object"==typeof l&&"function"==typeof l[1]&&(g=g||l[1](c))&&l[2]&&dhtmlx.assert_check(c,l[2]),g))break}g||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(a,e)+"\nActual value: {"+typeof c+"} "+c)}};
dhtmlx.assert_info=function(a,c){for(var e=c[a],g="",h=[],l=0;l<e.length;l++)"string"==typeof rule?g=e[l]:e[l].describe?h.push(e[l].describe()):e[l][1]&&e[l][1].describe&&h.push(e[l][1].describe());return"Property: "+a+", "+g+" \nExpected value: \n - "+h.join("\n - ")};
dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(a){return"string"!=typeof a||0!==a.indexOf("#")||""!==a.substr(1).replace(/[0-9A-F]/gi,"")?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(a){return"function"==typeof a||"string"==typeof a?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},
dhtmlx.assert_rule_boolean=function(a){return"boolean"==typeof a?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(a,c){return"object"==typeof a?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(a){return"string"==typeof a?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(a){return!!dhtmlx.toNode(a)},
dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(a){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(a){var c=function(c){return a[c]};c.describe=function(){var c=[],g;for(g in a)c.push(g);return"{String} can take one of next values: "+c.join(", ")};return c},dhtmlx.assert_rule_dimension=function(a){return 1*a==a&&!isNaN(a)&&
0<=a?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(a){return"number"==typeof a?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(a){return"function"==typeof a?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(a){return!0},dhtmlx.assert_rule_any.describe=
function(){return"Any value"},dhtmlx.assert_rule_mix=function(a,c){var e=function(e){return a(e)||c(e)?!0:!1};e.describe=function(){return a.describe()};return e});dhtmlx.codebase="./";dhtmlx.copy=function(a){var c=dhtmlx.copy._function;c.prototype=a;return new c};dhtmlx.copy._function=function(){};
dhtmlx.extend=function(a,c){for(var e in c)a[e]=c[e];dhtmlx.assert_enabled()&&c._assert&&(a._assert(),a._assert=null);dhtmlx.assert(a,"Invalid nesting target");dhtmlx.assert(c,"Invalid nesting source");c._init&&a._init();return a};
dhtmlx.proto_extend=function(){for(var a=arguments,c=a[0],e=[],g=a.length-1;0<g;g--){"function"==typeof a[g]&&(a[g]=a[g].prototype);for(var h in a[g])"_init"==h?e.push(a[g][h]):c[h]||(c[h]=a[g][h])}a[0]._init&&e.push(a[0]._init);c._init=function(){for(var a=0;a<e.length;a++)e[a].apply(this,arguments)};c.base=a[1];g=function(a){this._init(a);this._parseSettings&&this._parseSettings(a,this.defaults)};g.prototype=c;c=a=null;return g};dhtmlx.bind=function(a,c){return function(){return a.apply(c,arguments)}};
dhtmlx.require=function(a){dhtmlx._modules[a]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText),dhtmlx._modules[a]=!0)};dhtmlx._modules={};dhtmlx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhtmlx.methodPush=function(a,c,e){return function(){var e=!1;return e=a[c].apply(a,arguments)}};dhtmlx.isNotDefined=function(a){return"undefined"==typeof a};
dhtmlx.delay=function(a,c,e,g){setTimeout(function(){var g=a.apply(c,e);a=c=e=null;return g},g||1)};dhtmlx.uid=function(){this._seed||(this._seed=(new Date).valueOf());this._seed++;return this._seed};dhtmlx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a};dhtmlx.toArray=function(a){return dhtmlx.extend(a||[],dhtmlx.PowerArray)};dhtmlx.toFunctor=function(a){return"string"==typeof a?eval(a):a};dhtmlx._events={};
dhtmlx.event=function(a,c,e,g){a=dhtmlx.toNode(a);var h=dhtmlx.uid();dhtmlx._events[h]=[a,c,e];g&&(e=dhtmlx.bind(e,g));a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e);return h};dhtmlx.eventRemove=function(a){if(a){dhtmlx.assert(this._events[a],"Removing non-existing event");var c=dhtmlx._events[a];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]);delete this._events[a]}};
dhtmlx.log=function(a,c,e){if(window.console&&console.log){a=a.toLowerCase();if(window.console[a])window.console[a](c||"unknown error");else window.console.log(a+": "+c);e&&window.console.log(e)}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date;dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){dhtmlx.log("Info","Timing end ["+a+"]:"+((new Date).valueOf()-dhtmlx._start_time_log.valueOf())/1E3+"s")},1)};
dhtmlx.log_time=function(a){var c="_start_time_log"+a;dhtmlx[c]?(dhtmlx.log("Info","Timing end ["+a+"]:"+((new Date).valueOf()-dhtmlx[c].valueOf())/1E3+"s"),dhtmlx[c]=null):(dhtmlx[c]=new Date,dhtmlx.log("Info","Timing start ["+a+"]"))};dhtmlx.error=function(a,c){dhtmlx.log("error",a,c)};
dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(a,c){if(this._events._block)return!0;a=a.toLowerCase();dhtmlx.assert_event_call(this,a,c);var e=this._events[a.toLowerCase()],g=!0;dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+a,c);if(e)for(var h=0;h<e.length;h++)!1===e[h].apply(this,c||[])&&(g=!1);this._map[a]&&
!this._map[a].callEvent(a,c)&&(g=!1);return g},attachEvent:function(a,c,e){a=a.toLowerCase();dhtmlx.assert_event_attach(this,a);e=e||dhtmlx.uid();c=dhtmlx.toFunctor(c);var g=this._events[a]||dhtmlx.toArray();g.push(c);this._events[a]=g;this._handlers[e]={f:c,t:a};return e},detachEvent:function(a){this._handlers[a]&&(this._events[this._handlers[a].t].remove(this._handlers[a].f),delete this._handlers[a])}};
dhtmlx.PowerArray={removeAt:function(a,c){0<=a&&this.splice(a,c||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,c){if(c||0===c){var e=this.splice(c,this.length-c);this[c]=a;this.push.apply(this,e)}else this.push(a)},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,c){for(var e=0;e<this.length;e++)a.call(c||this,this[e])},map:function(a,c){for(var e=0;e<this.length;e++)this[e]=a.call(c||this,this[e]);return this}};dhtmlx.env={};
-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9));dhtmlx.env={};
(function(){dhtmlx.env.transform=!1;dhtmlx.env.transition=!1;for(var a={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition"]},c=document.createElement("DIV"),e=0;e<a.names.length;e++)for(;p=a[a.names[e]].pop();)"undefined"!=typeof c.style[p]&&(dhtmlx.env[a.names[e]]=!0)})();
dhtmlx.env.transform_prefix=function(){var a;dhtmlx._isOpera?a="-o-":(a="",dhtmlx._isFF&&(a="-moz-"),dhtmlx._isWebKit&&(a="-webkit-"));return a}();dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();dhtmlx.zIndex={drag:1E4};
dhtmlx.html={create:function(a,c,e){c=c||{};a=document.createElement(a);for(var g in c)a.setAttribute(g,c[g]);c.style&&(a.style.cssText=c.style);c["class"]&&(a.className=c["class"]);e&&(a.innerHTML=e);return a},getValue:function(a){return(a=dhtmlx.toNode(a))?dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var c=0;c<a.length;c++)this.remove(a[c]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,c,e){a&&(c?c.parentNode.insertBefore(a,
c):e.appendChild(a))},locate:function(a,c){a=a||event;for(var e=a.target||a.srcElement;e;){if(e.getAttribute){var g=e.getAttribute(c);if(g)return g}e=e.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var c=document.body,e=document.documentElement,g=a.top+(window.pageYOffset||e.scrollTop||c.scrollTop)-(e.clientTop||c.clientTop||0),c=a.left+(window.pageXOffset||e.scrollLeft||c.scrollLeft)-(e.clientLeft||c.clientLeft||0);return{y:Math.round(g),x:Math.round(c)}}for(c=
g=0;a;)g+=parseInt(a.offsetTop,10),c+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:g,x:c}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var c=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=!0;return!1},addCss:function(a,
c){a.className+=" "+c},removeCss:function(a,c){a.className=a.className.replace(RegExp(c,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhtmlx.codebase=a.slice(0,a.length).join("/")+"/")})();dhtmlx.ui||(dhtmlx.ui={});
dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlrows=this._htmlmap=null;this._html&&document.body.appendChild(this._html);this._html=null;this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null);this.data=this._obj=this._dataobj=null;this._events=this._handlers={};this.render&&(this.render=function(){})}};dhtmlx.destructors=[];
dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var a=0;a<dhtmlx.destructors.length;a++)dhtmlx.destructors[a].destructor();dhtmlx.destructors=[]}for(var c in dhtmlx._events)a=dhtmlx._events[c],a[0].removeEventListener?a[0].removeEventListener(a[1],a[2],!1):a[0].detachEvent&&a[0].detachEvent("on"+a[1],a[2]),delete dhtmlx._events[c]});dhtmlx.ajax=function(a,c,e){if(0!==arguments.length){var g=new dhtmlx.ajax;e&&(g.master=e);g.get(a,null,c)}return this.getXHR?this:new dhtmlx.ajax};
dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,c,e){var g=this.getXHR();"function"==typeof e&&(e=[e]);if("object"==typeof c){var h=[],l;for(l in c){var m=c[l];if(null===m||m===dhtmlx.undefined)m="";h.push(l+"="+encodeURIComponent(m))}c=h.join("&")}c&&!this.post&&(a=a+(-1!=a.indexOf("?")?"&":"?")+c,c=null);g.open(this.post?"POST":"GET",a,!this._sync);this.post&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var n=this;g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){if(e&&n)for(var a=0;a<e.length;a++)e[a]&&e[a].call(n.master||n,g.responseText,g.responseXML,g);e=n=n.master=null}};g.send(c||null);return g},get:function(a,c,e){this.post=!1;return this.send(a,c,e)},post:function(a,c,e){this.post=!0;return this.send(a,c,e)},sync:function(){this._sync=!0;return this}};
dhtmlx.AtomDataLoader={_init:function(a){this.data={};a&&(this._settings.datatype=a.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){if(!this._ready_for_data)return a;this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data)return a;this.parse(a,this._settings.datatype);
return!0},load:function(a,c,e){this.callEvent("onXLS",[]);"string"==typeof c?(this.data.driver=dhtmlx.DataDriver[c],c=e):this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"];dhtmlx.ajax(a,[this._onLoad,c],this)},parse:function(a,c){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[c||"xml"];this._onLoad(a,null)},_onLoad:function(a,c,e){e=this.data.driver;c=e.getRecords(e.toObject(a,c))[0];this.data=e?e.getDetails(c):a;this.callEvent("onXLE",[])},_check_data_feed:function(a){if(!this._settings.dataFeed||
this._ignore_feed||!a)return!0;var c=this._settings.dataFeed;if("function"==typeof c)return c.call(this,a.id||a,a);c=c+(-1==c.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.callEvent("onXLS",[]);dhtmlx.ajax(c,function(a,c){this._ignore_feed=!0;this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]);this._ignore_feed=!1;this.callEvent("onXLE",[])},this);return!1}};dhtmlx.DataDriver={};
dhtmlx.DataDriver.json={toObject:function(a){a||(a="[]");return"string"==typeof a?(eval("dhtmlx.temp="+a),dhtmlx.temp):a},getRecords:function(a){a&&a.data&&(a=a.data);return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0,_key:a.dhx_security}}};
dhtmlx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if("string"==typeof a){eval("temp="+a);dhtmlx.temp=[];a=(void 0).header;for(var c=0;c<(void 0).data.length;c++){for(var e={},g=0;g<a.length;g++)"undefined"!=typeof(void 0).data[c][g]&&(e[a[g]]=(void 0).data[c][g]);dhtmlx.temp.push(e)}return dhtmlx.temp}return a},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0}}};
dhtmlx.DataDriver.html={toObject:function(a){if("string"==typeof a){var c=null;-1==a.indexOf("<")&&(c=dhtmlx.toNode(a));c||(c=document.createElement("DIV"),c.innerHTML=a);return c.getElementsByTagName(this.tag)}return a},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};
dhtmlx.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?(eval("dhtmlx.temp="+a),dhtmlx.temp):a},getRecords:function(a){return a},getDetails:function(a){for(var c={},e=0;e<a.length;e++)c["data"+e]=a[e];return c},getInfo:function(a){return{_size:0,_from:0}}};
dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var c={},e=0;e<a.length;e++)c["data"+e]=a[e];return c},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var c=0;c<a.length;c++)a[c]=a[c].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};
dhtmlx.DataDriver.xml={toObject:function(a,c){return c&&(c=this.checkResponse(a,c))?c:"string"==typeof a?this.fromString(a):a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_key:a.documentElement.getAttribute("dhx_security")}},xpath:function(a,c){if(window.XPathResult){var e=a;-1==a.nodeName.indexOf("document")&&
(a=a.ownerDocument);for(var g=[],e=a.evaluate(c,e,null,XPathResult.ANY_TYPE,null),h=e.iterateNext();h;)g.push(h),h=e.iterateNext();return g}g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(l){}if(g)return a.selectNodes(c);g=c.split("/").pop();return a.getElementsByTagName(g)},tagToObject:function(a,c){c=c||{};var e=!1,g=a.attributes;if(g&&g.length){for(var h=0;h<g.length;h++)c[g[h].name]=g[h].value;e=!0}g=a.childNodes;for(h=0;h<g.length;h++)1==g[h].nodeType&&(e=g[h].tagName,"undefined"!=typeof c[e]?
(c[e]instanceof Array||(c[e]=[c[e]]),c[e].push(this.tagToObject(g[h],{}))):c[g[h].tagName]=this.tagToObject(g[h],{}),e=!0);if(!e)return this.nodeValue(a);c.value=this.nodeValue(a);return c},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var c=new ActiveXObject("Microsoft.xmlDOM");c.loadXML(a);return c}dhtmlx.error("Load from xml string is not supported")},
checkResponse:function(a,c){if(c&&c.firstChild&&"parsererror"!=c.firstChild.tagName)return c;var e=this.fromString(a.replace(/^[\s]+/,""));if(e)return e;dhtmlx.error("xml can't be parsed",a)}};
dhtmlx.DataLoader={_init:function(a){this.name="DataStore";this.data=(a||"").datastore||new dhtmlx.DataStore;this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,c){dhtmlx.AtomDataLoader.load.apply(this,arguments);this.data.feed||(this.data.feed=function(c,g){if(this._load_count)return this._load_count=[c,g];this._load_count=!0;this.load(a+(-1==a.indexOf("?")?"?":"&")+"posStart="+c+"&count="+g,function(){var a=this._load_count;this._load_count=
!1;"object"==typeof a&&this.data.feed.apply(this,a)})})},_onLoad:function(a,c,e){this.data._parse(this.data.driver.toObject(a,c));this.callEvent("onXLE",[]);this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(a,e){if(this._settings.dataFeed){var g={};if(a||g){if("function"==typeof a){if(!e)return;a(e,g)}else g={text:e};this.clearAll();var h=this._settings.dataFeed;if("function"==
typeof h)return h.call(this,e,g);var l=[],m;for(m in g)l.push("dhx_filter["+m+"]="+encodeURIComponent(g[m]));this.load(h+(0>h.indexOf("?")?"?":"&")+l.join("&"),this._settings.datatype);return!1}}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);a&&a.call&&a.apply(this,arguments)}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};
dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(a){this.callEvent("onParse",[this.driver,a]);this._filter_order&&this.filter();var c=this.driver.getInfo(a);c._key&&(dhtmlx.security_key=c._key);var e=this.driver.getRecords(a),g=1*(c._from||0);0===g&&this.order[0]&&(g=this.order.length);for(var h=0,l=0;l<e.length;l++){var m=this.driver.getDetails(e[l]),n=this.id(m);this.pull[n]||(this.order[h+
g]=n,h++);this.pull[n]=m;this.extraParser&&this.extraParser(m);this._scheme&&(this._scheme.$init?this._scheme.$update(m):this._scheme.$update&&this._scheme.$update(m))}for(l=0;l<c._size;l++)this.order[l]||(n=dhtmlx.uid(),m={id:n,$template:"loading"},this.pull[n]=m,this.order[l]=n);this.callEvent("onStoreLoad",[this.driver,a]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(a,c){dhtmlx.assert(this.pull[a],"Can't change id, for non existing item: "+a);this.pull[c]=
this.pull[a];this.pull[c].id=c;this.order[this.order.find(a)]=c;this._filter_order&&(this._filter_order[this._filter_order.find(a)]=c);this.callEvent("onIdChange",[a,c]);this._render_change_id&&this._render_change_id(a,c)},get:function(a){return this.item(a)},set:function(a,c){return this.update(a,c)},item:function(a){return this.pull[a]},update:function(a,c){this._scheme&&this._scheme.$update&&this._scheme.$update(c);if(!1===this.callEvent("onBeforeUpdate",[a,c]))return!1;this.pull[a]=c;this.refresh(a)},
refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this._skip_refresh=!0;a.call(this);this._skip_refresh=!1},getRange:function(a,c){a=a?this.indexById(a):this.startOffset||0;c?c=this.indexById(c):(c=Math.min(this.endOffset||Infinity,this.dataCount()-1),0>c&&(c=0));if(a>c){var e=c;c=a;a=e}return this.getIndexRange(a,c)},getIndexRange:function(a,c){c=Math.min(c||Infinity,this.dataCount()-
1);for(var e=dhtmlx.toArray(),g=a||0;g<=c;g++)e.push(this.item(this.order[g]));return e},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,c){if(0>a||0>c)dhtmlx.error("DataStore::move","Incorrect indexes");else{var e=this.idByIndex(a),g=this.item(e);this.order.removeAt(a);this.order.insertAt(e,Math.min(this.order.length,c));this.callEvent("onStoreUpdated",[e,g,"move"])}},scheme:function(a){this._scheme=a},sync:function(a,c,e){"function"!=typeof c&&
(e=c,c=null);dhtmlx.debug_bind&&(this.debug_sync_master=a,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var g=a;"DataStore"!=a.name&&(a=a.data);var h=dhtmlx.bind(function(g,h,n){if("update"!=n||c)g=null;g||(this.order=dhtmlx.toArray([].concat(a.order)),this._filter_order=null,this.pull=a.pull,c&&this.silent(c),this._on_sync&&this._on_sync());dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+
this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);e?e=!1:this.refresh(g)},this);a.attachEvent("onStoreUpdated",h);this.feed=function(a,c){g.loadNext(c,a)};h()},add:function(a,c){if(this._scheme){a=a||{};for(var e in this._scheme)a[e]=a[e]||this._scheme[e];this._scheme&&(this._scheme.$init?this._scheme.$update(a):this._scheme.$update&&this._scheme.$update(a))}e=this.id(a);var g=this.dataCount();if(dhtmlx.isNotDefined(c)||
0>c)c=g;c>g&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),c=Math.min(this.order.length,c));if(!1===this.callEvent("onBeforeAdd",[e,a,c]))return!1;if(this.exists(e))return dhtmlx.error("Not unique ID");this.pull[e]=a;this.order.insertAt(e,c);this._filter_order&&(g=this._filter_order.length,!c&&this.order.length&&(g=0),this._filter_order.insertAt(e,g));this.callEvent("onafterAdd",[e,c]);this.callEvent("onStoreUpdated",[e,a,"add"]);return e},remove:function(a){if(a instanceof Array)for(var c=
0;c<a.length;c++)this.remove(a[c]);else{if(!1===this.callEvent("onBeforeDelete",[a]))return!1;if(!this.exists(a))return dhtmlx.error("Not existing ID",a);c=this.item(a);this.order.remove(a);this._filter_order&&this._filter_order.remove(a);delete this.pull[a];this.callEvent("onafterdelete",[a]);this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this._filter_order=this.feed=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){(a>=
this.order.length||0>a)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index");return this.order[a]},indexById:function(a){return this.order.find(a)},next:function(a,c){return this.order[this.indexById(a)+(c||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,c){return this.order[this.indexById(a)-(c||1)]},sort:function(a,c,e){var g=a;"function"==typeof a?g={as:a,dir:c}:"string"==typeof a&&(g={by:a,dir:c,as:e});a=[g.by,g.dir,
g.as];this.callEvent("onbeforesort",a)&&(this.order.length&&(g=dhtmlx.sort.create(g),c=this.getRange(this.first(),this.last()),c.sort(g),this.order=c.map(function(a){return this.id(a)},this)),this.refresh(),this.callEvent("onaftersort",a))},filter:function(a,c){if(this.callEvent("onBeforeFilter",[a,c])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(a){var e=a;c=c||"";"string"==typeof a&&(a=dhtmlx.Template.fromHTML(a),c=c.toString().toLowerCase(),
e=function(c,e){return-1!=a(c).toLowerCase().indexOf(e)});for(var g=dhtmlx.toArray(),h=0;h<this.order.length;h++){var l=this.order[h];e(this.item(l),c)&&g.push(l)}this._filter_order=this.order;this.order=g}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(a,c){for(var e=0;e<this.order.length;e++)a.call(c||this,this.item(this.order[e]))},provideApi:function(a,c){this.debug_bind_master=a;c&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,
onbeforeupdate:a});for(var e="get set sort add remove exists idByIndex indexById item update refresh dataCount filter next previous clearAll first last serialize".split(" "),g=0;g<e.length;g++)a[e[g]]=dhtmlx.methodPush(this,e[g]);dhtmlx.assert_enabled()&&this.assert_event(a)},serialize:function(){for(var a=this.order,c=[],e=0;e<a.length;e++)c.push(this.pull[a[e]]);return c}};
dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(a,c){a*=1;c*=1;return a>c?1:a<c?-1:0},string_strict:function(a,c){a=a.toString();c=c.toString();return a>c?1:a<c?-1:0},string:function(a,c){a=a.toString().toLowerCase();c=c.toString().toLowerCase();return a>c?1:a<c?-1:0}},by:function(a,c){if(!a)return c;"function"!=typeof c&&(c=dhtmlx.sort.as[c||"string"]);a=dhtmlx.Template.fromHTML(a);return function(e,g){return c(a(e),a(g))}},dir:function(a,
c){return"asc"==a?c:function(a,g){return-1*c(a,g)}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(a){a=a||event;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[a.which||a.keyCode,a.ctrlKey,a.shiftKey,a])}};
dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this));this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this);this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,
this.on_dblclick,"ItemDblClick")},_onContext:function(a){var c=dhtmlx.html.locate(a,this._id);if(c&&!this.callEvent("onBeforeContextMenu",[c,a]))return dhtmlx.html.preventEvent(a)},_onMouse:function(a){dhtmlx._isIE&&(a=document.createEventObject(event));this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer);this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==a.type?this._onMouseMove(a):this._onMouseOut(a)},this),500)},_onMouseMove:function(a){this._mouseEvent(a,
this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(a,c,e){a=a||event;for(var g=a.target||a.srcElement,h="",l=null,m=!1;g&&g.parentNode;){if(!m&&g.getAttribute&&(l=g.getAttribute(this._id))){g.getAttribute("userdata")&&this.callEvent("onLocateData",[l,g,a]);if(!this.callEvent("on"+e,[l,a,g]))return;m=!0}if(h=g.className)if(h=h.split(" "),h=h[0]||h[1],c[h])return c[h].call(this,a,l||dhtmlx.html.locate(a,
this._id),g);g=g.parentNode}return m}};
dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(a,c){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,c)},_define:function(a,c){dhtmlx.assert_settings.call(this,a,c);var e=this[a+"_setter"];return this._settings[a]=e?e.call(this,c):c},_parseSeetingColl:function(a){if(a)for(var c in a)this._define(c,a[c])},_parseSettings:function(a,c){var e=dhtmlx.extend({},c);"object"!=typeof a||a.tagName||dhtmlx.extend(e,a);this._parseSeetingColl(e)},_mergeSettings:function(a,
c){for(var e in c)switch(typeof a[e]){case "object":a[e]=this._mergeSettings(a[e]||{},c[e]);break;case "undefined":a[e]=c[e]}return a},_parseContainer:function(a,c,e){"object"!=typeof a||a.tagName||(a=a.container);this._obj=this.$view=dhtmlx.toNode(a);!this._obj&&e&&(this._obj=e(a));dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+c;this._obj.onselectstart=function(){return!1};this._dataobj=this._obj},_set_type:function(a){if("object"==typeof a)return this.type_setter(a);
dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){a&&dhtmlx.extend(this.type,a);this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type("object"==typeof a?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},
css_setter:function(a){this._obj.className+=" "+a;return a}};
dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(a){var c=dhtmlx.Template.setter(a),e=this;return function(){return c.apply(e,arguments)}},fromHTML:function(a){if("function"==typeof a)return a;if(this._cache[a])return this._cache[a];a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,
'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};
dhtmlx.Type={add:function(a,c){!a.types&&a.prototype.types&&(a=a.prototype);dhtmlx.assert_enabled()&&this.assert_event(c);var e=c.name||"default";this._template(c);this._template(c,"edit");this._template(c,"loading");a.types[e]=dhtmlx.extend(dhtmlx.extend({},a.types[e]||this._default),c);return e},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(a,c){c="template"+
(c?"_"+c:"");var e=a[c];if(e&&"string"==typeof e){if(-1!=e.indexOf("->"))switch(e=e.split("->"),e[0]){case "html":e=dhtmlx.html.getValue(e[1]).replace(/\"/g,'\\"');break;case "http":e=(new dhtmlx.ajax).sync().get(e[1],{uid:(new Date).valueOf()}).responseText}a[c]=dhtmlx.Template.fromHTML(e)}}};
dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])}};
dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";dhtmlx.assert_enabled()&&this._assert();"string"==typeof a&&(a={template:a});dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};
dhtmlx.ui.Tooltip.prototype={show:function(a,c){this._disabled||(this.data!=a&&(this.data=a,this.render(a)),this._obj.style.top=c.y+this._settings.dy+"px",this._obj.style.left=c.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};
dhtmlx.AutoTooltip={tooltip_setter:function(a){var c=new dhtmlx.ui.Tooltip(a);this.attachEvent("onMouseMove",function(a,g){c.show(this.get(a),dhtmlx.html.pos(g))});this.attachEvent("onMouseOut",function(a,g){c.hide()});this.attachEvent("onMouseMoving",function(a,g){c.hide()});return c}};dhtmlx.compat=function(a,c){if(dhtmlx.compat[a])dhtmlx.compat[a](c)};dhtmlx.attaches||(dhtmlx.attaches={});
dhtmlx.attaches.attachAbstract=function(a,c){var e=document.createElement("DIV");e.id="CustomObject_"+dhtmlx.uid();e.style.width="100%";e.style.height="100%";e.cmp="grid";document.body.appendChild(e);this.attachObject(e.id);c.container=e.id;var g=this.vs[this.av];g.grid=new window[a](c);g.gridId=e.id;g.gridObj=e;g.grid.setSizes=function(){this.resize?this.resize():this.render()};return this.vs[this._viewRestore()].grid};
dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};
function dhtmlXCellObject(a,c){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(c||"");this._idd=a;this._isCell=!0;this.conf={borders:!0,idx:{},css:c||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var e=document.createElement("DIV");e.className="dhx_cell_cont"+
this.conf.css;this.cell.appendChild(e);e=null;this._updateIdx=function(){for(var a in this.conf.idx)this.conf.idx[a]=null,delete this.conf.idx[a];for(var c=0;c<this.cell.childNodes.length;c++){var e=this.cell.childNodes[c].className;for(a in this.conf.idx_data)null!=e.match(new RegExp(this.conf.idx_data[a]))&&(this.conf.idx[a]=c)}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var a in this.dataNodes)null!=this.dataNodes[a]&&"function"==typeof this.dataNodes[a].setSizes&&this.dataNodes[a].setSizes();
null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&("layout"==this.dataType&&"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()?this.dataObj.setSizes():this.dataObj.setSizes.apply(this.dataObj,arguments))};this._setSize=function(a,c,e,m,n,r,u,v){null==this.conf.size&&(this.conf.size={});null==v&&(v={});var w={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=a;this.conf.size.y=c;this.conf.size.w=
Math.max(e,0);this.conf.size.h=Math.max(m,0);for(var x in w)this.cell.style[v[x]||x]=this.conf.size[w[x]]+"px";this.callEvent("_onSetSize",[]);!0!==r?this._adjustCont(n,u):this._adjustAttached(n);this._adjustProgress()};this._adjustCont=function(a,c){var e=this.cell.childNodes[this.conf.idx.cont],m=0,n;for(n in this.conf.ofs_nodes.t)var r=this.conf.ofs_nodes.t[n],m=m+("func"==r?this[n]():1==r?this.cell.childNodes[this.conf.idx[n]].offsetHeight:0);var u=0;for(n in this.conf.ofs_nodes.b)r=this.conf.ofs_nodes.b[n],
u+="func"==r?this[n]():1==r?this.cell.childNodes[this.conf.idx[n]].offsetHeight:0;e.style.left="0px";e.style.top=m+"px";this.conf.cells_cont||(this.conf.cells_cont={},e.style.width=this.cell.offsetWidth+"px",e.style.height=Math.max(this.cell.offsetHeight-m-u,0)+"px",this.conf.cells_cont.w=parseInt(e.style.width)-e.offsetWidth,this.conf.cells_cont.h=parseInt(e.style.height)-e.offsetHeight);e.style.left="0px";e.style.top=m+"px";e.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+
"px";e.style.height=Math.max(this.conf.size.h-m-u+this.conf.cells_cont.h,0)+"px";this._adjustAttached(a);"expand"==c&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)};this._mtbUpdBorder=function(){for(var a=["menu","toolbar","ribbon"],c=0;c<a.length;c++)if(null!=this.conf.idx[a[c]]){var e=this.cell.childNodes[this.conf.idx[a[c]]],m="dhx_cell_"+a[c]+"_no_borders",n="dhx_cell_"+a[c]+"_def";e.className=e.className.replace(new RegExp(this.conf.borders?m:n),this.conf.borders?
n:m)}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=!0;this._viewSave=function(a){this.views[a]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var c=this.cell.childNodes[this.conf.idx.cont];0<c.childNodes.length;)this.views[a].cellCont.push(c.firstChild),c.removeChild(c.firstChild);
this.dataObj=this.dataType=null;this.conf.url_data=null;for(var e in this.dataNodes){for(var m in this.conf.ofs_nodes)"undefined"!=typeof this.conf.ofs_nodes[m][e]&&(this.views[a].ofs_nodes[m][e]=this.conf.ofs_nodes[m][e],this.conf.ofs_nodes[m][e]=null,delete this.conf.ofs_nodes[m][e]);this.views[a].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[a].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];
this._updateIdx()}this.callEvent("_onViewSave",[a])};this._viewRestore=function(a){if(null!=this.views[a]){this.dataObj=this.views[a].dataObj;this.dataType=this.views[a].dataType;this.conf.url_data=this.views[a].url_data;for(var c=0;c<this.views[a].cellCont.length;c++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[a].cellCont[c]);for(var e in this.views[a].dataNodes)this.dataNodes[e]=this.views[a].dataNodes[e],"menu"==e&&this.cell.insertBefore(this.views[a].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||
this.conf.idx.cont]),"toolbar"==e&&this.cell.insertBefore(this.views[a].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont]),"ribbon"==e&&this.cell.insertBefore(this.views[a].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont]),"sb"==e&&this.cell.appendChild(this.views[a].dataNodesCont[e]),this._updateIdx();for(e in this.views[a].ofs_nodes)for(var m in this.views[a].ofs_nodes[e])this.conf.ofs_nodes[e][m]=this.views[a].ofs_nodes[e][m];if(this.conf.borders!=this.views[a].borders)this[this.views[a].borders?
"_showBorders":"_hideBorders"](!0);"url"==this.dataType&&null!=this.conf.url_data&&0==this.conf.url_data.ajax&&null!=this.conf.url_data.post_data&&this.reloadURL();this.callEvent("_onViewRestore",[a]);this._viewDelete(a)}};this._viewDelete=function(a){if(null!=this.views[a]){this.views[a].borders=null;for(var c in this.views[a].ofs_nodes){for(var e in this.views[a].ofs_nodes[c])this.views[a].ofs_nodes[c][e]=null;this.views[a].ofs_nodes[c]=null}this.views[a].dataType=null;this.views[a].dataObj=null;
this.views[a].url_data=null;for(e=0;e<this.views[a].cellCont.length;e++)this.views[a].cellCont[e]=null;this.views[a].cellCont=null;for(c in this.views[a].dataNodes)this.views[a].dataNodes[c]=null,this.views[a].dataNodesCont[c]=null;this.views[a].dataNodes=this.views[a].dataNodesCont=null;this.views[a]=null;delete this.views[a]}};window.dhx4._eventable(this);this._updateIdx();return this}
dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a)return!1;this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;a="undefined"==typeof this.conf.views_loaded[this.conf.view];this.conf.views_loaded[this.conf.view]=!0;return a};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};
dhtmlXCellObject.prototype.unloadView=function(a){if(a==this.conf.view)a=this.conf.unloading,this.conf.unloading=!0,"function"==typeof this.detachMenu&&this.detachMenu(),"function"==typeof this.detachToolbar&&this.detachToolbar(),"function"==typeof this.detachRibbon&&this.detachRibbon(),this.detachStatusBar(),this._detachObject(null,!0),this.conf.unloading=a,this.conf.unloading||this._adjustCont(this._idd);else if(null!=this.views[a]){var c=this.views[a],e;for(e in c.dataNodes)"function"==typeof c.dataNodes[e].unload&&
c.dataNodes[e].unload(),c.dataNodes[e]=null,c.dataNodesCont[e]=null;"url"==c.dataType?null!=c.cellCont&&"null"!=c.cellCont[0]&&this._detachURLEvents(c.cellCont[0]):null!=c.dataObj&&("function"==typeof c.dataObj.unload?c.dataObj.unload():"function"==typeof c.dataObj.destructor&&c.dataObj.destructor(),c.dataObj=null);this._viewDelete(a);"undefined"!=typeof this.conf.views_loaded[a]&&delete this.conf.views_loaded[a]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};
dhtmlXCellObject.prototype.progressOn=function(){if(1!=this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className=this.conf.idx_data.pr1;var c=document.createElement("DIV");c.className=this.conf.idx_data.pr2;null!=this.conf.idx.cover?this.cell.insertBefore(c,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(c);this.cell.insertBefore(a,c);this._updateIdx();this._adjustProgress()}};
dhtmlXCellObject.prototype.progressOff=function(){1==this.conf.progress&&(this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]),this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]),this.conf.progress=!1,this._updateIdx())};
dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var a=this.cell.childNodes[this.conf.idx.pr1],c=this.cell.childNodes[this.conf.idx.pr2];this.conf.pr.ofs||(c.style.width=a.offsetWidth+"px",c.style.height=a.offsetHeight+"px",this.conf.pr.ofs={w:c.offsetWidth-c.clientWidth,h:c.offsetHeight-c.clientHeight});c.style.width=a.offsetWidth-this.conf.pr.ofs.w+"px";c.style.height=a.offsetHeight-this.conf.pr.ofs.h+"px"}};
dhtmlXCellObject.prototype._showCellCover=function(){if(1!=this.conf.cover){this.conf.cover=!0;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);this._updateIdx()}};dhtmlXCellObject.prototype._hideCellCover=function(){1==this.conf.cover&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)};
dhtmlXCellObject.prototype._showBorders=function(a){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),!0!==a&&this._adjustCont(this._idd))};
dhtmlXCellObject.prototype._hideBorders=function(a){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),!0!==a&&this._adjustCont(this._idd))};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};
dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=!0;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var a in this.views)this.unloadView(a);this.conf=null;for(a in this)this[a]=null};
dhtmlXCellObject.prototype.attachObject=function(a,c){!window.dhx4.s2b(c)||"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(c=!1);"string"==typeof a&&(a=document.getElementById(a));if(a.parentNode!=this.cell.childNodes[this.conf.idx.cont]){if(c){a.style.display="";var e=a.offsetWidth,g=a.offsetHeight}this._attachObject(a);this.dataType="obj";a.style.display="";c&&this._adjustByCont(e,g)}};
dhtmlXCellObject.prototype.appendObject=function(a){"string"==typeof a&&(a=document.getElementById(a));a.parentNode!=this.cell.childNodes[this.conf.idx.cont]&&(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(a,null,null,!0),this.dataType="obj",a.style.display="")};dhtmlXCellObject.prototype.detachObject=function(a,c){this._detachObject(null,a,c)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};
dhtmlXCellObject.prototype.getAttachedObject=function(){return"obj"==this.dataType||"url"==this.dataType||"url-ajax"==this.dataType?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj};
dhtmlXCellObject.prototype.attachURL=function(a,c,e){1==e&&(e={});var g="undefined"!=typeof e&&0!=e&&null!=e;this.conf.url_data||(this.conf.url_data={});this.conf.url_data.url=a;this.conf.url_data.ajax=1==c;this.conf.url_data.post_data=1==e?{}:e||null;if(1==c){var h=this;if(g){var g="",l;for(l in e)g+="&"+encodeURIComponent(l)+"="+encodeURIComponent(e[l]);dhx4.ajax.post(a,g,function(a){h.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+
"</div>");"function"==typeof h._doOnFrameContentLoaded&&h._doOnFrameContentLoaded();h.dataType="url-ajax";h=null})}else dhx4.ajax.get(a,function(a){h.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");"function"==typeof h._doOnFrameContentLoaded&&h._doOnFrameContentLoaded();h.dataType="url-ajax";h=null})}else"url"==this.dataType?e=this.getFrame():(e=document.createElement("IFRAME"),e.frameBorder=0,e.border=0,e.style.width="100%",
e.style.height="100%",e.style.position="relative",this._attachObject(e),this.dataType="url",this._attachURLEvents()),g?(a="undefined"==typeof this.conf.url_data.post_ifr,this.conf.url_data.post_ifr=!0,a&&this._attachURLEvents(),e.src="about:blank"):e.src=a+(1!=window.dhx4.ajax.cache?(0<=a.indexOf("?")?"&":"?")+"dhxr"+(new Date).getTime():""),e=null;e=null};
dhtmlXCellObject.prototype.reloadURL=function(){"url"!=this.dataType&&"url-ajax"!=this.dataType||null==this.conf.url_data||this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(a){this._attachObject(null,null,a);a=a.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var c=0;c<a.length;c++){var e=a[c].replace(/<([\/]{0,1})script[^>]*>/gi,"");e&&(window.execScript?window.execScript(e):window.eval(e))}};
dhtmlXCellObject.prototype.attachScheduler=function(a,c,e,g){g=g||window.scheduler;var h=!1;if(e){var l=document.getElementById(e);l&&(h=!0)}h||(e=e||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',l=document.createElement("DIV"),l.id="dhxSchedObj_"+(new Date).getTime(),l.style.width="100%",l.style.height="100%",l.style.position="relative",l.style.overflow=
"hidden",l.className="dhx_cal_container",l.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+e+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>');this._attachObject(l);this.dataType="scheduler";this.dataObj=g;this.dataObj.setSizes=function(){this.update_view()};g.init(l.id,a,c);l=null;this.callEvent("_onContentAttach",[]);
return this.dataObj};
dhtmlXCellObject.prototype.attachMap=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);a||(a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP});this.dataType="maps";this.dataObj=new google.maps.Map(c,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};
dhtmlXCellObject.prototype._createNode_sb=function(a,c,e,g,h){"undefined"!=typeof h?a=h:(c=c||{},e="string"==typeof c.text&&0<c.text.length?c.text:"&nbsp;",g="number"==typeof c.height?c.height:!1,a=document.createElement("DIV"),a.className="dhx_cell_statusbar_def",a.innerHTML="<div class='"+(1==c.paging?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+e+"</div>",0!=g&&(a.firstChild.style.height=a.firstChild.style.lineHeight=g+"px"));null!=this.conf.idx.pr1?this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.pr1]):
this.cell.appendChild(a);this.conf.ofs_nodes.b.sb=!0;this._updateIdx();this._adjustCont(this._idd);return a};
dhtmlXCellObject.prototype.attachStatusBar=function(a){if(!this.dataNodes.sb)return null!=a&&1==window.dhx4.s2b(a.paging)&&(a.height=null),"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",a),this.dataNodes.sb.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},
this.dataNodes.sb.onselectstart=function(a){return!1},this.dataNodes.sb};
dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))};
dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(a,c){this.dataNodes[a]&&(this.cell.childNodes[this.conf.idx[a]].style.display=c,this._adjustCont())};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild};
dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var a=this,c=this._idd,e=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(e){a.callEvent("_onContentMouseDown",[c,e||event])});"function"==typeof window.addEventListener?e.onload=function(){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",a._doOnFrameMouseDown,!1)}catch(c){}try{"function"==
typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(e){}}:e.onreadystatechange=function(c){if("complete"==this.readyState){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",a._doOnFrameMouseDown)}catch(e){}try{"function"==typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(l){}}}}};
dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var a=this.getFrame().contentWindow.document,c=a.createElement("FORM");c.method="POST";c.action=this.conf.url_data.url;a.body.appendChild(c);var e={};1!=window.dhx4.ajax.cache&&(e["dhxr"+(new Date).getTime()]="1");for(var g in this.conf.url_data.post_data)e[g]=this.conf.url_data.post_data[g];for(g in e){var h=a.createElement("INPUT");h.type="hidden";h.name=g;h.value=e[g];c.appendChild(h)}this.conf.url_data.post_ifr=
!1;c.submit()}else this.callEvent("_onContentLoaded",[this._idd])};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(null==a){if("url"!=this.dataType)return;a=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(c){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(e){}}};
dhtmlXCellObject.prototype._attachObject=function(a,c,e,g,h){if("string"==typeof a&&1=={menu:1,toolbar:1,ribbon:1,sb:1}[a])return this["_createNode_"+a].apply(this,arguments);1!=g&&this._detachObject(null,!0,null);"string"==typeof e?this.cell.childNodes[this.conf.idx.cont].innerHTML=e:this.cell.childNodes[this.conf.idx.cont].appendChild(a);a=null};
dhtmlXCellObject.prototype._detachObject=function(a,c,e){this.callEvent("_onBeforeContentDetach",[]);if("menu"==a||"toolbar"==a||"ribbon"==a||"sb"==a)c=this.cell.childNodes[this.conf.idx[a]],c.parentNode.removeChild(c),this.conf.ofs_nodes["sb"==a?"b":"t"][a]=!1,this._updateIdx(),this.conf.unloading||this._adjustCont(this._idd);else{1==c?e=!1:"undefined"==typeof e?e=document.body:"string"==typeof e&&(e=document.getElementById(e));!1===e&&("url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&
("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor()));for(c=this.cell.childNodes[this.conf.idx.cont];0<c.childNodes.length;)!1===e?c.removeChild(c.lastChild):(c.firstChild.style.display="none",e.appendChild(c.firstChild));this.conf.append_mode&&(c.style.overflow="",this.conf.append_mode=!1);a="tabbar"==this.dataType;this.dataType=this.dataObj=null;1!=this.conf.unloading&&a&&(this.showHeader(!0),this._showBorders())}};
dhtmlXCellObject.prototype._attachFromCell=function(a){this.detachObject(!0);var c="layout";"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(c="window");"undefined"!=typeof window.dhtmlXWindowsCell&&a instanceof window.dhtmlXWindowsCell&&a.wins.w[a._idd].conf.parked&&a.wins._winCellSetOpacity(a._idd,"open",!1);"undefined"!=typeof window.dhtmlXAccordionCell&&a instanceof window.dhtmlXAccordionCell&&0==a.conf.opened&&a._cellSetOpacity("open",!1);for(var e in a.dataNodes)this._attachObject(e,
null,null,null,a.cell.childNodes[a.conf.idx[e]]),this.dataNodes[e]=a.dataNodes[e],a.dataNodes[e]=null,a.conf.ofs_nodes["sb"==e?"b":"t"][e]=!1,a._updateIdx();this._mtbUpdBorder();if(null!=a.dataType&&null!=a.dataObj){this.dataType=a.dataType;for(this.dataObj=a.dataObj;0<a.cell.childNodes[a.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);a.dataType=null;a.dataObj=null;"grid"==this.dataType&&("window"==c&&"dhx_skyblue"==
this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;0<a.cell.childNodes[a.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);this.conf.view=a.conf.view;a.conf.view="def";for(e in a.views)this.views[e]=a.views[e],a.views[e]=null,delete a.views[e];a._updateIdx();a._adjustCont();this._updateIdx();
this._adjustCont();1==a.conf.progress?(a.progressOff(),this.progressOn()):this.progressOff();"window"==c&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)};
function dhtmlXCellTop(a,c){if(0!=arguments.length&&"undefined"!=typeof a){var e=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=!1;this.conf.fs_mode=!1;this.conf.fs_tm=null;this.conf.fs_resize=!1;if(a==document.body){if(this.conf.fs_mode=!0,this.base=a,this.base==document.body){var g={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=g[this.conf.skin]?g[this.conf.skin]:g.dhx_skyblue}}else this.base=
"string"==typeof a?document.getElementById(a):a;this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(null!=c)this.setOffsets(c,!1);else if(null!=this.base._ofs){this.setOffsets(this.base._ofs,!1);this.base._ofs=null;try{delete this.base._ofs}catch(h){}}this._adjustCont=function(){var a=this.conf.ofs.t,c;for(c in this.conf.ofs_nodes.t)a+=1==this.conf.ofs_nodes.t[c]?this.dataNodes[c].offsetHeight:
0;var e=this.conf.ofs.b;for(c in this.conf.ofs_nodes.b)e+=1==this.conf.ofs_nodes.b[c]?this.dataNodes[c].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=a+"px";this.cont.style.height=this.base.clientHeight-a-e+"px"};this._setBaseSkin=function(a){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+a)};this._initFSResize=
function(){1!=this.conf.fs_resize&&(this._doOnResizeStart=function(){window.clearTimeout(e.conf.fs_tm);e.conf.fs_tm=window.setTimeout(e._doOnResizeEnd,200)},this._doOnResizeEnd=function(){e.setSizes()},"function"==typeof window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)};1==this.conf.fs_mode&&this._initFSResize();this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();
1==this.conf.fs_mode&&("function"==typeof window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart));this.base.removeChild(this.cont);this.base.className=this.base.className.replace(new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi"),"");e=this.cont=this.base=null};a=null}}
dhtmlXCellTop.prototype.setOffsets=function(a,c){var e=!1,g;for(g in a){var h=g.charAt(0);"undefined"==typeof this.conf.ofs[h]||isNaN(a[g])||(this.conf.ofs[h]=parseInt(a[g]),e=!0)}!1!==c&&"function"==typeof this.setSizes&&1==e&&this.setSizes()};
dhtmlXCellTop.prototype.attachMenu=function(a){if(null==this.dataNodes.menu){this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&
(this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")});this.conf.ofs_nodes.t.menuObj=!0;this.setSizes();a=a.parnt=null;return this.dataNodes.menu}};
dhtmlXCellTop.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())};
dhtmlXCellTop.prototype.attachToolbar=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);
this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});
this.conf.ofs_nodes.t.toolbarObj=!0;this.setSizes();a=a.parnt=null;return this.dataNodes.toolbar}};
dhtmlXCellTop.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||
this.setSizes())};
dhtmlXCellTop.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=
this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())});this.conf.ofs_nodes.t.ribbonObj=!0;var c=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",
function(){c.setSizes()});this.setSizes();a=a.parnt=null;return this.dataNodes.ribbon}};
dhtmlXCellTop.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())};
dhtmlXCellTop.prototype.attachStatusBar=function(a){if(!this.dataNodes.sbObj)return"undefined"==typeof a&&(a={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",null!=this.cont.nextSibling?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof a.text&&0<a.text.length?a.text:"&nbsp;")+"</div>","number"==typeof a.height&&
(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"),this.dataNodes.sbObj.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(a){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=
(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj};
dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())};
dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};
dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(a,c){null!=this.dataNodes[a]&&(this.dataNodes[a].style.display=c,this.setSizes())};dhtmlXCellTop.prototype._mtbUnload=function(a,c){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};
dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};
dhtmlXCellTop.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className="dhxcelltop_progress";this.base.appendChild(a);a=document.createElement("DIV");a.className="dhxcelltop_progress_img";this.base.appendChild(a)}};
dhtmlXCellTop.prototype.progressOff=function(){if(this.conf.progress){for(var a={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0},c=0;c<this.base.childNodes.length;c++)"undefined"!=typeof this.base.childNodes[c].className&&1==a[this.base.childNodes[c].className]&&(a[this.base.childNodes[c].className]=this.base.childNodes[c]);for(var e in a)1!=a[e]&&this.base.removeChild(a[e]),a[e]=null;this.conf.progress=!1}};
dhtmlXCellTop.prototype.attachHeader=function(a,c){null==this.dataNodes.haObj&&("object"!=typeof a&&(a=document.getElementById(a)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(c||a.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(a),a.style.visibility="visible",a=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",
function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())};
dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;0<this.dataNodes.haObj.childNodes.length;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=!1;delete this.dataNodes.haEv;delete this.dataNodes.haObj;this.conf.unloading||this.setSizes()}};
dhtmlXCellTop.prototype.attachFooter=function(a,c){if(null==this.dataNodes.faObj){"object"!=typeof a&&(a=document.getElementById(a));this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(c||a.offsetHeight)+"px";var e=this.dataNodes.sbObj||this.cont;this.base.lastChild==e?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,e.nextSibling);this.dataNodes.faEv=this.attachEvent("_onSetSizes",
function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(a);a.style.visibility="visible";e=a=null;this.conf.ofs_nodes.b.faObj=!0;this.setSizes()}};
dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;0<this.dataNodes.faObj.childNodes.length;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=!1;delete this.dataNodes.faEv;delete this.dataNodes.faObj;this.conf.unloading||this.setSizes()}};
function dhtmlXCalendarObject(a,c){this.i={};var e=null,g="string"==typeof a?document.getElementById(a):a;g&&"object"==typeof g&&g.tagName&&"input"!=String(g.tagName).toLowerCase()&&(e=g);g=null;"object"==typeof a&&a.length||(a=[a]);for(g=0;g<a.length;g++)"string"==typeof a[g]&&(a[g]=document.getElementById(a[g])||null),null!=a[g]&&a[g].tagName&&"input"==String(a[g].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:a[g]}:a[g]instanceof Array||!(a[g]instanceof Object)||null==a[g].input&&null==
a[g].button||(null!=a[g].input&&"string"==typeof a[g].input&&(a[g].input=document.getElementById(a[g].input)),null!=a[g].button&&"string"==typeof a[g].button&&(a[g].button=document.getElementById(a[g].button)),this.i[window.dhx4.newId()]=a[g]),a[g]=null;this.conf={skin:c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue",zi:window.dhx4.newId(),touch:!window.dhx4.isIE};this.setSkin=function(a,c){if(this.conf.skin!=a||c)this.conf.skin=
a,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));null!=e?(this._hasParent=!0,e.appendChild(this.base),e=null):document.body.appendChild(this.base);this.setParent=function(a){this._hasParent&&("object"==typeof a?a.appendChild(this.base):"string"==typeof a&&document.getElementById(a).appendChild(this.base))};this.setSkin(this.conf.skin,!0);this.base.onclick=
function(a){a=a||event;a.preventDefault&&a.preventDefault();a.cancelBubble=!0};this.base.onmousedown=function(){return!1};this.conf.touch&&(this.base.ontouchstart=this.base.onclick);this.loadUserLanguage=function(a){if(this.langData[a]&&(this.lang=a,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont))for(var c=a=0;c<this.msCont.childNodes.length;c++)for(var e=0;e<this.msCont.childNodes[c].childNodes.length;e++)this.msCont.childNodes[c].childNodes[e].innerHTML=
this.langData[this.lang].monthesSNames[a++]};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.base.firstChild.appendChild(this.contMonth);e=document.createElement("UL");e.className="dhtmlxcalendar_line";this.contMonth.appendChild(e);var h=document.createElement("LI");h.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";
h.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";
e.appendChild(h);var l=this;h.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var c=a.target||a.srcElement;c.className&&0===c.className.indexOf("dhtmlxcalendar_month_arrow")?(l._hideSelector(),a=c.parentNode.firstChild==c?-1:1,c=new Date(l._activeMonth),l._drawMonth(new Date(l._activeMonth.getFullYear(),l._activeMonth.getMonth()+a,1,0,0,0,0)),l._evOnArrowClick([c,new Date(l._activeMonth)])):c.className&&"dhtmlxcalendar_month_label_month"==c.className?
(a.cancelBubble=!0,l._showSelector("month",Math.round(c.offsetLeft+c.offsetWidth/2),c.offsetTop+c.offsetHeight+2,"selector_month",!0)):c.className&&"dhtmlxcalendar_month_label_year"==c.className?(a.cancelBubble=!0,l._showSelector("year",Math.round(c.offsetLeft+c.offsetWidth/2),c.offsetTop+c.offsetHeight+2,"selector_year",!0)):l._hideSelector()};1==this.conf.touch&&(h.ontouchstart=h.onclick);this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);
this.setWeekStartDay=function(a){0==a&&(a=7);this._wStart=Math.min(Math.max(isNaN(a)?1:a,1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var a=document.createElement("UL");a.className="dhtmlxcalendar_line";this.contDays.appendChild(a)}else a=this.contDays.firstChild;var c=this._wStart,e=this.langData[this.lang].daysSNames;e.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var g=0;8>g;g++){if(null==a.childNodes[g]){var h=document.createElement("LI");
a.appendChild(h)}else h=a.childNodes[g];0==g?(h.className="dhtmlxcalendar_cell_wn",h.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(h.className="dhtmlxcalendar_cell"+(6<=c?" dhtmlxcalendar_day_weekday_cell":"")+(1==g?"_first":""),h.innerHTML=e[c],7<++c&&(c=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");
this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var c=a.target||a.srcElement;null!=c.parentNode&&null!=c.parentNode._date&&(c=c.parentNode);if(null!=c._date&&!c._css_dis){var e=l._activeDate.getHours(),g=l._activeDate.getMinutes(),h=c._date;if(!l.checkEvent("onBeforeChange")||l.callEvent("onBeforeChange",[new Date(c._date.getFullYear(),
c._date.getMonth(),c._date.getDate(),e,g)])){null!=l._activeDateCell&&(l._activeDateCell._css_date=!1,l._updateCellStyle(l._activeDateCell._q,l._activeDateCell._w));var m=l._activeDate.getFullYear()+"_"+l._activeDate.getMonth()!=h.getFullYear()+"_"+h.getMonth();l._nullDate=!1;l._activeDate=new Date(h.getFullYear(),h.getMonth(),h.getDate(),e,g);l._activeDateCell=c;l._activeDateCell._css_date=!0;l._activeDateCell._css_hover=!1;l._updateCellStyle(l._activeDateCell._q,l._activeDateCell._w);m&&l._drawMonth(l._activeDate);
l._activeInp&&l.i[l._activeInp]&&null!=l.i[l._activeInp].input&&(l.i[l._activeInp].input.value=l._dateToStr(new Date(l._activeDate.getTime())));l._hasParent||("touchstart"==a.type?window.setTimeout(function(){l._hide()},400):l._hide());l._evOnClick([new Date(l._activeDate.getTime())])}}};1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick);this.contDates.onmouseover=function(a){a=a||event;var c=a.target||a.srcElement;null!=c.parentNode&&null!=c.parentNode._date&&(c=c.parentNode);
null==c._date||l._lastHover==c||c._css_hover||(c._css_hover=!0,l._updateCellStyle(c._q,c._w),l._lastHover=c,l._evOnMouseOver([new Date(c._date.getFullYear(),c._date.getMonth(),c._date.getDate(),0,0,0,0),a]))};this.contDates.onmouseout=function(a){l._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),l._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),
this._lastHover._date.getDate(),0,0,0,0),a]),this._lastHover=null)};for(g=0;6>g;g++){e=document.createElement("UL");e.className="dhtmlxcalendar_line";this.contDates.appendChild(e);for(var m=0;7>=m;m++)h=document.createElement("LI"),h.className=0==m?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",e.appendChild(h)}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.contTime.style.display=
"";this._ifrSize()};this.hideTime=function(){this.contTime.style.display="none";this._ifrSize()};e=document.createElement("UL");e.className="dhtmlxcalendar_line";this.contTime.appendChild(e);h=document.createElement("LI");h.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";h.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>";e.appendChild(h);
h.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var c=a.target||a.srcElement;null!=c.tagName&&"span"==c.tagName.toLowerCase()&&1==c._par&&null!=c.parentNode&&(c=c.parentNode);c.className&&"dhtmlxcalendar_label_hours"==c.className?(a.cancelBubble=!0,a=l.contMonth.offsetHeight+l.contDays.offsetHeight+l.contDates.offsetHeight+c.offsetTop,l._showSelector("hours",Math.round(c.offsetLeft+c.offsetWidth/2),a-2,"selector_hours",!0)):c.className&&"dhtmlxcalendar_label_minutes"==
c.className?(a.cancelBubble=!0,1==l._minutesInterval&&(a=l.getFormatedDate("%i"),c.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+a.charAt(0)+"</span>"+a.charAt(1),c.firstChild._par=!0,l._selectorMode=1),a=l.contMonth.offsetHeight+l.contDays.offsetHeight+l.contDates.offsetHeight+c.offsetTop,l._showSelector("minutes",Math.round(c.offsetLeft+c.offsetWidth/2),a-2,"selector_minutes",!0)):l._hideSelector()};1==this.conf.touch&&(h.ontouchstart=h.onclick);this._activeMonth=null;this._activeDate=
new Date;this._activeDateCell=null;this.setDate=function(a){window.dhx4.temp_calendar={tz:null};this._nullDate="undefined"==typeof a||""===a||!a;a instanceof Date||(a=this._strToDate(String(a||"")),"Invalid Date"==a?a=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null);null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(a,"%P"));a=a.getTime();this._isOutOfRange(a)||(this._activeDate=new Date(a),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),
this._updateVisibleMinutes())};this.getDate=function(a){if(this._nullDate)return null;var c=new Date(this._activeDate.getTime());return a?(window.dhx4.temp_calendar={tz:this.conf.tz},a=this._dateToStr(c),window.dhx4.temp_calendar=null,a):c};this._drawMonth=function(a){if(a instanceof Date){isNaN(a.getFullYear())&&(a=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0));this._activeMonth=new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0);this._activeDateCell=null;var c=new Date(this._activeMonth.getTime()),
e=c.getDay()-this._wStart;0>e&&(e+=7);c.setDate(c.getDate()-e);for(var e=a.getMonth(),g=(new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0)).getTime(),h=0,l=0;6>l;l++)for(var m=this._wStart,n=0;7>=n;n++)if(0==n){var D=this.getWeekNumber(new Date(c.getFullYear(),c.getMonth(),c.getDate()+h,0,0,0,0));this.contDates.childNodes[l].childNodes[n].innerHTML="<div class='dhtmlxcalendar_label'>"+D+"</div>"}else{D=new Date(c.getFullYear(),c.getMonth(),c.getDate()+
h,0,0,0,0);if(0!=D.getHours()){var H=12<D.getHours()?24-D.getHours():D.getHours();D.setTime(D.getTime()+36E5*H)}D.getDay();var H=D.getTime(),E="dhtmlxcalendar_label";null!=this._tipData[H]?(this._tipData[H].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[l].childNodes[n].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[l].childNodes[n].setAttribute("title",this._tipData[H].text),this._tipData[H].showIcon&&(E+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[l].childNodes[n].removeAttribute("title");
this.contDates.childNodes[l].childNodes[n].innerHTML="<div class='"+E+"'>"+D.getDate()+"</div>";this.contDates.childNodes[l].childNodes[n]._date=new Date(H);this.contDates.childNodes[l].childNodes[n]._q=l;this.contDates.childNodes[l].childNodes[n]._w=n;this.contDates.childNodes[l].childNodes[n]._css_month=D.getMonth()==e;this.contDates.childNodes[l].childNodes[n]._css_date=!this._nullDate&&H==g;this.contDates.childNodes[l].childNodes[n]._css_weekend=6<=m;this.contDates.childNodes[l].childNodes[n]._css_dis=
this._isOutOfRange(H);this.contDates.childNodes[l].childNodes[n]._css_holiday=1==this._holidays[H];this._updateCellStyle(l,n);H==g&&(this._activeDateCell=this.contDates.childNodes[l].childNodes[n]);7<++m&&(m=1);h++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(a)}};this._updateCellStyle=function(a,c){var e=this.contDates.childNodes[a].childNodes[c],g;g="dhtmlxcalendar_cell dhtmlxcalendar_cell"+(e._css_month?"_month":"");g+=e._css_date?"_date":"";g+=e._css_weekend?
"_weekend":"";g+=e._css_holiday?"_holiday":"";g+=e._css_dis?"_dis":"";g+=e._css_hover&&!e._css_dis?"_hover":"";e.className=g};this._minutesInterval=5;this._initSelector=function(a,c){this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover));this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),
this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),
this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=
function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className=
"dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(a){a=a||event;a=a.target||a.srcElement;!0===a._cell&&(l._selHover!=a&&l._clearSelHover(),null!=String(a.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(a.className+=" dhtmlxcalendar_selector_cell_hover",l._selHover=a))},this._sel.onmouseout=function(){l._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();
a.cancelBubble=!0;l._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;l._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),
this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow");if(1!=this._sel._ta[a]){if("month"==a){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+c;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var e=0,g=0;4>g;g++){var h=document.createElement("UL");h.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(h);
for(var m=0;3>m;m++){var n=document.createElement("LI");n.innerHTML=this.langData[this.lang].monthesSNames[e];n.className="dhtmlxcalendar_selector_cell";h.appendChild(n);n._month=e;n._cell=!0;this._msCells[e++]=n}}this.msCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._month&&(l._hideSelector(),l._updateActiveMonth(),l._drawMonth(new Date(l._activeMonth.getFullYear(),a._month,1,0,0,0,0)),l._doOnSelectorChange())};
1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==a){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+c;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(g=0;4>g;g++)for(h=document.createElement("UL"),h.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(h),m=0;3>m;m++)n=document.createElement("LI"),n.className="dhtmlxcalendar_selector_cell",n._cell=!0,h.appendChild(n);
this.ysCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._year&&(l._hideSelector(),l._drawMonth(new Date(a._year,l._activeMonth.getMonth(),1,0,0,0,0)),l._doOnSelectorChange())};1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==a){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+c;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);
for(g=e=0;4>g;g++)for(h=document.createElement("UL"),h.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(h),m=0;6>m;m++)n=document.createElement("LI"),n.innerHTML=this._fixLength(e,2),n.className="dhtmlxcalendar_selector_cell",h.appendChild(n),n._hours=e,n._cell=!0,this._hsCells[e++]=n;this.hsCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._hours&&(l._hideSelector(),l._activeDate.setHours(a._hours),
l._updateActiveHours(),l._updateVisibleHours(),l._doOnSelectorChange(),l.callEvent("onTimeChange",[new Date(l._activeDate.getTime())]))};1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==a){var A=4,D=3,H=2;1==this._minutesInterval&&(1==this._selectorMode?(A=2,D=3,H=1):(A=2,D=5,H=1,c+="5"));10==this._minutesInterval&&(A=2);15==this._minutesInterval&&(A=1,D=4,c+="4");this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+
c;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(g=e=0;g<A;g++)for(h=document.createElement("UL"),h.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(h),m=0;m<D;m++)n=document.createElement("LI"),n.innerHTML=1<H?this._fixLength(e,H):e,n.className="dhtmlxcalendar_selector_cell",h.appendChild(n),n._minutes=e,n._cell=!0,this._rsCells[e]=n,e+=this._minutesInterval;this.rsCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&
a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;if(null!=a._minutes){if(1==l._minutesInterval){var c=l.getFormatedDate("%i"),c=1==l._selectorMode?a._minutes.toString()+c.charAt(1):c.charAt(0)+a._minutes.toString();l._activeDate.setMinutes(Number(c));l.callEvent("onTimeChange",[new Date(l._activeDate.getTime())]);l._hideSelector();if(1==l._selectorMode){l._updateVisibleMinutes(!0);l._selectorMode=2;l._showSelector("minutes",l._sel._x,l._sel._y,"selector_minutes",!0);l._updateActiveMinutes();
return}l._selectorMode=1}else l._hideSelector(),l._activeDate.setMinutes(a._minutes),l._updateActiveMinutes(),l.callEvent("onTimeChange",[new Date(l._activeDate.getTime())]);l._updateVisibleMinutes();l._doOnSelectorChange()}};1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[a]=!0}};this._showSelector=function(a,c,e,g,h){!0===h&&null!=this._sel&&this._isSelectorVisible()&&a==this._sel._t?this._hideSelector():("dhx_terrace"==this.conf.skin&&(c+=12),this._sel&&this._sel._ta[a]||
this._initSelector(a,g),a!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=c,this._sel._y=e,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display=
"",this._sel._t=a,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+g,this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==a?"":"none",c=Math.max(0,c-Math.round(this._sel.offsetWidth/2)),c+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(c=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=c+"px",this._sel.style.top="hours"==a||"minutes"==a?e-this._sel.offsetHeight+
"px":e+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(a))};this._doOnSelectorShow=function(a){"month"==a&&this._updateActiveMonth();"year"==a&&this._updateYearsList(this._activeMonth);"hours"==a&&this._updateActiveHours();"minutes"==a&&this._updateActiveMinutes()};this._hideSelector=function(a){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none",
"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))};this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),
!0===a])};this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)};this._unloadSelector=function(a){if(this._sel&&this._sel._ta[a]){if("month"==a){this._msActive=this.msCont.onclick=this.msCont.ontouchstart=null;for(var c in this._msCells)this._msCells[c]._cell=null,this._msCells[c]._month=null,this._msCells[c].parentNode.removeChild(this._msCells[c]),this._msCells[c]=null;for(this._msCells=
null;0<this.msCont.childNodes.length;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if("year"==a){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(c in this._ysCells)this._ysCells[c]._cell=null,this._ysCells[c]._year=null,this._ysCells[c].parentNode.removeChild(this._ysCells[c]),this._ysCells[c]=null;for(this._ysCells=null;0<this.ysCont.childNodes.length;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont);
this.ysCont=null}if("hours"==a){this._hsActive=this.hsCont.onclick=this.hsCont.ontouchstart=null;for(c in this._hsCells)this._hsCells[c]._cell=null,this._hsCells[c]._hours=null,this._hsCells[c].parentNode.removeChild(this._hsCells[c]),this._hsCells[c]=null;for(this._hsCells=null;0<this.hsCont.childNodes.length;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if("minutes"==a){this._rsActive=this.rsCont.onclick=this.rsCont.ontouchstart=
null;for(c in this._rsCells)this._rsCells[c]._cell=null,this._rsCells[c]._minutes=null,this._rsCells[c].parentNode.removeChild(this._rsCells[c]),this._rsCells[c]=null;for(this._rsCells=null;0<this.rsCont.childNodes.length;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[a]=null}};this.setMinutesInterval=function(a){if(1==a||5==a||10==a||15==a)this._minutesInterval=a,this._unloadSelector("minutes")};this._updateActiveMonth=
function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell");this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();this._ysCells[a]&&(this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};
this._updateYearsList=function(a){for(var c in this._ysCells)this._ysCells[c]=null,delete this._ysCells[c];a=12*Math.floor(a.getFullYear()/12);for(c=0;4>c;c++)for(var e=0;3>e;e++)this.ysCont.childNodes[c].childNodes[e].innerHTML=a,this.ysCont.childNodes[c].childNodes[e]._year=a,this.ysCont.childNodes[c].childNodes[e].className="dhtmlxcalendar_selector_cell",this._ysCells[a++]=this.ysCont.childNodes[c].childNodes[e];this._updateActiveYear()};this._scrollYears=function(a){a=new Date((0>a?this.ysCont.firstChild.firstChild._year:
this.ysCont.lastChild.lastChild._year)+a,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(a)};this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell");this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=
this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){null!=this._rsActive&&"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell");this._rsActive=1==this._minutesInterval?this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._activeDate.getMinutes();"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className=
"dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateVisibleMinutes=function(a){var c=this._fixLength(this._activeDate.getMinutes(),2).toString();1==a&&(c=c.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+c.charAt(1)+"</span>");this.contTime.firstChild.firstChild.childNodes[3].innerHTML=c;1==a&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)};this._fixLength=function(a,c){for(;String(a).length<c;)a="0"+String(a);return a};this._dateFormat=
"";this._dateFormatRE=null;this.setDateFormat=function(a){var c={};if(null!=this._strToDate)for(var e in this.i)if(null!=this.i[e].input&&0<this.i[e].input.value.length){var g=this._strToDate(this.i[e].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");g instanceof Date&&(c[e]=g)}this._dateFormat=a;a=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){switch(a.replace(/%/,"")){case "n":case "h":case "j":case "g":case "G":return"\\d{1,2}";case "m":case "d":case "H":case "i":case "s":case "y":return"\\d{2}";
case "Y":return"\\d{4}";case "M":return"("+l.langData[l.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case "F":return"("+l.langData[l.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case "D":return"[a-z]{2}";case "a":case "A":return"AM|PM";case "u":return"\\d{1,6}";case "P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(a,"i");for(e in c)this.i[e].input.value=this._dateToStr(c[e]);c=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=
function(a){this._dateFormatRE&&a.match(this._dateFormatRE)&&a!=this.getFormatedDate()&&(a=this._strToDate(a),a instanceof Date&&(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])?null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()):(this._nullDate=!1,this._activeDate=a,this._drawMonth(this._nullDate?
new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0))))};this.showMonth=function(a){"string"==typeof a&&(a=this._strToDate(a));a instanceof Date&&this._drawMonth(a)};this.setFormatedDate=function(a,c,e,g){a=this._strToDate(c,a);if(g)return a;this.setDate(a)};this.getFormatedDate=function(a,c){if(!(c&&c instanceof Date)){if(this._nullDate)return"";c=new Date(this._activeDate)}return this._dateToStr(c,
a)};this.getWeekNumber=function(a){"string"==typeof a&&(a=this._strToDate(a));if(!(a instanceof Date))return"Invalid Date";"undefined"==typeof this._ftDay&&(this._ftDay=4);var c=this._wStart,e=4,g=(new Date(a.getFullYear(),0,1,0,0,0,0)).getDay();0==g&&(g=7);e<c&&(e+=7,g+=7);var h=0;g>=c&&g<=e||(h=1);c=g-c;h=new Date(a.getFullYear(),0,1-c+7*h,0,0,0,0);a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0,0);return Math.ceil((a.getTime()-h.getTime())/6048E5)};this.showWeekNumbers=function(){this.base.firstChild.className=
"dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(a){if(!a&&this._hasParent)this._show();else if("object"==typeof a&&"undefined"!=typeof a._dhtmlxcalendar_uid&&this.i[a._dhtmlxcalendar_uid]==a)this._show(a._dhtmlxcalendar_uid);else{if("undefined"==typeof a)for(var c in this.i)a||(a=c);a&&this._show(a)}};this.hide=function(){this._isVisible()&&this._hide()};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";
this.setPosition=function(a,c){this._py=this._px=null;"right"==a||"bottom"==a?this.pos=a:(this.pos="int","undefined"==typeof a||isNaN(a)||(this.base.style.left=a+"px",this._px=a),"undefined"==typeof c||isNaN(c)||(this.base.style.top=c+"px",this._py=c),this._ifrSize())};this._show=function(a,c){if(!0===c&&this._activeInp==a&&this._isVisible())this._hide();else{this.base.style.visibility="hidden";this.base.style.display="";if(a){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=
" dhtmlxcalendar_in_input");var e=this.i[a].input||this.i[a].button,g=-1!=navigator.appVersion.indexOf("MSIE"),g=Math.max((g?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop)+(g?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);if("right"==this.pos)this.base.style.left=this._getLeft(e)+e.offsetWidth+"px",this.base.style.top=Math.min(this._getTop(e),g-this.base.offsetHeight)+
"px";else if("bottom"==this.pos){var h=this._getTop(e)+e.offsetHeight+1;h+this.base.offsetHeight>g&&(h=this._getTop(e)-this.base.offsetHeight);this.base.style.left=this._getLeft(e)+"px";this.base.style.top=h+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=a}else this._px&&this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector();this.base.style.visibility=
"visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();this._ifr&&(this._ifr.style.display="");this.callEvent("onShow",[])}};this._hide=function(){this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);0<=this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,""));this._activeInp=null;this._ifr&&(this._ifr.style.display="none");this.callEvent("onHide",
[])};this._isVisible=function(){return"none"!=this.base.style.display};this._getLeft=function(a){return this._posGetOffset(a).left};this._getTop=function(a){return this._posGetOffset(a).top};this._posGetOffsetSum=function(a){for(var c=0,e=0;a;)c+=parseInt(a.offsetTop),e+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:c,left:e}};this._posGetOffsetRect=function(a){a=a.getBoundingClientRect();var c=document.body,e=document.documentElement,g=a.left+(window.pageXOffset||e.scrollLeft||c.scrollLeft)-
(e.clientLeft||c.clientLeft||0);return{top:Math.round(a.top+(window.pageYOffset||e.scrollTop||c.scrollTop)-(e.clientTop||c.clientTop||0)),left:Math.round(g)}};this._posGetOffset=function(a){return this[a.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](a)};this._rangeActive=!1;this._rangeTo=this._rangeFrom=null;this._rangeSet={};this.setInsensitiveDays=function(a){a=this._extractDates(a);for(var c=0;c<a.length;c++)this._rangeSet[(new Date(a[c].getFullYear(),a[c].getMonth(),a[c].getDate(),
0,0,0,0)).getTime()]=!0;this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(a){if(null==a)this._clearHolidays();else if(null!=a){a=this._extractDates(a);for(var c=0;c<a.length;c++)this._holidays[(new Date(a[c].getFullYear(),a[c].getMonth(),a[c].getDate(),0,0,0,0)).getTime()]=!0}this._drawMonth(this._activeMonth)};this._extractDates=function(a){if("string"==typeof a||a instanceof
Date)a=[a];for(var c=[],e=0;e<a.length;e++)if("string"==typeof a[e])for(var g=a[e].split(","),h=0;h<g.length;h++)c.push(this._strToDate(g[h]));else a[e]instanceof Date&&c.push(a[e]);return c};this._clearRange=function(){this._rangeActive=!1;this._rangeTo=this._rangeFrom=this._rangeType=null};this._clearRangeSet=function(){for(var a in this._rangeSet)this._rangeSet[a]=null,delete this._rangeSet[a]};this._clearHolidays=function(){for(var a in this._holidays)this._holidays[a]=null,delete this._holidays[a]};
this._isOutOfRange=function(a){if(1==this._rangeSet[a]||this._rangeActive&&("in"==this._rangeType&&(a<this._rangeFrom||a>this._rangeTo)||"out"==this._rangeType&&a>=this._rangeFrom&&a<=this._rangeTo||"from"==this._rangeType&&a<this._rangeFrom||"to"==this._rangeType&&a>this._rangeTo))return!0;a=new Date(a);return this._rangeWeek&&!0===this._rangeWeekData[a.getDay()]||this._rangeMonth&&!0===this._rangeMonthData[a.getDate()]||this._rangeYear&&!0===this._rangeYearData[a.getMonth()+"_"+a.getDate()]?!0:
!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(a,c,e){var g=!1;if(null!=a&&null!=c){a instanceof Date||(a=this._strToDate(a));c instanceof Date||(c=this._strToDate(c));if(a.getTime()>c.getTime())return;this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();this._rangeTo=(new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)).getTime();this._rangeActive=!0;this._rangeType="in";g=!0}g||
null==a||null!=c||(a instanceof Date||(a=this._strToDate(a)),this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime(),this._rangeTo=null,!0===e&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",g=!0);g||null!=a||null==c||(c instanceof Date||(c=this._strToDate(c)),this._rangeFrom=null,this._rangeTo=(new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)).getTime(),!0===e&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",g=!0);g&&this._drawMonth(this._activeMonth)};
this.setInsensitiveRange=function(a,c){null!=a&&null!=c?(a instanceof Date||(a=this._strToDate(a)),c instanceof Date||(c=this._strToDate(c)),a.getTime()>c.getTime()||(this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime(),this._rangeTo=(new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)).getTime(),this._rangeActive=!0,this._rangeType="out",this._drawMonth(this._activeMonth))):null!=a&&null==c?this.setSensitiveRange(null,a,!0):null==a&&null!=c&&this.setSensitiveRange(c,
null,!0)};this.disableDays=function(a,c){if("week"==a){"object"!=typeof c&&"undefined"==typeof c.length&&(c=[c]);this._rangeWeekData||(this._rangeWeekData={});for(var e in this._rangeWeekData)this._rangeWeekData[e]=!1,delete this._rangeWeekData[e];for(var g=0;g<c.length;g++)this._rangeWeekData[c[g]]=!0,7==c[g]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==a){"object"!=typeof c&&"undefined"==typeof c.length&&(c=[c]);this._rangeMonthData||(this._rangeMonthData={});for(e in this._rangeMonthData)this._rangeMonthData[e]=
!1,delete this._rangeMonthData[e];for(g=0;g<c.length;g++)this._rangeMonthData[c[g]]=!0;this._rangeMonth=!0}if("year"==a){var h=this._extractDates(c);this._rangeYearData||(this._rangeYearData={});for(e in this._rangeYearData)this._rangeYearData[e]=!1,delete this._rangeYearData[e];for(g=0;g<h.length;g++)this._rangeYearData[h[g].getMonth()+"_"+h[g].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)};this.enableDays=function(a){"week"==a&&(this._rangeWeek=!1);"month"==a&&(this._rangeMonth=
!1);"year"==a&&(this._rangeYear=!1);this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=!1;this._tipCellDim=this._tipCellDate=this._tipPopup=null;this.setTooltip=function(a,c,e,g){a=this._extractDates(a);for(var h=0;h<a.length;h++){var l=(new Date(a[h].getFullYear(),a[h].getMonth(),a[h].getDate(),0,0,0,0)).getTime();this._tipData[l]={text:c,showIcon:e,usePopup:g}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(a){a=this._extractDates(a);
for(var c=0;c<a.length;c++){var e=(new Date(a[c].getFullYear(),a[c].getMonth(),a[c].getDate(),0,0,0,0)).getTime();this._tipData[e]=null;delete this._tipData[e]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(a){var c=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();null!=this._tipData[c]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=a,this._tipCellDim=this.getCellDimension(a),this._tipText=
this._tipData[c].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)};this._showTooltipPopup=function(a,c,e,g,h){l._tipPopup||(l._tipPopup=new dhtmlXPopup({mode:"top"}));l._tipPopup.attachHTML(l._tipText);l._tipPopup.show(l._tipCellDim.x,l._tipCellDim.y,l._tipCellDim.w,l._tipCellDim.h);l.callEvent("onPopupShow",[l._tipCellDate])};this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM);
null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(a){"string"==typeof a&&(a=this._strToDate(a));if(!(a instanceof Date))return null;a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();for(var c=null,e=0;e<this.contDates.childNodes.length;e++)for(var g=0;g<this.contDates.childNodes[e].childNodes.length;g++){var h=this.contDates.childNodes[e].childNodes[g];
null!=h._date&&h._date.getTime()==a&&(c={x:this._getLeft(h),y:this._getTop(h),w:h.offsetWidth,h:h.offsetHeight})}return c};this._updateFromInput=function(a){this._nullInInput&&0==a.value.replace(/\s/g,"").length?this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null])?null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()):this.setDate(null):this._updateDateStr(a.value)};
this._doOnClick=function(a){a=a||event;a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=l._activeInp&&l._isVisible()&&l._activeInp?l._hide():a._dhtmlxcalendar_uid&&l.i[a._dhtmlxcalendar_uid]||(l._isSelectorVisible()?l._hideSelector():!l._hasParent&&l._isVisible()&&l._hide())};this._doOnKeyDown=function(a){a=a||event;if(27==a.keyCode||13==a.keyCode)l._isSelectorVisible()?l._hideSelector():l._isVisible()&&!l._hasParent&&l._hide()};this._doOnInpClick=function(a){a=a||event;"touchstart"==
a.type&&null!=a.preventDefault&&a.preventDefault();a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&(l._listenerEnabled||l._updateFromInput(a),l._show(a._dhtmlxcalendar_uid,!0))};this._doOnInpKeyUp=function(a){a=a||event;var c=a.target||a.srcElement;13!=a.keyCode&&c._dhtmlxcalendar_uid&&(l._listenerEnabled||l._updateFromInput(c))};this._doOnBtnClick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&(null!=l.i[a._dhtmlxcalendar_uid].input&&
l._updateFromInput(l.i[a._dhtmlxcalendar_uid].input),l._show(a._dhtmlxcalendar_uid,!0))};this._doOnUnload=function(){l&&l.unload&&l.unload()};"function"==typeof window.addEventListener?(document.body.addEventListener("click",l._doOnClick,!1),window.addEventListener("keydown",l._doOnKeyDown,!1),window.addEventListener("unload",l._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",l._doOnClick,!1)):(document.body.attachEvent("onclick",l._doOnClick),document.body.attachEvent("onkeydown",
l._doOnKeyDown),window.attachEvent("onunload",l._doOnUnload));this.attachObj=function(a){var c=window.dhx4.newId();"string"==typeof a?this.i[c]={input:document.getElementById(a)}:"undefined"!=typeof a.tagName?this.i[c]={input:a}:"object"!=typeof a||null==a.input&&null==a.button||(this.i[c]={},null!=a.input&&(this.i[c].input="string"==typeof a.input?document.getElementById(a.input):a.input),null!=a.button&&(this.i[c].button="string"==typeof a.button?document.getElementById(a.button):a.button));this._attachEventsToObject(c);
return c};this.detachObj=function(a){var c=null;null!=this.i[a]?c=a:"string"==typeof a?(a=document.getElementById(a),c=a._dhtmlxcalendar_uid):"undefined"!=typeof a.tagName?c=a._dhtmlxcalendar_uid:"object"!=typeof a||null==a.input&&null==a.button||(null==c&&null!=a.input&&(c=("string"==typeof a.input?document.getElementById(a.input):a.input)._dhtmlxcalendar_uid),null==c&&null!=a.button&&(c=("string"==typeof a.button?document.getElementById(a.button):a.button)._dhtmlxcalendar_uid));if(null!=c&&null!=
this.i[c]){this._detachEventsFromObject(c);for(var e in this.i[e])this.i[c][e]._dhtmlxcalendar_uid=null,this.i[c][e]=null,delete this.i[c][e];this.i[c]=null;delete this.i[c];return!0}return!1};this._attachEventsToObject=function(a){null!=this.i[a].button?(this.i[a].button._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?(this.i[a].button.addEventListener("click",l._doOnBtnClick,!1),1==this.conf.touch&&this.i[a].button.addEventListener("touchstart",l._doOnBtnClick,!1)):this.i[a].button.attachEvent("onclick",
l._doOnBtnClick)):null!=this.i[a].input&&(this.i[a].input._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?(this.i[a].input.addEventListener("click",l._doOnInpClick,!1),this.i[a].input.addEventListener("keyup",l._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[a].input.addEventListener("touchstart",l._doOnInpClick,!1)):(this.i[a].input.attachEvent("onclick",l._doOnInpClick),this.i[a].input.attachEvent("onkeyup",l._doOnInpKeyUp)))};this._detachEventsFromObject=function(a){null!=this.i[a].button?
"function"==typeof window.addEventListener?(this.i[a].button.removeEventListener("click",l._doOnBtnClick,!1),1==this.conf.touch&&this.i[a].button.removeEventListener("touchstart",l._doOnBtnClick,!1)):this.i[a].button.detachEvent("onclick",l._doOnBtnClick):null!=this.i[a].input&&("function"==typeof window.addEventListener?(this.i[a].input.removeEventListener("click",l._doOnInpClick,!1),this.i[a].input.removeEventListener("keyup",l._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[a].input.removeEventListener("touchstart",
l._doOnInpClick,!1)):(this.i[a].input.detachEvent("onclick",l._doOnInpClick),this.i[a].input.detachEvent("onkeyup",l._doOnInpKeyUp)))};this.enableListener=function(a){a&&("function"==typeof window.addEventListener?(a.addEventListener("focus",l._listenerEvFocus,!1),a.addEventListener("blur",l._listenerEvBlur,!1)):(a.attachEvent("onfocus",l._listenerEvFocus),a.attachEvent("onblur",l._listenerEvBlur)))};this.disableListener=function(a){a&&(a._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),
"function"==typeof window.addEventListener?(a.removeEventListener("focus",l._listenerEvFocus,!1),a.removeEventListener("blur",l._listenerEvBlur,!1)):(a.detachEvent("onfocus",l._listenerEvFocus),a.detachEvent("onblur",l._listenerEvBlur)))};this._startListener=function(a){this._tmListener&&window.clearTimeout(this._tmListener);"undefined"==typeof a._v1&&(a._v1=a.value);a._v1!=a.value&&(this._updateFromInput(a),a._v1=a.value);a._f0&&(this._tmListener=window.setTimeout(function(){l._startListener(a)},
100))};this._listenerEvFocus=function(a){a=a||event;a=a.target||a.srcElement;a._f0=!0;l._startListener(a)};this._listenerEvBlur=function(a){a=a||event;(a.target||a.srcElement)._f0=!1};for(var n in this.i)this._attachEventsToObject(n);window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",
a)};this.unload=function(){this._lastHover=this._dateFormatRE=this._dateFormat=this._activeMonth=this._activeInp=this._activeDateCell=this._activeDate=null;this._tmListener&&window.clearTimeout(this._tmListener);this._tmListener=null;"function"==typeof window.addEventListener?(document.body.removeEventListener("click",l._doOnClick,!1),window.removeEventListener("keydown",l._doOnKeyDown,!1),window.removeEventListener("unload",l._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",
l._doOnClick,!1)):(document.body.detachEvent("onclick",l._doOnClick),document.body.detachEvent("onkeydown",l._doOnKeyDown),window.detachEvent("onunload",l._doOnKeyDown));this._doOnUnload=this._doOnKeyDown=this._doOnClick=null;for(var a in this.i)this.i[a]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(a),this.disableListener(this.i[a].input),this.i[a]=null,delete this.i[a];this._doOnInpKeyUp=this._doOnInpClick=this.i=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;
this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;for(this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;0<this.contMonth.firstChild.firstChild.childNodes.length;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);
this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);for(this.contMonth=null;0<this.contDays.firstChild.childNodes.length;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=
null;this.contDates.onmouseover=null;for(this.contDates.onmouseout=null;0<this.contDates.childNodes.length;){for(;0<this.contDates.lastChild.childNodes.length;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);
this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;for(this.contTime.firstChild.firstChild.ontouchstart=null;0<this.contTime.firstChild.firstChild.childNodes.length;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);
this.contTime.parentNode.removeChild(this.contTime);this._lastHover=this.contTime=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null);if(this._sel){for(a in this._sel._ta)this._sel._ta[a]=null;this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;for(this._sel.onmouseout=null;0<this._sel.firstChild.firstChild.firstChild.childNodes.length;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=
null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);for(this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);0<this._sel.childNodes.length;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel);
this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.unload=this.showTime=this.show=this.setYearsRange=this.setDateFormat=this.setDate=this.hideTime=this.hide=this.enableIframe=this._updateYearsList=this._updateVisibleMinutes=this._updateVisibleHours=this._updateDateStr=this._updateCellStyle=this._updateActiveYear=this._updateActiveMonth=this._updateActiveMinutes=this._updateActiveHours=
this._strToDate=this._showSelector=this._show=this._scrollYears=this._posGetOffsetSum=this._posGetOffsetRect=this._posGetOffset=this._isVisible=this._isSelectorVisible=this._initSelector=this._hideSelector=this._hide=this._ifrSize=this._getTop=this._getLeft=this._fixLength=this._drawMonth=this._doOnSelectorShow=this._doOnSelectorChange=this._clearSelHover=this._clearDayHover=this.base=null;null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(a in this)delete this[a];l=null};this.setDate(this._activeDate);
return this}dhtmlXCalendarObject.prototype.lang="ru";
dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:"January February March April May June July August September October November December".split(" "),monthesSNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysFNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysSNames:"Su Mo Tu We Th Fr Sa".split(" "),weekstart:1,weekname:"w"},ru:{dateformat:"%d.%m.%Y",monthesFNames:"Январь Февраль Март Апрель Maй Июнь Июль Август Сентябрь Oктябрь Ноябрь Декабрь".split(" "),
monthesSNames:"Янв Фев Maр Aпр Maй Июн Июл Aвг Сен Окт Ноя Дек".split(" "),daysFNames:"Воскресенье Понедельник Вторник Среда Четверг Пятница Суббота".split(" "),daysSNames:"Вс Пн Вт Ср Чт Пт Сб".split(" "),weekstart:1,weekname:"Нд"}};
dhtmlXCalendarObject.prototype._buildMonthHdr=function(a){var c=this,e=function(a){return 1==String(a).length?"0"+String(a):a},g=function(a,c){return"<span class='dhtmlxcalendar_month_label_"+a+"'>"+c+"</span>"},h=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(h){switch(h){case "%m":return g("month",e(a.getMonth()+1));case "%n":return g("month",a.getMonth()+1);case "%M":return g("month",c.langData[c.lang].monthesSNames[a.getMonth()]);case "%F":return g("month",c.langData[c.lang].monthesFNames[a.getMonth()]);
case "%y":return g("year",e(a.getYear()%100));case "%Y":return g("year",a.getFullYear());case "%%":return"%";default:return h}}),c=e=g=null;return h};
dhtmlXCalendarObject.prototype.enableIframe=function(a){1==a?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},
this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)};dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")};dhtmlxCalendarObject=dhtmlXCalendarObject;
dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(a,c){return window.dhx4.str2date(a,c||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(a,c){return window.dhx4.date2str(a,c||this._dateFormat,this._dateStrings())};
window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(a){var c=this;this.leftCalendar=new dhtmlXCalendarObject(a);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(a);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(a){c._updateRange("rightCalendar",a,null);c._evOnClick(["left",a])});this.rightCalendar.attachEvent("onClick",function(a){c._updateRange("leftCalendar",null,a);c._evOnClick(["right",a])});
this.leftCalendar.attachEvent("onBeforeChange",function(a){return c._evOnBeforeChange(["left",a])});this.rightCalendar.attachEvent("onBeforeChange",function(a){return c._evOnBeforeChange(["right",a])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(a){this.leftCalendar.setDateFormat(a);this.rightCalendar.setDateFormat(a)};
this.setDates=function(a,c){null!=a&&this.leftCalendar.setDate(a);null!=c&&this.rightCalendar.setDate(c);this._updateRange()};this._updateRange=function(a,c,h){3==arguments.length?("leftCalendar"==a?this.leftCalendar:this.rightCalendar).setSensitiveRange(c,h):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,
arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();c=this.unload=this.getFormatedDate=this.setDates=this.setDateFormat=this.hide=this.show=this._evOnBeforeChange=this._evOnClick=this._updateRange=this.leftCalendar=this.rightCalendar=null};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnBeforeChange=function(a){return this.callEvent("onBeforeChange",a)};window.dhx4._eventable(this);return this};
function dhtmlXCombo(a,c,e,g,h){var l=this,m=h=null;"object"!=typeof a||a.tagName||(h=a,a=h.parent,e=h.width,c=h.name,g=h.mode,m=h.skin);this.cont="string"==typeof a?document.getElementById(a):a;this.conf={skin:null,form_name:c||"dhxcombo",combo_width:(parseInt(e)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof g&&"undefined"!=typeof this.modes[g]?g:"option",opts_count:8,opts_count_min:3,opts_width:null,
item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,enabled:!0,img_path:"",img_def:"",img_def_dis:!0,template:{input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,
clear_bsp:!1,clear_key:!1,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=1==this.modes[this.conf.opts_type].image;this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":
"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=
function(){null!=l.conf.s_tm&&window.clearTimeout(l.conf.s_tm);l.conf.s_tm=window.setTimeout(l._doOnListScrollAction,l.conf.s_time)};this._doOnListScrollAction=function(){l.conf.s_tm=null;"scroll"==l.conf.s_mode&&l.list.scrollHeight-l.list.scrollTop-10<l.list.clientHeight&&l._subloadRequest()};"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll);this.setSkin(m||window.dhx4.skin||("undefined"!=
typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue");this._updateTopImage=function(a){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=a?this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))};this._filterOpts=function(a){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var c=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==
c.toLowerCase())this._checkForMatch();else if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))this.conf.f_server_last=c.toLowerCase(),this.callEvent("onDynXLS",[c]);else if(null!=this.conf.f_url)if(0==c.length)this.conf.f_server_last=c.toLowerCase(),this.clearAll();else if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[c]){this.clearAll();this.conf.f_server_last=c.toLowerCase();for(var e=0;e<this.conf.f_cache_data[c].data.length;e++)this.load(this.conf.f_cache_data[c].data[e]);this.conf.f_dyn&&
(this.conf.f_dyn_end=this.conf.f_cache_data[c].dyn_end,this.conf.f_mask=this.conf.f_cache_data[c].mask);!0!==a&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){l.conf.f_server_last=c.toLowerCase();l.conf.f_mask=c;var e="mask="+encodeURIComponent(c);l.conf.f_dyn&&(e+="&pos=0",l.conf.f_dyn_end=!1);var g=function(e){l.conf.f_cache&&(l.conf.f_cache_data[c]||(l.conf.f_cache_data[c]={data:[],dyn_end:!1,mask:c}),l.conf.f_cache_data[c].data.push(e.xmlDoc.responseXML));
l.clearAll();l.load(e.xmlDoc.responseXML);1==(0<l.base.offsetWidth&&0<l.base.offsetHeight)&&1==l.conf.enabled&&1==l.conf.combo_focus&&!0!==a&&(l.conf.f_ac&&"start"==l.conf.f_mode&&0==l.conf.clear_bsp&&null!=l.list.firstChild&&(e=String(l.t[l.list.firstChild._optId].obj.getText(l.list.firstChild,!0)),0===String(e).toLowerCase().indexOf(String(c).toLowerCase())&&(l.base.firstChild.value=e,l._selectRange(c.length,e.length))),l._showList(!0),l._checkForMatch());g=null};"post"==window.dhx4.ajax.method?
window.dhx4.ajax.post(l.conf.f_url,e,g):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(l.conf.f_url+(0<=String(l.conf.f_url).indexOf("?")?"&":"?")+e,g)},200);else{this.conf.f_server_last=c.toLowerCase();var g=0==c.length?!0:new RegExp(("start"==this.conf.f_mode?"^":"")+String(c).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&"),"i"),h=null,m;for(m in this.t){var n=!1;!0!==g&&(null!=this.conf.f_func?(n=this._getOption(this.t[m].item._optId,e),n=1==this.conf.f_func.apply(window,[c,n])):(n=this.t[m].obj.getText(this.t[m].item,
!0),n=1==g.test(n)));!0===g||1==n?(this.t[m].item.style.display="",null==h&&0<c.length&&(h=String(this.t[m].obj.getText(this.t[m].item,!0)))):this.t[m].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=h&&(this.conf.f_ac_text=h.replace(new RegExp("^"+c,"i"),""),this.base.firstChild.value=h,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length));"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0);
!0!==a&&(this._showList(!0),this._checkForMatch())}};this._initObj=function(a){"undefined"!=typeof a.template&&this.setTemplate(a.template);1!=a.add&&1!=this.conf.f_loading&&this.clearAll(!1);this.addOption(a.options)};this._xmlToObj=function(a,c,e){var g={add:!1,options:[]};a=1==c?a:a.getElementsByTagName("complete");if(0<a.length){1==window.dhx4.s2b(a[0].getAttribute("add"))&&(g.add=!0);a=a[0].childNodes;for(var h=0;h<a.length;h++)if("undefined"!=typeof a[h].tagName){if("template"==String(a[h].tagName).toLowerCase()){for(var l=
{},m=0;m<a[h].childNodes.length;m++){var n=a[h].childNodes[m];if(null!=n.tagName){var D=n.tagName;"undefined"!=typeof this.conf.template[D]&&(l[D]=window.dhx4._xmlNodeValue(n));if("columns"==D)for(D=0;D<n.childNodes.length;D++){var H=n.childNodes[D];if(null!=H.tagName&&"column"==H.tagName){var E={},F;for(F in{width:1,css:1,header:1,option:1})null!=H.getAttribute(F)&&(E[F]=H.getAttribute(F));for(F in{header:1,option:1}){var J=H.getElementsByTagName(F);null!=J[0]&&null!=J[0].firstChild&&(E[F]=window.dhx4._xmlNodeValue(J[0]))}null==
l.columns&&(l.columns=[]);l.columns.push(E)}}}}this.setTemplate(l)}if("option"==String(a[h].tagName).toLowerCase()){m=!1;m=1==c?g.options.length==e:window.dhx4.s2b(a[h].getAttribute("selected"));l={value:a[h].getAttribute("value"),text:window.dhx4._xmlNodeValue(a[h]),selected:m,checked:window.dhx4.s2b(a[h].getAttribute("checked"))};for(F in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=a[h].getAttribute(F)&&(l[F]=a[h].getAttribute(F));for(m=0;m<a[h].childNodes.length;m++)if(null!=a[h].childNodes[m].tagName&&
"text"==String(a[h].childNodes[m].tagName).toLowerCase())for(l.text={},n=a[h].childNodes[m],D=0;D<n.childNodes.length;D++)null!=n.childNodes[D].tagName&&(l.text[n.childNodes[D].tagName]=window.dhx4._xmlNodeValue(n.childNodes[D]));g.options.push(l)}}}return g};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0});window.dhx4._eventable(this);this._getNearItem=function(a,c){for(var e=null;null!=a;)a=a[0>c?"previousSibling":"nextSibling"],null==e&&null!=a&&""==a.style.display&&
null!=a._optId&&(e=a,a=null);return e};this.setName(this.conf.form_name);this._doOnListMouseMove=function(a){a=a||event;for(a=a.target||a.srcElement;null!=a&&a!=this;)"undefined"!=typeof a._optId&&(l.conf.tm_hover&&window.clearTimeout(l.conf.tm_hover),l._setSelected(a._optId)),a=a.parentNode};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=!0;l.conf.clear_click=!0;window.setTimeout(function(){l.base.firstChild.focus()},1)};this._doOnListMouseUp=function(a){a=a||event;for(var c=a.target||
a.srcElement;null!=c&&c!=this;){if("undefined"!=typeof c._optId){var e=!0;"function"==typeof l.t[c._optId].obj.optionClick&&!0!==l.t[c._optId].obj.optionClick(c,a,l)&&(e=!1);e&&(l._setSelected(c._optId,null,!0),l._confirmSelect("click"))}c=c.parentNode}};this._doOnListMouseOut=function(a){l.conf.tm_hover&&window.clearTimeout(l.conf.tm_hover);l.conf.tm_hover=window.setTimeout(function(){var a=l.conf.last_match||l.conf.last_selected;null==l.conf.last_match&&null!=l.t[a]&&l.base.firstChild.value!=l.t[a].obj.getText(l.t[a].item,
!0)&&(a=null);l._setSelected(a,null,!0)},1)};this._doOnBaseMouseDown=function(a){if(l.conf.enabled){l.conf.clear_click=!0;a=a||event;a=a.target||a.srcElement;if(a!=this.firstChild){window.setTimeout(function(){l.base.firstChild.focus()},1);for(var c=a;c!=this&&null!=c;)if(c==this.lastChild){if("function"==typeof l.modes[l.conf.opts_type].topImageClick&&(c=l.conf.last_hover||l.conf.last_selected,c=null!=c?l.t[c].item:null,!0!==l.modes[l.conf.opts_type].topImageClick(c,l))){c=c=null;return}c=null}else c=
c.parentNode}l._isListVisible()?l._hideList():(a!=this.firstChild&&(l.conf.clear_blur=!0),l._showList(),l._setSelected(l.conf.last_selected,!0,!0));a=null}};this._doOnBodyMouseDown=function(){l.conf.clear_click?l.conf.clear_click=!1:l._confirmSelect("blur")};this._doOnInputFocus=function(){l.conf.clear_blur=!1;l.conf.tm_confirm_blur&&window.clearTimeout(l.conf.tm_confirm_blur);0==l.conf.combo_focus&&(l.conf.combo_focus=!0,l.callEvent("onFocus",[]))};this._doOnInputBlur=function(){1==l.conf.clear_blur?
l.conf.clear_blur=!1:(l.conf.tm_confirm_blur&&window.clearTimeout(l.conf.tm_confirm_blur),l.conf.tm_confirm_blur=window.setTimeout(function(){0==l.conf.clear_click&&(l._confirmSelect("blur"),l.conf.combo_focus=!1,l.callEvent("onBlur",[]))},20))};this._doOnInputKeyUp=function(a){a=a||event;0!=l.conf.f_mode?(l.conf.clear_bsp=8==a.keyCode||46==a.keyCode,l._filterOpts()):l._checkForMatch()};this._doOnInputKeyDown=function(a){a=a||event;38!=a.keyCode&&40!=a.keyCode||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault?
a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,l._keyOnUpDown(38==a.keyCode?-1:1));113!=a.keyCode||l._isListVisible()||(l._showList(),l.base.firstChild.value==l.conf.last_text?(l._setSelected(l.conf.last_selected,!0,!0),l.base.firstChild.value=l.conf.last_text,l.conf.f_server_last=l.base.firstChild.value.toLowerCase()):(l.conf.f_server_last=l.base.firstChild.value.toLowerCase(),0==l.conf.f_mode&&l._checkForMatch()));27==a.keyCode&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=
!0,l._cancelSelect());13==a.keyCode&&(a.preventDefault&&a.preventDefault(),l._confirmSelect("kbd"));l.conf.clear_key=!0;l.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){l.conf.clear_key?l.conf.clear_key=!1:(a=a||event,l.callEvent("onKeyPressed",[a.keyCode||a.charCode]))};this._keyOnUpDown=function(a){var c=null;this.conf.last_hover?c=this.t[this.conf.last_hover].item:this.conf.last_selected&&(c=this.t[this.conf.last_selected].item);if(c||0!=this._getListVisibleCount())null!=
c&&""!=c.style.display&&(c=null),this._showList(),null!=c?this.t[c._optId].obj.isSelected(c)&&(c=this._getNearItem(c,a)):(c=this.list.firstChild,""!=c.style.display&&(c=this._getNearItem(c,1))),null!=c&&(this._setSelected(c._optId,!0,!0),0==this.conf.f_mode?this.base.firstChild.value=this.t[c._optId].obj.getText(c,!0):(a=String(this.t[c._optId].obj.getText(c,!0)),"start"==this.conf.f_mode&&1==this.conf.f_ac?0===a.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=a.substring(this.conf.f_server_last.length,
a.length),this.base.firstChild.value=a,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())))};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},
{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(c=0;c<this.conf.evs_nodes.length;c++)for(var n in this.conf.evs_nodes[c].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[c].node.addEventListener(n,this[this.conf.evs_nodes[c].evs[n]],
!1):this.conf.evs_nodes[c].node.attachEvent("on"+n,this[this.conf.evs_nodes[c].evs[n]]);this.unload=function(){this.clearAll();this.t=null;for(var a=0;a<this.conf.evs_nodes.length;a++){for(var c in this.conf.evs_nodes[a].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[a].node.removeEventListener(c,this[this.conf.evs_nodes[a].evs[c]],!1):this.conf.evs_nodes[a].node.detachEvent("on"+c,this[this.conf.evs_nodes[a].evs[c]]),this.conf.evs_nodes[a].evs[c]=null,delete this.conf.evs_nodes[a].evs[c];
this.conf.evs_nodes[a].node=null;this.conf.evs_nodes[a].evs=null;delete this.conf.evs_nodes[a].node;delete this.conf.evs_nodes[a].evs;this.conf.evs_nodes[a]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(c in this.conf)this.conf[c]=null,delete this.conf[c];this.conf=null;"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",
this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll);this.base.parentNode&&this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.modes=this.base=this.list=this.cont=null;for(c in this)"function"==typeof this[c]&&(this[c]=null);l=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=a;
a=null;null!=h&&(null!=h.filter&&("string"==typeof h.filter?this.enableFilteringMode(!0,h.filter,window.dhx4.s2b(h.filter_cache),window.dhx4.s2b(h.filter_sub_load)):this.enableFilteringMode(!0)),null!=h.image_path&&this.setImagePath(h.image_path),null==h.default_image&&null==h.default_image_dis||this.setDefaultImage(h.default_image,h.default_image_dis),(h.items||h.options)&&this.addOption(h.items||h.options),(h.xml||h.json)&&this.load(h.xml||h.json),"undefined"!=typeof h.readonly&&this.readonly(h.readonly),
h=null);return this}
function dhtmlXComboFromSelect(a){"string"==typeof a&&(a=document.getElementById(a));var c=a.offsetWidth,e=a.getAttribute("name")||null,g=document.createElement("SPAN");a.parentNode.insertBefore(g,a);var h=a.getAttribute("mode")||a.getAttribute("opt_type")||"option",c=new dhtmlXCombo(g,e,c,h);(e=a.getAttribute("imagePath"))&&c.setImagePath(e);e=a.getAttribute("defaultImage");g=a.getAttribute("defaultImageDis");1==window.dhx4.s2b(g)&&(g=!0);null==e&&null==g||c.setDefaultImage(e,g);e=c._xmlToObj([a],
!0,a.selectedIndex);0<e.options.length&&c.addOption(e.options);a.parentNode.removeChild(a);return c}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){window.dhx4.s2b(a)?this.base.firstChild.setAttribute("readOnly","true"):this.base.firstChild.removeAttribute("readOnly")};
dhtmlXCombo.prototype.setPlaceholder=function(a){if("undefined"==typeof a||null==a)a="";this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(a){for(var c in a)"undefined"!=typeof this.conf.template[c]&&(this.conf.template[c]=String(a[c]));null!=a.columns?this._mcMakeTemplate(a.columns):this._mcDetachHeader();for(c in this.t)this.t[c].obj.setText(this.t[c].item,this.t[c].item._conf.text);this._confirmSelect()};
dhtmlXCombo.prototype.setSkin=function(a){a!=this.conf.skin&&(this.conf.skin=a,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"))};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};
dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var c=0;c<this.list.childNodes.length;c++)a.apply(window,[this._getOption(this.list.childNodes[c]._optId,c)])};
dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()};dhtmlXCombo.prototype.setFontSize=function(a,c){null!=a&&(this.base.firstChild.style.fontSize=a);null!=c&&(this.list.style.fontSize=c)};dhtmlXCombo.prototype.getOption=function(a){for(var c=null,e=null,g=0;g<this.list.childNodes.length;g++)if(null==c){var h=this.list.childNodes[g]._optId;this.t[h].obj.getValue(this.t[h].item)==a&&(c=h,e=g)}return null==c?null:this._getOption(c,e)};
dhtmlXCombo.prototype.getOptionByIndex=function(a){return 0>a||null==this.list.childNodes[a]?null:this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(a){for(var c=null,e=null,g=0;g<this.list.childNodes.length;g++)if(null==c){var h=this.list.childNodes[g]._optId;this.t[h].obj.getText(this.t[h].item,!0)==a&&(c=h,e=g)}return null==c?null:this._getOption(c,e)};
dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};
dhtmlXCombo.prototype.getIndexByValue=function(a){a=this.getOption(a);return null!=a?a.index:-1};dhtmlXCombo.prototype.setComboText=function(a){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())};
dhtmlXCombo.prototype.setComboValue=function(a){var c=this.getOption(a);null!=c?this.selectOption(c.index):(this.conf.last_value=a,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")};dhtmlXCombo.prototype.selectOption=function(a,c,e){0>a||a>=this.list.childNodes.length||(this._setSelected(this.list.childNodes[a]._optId,this._isListVisible(),!0),this._confirmSelect("script"))};
dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null);this.base.firstChild.value="";0!=this.conf.f_mode&&this._filterOpts(!0);this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};
dhtmlXCombo.prototype.enable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.conf.enabled!=a&&((this.conf.enabled=a)?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))};
dhtmlXCombo.prototype.disable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled};dhtmlXCombo.prototype.show=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.base.style.display=1==a?"":"none"};dhtmlXCombo.prototype.hide=function(a){"undefined"==typeof a&&(a=!0);this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display};
dhtmlXCombo.prototype.setFilterHandler=function(a){"function"==typeof a?(this.conf.f_func=a,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof a&&"function"==typeof window[a]?(this.conf.f_func=window[a],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null};
dhtmlXCombo.prototype.enableFilteringMode=function(a,c,e,g){1==a||"between"==a?(this.conf.f_mode=1==a?"start":"between",null!=c?(this.conf.f_url=c,this.conf.f_cache=window.dhx4.s2b(e),this.conf.f_dyn=window.dhx4.s2b(g)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)};
dhtmlXCombo.prototype.filter=function(a,c){for(var e=0;e<this.list.childNodes.length;e++){var g=a.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)]);this.list.childNodes[e].style.display=!0===g?"":"none"}"undefined"!=typeof c&&1!=c||this._showList(!0)};
dhtmlXCombo.prototype.sort=function(a){for(var c=[],e=0;e<this.list.childNodes.length;e++){var g=this.list.childNodes[e]._optId;c.push([g,this._getOption(g,e)])}if("asc"==a||"desc"==a)k=!0,c.sort(function(c,e){c=c[1].text_option.toLowerCase();e=e[1].text_option.toLowerCase();var g="asc"==a?1:-1;return c>e?g:-1*g});else if("function"==typeof a||"function"==typeof window[a])"function"==typeof window[a]&&(a=window[a]),c.sort(function(c,e){return a.apply(window,[c[1],e[1]])});for(;0<this.list.childNodes.length;)this.list.removeChild(this.list.lastChild);
for(e=0;e<c.length;e++)this.list.appendChild(this.t[c[e][0]].item)};dhtmlXCombo.prototype.enableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(a){this.conf.allow_free_text="undefined"==typeof a?!0:window.dhx4.s2b(a)};
dhtmlXCombo.prototype._checkForMatch=function(a){for(var c=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),e=null,g=this.list.firstChild;null!=g;){if(""==g.style.display&&null!=g._optId){var h=window.dhx4.trim(this.t[g._optId].obj.getText(g,!0)).toLowerCase();c==h&&(e=g._optId,g=null)}null!=g&&(g=g.nextSibling)}if(null==this.conf.last_match)if(null!=e)this._setSelected(e,!0,!0),this.conf.last_match=e;else{if("between"!=this.conf.f_mode||1==a)this._setSelected(null,!0,!0),this.conf.last_match=
null}else null!=e?e!=this.conf.last_match&&(this._setSelected(e,!0,!0),this.conf.last_match=e):(this._setSelected(null,!0,!0),this.conf.last_match=null)};dhtmlXCombo.prototype._selectRange=function(a,c){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,a,c)};dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};
dhtmlXCombo.prototype._showList=function(a){0==this._getListVisibleCount()?a&&this._isListVisible()&&this._hideList():this._isListVisible()?this._checkListHeight():(this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display),a=null!=this.hdr?
this.hdr.offsetHeight:0,this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+a+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-a+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&(this.hdr.style.visibility=
"visible"),this.callEvent("onOpen",[]))};dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))};dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display};
dhtmlXCombo.prototype._getListVisibleCount=function(){for(var a=0,c=0;c<this.list.childNodes.length;c++)a+=""==this.list.childNodes[c].style.display?1:0;return a};
dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h)for(var a=this.list.firstChild;null!=a;)""==a.style.display?(this.conf.item_h=a.offsetHeight+(null!=this.hdr?-1:0),a=null):a=a.nextSibling;var c=window.dhx4.screenDim(),a=window.dhx4.absTop(this.base),e=this.base.offsetHeight,g=null!=this.hdr?this.hdr.offsetHeight:0,h=Math.max(0,Math.floor((a+g-c.top)/this.conf.item_h)),c=Math.max(0,Math.floor((c.bottom-(a+e+g))/this.conf.item_h)),l=this._getListVisibleCount();
c<Math.min(this.conf.opts_count_min,l)&&h>c&&(c=null);var h=Math.min(null==c?h:c,this.conf.opts_count,l),m=this.conf.sp[this.conf.skin][null!=this.hdr?"hdr_ofs":"list_ofs"];this.list.style.height=h<l?h*this.conf.item_h+"px":"";this.list.style.top=(null==c?a-this.list.offsetHeight+m:a+e+g-m)+"px";null!=this.hdr&&(this.hdr.style.top=(null==c?a-g-this.list.offsetHeight+m:a+e-m)+"px")}};
dhtmlXCombo.prototype._scrollToItem=function(a){var c=this.t[a].item.offsetTop;a=c+this.t[a].item.offsetHeight;var e=this.list.scrollTop,g=e+this.list.clientHeight;c<e?this.list.scrollTop=c+(null!=this.hdr?1:0):a>g&&(this.list.scrollTop=a-this.list.clientHeight+(null!=this.hdr?-this.conf.sp[this.conf.skin].scr_ofs:0))};
dhtmlXCombo.prototype._setSelected=function(a,c,e){e&&this._updateTopImage(a);null!=a&&this.conf.last_hover==a?c&&this._scrollToItem(a):(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==a&&this.callEvent("onSelectionChange",[])),null!=a&&(this.t[a].obj.setSelected(this.t[a].item,!0),this.conf.last_hover=a,this.callEvent("onSelectionChange",[]),"select"==this.conf.s_mode&&this.t[a].item==this.t[a].item.parentNode.lastChild&&
this._subloadRequest(),c&&this._scrollToItem(a)))};
dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var a="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,c=this,e=function(a){c.conf.f_cache&&c.conf.f_cache_data[c.conf.f_mask].data.push(a.xmlDoc.responseXML);var h=c.list.childNodes.length;c.conf.f_loading=!0;c.load(a.xmlDoc.responseXML);c.conf.f_loading=!1;h==c.list.childNodes.length&&(c.conf.f_dyn_end=!0,c.conf.f_cache&&(c.conf.f_cache_data[c.conf.f_mask].dyn_end=
!0));e=c=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,a,e):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(0<=String(this.conf.f_url).indexOf("?")?"&":"?")+a,e)}};
dhtmlXCombo.prototype.addOption=function(a,c,e,g,h){var l=null;if(a instanceof Array)for(h=0;h<a.length;h++)"undefined"!=typeof a[h]&&(a[h]instanceof Array?(c=this._renderOption({value:a[h][0],text:a[h][1],css:a[h][2],img:a[h][3]}),null==l&&1==window.dhx4.s2b(a[h][4])&&(l=c)):(c=this._renderOption(a[h]),null==l&&1==window.dhx4.s2b(a[h].selected)&&(l=c)));else c=this._renderOption({value:a,text:c,css:e,img:g}),null==l&&1==window.dhx4.s2b(h)&&(l=c);null!=l&&(this._setSelected(l,this._isListVisible(),
!0),this._confirmSelect("onInit"))};dhtmlXCombo.prototype.updateOption=function(a,c,e,g){a=this._getOptionId(a);null!=a&&(this.t[a].obj.update(this.t[a].item,{value:c,text:e,css:g}),this.conf.last_selected==a&&(this.conf.last_text=this.base.firstChild.value=this.t[a].obj.getText(this.t[a].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))};
dhtmlXCombo.prototype.deleteOption=function(a){for(var c in this.t)this.t[c].obj.getValue(this.t[c].item)==a&&this._removeOption(c);this._isListVisible()&&this._showList(!0)};dhtmlXCombo.prototype.clearAll=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);for(var c in this.t)this._removeOption(c);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover);this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;1==a&&this._hideList()};
dhtmlXCombo.prototype._renderOption=function(a){var c=window.dhx4.newId(),e=document.createElement("DIV");e._optId=c;e._tpl=this.conf.template;"undefined"==typeof a.img&&"undefined"!=typeof a.img_src&&(a.img=a.img_src,delete a.img_src);"undefined"==typeof a.img_dis&&"undefined"!=typeof a.img_src_dis&&(a.img_dis=a.img_src_dis,delete a.img_src_dis);a.img_path=this.conf.img_path;a.img_def=this.conf.img_def;a.img_def_dis=this.conf.img_def_dis;this.list.appendChild(e);var g=this._isListVisible()&&1==window.dhx4.isFF;
1==g&&--this.list.scrollTop;this.t[e._optId]={obj:this.modes[this.conf.opts_type].render(e,a),item:e,conf:{type:this.conf.opts_type}};1==g&&(this.list.scrollTop+=1);return c};
dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];this.conf.last_hover==a&&(this.conf.last_hover=null);this.conf.last_selected==a&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))};
dhtmlXCombo.prototype._confirmSelect=function(a){var c=!1;this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);if(null!=this.conf.last_hover)c=c||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=
this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else if(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value)c=c||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,
this.base.childNodes[2].value="true";else{this._cancelSelect();this._updateTopImage(this.conf.last_selected);return}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=a&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length));this._hideList();1==c&&"onInit"!=a&&"onDelete"!=a&&this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])};
dhtmlXCombo.prototype._cancelSelect=function(){this._hideList();this.base.firstChild.value=this.conf.last_text;0!=this.conf.f_mode&&this._filterOpts(!0)};
dhtmlXCombo.prototype._getOption=function(a,c){if(!this.t[a])return null;"undefined"==typeof c&&(c=-1);if(0>c)for(var e=0;e<this.list.childNodes.length;e++)0>c&&this.list.childNodes[e]._optId==a&&(c=e);e={value:this.t[a].obj.getValue(this.t[a].item),text:this.t[a].obj.getText(this.t[a].item),text_input:this.t[a].obj.getText(this.t[a].item,!0),text_option:this.t[a].obj.getText(this.t[a].item,null,!0),css:this.t[a].obj.getCss(this.t[a].item),selected:a==this.conf.last_selected,index:c};if("function"==
typeof this.t[a].obj.getExtraData){var g=this.t[a].obj.getExtraData(this.t[a].item),h;for(h in g)"undefined"==typeof e[h]&&(e[h]=g[h])}return e};dhtmlXCombo.prototype._getOptionProp=function(a,c,e){return null!=a&&(a=this._getOption(a),null!=a)?a[c]:e};dhtmlXCombo.prototype._getOptionId=function(a){for(var c=null,e=0;e<this.list.childNodes.length;e++)if(null==c){var g=this.list.childNodes[e]._optId;a==this.t[g].obj.getValue(this.t[g].item)&&(c=g)}return c};
dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px";this.base.firstChild.style.marginLeft=this.conf.combo_image?"23px":"0px"};
dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=parseInt(a)||null};dhtmlXCombo.prototype.setOptionIndex=function(a,c){if(!(isNaN(c)||0>c)){var e=this.getOption(a);null!=e&&c!=e.index&&(e=this.list.childNodes[e.index],e.parentNode.removeChild(e),null!=this.list.childNodes[c]?this.list.insertBefore(e,this.list.childNodes[c]):this.list.appendChild(e))}};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};
dhtmlXCombo.prototype._mcMakeTemplate=function(a){for(var c="",e="",g=this.conf.col_w=0;g<a.length;g++){var h=Number(parseInt(a[g].width)||50),l=a[g].css||"",m=0==g&&1==window.dhx4.isIE6?"_first":"",e=e+("<div class='dhxcombo_cell"+m+" "+l+"' style='width:"+h+"px;'><div class='dhxcombo_cell_text'>"+(a[g].option||"&nbsp;")+"</div></div>"),c=c+("<div class='dhxcombo_hdrcell"+m+" "+l+"' style='width:"+h+"px;'><div class='dhxcombo_hdrcell_text'>"+(a[g].header||"&nbsp;")+"</div></div>");this.conf.col_w+=
h+1}h=500;a=document.createElement("DIV");a.style.position="absolute";a.style.top="10px";a.style.left=2*-h+"px";a.style.width=h+"px";a.style.height="50px";a.style.overflowY="scroll";a.innerHTML="<div>&nbsp;</div>";document.body.appendChild(a);this.conf.col_w+=h-a.firstChild.offsetWidth+10;a.parentNode.removeChild(a);this.conf.template.option=e;this._mcAttachHeader(c);this.list.className+=" dhxcombolist_multicolumn"};
dhtmlXCombo.prototype._mcAttachHeader=function(a){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown));this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"};
dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null);this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};
dhtmlXCombo.prototype.doWithItem=function(a,c,e,g){var h=0<=a&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null;if(null==h||"function"!=typeof this.t[h].obj[c])return null;for(var l=[this.t[h].item],m=2;m<arguments.length;m++)l.push(arguments[m]);return this.t[h].obj[c].apply(this.t[h].obj,l)};
function dhtmlXComboExtend(a,c){for(var e in dhtmlXCombo.prototype.modes[c])"undefined"==typeof dhtmlXCombo.prototype.modes[a][e]&&(dhtmlXCombo.prototype.modes[a][e]=dhtmlXCombo.prototype.modes[c][e])}
dhtmlXCombo.prototype.modes.option={image:!1,option_css:"dhxcombo_option_text",render:function(a,c){a._conf={value:c.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";null!=c.css&&(a.lastChild.style.cssText=c.css,a._conf.css=c.css);this.setText(a,c.text);return this},destruct:function(a){a._conf=null},update:function(a,c){a._conf.value=c.value;a._conf.css=c.css;a.lastChild.style.cssText=c.css;this.setText(a,c.text)},setText:function(a,c){a._conf.text=
c;var e="object"==typeof c?window.dhx4.template(a._tpl.option,a._conf.text,!0):window.dhx4.trim(a._conf.text||"");a.lastChild.innerHTML=0==e.length?"&nbsp;":e},getText:function(a,c,e){return window.dhx4.s2b(c)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.input,a._conf.text,!0):window.dhx4.s2b(e)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.option,a._conf.text,!0):a._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,
c){a.className="dhxcombo_option"+(c?" dhxcombo_option_selected":"")},isSelected:function(a){return 0<=String(a.className).indexOf("dhxcombo_option_selected")},getExtraData:function(a){return{type:"option"}}};
dhtmlXCombo.prototype.modes.checkbox={image:!0,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(a,c){a._conf={value:c.value,css:"",checked:window.dhx4.s2b(c.checked)};a.className="dhxcombo_option";a.innerHTML="<div class='"+String(this.image_css).replace("#state#",a._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";a.firstChild._optChbxId=a._optId;null!=c.css&&(a.lastChild.style.cssText+=c.css,
a._conf.css=c.css);this.setText(a,c.text);return this},setChecked:function(a,c){a._conf.checked=window.dhx4.s2b(c);a.firstChild.className=String(this.image_css).replace("#state#",a._conf.checked?"1":"0")},isChecked:function(a){return 1==a._conf.checked},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(a,c,e){var g=!0;for(c=c.target||c.srcElement;1==g&&null!=c&&c!=a;)null!=c._optChbxId?(!0===e.callEvent("onCheck",[a._conf.value,!a._conf.checked])&&this.setChecked(a,
!this.isChecked(a)),g=!1):c=c.parentNode;return g},getTopImage:function(a,c){return""},topImageClick:function(a,c){return!0}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,c){this.doWithItem(a,"setChecked",c)};dhtmlXCombo.prototype.getChecked=function(a,c){for(var e=[],g=0;g<this.list.childNodes.length;g++)this.isChecked(g)&&e.push(this._getOptionProp(this.list.childNodes[g]._optId,"value",""));return e};
dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};
dhtmlXCombo.prototype.modes.image={image:!0,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,c){a._conf={value:c.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";null!=c.css&&(a.lastChild.style.cssText+=c.css,a._conf.css=c.css);this.setText(a,c.text);this.setImage(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis);return this},update:function(a,c){a._conf.value=
c.value;a._conf.css=c.css;a.lastChild.style.cssText=c.css;this.setText(a,c.text);this.setImage(a,c.img,c.img_dis,c.img_path,c.img_def,c.img_def_dis)},setImage:function(a,c,e,g,h,l){c=null!=c&&0<c.length?g+c:null!=h&&0<h.length?g+h:null;e=null!=e&&0<e.length?g+e:null!=l&&0<l.length?g+l:1==l?c:null;a._conf.img=c;a._conf.img_dis=e;a.firstChild.style.backgroundImage=null!=c?"url("+c+")":"none"},getExtraData:function(a){return{type:"image"}},getTopImage:function(a,c){var e=c?"img":"img_dis";return null!=
a&&null!=a._conf[e]?"<div class='"+this.image_css+"' style='background-image:url("+a._conf[e]+");'></div>":""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,c){null!=a&&(this.conf.img_def=a);null!=c&&(this.conf.img_def_dis=c)};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};
function dhtmlXColorPicker(a){if(!(this instanceof dhtmlXColorPicker))return new dhtmlXColorPicker(a);dhx4._eventable(this);var c=this,e=void 0,g=null,h,l;this._nodes=[];this.skin=this.memory=this._globalNode=this.base=this._inputListenerId=this.activeNode=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(a){a=
a||event;"function"==typeof window.addEventListener?(c._controllerNodes.colorArea.addEventListener("mousemove",c._setMoveSelection,!1),document.body.addEventListener("mouseup",c._cleanMoveSelection,!1)):(c._controllerNodes.colorArea.attachEvent("onmousemove",c._setMoveSelection),document.body.attachEvent("onmouseup",c._cleanMoveSelection));c._setMoveSelection(a,c._controllerNodes.colorArea);return!1};this._cleanMoveSelection=function(){"function"==typeof window.removeEventListener?(c._controllerNodes.colorArea.removeEventListener("mousemove",
c._setMoveSelection,!1),document.body.removeEventListener("mouseup",c._cleanMoveSelection,!1)):(c._controllerNodes.colorArea.detachEvent("onmousemove",c._setMoveSelection),document.body.detachEvent("onmouseup",c._cleanMoveSelection));return!1};this._setMoveSelection=function(a){a=a||event;var e=c._getOffsetPosition(a,c._controllerNodes.colorArea);c._controllerNodes.fr_cover?setTimeout(function(){c._setColorAreaXY(e.x,e.y);c._setColorByXYC()},0):(c._setColorAreaXY(e.x,e.y),c._setColorByXYC());return!1};
this._initMoveContrast=function(a){a=a||event;"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",c._setMoveContrast,!1),document.body.addEventListener("mouseup",c._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",c._setMoveContrast),document.body.attachEvent("onmouseup",c._cleanMoveContrast));c._setMoveContrast(a,c._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",
c._setMoveContrast,!1),document.body.removeEventListener("mouseup",c._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",c._setMoveContrast),document.body.detachEvent("onmouseup",c._cleanMoveContrast))};this._setMoveContrast=function(a){a=a||event;a=c._getOffsetPosition(a,c._controllerNodes.contrastArea);c._setContrastY(a.y);c._setColorByXYC(!0)};this._doOnSelectColor=function(){var a=c.colorAIP.rgb2hex({r:c.value.red,g:c.value.green,b:c.value.blue});null!=c.activeNode&&(c.activeNode.valueCont&&
(c.activeNode.valueCont.value=a),c.activeNode.valueColor&&(c.activeNode.valueColor.style.backgroundColor=a));(c.base._dhx_remove||c.conf.hideOnSelect)&&c.hide();c.callEvent("onSelect",[a,c.activeNode?c.activeNode.node:null])};this._doOnCancel=function(){1==c.callEvent("onCancel",[c.activeNode?c.activeNode.node:null])&&1==c.conf.closeable&&c.hide()};this._doOnFocusByInput=function(){var a=this!=window?this:event.srcElement,a=c.activeNode&&c.activeNode.valueCont&&c.activeNode.valueCont==a?c.activeNode:
c._getNodeByValueCont(a);(c.activeNode=a)&&a==c.activeNode&&c._initListenerInput()};this._doOnBlurByInput=function(){var a=this!=window?this:event.srcElement;(a=c.activeNode&&c.activeNode.valueCont&&c.activeNode.valueCont==a?c.activeNode:c._getNodeByValueCont(a))&&a==c.activeNode&&c._removeListenerInput()};this._doOnClickByNode=function(a){a=this!=window?this:event.srcElement;c.activeNode=c.activeNode.node!=a?c._getNodeByElement(a):c.activeNode;c.isVisible()||c.show()};this.saveColor=function(){c.memory.setValue(c.value)};
this._onSelectMemoryEl=function(a){var e;c._refreshCoordinatesByHSL(a.value.hue,a.value.sat,a.value.lum);for(e in a.value)c.value[e]=a.value[e];c._refreshContrast();c._refreshInputValues();c._refreshColorValue()};this._doOnClickByBody=function(a){a=a||event;var e=!0;a=a.target||a.srcElement;c._isBaseNode(a)&&(e=!1);e&&c.activeNode&&(c.activeNode.node==a||c.activeNode.valueCont==a)&&(e=!1);e&&c.hide()};this._doOnChangeHSL=function(){var a=parseInt(c._controllerNodes.hue.value),e=parseInt(c._controllerNodes.sat.value),
g=parseInt(c._controllerNodes.lum.value);isNaN(a)||359<a||0>a?c._controllerNodes.hue.value=c.value.hue:c.value.hue=a;isNaN(e)||100<e||0>e?c._controllerNodes.sat.value=c.value.sat:c.value.sat=e;isNaN(g)||100<g||0>g?c._controllerNodes.lum.value=c.value.lum:c.value.lum=g;a=c.colorAIP.hsl2rgb(c.value.hue,c.value.sat/100,c.value.lum/100);c.value.red=Math.round(255*a.r);c.value.green=Math.round(255*a.g);c.value.blue=Math.round(255*a.b);c._refreshCoordinatesByHSL(c.value.hue,c.value.sat,c.value.lum);c._refreshContrast();
c._refreshInputValues();c._refreshColorValue()};this._doOnChangeRGB=function(){var a=parseInt(c._controllerNodes.red.value),e=parseInt(c._controllerNodes.green.value),g=parseInt(c._controllerNodes.blue.value);isNaN(a)||255<a||0>a?c._controllerNodes.red.value=c.value.red:c.value.red=a;isNaN(e)||255<e||0>e?c._controllerNodes.green.value=c.value.green:c.value.green=e;isNaN(g)||255<g||0>g?c._controllerNodes.blue.value=c.value.blue:c.value.blue=g;a=c.colorAIP.rgb2hsl(c.value.red/255,c.value.green/255,
c.value.blue/255);c.value.hue=Math.round(a.h);c.value.sat=Math.round(100*a.s);c.value.lum=Math.round(100*a.l);c._refreshCoordinatesByHSL(c.value.hue,c.value.sat,c.value.lum);c._refreshContrast();c._refreshInputValues();c._refreshColorValue()};this._doOnChangeHSV=function(){c._controllerNodes.hsv.value=c.setColor(c._controllerNodes.hsv.value)};this._checkType=function(a){if(a instanceof Array)switch(a=c._checkType(a[0]),a){case "string":return"array_string";case "input":case "textarea":return"array_input";
case "object":return"array_object"}else{if(void 0==a)return null;if("string"==typeof a)return"string";if(a.tagName&&"input"==a.tagName.toLowerCase())return"input";if(a.tagName&&"textarea"==a.tagName.toLowerCase())return"textarea";if(a.tagName)return"container";if("object"==typeof a)return"object"}};this._initByObject=function(a){a.parent&&a.parent.tagName?c.base=a.parent:"string"==typeof a.parent?c.base=document.getElementById(a.parent):(c.base=document.createElement("div"),c.base._dhx_remove=!0);
a.color&&(c.conf.selectedColor=a.color);"undefined"!=typeof a.closeable&&(this.conf.closeable=dhx4.s2b(a.closeable));a.custom_colors&&(this._tempInitCC=function(){var c,e;this.initMemoryColors();this.conf.customColors=!0;if(a.custom_colors instanceof Array)for(e=a.custom_colors.length,c=0;c<e;c++)this.setCustomColors(a.custom_colors[c]);this.base.parentNode&&this.showMemory();delete this._tempInitCC});a.hide&&(c.conf.hide=!0);a.input&&c._addNode(a.input,a.target_color,a.target_value);var e=a.skin||
window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"dhx_skyblue";c.setSkin(e);a.colors&&(c.initMemoryColors(),c.conf.customColors=!0);a.link&&c._addNode(a.link)};this.unload=function(){var a,e,h;this.isVisible()&&this.hide();this.destructMemory();e=this._nodes.length;for(a=0;a<e;a++){this._detachEventsFromNode(this._nodes[a]);for(h in this._nodes[a])this._nodes[a][h]=null;delete this._nodes[a]}this._nodes=null;this.base._dhx_remove?delete this.base._dhx_remove:
this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"");"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",
this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",
this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",
this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV));this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),
delete this._controllerNodes.fr_cover);dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(h in this)this[h]=null;l=g=c=null};e=this._checkType(a);switch(e){case "object":c._initByObject(a);break;case "input":case "textarea":c._initByObject({});this._addNode(a);break;case "string":return g=document.getElementById(a),new dhtmlXColorPicker(g);case "container":c._initByObject({parent:a});break;case null:c._initByObject({});break;case "array_string":case "array_input":c._initByObject({});
h=a.length;for(e=0;e<h;e++)this._addNode(a[e]);break;case "array_object":for(c._initByObject({}),h=a.length,e=0;e<h;e++)l=this._addNode(a[e].input,a[e].target_color,a[e].target_value).conf,l.customColors=void 0!=a[e].custom_colors?dhx4.s2b(a[e].custom_colors):l.customColors,l.selectedColor=void 0!=a[e].color?a[e].color:l.selectedColor}this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+
this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+
this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+
"</button></div></div>";"</div>";this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,
hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,
green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,
labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],
btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};"function"==typeof this._tempInitCC&&this._tempInitCC();"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,
!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",
this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),
this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",
this._doOnChangeHSV));this.setColor(this.conf.selectedColor||"#ffffff");if(this._nodes.length)for(e=0;e<this._nodes.length;e++)this._attachEventsToNode(this._nodes[e]);this.conf.hide&&this.hide();"function"==typeof this._cpInitFRM&&this._cpInitFRM()}dhtmlXColorPicker.prototype.linkTo=function(a,c,e){1==arguments.length&&(c=e=a);var g;a=a||null;e=e||null;"string"==typeof c&&(c=document.getElementById(c));(g=this._addNode(c,a,e))&&this._attachEventsToNode(g);return g};
dhtmlXColorPicker.prototype._isBaseNode=function(a){return a==this.base?!0:a.parentElement==document.body?!1:a.parentElement?this._isBaseNode(a.parentElement):!1};dhtmlXColorPicker.prototype._hasInput=function(a){var c,e,g=!1;e=this._nodes.length;for(c=0;c<e;c++)if(this._nodes[c].valueCont==a){g=!0;break}return g};dhtmlXColorPicker.prototype._findNodesByArray=function(a){var c,e,g;e=a.length;for(c=0;c<e;c++)(g="string"==typeof a[c]?document.getElementById(a[c]):a[c])&&this._addNode(g)};
dhtmlXColorPicker.prototype._addNode=function(a,c,e){var g,h;a="string"==typeof a?document.getElementById(a):a;"string"==typeof c&&(c=document.getElementById(c));"string"==typeof e&&(e=document.getElementById(e));if(!a)return null;dhx4.s2b(a.getAttribute("colorbox"))&&(g=document.createElement("div"),g.style.width=a.offsetWidth+"px",g.style.height=a.offsetHeight+"px",a.style.width=a.offsetWidth-(a.offsetHeight+8)+"px",a.parentNode.insertBefore(g,a),g.style.position="relative",h=document.createElement("div"),
g.appendChild(a),g.appendChild(h),h.className="dhxcp_colorBox",a.className+=" dhxcp_colorInput",h.style.width=h.style.height=a.offsetHeight+"px");c={node:a,valueColor:void 0!=c?c:h||a,valueCont:void 0!=e?e:a,conf:{customColors:null!=a.getAttribute("customcolors")?dhx4.s2b(a.getAttribute("customcolors")):null,selectedColor:a.getAttribute("selectedcolor")}};this._nodes.push(c);this.activeNode||(this.activeNode=c);return c};
dhtmlXColorPicker.prototype.getNode=function(a){var c=null,e=null,c="string"==typeof a?document.getElementById(a):a;void 0!=c.tagName&&(e=this._getNodeByElement(c));return e};dhtmlXColorPicker.prototype._getNodeByElement=function(a){var c=null,e,g;g=this._nodes.length;for(e=0;e<g;e++)this._nodes[e].node==a&&(c=this._nodes[e]);return c};
dhtmlXColorPicker.prototype._getNodeByValueCont=function(a){var c=null,e,g;g=this._nodes.length;for(e=0;e<g;e++)this._nodes[e].valueCont&&this._nodes[e].valueCont==a&&(c=this._nodes[e]);return c};
dhtmlXColorPicker.prototype.initMemoryColors=function(){var a=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>";this.memory=
new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(c){c=a.colorAIP.rgb2hex({r:c.red,g:c.green,b:c.blue});a.callEvent("onSaveColor",[c])};var c=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;"function"==typeof window.addEventListener?c.addEventListener("click",this.saveColor,!1):c.attachEvent("onclick",
this.saveColor)};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(a,c,e){a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*a/359)+this.configColorArea.minX;e=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-e)/100)+this.configColorArea.minY;c=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-c)/100)+this.configColorArea.minY;this._setColorAreaXY(a,e);this._setContrastY(c)};
dhtmlXColorPicker.prototype._parseColor=function(a){if(a instanceof Array)var c={r:parseInt(a[0]),g:parseInt(a[1]),b:parseInt(a[2])};else"string"==typeof a&&(a=a.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(a)?(a=a.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),c={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}):c=this.colorAIP.hex2rgb(a));return c};
dhtmlXColorPicker.prototype.setColor=function(a){var c=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});a=this._parseColor(a);var e=a instanceof Object,e=(e=(e=e&&0<=a.r&&255>=a.r)&&0<=a.g&&255>=a.g)&&0<=a.b&&255>=a.b;if(!e)return c;e=this.colorAIP.rgb2hex({r:a.r,g:a.g,b:a.b});if(e==c)return c;this.value.red=a.r;this.value.green=a.g;this.value.blue=a.b;c=this.colorAIP.rgb2hsl(a.r/255,a.g/255,a.b/255);this.value.hue=Math.round(c.h);this.value.sat=Math.round(100*c.s);this.value.lum=
Math.round(100*c.l);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return e};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};
dhtmlXColorPicker.prototype._attachEventsToNode=function(a){"function"==typeof window.addEventListener?a.node.addEventListener("click",this._doOnClickByNode,!1):a.node.attachEvent("onclick",this._doOnClickByNode);a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.attachEvent("onfocus",this._doOnFocusByInput),
a.valueCont.attachEvent("onblur",this._doOnBlurByInput)))};
dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){"function"==typeof window.addEventListener?a.node.removeEventListener("click",this._doOnClickByNode,!1):a.node.detachEvent("onclick",this._doOnClickByNode);a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.detachEvent("onfocus",this._doOnFocusByInput),
a.valueCont.detachEvent("onblur",this._doOnBlurByInput)))};
dhtmlXColorPicker.prototype.show=function(a){var c=!1;void 0!=a&&(this.activeNode=this.getNode(a)||this.activeNode);this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value);this.activeNode?(c=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):c=this.conf.customColors;c?this.showMemory():this.hideMemory();this.base._dhx_remove?(this.base.firstChild.style.zIndex=
dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible","function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode);this._controllerNodes.fr_cover&&
this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode);this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])};
dhtmlXColorPicker.prototype.setPosition=function(a,c){var e=null,g=parseInt(a),h=parseInt(c);isNaN(g)&&(e={right:"right",bottom:"bottom"}[a.toLowerCase()]?a:null);this.base._dhx_remove?null!=e&&(this.conf.position=e,this._refreshPosition(e)):isNaN(g)||isNaN(h)||(this._globalNode.style.left=g+"px",this._globalNode.style.top=h+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))};
dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)};
dhtmlXColorPicker.prototype._refreshValueByInput=function(){var a=this.activeNode.valueCont.value,c=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(a)&&a!=c&&(this.setColor(a),this.callEvent("onSelect",[a,this.activeNode.node]))};
dhtmlXColorPicker.prototype._refreshPosition=function(a){if(null!=this.activeNode){var c=dhx4.absTop(this.activeNode.node),e=dhx4.absLeft(this.activeNode.node),g=dhx4.screenDim(),h=this._globalNode.offsetWidth,l=this._globalNode.offsetHeight,m=0;a=a||this.conf.position;switch(a){case "bottom":var m=c+this.activeNode.node.offsetHeight+this.conf.indent,n=e;n+h>g.left+g.right&&(n=e+this.activeNode.node.offsetWidth-h);n<g.left&&(n=e);m+l>g.top+g.bottom&&(m=c-l-this.conf.indent);0>m-g.top&&(m=g.top+this.conf.indent);
this._globalNode.style.top=m+"px";this._globalNode.style.left=n+"px";break;default:n=e+this.activeNode.node.offsetWidth+this.conf.indent,m=c,"right"==a&&(n+h>g.left+g.right&&(n=e-h-this.conf.indent),n<g.left&&(n=e+this.activeNode.node.offsetWidth+this.conf.indent)),0>=g.bottom-(m+l)&&(m=c+this.activeNode.node.offsetHeight-l),0>m-g.top&&(m=g.top+this.conf.indent),this._globalNode.style.left=n+"px",this._globalNode.style.top=m+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=
this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}};dhtmlXColorPicker.prototype.isVisible=function(){var a=!1;return a=this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base};
dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover);
void 0!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};
dhtmlXColorPicker.prototype.loadUserLanguage=function(a){"function"==typeof this._mergeLangModules&&this._mergeLangModules();this.conf.lang=a;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,c=this.i18n[this.conf.lang];for(a in c)this._labelNodes[a]&&(this._labelNodes[a].innerHTML=c[a])};
dhtmlXColorPicker.prototype._setColorAreaXY=function(a,c){var e=this.configColorArea;a=parseInt(a);e.minX>a?this.conf.x=e.minX:a>e.maxX?this.conf.x=e.maxX:isNaN(a)||(this.conf.x=a);c=parseInt(c);e.minY>c?this.conf.y=e.minY:c>e.maxY?this.conf.y=e.maxY:isNaN(c)||(this.conf.y=c);this._refreshLines()};
dhtmlXColorPicker.prototype._setColorByXYC=function(a){a=a||!1;this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var c=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/
100,this.value.lum/100);this.value.red=Math.round(255*c.r);this.value.green=Math.round(255*c.g);this.value.blue=Math.round(255*c.b);a||this._refreshContrast();this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(a){var c=this.configColorArea;a=parseInt(a);isNaN(a)||(this.conf.c=Math.min(Math.max(c.minY,a),c.maxY));this._refreshContrastLine()};
dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};
dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a;this.callEvent("onChange",[a])};
dhtmlXColorPicker.prototype._refreshContrast=function(){var a=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),c=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),e=this._checkIeVersion();e&&9>=e?(e=this._controllerNodes.contrastArea.firstChild,e==this._controllerNodes.contrast_line&&(e=document.createElement("div"),e.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(e),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)),
a=this.colorAIP.rgb2hex({r:Math.round(255*a.r),g:Math.round(255*a.g),b:Math.round(255*a.b)}),c=this.colorAIP.rgb2hex({r:Math.round(255*c.r),g:Math.round(255*c.g),b:Math.round(255*c.b)}),e.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+c+"', endColorstr='"+a+"', GradientType=0)"):(a=[Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b)],c=[Math.round(255*c.r),Math.round(255*c.g),Math.round(255*c.b)],c="linear-gradient(rgb("+c.join(",")+"), rgb("+a.join(",")+"))",1==
window.dhx4.isKHTML&&null!=navigator.userAgent.match(/Windows/gi)&&(c="-webkit-"+c),this._controllerNodes.contrastArea.style.backgroundImage=c)};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};
dhtmlXColorPicker.prototype._getOffsetPosition=function(a,c){var e={x:NaN,y:NaN},g=a.target||a.srcElement;g==c?(e.x=void 0!=a.offsetX?a.offsetX:a.layerX,e.y=void 0!=a.offsetY?a.offsetY:a.layerY):g==this._controllerNodes.v_line?e.y=void 0!=a.offsetY?a.offsetY:a.layerY:e.x=void 0!=a.offsetX?a.offsetX:a.layerX;return e};
dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(a){a=a.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=a?{r:parseInt("0x"+a[2]),g:parseInt("0x"+a[3]),b:parseInt("0x"+a[4])}:null},rgb2hex:function(a){var c=parseInt(a.r),e=parseInt(a.g);a=parseInt(a.b);c=c||0;e=e||0;a=a||0;return"#"+(c?16>c?"0"+c.toString(16):c.toString(16):"00")+(e?16>e?"0"+e.toString(16):e.toString(16):"00")+(a?16>a?"0"+a.toString(16):a.toString(16):"00")},rgb2hsl:function(a,c,e){var g,h=Math.max(a,c,e),l=
Math.min(a,c,e);g=.5*(h+l);h==l?a=0:h==a?(a=60*(c-e)/(h-l),c<e&&(a+=360)):a=h==c?60*(e-a)/(h-l)+120:60*(a-c)/(h-l)+240;return{h:a,s:0==g||h==l?0:.5>=g?.5*(h-l)/g:.5*(h-l)/(1-g),l:g}},hsl2rgb:function(a,c,e){var g=[],h=[];c=.5>=e?e*(1+c):e+c-e*c;e=2*e-c;a/=360;g.push(a+1/3);g.push(a);g.push(a-1/3);for(a=0;3>a;a++)0>g[a]?g[a]+=1:1<g[a]&&--g[a],g[a]<1/6?h.push(e+6*(c-e)*g[a]):.5>g[a]?h.push(c):g[a]<2/3?h.push(e+(c-e)*(2/3-g[a])*6):h.push(e);return{r:h[0],g:h[1],b:h[2]}}};
dhtmlXColorPicker.prototype._checkIeVersion=function(){var a=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return a&&a[2]?parseInt(a[2]):null};
dhtmlXColorPicker.prototype.setCustomColors=function(){null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0);var a,c,e,g,h,l;c=arguments.length;for(a=0;a<c;a++)if(arguments[a]instanceof Array)e=this._rgb2value(arguments[a][0],arguments[a][1],arguments[a][2]),this.memory.setValue(e,null,!1);else if("string"==typeof arguments[a])if(g=arguments[a].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),g instanceof Array)e=this._rgb2value(g[1],g[2],g[3]),this.memory.setValue(e,null,!1);else if(g=
arguments[a].match(/(#[\da-f]{6})/ig),g instanceof Array)for(l=g.length,h=0;h<l;h++)e=this._hex2value(g[h]),this.memory.setValue(e,null,!1)};dhtmlXColorPicker.prototype.getCustomColors=function(){var a=[];if(null!=this.memory&&1==this.conf.customColors)for(var c=0;c<this.memory.controllers.length;c++){var e=this.memory.controllers[c].value;a.push(this.colorAIP.rgb2hex({r:e.red,g:e.green,b:e.blue}))}return a};
dhtmlXColorPicker.prototype._rgb2value=function(a,c,e){var g=this.colorAIP.rgb2hsl(a/255,c/255,e/255);return{red:a,green:c,blue:e,hue:Math.round(g.h),sat:Math.round(100*g.s),lum:Math.round(100*g.l)}};dhtmlXColorPicker.prototype._hex2value=function(a){var c;a=this.colorAIP.hex2rgb(a);c=this.colorAIP.rgb2hsl(a.r/255,a.g/255,a.b/255);return{red:a.r,green:a.g,blue:a.b,hue:Math.round(c.h),sat:Math.round(100*c.s),lum:Math.round(100*c.l)}};
dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors();this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory");this.conf.customColors=!0};dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,""));this.conf.customColors=!1};
dhtmlXColorPicker.prototype.setSkin=function(a){a=a.toLowerCase();var c,e=-1,g;c=this.base.className.match(/\S\w+/ig);if(c instanceof Array){for(g in this._skinCollection)if(-1==e)e=this._indexOf(c,"dhtmlxcp_"+g);else break;e=-1==e?c.length:e}else c=[],e=0;c[e]="dhtmlxcp_"+a;this.base.className=c.join(" ");this.skin=a};dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a);this.conf.hideOnSelect=a};
dhtmlXColorPicker.prototype._indexOf=function(a,c){var e,g=-1;for(e=a.length;0<=e;e--)if(a[e]==c){g=e;break}return g};
dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;"function"==typeof window.addEventListener?a.removeEventListener("click",this.saveColor,!1):a.detachEvent("onclick",this.saveColor);this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null}};
dhtmlXColorPicker.prototype.Memory=function(a){var c=this,e=null,g={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var a=this!=window?this:event.srcElement,g=g||a.dhxpc_memory;null!=e&&c.unSelect();e=g;g.domElement.className+=" dhxcp_memory_el_select";if("function"==typeof c.onSelect)c.onSelect(g)};this.onSave=this.onSelect=null;this._createMemoryController=function(a){var e={domElement:a,value:dhx4._copyObj(g)};a.dhxpc_memory=e;"function"==typeof window.addEventListener?a.addEventListener("click",
c.select,!1):a.attachEvent("onclick",c.select);return e};this._findMemoryControllers=function(a){a=a.getElementsByTagName("a");var c,e,g=[];e=a.length;for(c=0;c<e;c++)g.push(this._createMemoryController(a[c]));return g};this.controllers=this._findMemoryControllers(a);this.unSelect=function(){e&&(e.domElement.className=e.domElement.className.replace(/\s.*$/i,""));e=null};this.setActiveNext=function(){var a=null,c;null==e?e=this.controllers[0]:(a=this.getIndex(e),c=this.controllers.length,this.unSelect(),
e=a+1<c?this.controllers[a+1]:this.controllers[0]);e.domElement.className+=" dhxcp_memory_el_next";return e};this.setValue=function(a,c,g){e=c||e;null==e&&(e=this.controllers[0]);e.value.red=a.red;e.value.blue=a.blue;e.value.green=a.green;e.value.hue=a.hue;e.value.sat=a.sat;e.value.lum=a.lum;e.domElement.style.backgroundColor="rgb("+[a.red,a.green,a.blue].join(", ")+")";this.setActiveNext();if(0!=g&&"function"==typeof this.onSave)this.onSave(a)};this.clean=function(){for(var a=this.controllers.length,
c,m=0;m<a;m++)c=this.controllers[m],c.value=dhx4._copyObj(g),c.domElement.style.backgroundColor="rgb("+[g.red,g.green,g.blue].join(", ")+")";this.unSelect();e=this.controllers[0]};this.getIndex=function(a){var c,e,g=-1;e=this.controllers.length;for(c=0;c<e;c++)if(this.controllers[c]==a){g=c;break}return g};this.remove=function(){var a,c;c=this.controllers.length;for(a=0;a<c;a++)"function"==typeof window.addEventListener?this.controllers[a].domElement.removeEventListener("click",this.select,!1):this.controllers[a].domElement.detachEvent("onclick",
this.select),delete this.controllers[a].domElement.dhxpc_memory;delete this.onSelect;delete this.controllers;delete this.onSave}};window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;this._controllerNodes.fr_cover||(a=document.createElement("IFRAME"),a.className="dhxcp_frm",a.border=0,a.frameBorder=0,this._controllerNodes.fr_cover=a);this.base._dhx_remove||this.base.insertBefore(a,this._globalNode)});
function dhtmlXSlider(a){var c=this;this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,decimals:0,margin:2,border:1,inverse:!1,disabled:!1,tooltip:!1,visible:!0,linkTo:null,range:!1,bg:null,bg_mode:"left"};this._attachedNode={};this.base=this._movingInitialValues=null;if(1<arguments.length)return new dhtmlXSlider(this._renderArgumets(arguments));if("string"==typeof a||"object"==typeof a&&a.tagName)return new dhtmlXSlider({parent:a});this.base="string"==typeof a.parent?document.getElementById(a.parent):
a.parent;this._mergeConfig(this._readAttFormNode(this.base));this._mergeConfig(a);null==this.conf.bg&&(this.conf.bg=1==this.conf.range);1==this.conf.range&&(this.conf.value instanceof Array||(this.conf.value=[this.conf.value]),2>this.conf.value.length&&this.conf.value.push(this.conf.value[0]),this.conf.linkTo instanceof Array||(this.conf.linkTo=[this.conf.linkTo]));this._detectDecimals();if(null==this.conf.size||"undefined"==typeof this.conf.size)this.conf.size=this.conf.vertical?this.base.offsetHeight:
this.base.offsetWidth;var e=this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"dhx_skyblue";this.setSkin(e);this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'>"+(1==this.conf.bg?"<div class='dhxsl_track_bg'></div>":"")+"</div><div class='dhxsl_runner'></div>"+(1==this.conf.range?"<div class='dhxsl_runner'></div>":"")+"</div>";this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1],
runner2:this.base.firstChild.childNodes[2]};this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(a){a=a||event;"function"==typeof a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._r_actv=null;this.conf.value=1==this.conf.range?this._normalizeRange(this.conf.value,this.conf.min,this.conf.max):this._normalize(this.conf.value,this.conf.min,this.conf.max);this._setOrient(this.conf.vertical);this.setSize(this.conf.size);
this._initMover=function(a,e){if(!c.conf.disabled){a=a||event;"function"==typeof a.preventDefault&&a.preventDefault();null!=e?c._r_actv=c._nodes[0==e?"runner":"runner2"]:(c._r_actv=a.target||a.srcElement,-1==c._r_actv.className.indexOf("dhxsl_runner")&&(c._r_actv=c._nodes.runner));c._r_actv.className="dhxsl_runner dhxsl_runner_actv";var l=("mousedown"==a.type?"client":"page")+(c.conf.vertical?"Y":"X");c._movingInitialValues={};1==c.conf.range?(c._movingInitialValues.index=c._r_actv==c._nodes.runner?
0:1,c._movingInitialValues.value=c.conf.value[c._movingInitialValues.index]):c._movingInitialValues.value=c.conf.value;c._movingInitialValues.coord="undefined"!=typeof a[l]&&0!=a[l]?a[l]:null!=a.touches&&null!=a.touches[0]?a.touches[0][l]||0:0;0==c.conf.disabled&&("function"==typeof window.addEventListener?(window.addEventListener("mousemove",c._move,!1),window.addEventListener("mouseup",c._cleanMove,!1),window.addEventListener("touchmove",c._move,!1),window.addEventListener("touchend",c._cleanMove,
!1)):(document.body.attachEvent("onmousemove",c._move),document.body.attachEvent("onmouseup",c._cleanMove)));c.callEvent("onMouseDown",[c._r_actv==c._nodes.runner?0:1]);return!1}};this._move=function(a){if(!c.conf.disabled){a=a||event;"function"==typeof a.preventDefault&&a.preventDefault();var e=("mousemove"==a.type?"client":"page")+(c.conf.vertical?"Y":"X");a=c._movingInitialValues.value+(("undefined"!=typeof a[e]&&0!=a[e]?a[e]:null!=a.touches&&null!=a.touches[0]?a.touches[0][e]||0:0)-c._movingInitialValues.coord)*
(c.conf.max-c.conf.min)/(c.conf.size-(c.conf.vertical?c._r_actv.offsetHeight:c._r_actv.offsetWidth))*(c.conf.inverse?-1:1);1==c.conf.range?(e=[c.conf.value[0],c.conf.value[1]],0==c._movingInitialValues.index?e[0]=Math.min(e[1],a):1==c._movingInitialValues.index&&(e[1]=Math.max(e[0],a)),c.setValue(e,!0)):c.setValue(a,!0)}};this._cleanMove=function(a){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",c._move,!1),window.removeEventListener("mouseup",c._cleanMove,!1),
window.removeEventListener("touchmove",c._move,!1),window.removeEventListener("touchend",c._cleanMove,!1)):(document.body.detachEvent("onmousemove",c._move),document.body.detachEvent("onmouseup",c._cleanMove));c._movingInitialValues=null;c._r_actv.className=c._r_actv.className.replace(/\s{0,}dhxsl_runner_actv/gi,"");c.callEvent("onSlideEnd",[c.conf.value]);c.callEvent("onMouseUp",[c._r_actv==c._nodes.runner?0:1]);c._r_actv=null};this._doOnSetValue=function(a){if(!c.conf.disabled){if(null!=c._movingInitialValues)return!1;
a=a||event;"function"==typeof a.preventDefault&&a.preventDefault();var e=0,l=a.target||a.srcElement;null!=l.className.match(/dhxsl_track_bg/)&&(e=parseInt(l.style[c.conf.vertical?"top":"left"]));var e=(c.conf.vertical?a.offsetY||a.layerY:a.offsetX||a.layerX)+e,l=c.conf.max-c.conf.min,m=null,n=null,n=1==c.conf.inverse?c.conf.max-e*l/c.conf.size:e*l/c.conf.size+c.conf.min;1==c.conf.range&&(m=Math.abs(c.conf.value[0]-n)<=Math.abs(c.conf.value[1]-n)?0:1,n=[0==m?n:c.conf.value[0],1==m?n:c.conf.value[1]]);
c.conf.init_index=m;c.setValue(n,!0);c.conf.init_index=null;null==c._movingInitialValues&&c._initMover(a,m);return!1}};this._doOnChangeInput=function(a){a=a||event;c.setValue((a.target||a.srcElement).value)};this._doOnKeyDown=function(a){a=a||event;var e=a.target||a.srcElement;13==a.keyCode&&c.setValue(e.value)};this._attachEvents(this._nodes);this.unload=function(){dhx4._eventable(this,"clear");this._detachNode();this._detachEvents(this._nodes);this.base.removeChild(this._nodes.cont);this._nodes.cont.onmousedown=
this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null;delete this._nodes.cont;delete this._nodes.track;delete this._nodes.max;delete this._nodes.min;delete this._nodes.runner;this._nodes.runner2&&delete this._nodes.runner2;/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,""));for(var a in this)this[a]=null;c=null};dhx4._eventable(this);this.conf.disabled&&this.disable();this.conf.tooltip&&
this.enableTooltip();this.conf.visible||this.hide();this.conf.linkTo&&this.linkTo(this.conf.linkTo);return this}
dhtmlXSlider.prototype._setOrient=function(a){a=a||!1;/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,""));/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,""));this._nodes.cont.className=a?this._nodes.cont.className+" dhxsl_cont_vr":this._nodes.cont.className+" dhxsl_cont_hr"};
dhtmlXSlider.prototype._attachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.addEventListener("mousedown",this._initMover,!1),a.runner.addEventListener("touchstart",this._initMover,!1),a.cont.addEventListener("mousedown",this._doOnSetValue,!1),a.cont.addEventListener("touchstart",this._doOnSetValue,!1),a.runner2&&(a.runner2.addEventListener("mousedown",this._initMover,!1),a.runner2.addEventListener("touchstart",this._initMover,!1))):(a.runner.attachEvent("onmousedown",this._initMover),
a.cont.attachEvent("onmousedown",this._doOnSetValue),a.runner2&&a.runner2.attachEvent("onmousedown",this._initMover))};
dhtmlXSlider.prototype._detachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.removeEventListener("mousedown",this._initMover,!1),a.runner.removeEventListener("touchstart",this._initMover,!1),a.cont.removeEventListener("mousedown",this._doOnSetValue,!1),a.cont.removeEventListener("touchstart",this._doOnSetValue,!1),a.runner2&&(a.runner2.removeEventListener("mousedown",this._initMover,!1),a.runner2.removeEventListener("touchstart",this._initMover,!1))):(a.runner.detachEvent("onmousedown",
this._initMover),a.cont.detachEvent("onmousedown",this._doOnSetValue),a.runner2&&a.runner2.detachEvent("onmousedown",this._initMover))};
dhtmlXSlider.prototype._mergeConfig=function(a){for(var c in a)switch(c.toLowerCase()){case "min":case "max":case "size":case "step":case "value":case "inverse":this.conf[c]=a[c];break;case "tooltip":case "visible":case "vertical":case "disabled":case "range":case "bg":this.conf[c]=dhx4.s2b(a[c]);break;case "bg_mode":this.conf[c]={left:"left",right:"right"}[a[c]]||"left";break;case "parent":continue;default:this.conf[c]=a[c]}};
dhtmlXSlider.prototype._readAttFormNode=function(a){a=a.attributes;var c=a.length,e,g={},h;for(e=0;e<c;e++)switch(h=a[e],h.name.toLowerCase()){case "size":case "min":case "max":case "value":case "step":g[h.name]=Number(h.value);break;case "skin":g[h.name]=h.value;break;case "vertical":case "disabled":case "visible":case "range":case "bg":g[h.name]=dhx4.s2b(h.value);break;case "linkto":g[h.name]=h.value;break;case "tooltip":g[h.name]=dhx4.s2b(h.value);break;case "bg_mode":g[h.name]={left:"left",right:"right"}[h.value]||
"left"}return g};dhtmlXSlider.prototype._renderArgumets=function(a){var c={},e,g;g=a.length;for(e=0;e<g;e++)switch(e){case 0:c.parent=a[e];break;case 1:c.size=a[e];break;case 2:c.skin=a[e];break;case 3:c.vertical=a[e];break;case 4:c.min=a[e];break;case 5:c.max=a[e];break;case 6:c.value=a[e];break;case 7:c.step=a[e]}return c};dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0};
dhtmlXSlider.prototype._indexOf=function(a,c){var e,g=-1;for(e=a.length;0<=e;e--)if(a[e]==c){g=e;break}return g};
dhtmlXSlider.prototype._refreshRunner=function(a){var c=1==this.conf.vertical?{x:"top",y:"left",ofs_w:"offsetHeight",ofs_h:"offsetWidth"}:{x:"left",y:"top",ofs_w:"offsetWidth",ofs_h:"offsetHeight"},e=this._nodes.cont[c.ofs_w]-this._nodes.runner[c.ofs_w],g=this._nodes.runner,h=this._nodes.runner2;if(null==a||0==a){var l=this._getCoord(e,this.conf.value instanceof Array?this.conf.value[0]:this.conf.value);g.style[c.x]=l+this.conf.border+"px";g.style[c.y]=Math.round((this._nodes.cont[c.ofs_h]-g[c.ofs_h])/
2)+"px"}1!=this.conf.range||null!=a&&1!=a||(l=this._getCoord(e,this.conf.value[1]),h.style[c.x]=l+this.conf.border+"px",h.style[c.y]=Math.round((this._nodes.cont[c.ofs_h]-g[c.ofs_h])/2)+"px");1==this.conf.range&&(g.style[c.x]==h.style[c.x]&&this.conf.value[1]==this.conf.max?2!=g.style.zIndex&&(g.style.zIndex=2):2==g.style.zIndex&&(g.style.zIndex=1));this._refreshBG()};
dhtmlXSlider.prototype._setValueByCoord=function(a){var c=dhx4.absLeft(this._nodes.cont),e=dhx4.absTop(this._nodes.cont);this.setValue((this.conf.max-this.conf.min)*(this.conf.vertical?(a.y-e-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(a.x-c-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth))+this.conf.min,!0)};
dhtmlXSlider.prototype._getCoord=function(a,c){var e=((this.conf.inverse?this._inverseValue(c):c)-this.conf.min)/(this.conf.max-this.conf.min);return Math.round(a*e)};dhtmlXSlider.prototype._normalize=function(a,c,e){a=Number(a);a=Math.round(a/this.conf.step)*this.conf.step;var g=Math.pow(10,this.conf.decimals);a=Math.round(a*g)/g;return a=Math.max(c,Math.min(e,a))};
dhtmlXSlider.prototype._normalizeRange=function(a,c,e){a[1]<a[0]&&(a[1]=a[0]);a[0]=this._normalize(a[0],c,Math.min(e,a[1]));a[1]=this._normalize(a[1],Math.max(c,a[0]),e);return a};
dhtmlXSlider.prototype._refreshBG=function(){if(1==this.conf.bg){var a=this._nodes.track.firstChild,c=this._nodes.runner,e=c.nextSibling,g=1==this.conf.vertical?{x:"top",w:"height",ofs:"offsetHeight"}:{x:"left",w:"width",ofs:"offsetWidth"};1==this.conf.range?(a.style[g.x]=Math.floor(parseInt(c.style[g.x])+c[g.ofs]/2)+"px",a.style[g.w]=Math.max(Math.floor(parseInt(e.style[g.x])+e[g.ofs]/2)-parseInt(a.style[g.x]),0)+"px"):(e=1==this.conf.inverse?{left:"right",right:"left"}[this.conf.bg_mode]:this.conf.bg_mode,
a.style[g.x]=("left"==e?"0":Math.floor(parseInt(c.style[g.x])+c[g.ofs]/2))+"px",a.style[g.w]=("left"==e?Math.floor(parseInt(c.style[g.x])+c[g.ofs]/2):this._nodes.track[g.ofs]-parseInt(a.style[g.x]))+"px")}};
dhtmlXSlider.prototype._attachNode=function(a,c){this._detachNode(c);var e=a.tagName.toLowerCase();if(e){this._attachedNode["node_"+c]=a;switch(e){case "input":case "select":"function"==typeof window.addEventListener?(a.addEventListener("change",this._doOnChangeInput,!1),a.addEventListener("keydown",this._doOnKeyDown,!1)):(a.attachEvent("onchange",this._doOnChangeInput),a.attachEvent("onkeydown",this._doOnKeyDown));this._attachedNode.setValue=function(a,c,e){this["node_"+(e||0)].value=dhtmlXSlider.prototype._atatchedNodeFixDec(a instanceof
Array?a[e||0]:a,c)};break;default:this._attachedNode.setValue=function(a,c,e){this["node_"+(e||0)].innerHTML=dhtmlXSlider.prototype._atatchedNodeFixDec(a instanceof Array?a[e||0]:a,c)}}this._attachedNode.setValue(this.conf.value,this.conf.decimals,c)}};
dhtmlXSlider.prototype._detachNode=function(a){var c=this._attachedNode["node_"+a];if(c){switch(c.tagName){case "input":case "select":"function"==typeof window.addEventListener?(c.removeEventListener("change",this._doOnChangeInput,!1),c.removeEventListener("keydown",this._doOnChangeInput,!1)):(c.detachEvent("change",this._doOnChangeInput),c.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode["node_"+a];delete this._attachedNode.setValue}};
dhtmlXSlider.prototype._atatchedNodeFixDec=function(a,c){a=String(a);if(0<c){var e=a.match(/\.\d{1,}$/);null!=e&&(c=Math.max(c-e[0].length+1));a+=0>a.indexOf(".")?".":"";for(e=0;e<c;e++)a+="0"}return a};dhtmlXSlider.prototype._detectDecimals=function(){var a=this.conf.step.toString().match(/\.(\d*)$/);this.conf.decimals=null!=a?a[1].length:0};
dhtmlXSlider.prototype.setSize=function(a){isNaN(a)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=a-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=a-this.conf.margin+"px"),this._refreshRunner())};
dhtmlXSlider.prototype.setSkin=function(a){a=a.toLowerCase();var c,e=-1,g;c=this.base.className.match(/\S\w+/ig);if(c instanceof Array){for(g in this._skinCollection)if(-1==e)e=this._indexOf(c,"dhtmlxslider_"+g);else break;e=-1==e?c.length:e}else c=[],e=0;c[e]="dhtmlxslider_"+a;this.base.className=c.join(" ");this.conf.skin=a;this._nodes&&this._refreshRunner()};
dhtmlXSlider.prototype.setValue=function(a,c){c=c||!1;var e=null;1==this.conf.range?(null!=this._r_actv&&(e=this._r_actv==this._nodes.runner?0:1),a=this._normalizeRange(a,this.conf.min,this.conf.max)):a=this._normalize(a,this.conf.min,this.conf.max);this.conf.value=a;this._refreshRunner(e);this._refreshTooltip();if(c){var g=[a,this];1==this.conf.range&&(null!=this._r_actv?g.push(this._r_actv==this._nodes.runner?0:1):null!=this.conf.init_index&&g.push(this.conf.init_index.valueOf()));this.callEvent("onChange",
g)}"function"==typeof this._attachedNode.setValue&&(null==e&&(e=this.conf.init_index),this._attachedNode.setValue(this.conf.value,this.conf.decimals,e))};dhtmlXSlider.prototype.getValue=function(){return 1==this.conf.range?[this.conf.value[0].valueOf(),this.conf.value[1].valueOf()]:this.conf.value.valueOf()};dhtmlXSlider.prototype._inverseValue=function(a){return this.conf.max+this.conf.min-a};
dhtmlXSlider.prototype.disable=function(a){var c=null;if(0!=a){for(var e in this._nodes)"cont"!=e&&(a="runner2"==e?"runner":e,null!=this._nodes[e]&&(c=new RegExp("\\s?dhxsl_"+a+"_dis","i"),c.test(this._nodes[e].className)||(this._nodes[e].className+=" dhxsl_"+a+"_dis")));this.conf.disabled=!0}else this.enable()};
dhtmlXSlider.prototype.enable=function(){var a,c;for(c in this._nodes)"cont"!=c&&(a="runner2"==c?"runner":c,null!=this._nodes[c]&&(a=new RegExp("\\s?dhxsl_"+a+"_dis","i"),a.test(this._nodes[c].className)&&(this._nodes[c].className=this._nodes[c].className.replace(a,""))));this.conf.disabled=!1};dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled};dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title");this.conf.tooltip=!1};
dhtmlXSlider.prototype.enableTooltip=function(a){(a="undefined"==typeof a?!0:dhx4.s2b(a))?(this.conf.tooltip=!0,this._refreshTooltip()):this.disableTooltip()};dhtmlXSlider.prototype.setMax=function(a){!isNaN(a)&&this.conf.min<a&&(this.conf.max=a,this.setValue(this.conf.value))};dhtmlXSlider.prototype.getMax=function(){return this.conf.max};dhtmlXSlider.prototype.setMin=function(a){!isNaN(a)&&this.conf.max>a&&(this.conf.min=a,this.setValue(this.conf.value))};dhtmlXSlider.prototype.getMin=function(){return this.conf.min};
dhtmlXSlider.prototype.setStep=function(a){var c=this.conf.max-this.conf.min;!isNaN(a)&&a<c&&(this.conf.step=a,this._detectDecimals(),this.setValue(this.conf.value))};dhtmlXSlider.prototype.getStep=function(){return this.conf.step};dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,""));this.conf.visible=!0};
dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden");this.conf.visible=!1};dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible};dhtmlXSlider.prototype.linkTo=function(a){a instanceof Array||(a=[a]);for(var c=0;c<a.length&&2>c;c++)null!=a[c]&&("string"==typeof a[c]&&(a[c]=document.getElementById(a[c])),this._attachNode(a[c],c))};
dhtmlXSlider.prototype._refreshTooltip=function(){1==this.conf.tooltip&&(this._nodes.cont.title=this.conf.value instanceof Array?this.conf.value.join(", "):this.conf.value)};dhtmlXSlider.prototype.getRunnerIndex=function(){return null==this._r_actv?-1:this._r_actv==this._nodes.runner?0:1};
function dhtmlXPopup(a){var c=this;this.conf=a||{};a=null;this.mode=this.conf.mode||"bottom";this.conf.zi=window.dhx4.newId();this.conf.context=null==this.conf.context?!0:window.dhx4.s2b(this.conf.context);this.conf.IE6_display_fix=null==this.conf.IE6_display_fix?!1:window.dhx4.s2b(this.conf.IE6_display_fix);this.conf.last_p_click=this.conf.last_body_click=null;this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":
"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.p.oncontextmenu=function(a){if(0==c.conf.context)return a=a||event,a.returnValue=!1};this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.ontouchstart=this.p.onclick=function(a){a=a||event;var e=null!=c.conf.last_p_click&&
c.conf.last_p_click!=a.type;c.conf.last_p_click=a.type;if(1!=e){c._clearClick=!0;if(null!=c._nodeObj)return c.callEvent("onContentClick",[]),!0;for(var e=a.target||a.srcElement,l=null;e!=c.p&&null!=e;)"undefined"==typeof e._idd||e._isSeparator?e=e.parentNode:(l=e._idd,e=null);null!=l&&(c.callEvent("onClick",[l]),null!=c&&null!=c.isVisible&&c.isVisible()&&!0===c.callEvent("onBeforeHide",["select",a,l])&&(a.cancelBubble=!0,c.hide()))}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=
function(a){this.tpl=a.split(",")};this.show=function(a){var c=null;if(1==arguments.length){if(!a)a=this.conf.id[0];else if(!this._idExists(a))return;this.conf.toolbar&&(c=this.conf.toolbar._getItemDim(a));this.conf.ribbon&&(c=this.conf.ribbon._getItemDim(a));this.conf.form&&(c=this.conf.form._getItemDim(a))}else 4==arguments.length&&(this._clearClick=!0,c={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},a=null);c&&(this.p.style.visibility="hidden",this.p.style.display=
"",this._setPos(c),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=a,this.callEvent("onShow",[a]))};this._setPos=function(a,c){var e=a.left,m=a.top,n=a.width,r=a.height;this._posData={left:e,top:m,width:n,height:r};var u=window.dhx4.screenDim(),v=c||this.mode;"undefined"==typeof c&&(c=!1);var w={top:m-this.p.offsetHeight-u.top,bottom:u.bottom-(m+r+this.p.offsetHeight),left:e-this.p.offsetWidth-u.left,right:u.right-(e+n+this.p.offsetWidth)};
if(!c&&0>w[v]&&(w=this._getAvailPos(v,w),!1!==w)){this._setPos(a,w);return}if("top"==v||"bottom"==v){var x=this.skinParams[this.conf.skin].t2,w=this.skinParams[this.conf.skin].t3,y=Math.round(this.p.offsetWidth/2),C=Math.round(this.p.lastChild.offsetWidth/2);if(e<u.left)var A=Math.min(e+n,u.left),n=e+n-A,e=A;e+n>u.right&&(n=u.right-e);var A=Math.round(e+n/2),y=A-y,D=A+C+x-this.p.offsetWidth;y<u.left-w?y=Math.min(u.left-w,A-x-C):y+this.p.offsetWidth>u.right+w&&(y=Math.max(D,u.right+w-this.p.offsetWidth));
this.p.style.left=y+"px";this.p.style.top=("top"==v?m-this.p.offsetHeight:m+r)+"px";this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+v;this.p.lastChild.style.top=("top"==v?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=A-y-C+"px"}if("left"==v||"right"==v)x=this.skinParams[this.conf.skin].t0,w=this.skinParams[this.conf.skin].t1,y=Math.round(this.p.offsetHeight/2),C=Math.round(this.p.lastChild.offsetHeight/2),m<u.top&&(A=Math.min(m+r,u.top),r=m+r-
A,m=A),m+r>u.bottom&&(r=u.bottom-m),A=Math.round(m+r/2),m=A-y,r=A-x-C,x=A+C+x-this.p.offsetHeight,m<u.top-w?m=Math.min(u.top-w,r):m+this.p.offsetHeight>u.bottom+w&&(m=Math.max(x,u.bottom+w-this.p.offsetHeight)),this.p.style.left=("left"==v?e-this.p.offsetWidth:e+n)+"px",this.p.style.top=m+"px",A=A-m-C,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+v,this.p.lastChild.style.left=("left"==v?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px",this.p.lastChild.style.top=A+"px";if(this._IEDisp&&
null!=this._nodeId){var H=document.getElementById(this._nodeId);1==this.conf.IE6_display_fix&&(H.style.visibility="hidden");window.setTimeout(function(){H.style.visibility="visible";H=null},1)}};this._getAvailPos=function(a,c){for(var e={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},m=null,n=0;n<e[a].length;n++)null==m&&0<c[e[a][n]]&&(m=e[a][n]);if(null==m){var m="bottom",r;for(r in c)c[r]>c[m]&&(m=r)}return m==a?!1:m};this._repaint=
function(){this.isVisible()&&this._setPos(this._posData)};this.clear=function(){if(this._nodeObj&&(window.dhx4.isIE&&"undefined"!=typeof window.dhtmlXLayoutObject&&this._nodeObj instanceof dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,null!=this._nodeObjEv)){for(var a=0;a<this._nodeObjEv.length;a++)this.detachEvent(this._nodeObjEv[a]);this._nodeObjEv=null}this._IEHoverInited&&
this._IEHoverClear();for(a=this.p.firstChild.firstChild.firstChild;0<a.childNodes.length;)a.removeChild(a.lastChild);this.itemData={}};this.hide=function(){if("none"!=this.p.style.display){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null;this.callEvent("onHide",[a]);this.conf.last_p_click=this.conf.last_body_click=null}};this.isVisible=function(){return""==this.p.style.display};this.itemData={};this.getItemData=function(a){return a?this.itemData[a]?
this.itemData[a]:{}:this.itemData};this.setSkin=function(a){this.conf.skin=a;this.p.className="dhx_popup_"+this.conf.skin;null!=this._nodeObj&&"function"==typeof this._nodeObj.setSkin&&this._nodeObj.setSkin(this.conf.skin);this._repaint()};this.attachList=function(a,c){this._setTemplate(a);this.clear();for(var e=this.p.firstChild.firstChild.firstChild,m=0;m<c.length;m++){var n=document.createElement("TR");if(c[m]!=this.separator){if("undefined"==typeof c[m].id||null==c[m].id)for(n._idd=window.dhx4.newId();null!=
this.itemData[n._idd];)n._idd=window.dhx4.newId();else n._idd=c[m].id;this.itemData[n._idd]=c[m]}e.appendChild(n);if(c[m]==this.separator){n.className="dhx_popup_sep";n._isSeparator=!0;var r=document.createElement("TD");r.className="dhx_popup_sep";r.colSpan=this.tpl.length;r.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";n.appendChild(r)}else{for(var u=0;u<this.tpl.length;u++){var v="dhx_popup_td";!this._IEFirstLast||1!=this.tpl.length&&0!=u&&u!=this.tpl.length-1||(v=1==this.tpl.length?v+" dhx_popup_td_single":
v+(0==u?" dhx_popup_td_first":" dhx_popup_td_last"));r=document.createElement("TD");r.className=v;r.innerHTML=c[m][this.tpl[u]]||"&nbsp;";n.appendChild(r)}this._IEHover&&(n._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}}this._repaint()};this._attachNode=function(a,c){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var e=this.p.firstChild.firstChild.firstChild,m=document.createElement("TR");m.className="dhxnode";e.appendChild(m);e=document.createElement("TD");e.className="dhx_popup_td";
e.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";c.width&&(e.firstChild.style.width=c.width+"px");c.height&&(e.firstChild.style.height=c.height+"px");m.appendChild(e);"function"==typeof this["_attach_init_"+a]&&(this["_attach_init_"+a](c),this._enableIEVFix());this._repaint();return this._nodeObj};this.unload=function(){"function"==typeof window.addEventListener?(window.removeEventListener("touchstart",this._doOnClick,!1),window.removeEventListener("click",this._doOnClick,
!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1));window.dhx4.detachEvent(this.conf.ev_grid_click);this.clear();null!=this.conf.toolbarEvent&&null!=this.conf.toolbar&&(null!=this.conf.toolbar.detachEvent?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=
null);null!=this.conf.ribbonEvent&&null!=this.conf.ribbon&&(null!=this.conf.ribbon.detachEvent?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null);if(null!=this.conf.slider){for(var a=0;a<this.conf.slider_events.length;a++)this.conf.slider.detachEvent(this.conf.slider_events[a]);this._sliderShow=this._sliderHide=this.conf.slider_events=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);
this.p=null;for(var e in this.conf)this.conf[e]=null;for(e in this)this[e]=null;c=null};window.dhx4._eventable(this);this._doOnClick=function(a){a=a||event;var e=null!=c.conf.last_body_click&&c.conf.last_body_click!=a.type;c.conf.last_body_click=a.type;if(1!=e)if(1==c._clearClick)c._clearClick=!1;else{if(null!=c.conf.form){var l,e=a.target||a.srcElement;"option"==(e.tagName||"").toLowerCase()&&(e=e.parentNode);if(null!=e.className&&0<=e.className.search("dhxform"))null!=e.parentNode&&null!=e.parentNode.parentNode&&
null!=e.parentNode.parentNode._idd&&(l=e.parentNode.parentNode._idd,"ra"==e.parentNode.parentNode._type&&(l=[e.parentNode.parentNode._group,e.parentNode.parentNode._value]));else{for(var m=!0,n=!1;m&&!n;){var r=(e.className||"").toLowerCase();0<r.length&&(n="dhxform_btn"==r||0<=r.search(/dhxeditor_inside/gi)||"dhxcombo_input"==r||0<=r.search(/dhxcombolist/gi));e=e.parentNode;m=null!=e}if(n)return}e=null;if(null!=l&&c._idExists(l))return}if("undefined"!=typeof window.dhtmlXForm&&c._nodeObj instanceof
window.dhtmlXForm){var u={},r=0,v=c._nodeObj;v.forEachItem(function(a){"combo"==v.getItemType(a)&&(u[v.getCombo(a).list._listId]=!0,r++)});v=null;if(0<r){e=a.target||a.srcElement;m=!0;for(n=!1;1==m&&1!=n;)r=(e.className||"").toLowerCase(),0<r.length&&0<=r.search(/^dhxcombolist/gi)&&null!=e._listId&&1==u[e._listId]?(n=!0,e=null):(e=e.parentNode,m=null!=e);if(1==n)return}}c.isVisible()&&!0===c.callEvent("onBeforeHide",["click",a])&&c.hide()}};this._doOnKeyUp=function(a){a=a||event;27==a.keyCode&&c.isVisible()&&
!0===c.callEvent("onBeforeHide",["esc",a])&&c.hide()};this._doOnUnload=function(){c.unload()};"function"==typeof window.addEventListener?(window.addEventListener("touchstart",this._doOnClick,!1),window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",
this._doOnUnload,!1));this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(a,e){if(null==c._nodeObj||c._nodeObj!=e)c._clearClick=!1,c._doOnClick(a)});this._idExists=function(a){for(var c=!1,e=0;e<this.conf.id.length;e++)c=this.conf.id[e]instanceof Array?c||this.conf.id[e][0]==a[0]&&this.conf.id[e][1]==a[1]:c||this.conf.id[e]==a;return c};this._IEDisp=window.dhx4.isIE6||"CSS1Compat"!=document.compatMode;if(this._IEHover=1==window.dhx4.isIE6)this._IEHoverInit=function(){this.p.onmouseover=
function(){for(var a=event.srcElement;a!=this&&1!=a._IEHover;)a=a.parentNode;a._IEHover&&(c._IEHoverTM&&window.clearTimeout(c._IEHoverTM),c._lastIEHover!=a&&c._IEHoverRender(a))};this.p.onmouseout=function(){c._IEHoverTM&&window.clearTimeout(c._IEHoverTM);c._IEHoverTM=window.setTimeout(function(){c._IEHoverRender(null)},1)};this._IEHoverRender=function(a){null!=this._lastIEHover&&0<=this._lastIEHover.className.search(/tr_hover/gi)&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,
""),this._lastIEHover=null);null!=a&&0>a.className.search(/tr_hover/gi)&&(a.className+=" tr_hover",c._lastIEHover=a)};this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=!1};this._IEFirstLast=window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8;this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var a=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),c=this.attachEvent("onShow",
function(){document.getElementById(this._nodeId).style.visibility="visible"});null==this._nodeObjEv&&(this._nodeObjEv=[]);this._nodeObjEv.push(a,c)}};"undefined"!=typeof window.dhtmlXToolbarObject&&null!=this.conf.toolbar&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(a){for(var e=0;e<c.conf.id.length;e++)a==c.conf.id[e]&&a!=c._lastId&&
(c.show(a),c._clearClick=!0)},"undefined"==typeof dhtmlXToolbarObject.prototype._getItemDim&&(dhtmlXToolbarObject.prototype._getItemDim=function(a){a=this.objPull[this.idPrefix+a];return{left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight}}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick));"undefined"!=typeof window.dhtmlXRibbon&&null!=this.conf.ribbon&&this.conf.ribbon instanceof
window.dhtmlXRibbon&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(a){for(var e=0;e<c.conf.id.length;e++)a==c.conf.id[e]&&a!=c._lastId&&(c.show(a),c._clearClick=!0)},"undefined"==typeof dhtmlXRibbon.prototype._getItemDim&&(dhtmlXRibbon.prototype._getItemDim=function(a){a=this._items[a].base;return{left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight}}),
this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick));if("undefined"!=typeof window.dhtmlXForm&&null!=this.conf.form&&this.conf.form instanceof window.dhtmlXForm&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,"undefined"==typeof dhtmlXForm.prototype._getItemDim)){dhtmlXForm.prototype._getItemDim=function(a,c){return this.doWithItem(a,"_getDim")};for(var e in{input:1,
password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1})null!=dhtmlXForm.prototype.items[e]&&(dhtmlXForm.prototype.items[e]._getDim=function(a){var c=a;({ta:!0,pw:!0,se:!0,calendar:!0,colorpicker:1,editor:!0})[a._type]&&(c=a.childNodes[a._ll?1:0].childNodes[0]);({ch:!0,ra:!0,btn2state:!0})[a._type]&&(c=a.childNodes[a._ll?1:0].childNodes[1]);({bt:!0})[a._type]&&(c=a.firstChild);({combo:!0})[a._type]&&(c=a._combo.DOMParent.firstChild);return{left:window.dhx4.absLeft(c),
top:window.dhx4.absTop(c),width:c.offsetWidth,height:c.offsetHeight}})}"undefined"!=typeof window.dhtmlXSlider&&null!=this.conf.slider&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){c.conf.slider_tm&&window.clearTimeout(c.conf.slider_tm);var a=c.conf.slider._r_actv;if(null!=a){var e=window.dhx4.absLeft(a),l=window.dhx4.absTop(a);c.show(e,l,a.offsetWidth,a.offsetHeight)}},this._sliderHide=function(){c.conf.slider_tm=
window.setTimeout(function(){c.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]);this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue");return this}
dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj="string"==typeof a.obj?document.getElementById(a.obj):a.obj;a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})};
dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(a,c){return this._attachNode("form",{struct:a,width:c})};
dhtmlXPopup.prototype._attach_init_form=function(a){var c=this;this._nodeObj=new dhtmlXForm(this._nodeId,a.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){c._clearClick=!0});null!=this.conf.editorEv&&0==this.checkEvent(this.conf.editorEv)&&(this.conf.editorEv=null);null!=dhtmlXForm.prototype.items.editor&&null==this.conf.editorEv&&(this.conf.editorEv=this.attachEvent("onShow",function(){var a=dhtmlXForm.prototype.items.editor.editor,c;for(c in a){for(var h=
a[c].base,l=!1;null!=h;)h==this.p?(l=!0,h=null):h=h.parentNode;1==l&&(a[c].cell.conf.cells_cont=null,a[c].setSizes())}this.detachEvent(this.conf.editorEv);this.conf.editorEv=null}),null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(this.conf.editorEv))};dhtmlXPopup.prototype.attachCalendar=function(a){return this._attachNode("calendar",a||{})};
dhtmlXPopup.prototype._attach_init_calendar=function(a){1==a["double"]?(this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId),this._nodeObj.leftCalendar.setSkin(this.conf.skin),this._nodeObj.rightCalendar.setSkin(this.conf.skin)):(this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin));this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(a,c){return this._attachNode("grid",{width:a||400,height:c||200})};
dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(a,c,e){return this._attachNode("tree",{width:a||400,height:c||200,rootId:e||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",a.rootId)};
dhtmlXPopup.prototype.attachLayout=function(a,c,e){return this._attachNode("layout",{width:a||400,height:c||200,pattern:e||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(a,c,e){return this._attachNode("accordion",{width:a||400,height:c||200,conf:e||{}})};
dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(a.conf)};dhtmlXPopup.prototype.attachTabbar=function(a,c,e){if("string"==typeof e)e={mode:e};else if("object"!=typeof e||null==e)e={};return this._attachNode("tabbar",{width:a||400,height:c||200,conf:e})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(a.conf)};
dhtmlXPopup.prototype.attachSidebar=function(a,c,e){null==e&&(e={});return this._attachNode("sidebar",{width:a||400,height:c||200,conf:e})};dhtmlXPopup.prototype._attach_init_sidebar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(a.conf)};dhtmlXPopup.prototype.attachEditor=function(a,c,e){return this._attachNode("editor",{width:a||400,height:c||200,conf:e||{}})};
dhtmlXPopup.prototype._attach_init_editor=function(a){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;a.conf.parent=this._nodeId;null==a.conf.skin&&(a.conf.skin=this.conf.skin);this._nodeObj=new dhtmlXEditor(a.conf);a=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]);this._nodeObjEv.push(a)};
dhtmlXPopup.prototype.attachColorPicker=function(a){if("object"!=typeof a||null==a)a={};return this._attachNode("colorpicker",{conf:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin;a.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.conf)};dhtmlXPopup.prototype.attachCarousel=function(a,c,e){null==e&&(e={});return this._attachNode("carousel",{width:a||400,height:c||300,conf:e})};
dhtmlXPopup.prototype._attach_init_carousel=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(a.conf)};
function dhtmlXMenuObject(a,c){var e=this;this.conf={skin:c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",arrow_ff_fix:0<=navigator.userAgent.indexOf("MSIE")&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},
autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,
ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]};if("object"==typeof a&&null!=a&&"undefined"==typeof a.tagName){if(null!=a.icons_path||null!=a.icon_path)this.conf.icons_path=a.icons_path||a.icon_path;null!=a.skin&&(this.conf.skin=a.skin);a.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:a.visible_area.x1,x2:a.visible_area.x2,y1:a.visible_area.y1,y2:a.visible_area.y2});for(var g in{json:1,xml:1,items:1,top_text:1,align:1,
open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1})null!=a[g]&&(this.conf.autoload[g]=a[g]);a=a.parent}if(null==a)this.base=document.body;else{var h="string"==typeof a?document.getElementById(a):a;null!=h?(this.base=h,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),
this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},this.base.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1}):this.base=document.body}this.idPrefix="";this.topId="dhxWebMenuTopId";this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(a){var c=this.conf.skin;this.conf.skin=a;switch(this.conf.skin){case "dhx_skyblue":case "dhx_web":this.conf.tl_botmarg=
2;this.conf.tl_rmarg=1;this.conf.tl_ofsleft=1;break;case "dhx_terrace":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+c+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(var e in this.idPull)this.idPull[e].className=String(this.idPull[e].className).replace(c,this.conf.skin)};this.setSkin(this.conf.skin);this._addSubItemToSelected=function(a,c){for(var e=!0,g=0;g<this.conf.selected_sub.length;g++)this.conf.selected_sub[g][0]==
a&&this.conf.selected_sub[g][1]==c&&(e=!1);1==e&&this.conf.selected_sub.push([a,c]);return e};this._removeSubItemFromSelected=function(a,c){for(var e=[],g=!1,h=0;h<this.conf.selected_sub.length;h++)this.conf.selected_sub[h][0]==a&&this.conf.selected_sub[h][1]==c?g=!0:e[e.length]=this.conf.selected_sub[h];1==g&&(this.conf.selected_sub=e);return g};this._getSubItemToDeselectByPolygon=function(a){for(var c=[],e=0;e<this.conf.selected_sub.length;e++)if(this.conf.selected_sub[e][1]==a){c[c.length]=this.conf.selected_sub[e][0];
for(var c=c.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[e][0])),g=!0,h=0;h<this.conf.opened_poly.length;h++)this.conf.opened_poly[h]==this.conf.selected_sub[e][0]&&(g=!1);1==g&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[e][0]);this.conf.selected_sub[e][0]=-1;this.conf.selected_sub[e][1]=-1}return c};this._hidePolygon=function(a){if(null!=this.idPull["polygon_"+a]){null!=this.idPull["polygon_"+a]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+
a]._zId);if("undefined"!=typeof this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+a);else{if("none"==this.idPull["polygon_"+a].style.display)return;this.idPull["polygon_"+a].style.display="none";null!=this.idPull["arrowup_"+a]&&(this.idPull["arrowup_"+a].style.display="none");null!=this.idPull["arrowdown_"+a]&&(this.idPull["arrowdown_"+a].style.display="none");this._updateItemComplexState(a,!0,!1);window.dhx4.isIE6&&null!=this.idPull["polygon_"+a+"_ie6cover"]&&(this.idPull["polygon_"+
a+"_ie6cover"].style.display="none")}a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onHide",[a]);null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!0)}};this._showPolygon=function(a,c){var e=this._countVisiblePolygonItems(a);if(0!=e){var g="polygon_"+a;if(null!=this.idPull[g]&&null!=this.idPull[a]&&(!this.conf.top_mode||"web"!=this.conf.mode||this.conf.context||this.idPull[a]._mouseOver||
c!=this.conf.dir_toplv)){this.conf.fixed_pos||this._autoDetectVisibleArea();var h=null,v=null;null==this.idPull[g]._zId&&(this.idPull[g]._zId=window.dhx4.newId());this.idPull[g]._zInd=window.dhx4.zim.reserve(this.idPull[g]._zId);this.idPull[g].style.visibility="hidden";this.idPull[g].style.left="0px";this.idPull[g].style.top="0px";this.idPull[g].style.display="";this.idPull[g].style.zIndex=this.idPull[g]._zInd;if(this.conf.auto_overflow)if(this.idPull[g].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-
this.conf.v.y1){var w=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=w}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+a]&&this._removeUpArrow(String(a).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+a]&&this._removeDownArrow(String(a).replace(this.idPrefix,""));0<this.conf.overflow_limit&&this.conf.overflow_limit<e&&(null==this.idPull["arrowup_"+a]&&this._addUpArrow(String(a).replace(this.idPrefix,
"")),null==this.idPull["arrowdown_"+a]&&this._addDownArrow(String(a).replace(this.idPrefix,"")),h=this.idPull["arrowup_"+a],h.style.display="none",v=this.idPull["arrowdown_"+a],v.style.display="none");0<this.conf.overflow_limit&&this.conf.overflow_limit<e?(this.idPull[g].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",h.style.width=v.style.width=this.idPull[g].childNodes[1].style.width=this.idPull[g].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[g].childNodes[1].scrollTop=
0,h.style.display="",v.style.display=""):(this.idPull[g].childNodes[1].style.height="",this.idPull[g].childNodes[1].style.width="");var x=null!=this.idPull[a].tagName?window.dhx4.absLeft(this.idPull[a]):this.idPull[a][0],y=null!=this.idPull[a].tagName?window.dhx4.absTop(this.idPull[a]):this.idPull[a][1],C=null!=this.idPull[a].tagName?this.idPull[a].offsetWidth:0,A=null!=this.idPull[a].tagName?this.idPull[a].offsetHeight:0,w=h=0,D=this.idPull[g].offsetWidth,H=this.idPull[g].offsetHeight;"bottom"==
c&&(h=this.conf.rtl?x+(null!=C?C:0)-D:"right"==this.conf.align?x+C-D:x-1+(c==this.conf.dir_toplv?this.conf.tl_rmarg:0),w=y-1+A+this.conf.tl_botmarg);"right"==c&&(h=x+C-1,w=y+2);"left"==c&&(h=x-this.idPull[g].offsetWidth+2,w=y+2);"top"==c&&(h=x-1,w=y-H+2);if(this.conf.fixed_pos)var E=65536,F=65536;else E=null!=this.conf.v.x2?this.conf.v.x2:0,F=null!=this.conf.v.y2?this.conf.v.y2:0,0==E&&(window.innerWidth?(E=window.innerWidth,F=window.innerHeight):(E=document.body.offsetWidth,F=document.body.scrollHeight));
h+D>E&&!this.conf.rtl&&(h=x-D+2);h<this.conf.v.x1&&this.conf.rtl&&(h=x+C-2);0>h&&(h=0);w+H>F&&null!=this.conf.v.y2&&(w=Math.max(y+A-H+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==a&&null!=v&&(w-=2),null==this.itemPull[a]||this.conf.context||this.itemPull[a].parent==this.idPrefix+this.topId&&(w-=this.base.offsetHeight));this.idPull[g].style.left=h+"px";this.idPull[g].style.top=w+"px";"undefined"!=typeof this._menuEffect&&!1!==this._menuEffect?this._showPolygonEffect(g):
(this.idPull[g].style.visibility="",0<this.conf.overflow_limit&&this.conf.overflow_limit<e&&(this.idPull[g].childNodes[1].scrollTop=0,this._checkArrowsState(a)),window.dhx4.isIE6&&(e=g+"_ie6cover",null==this.idPull[e]&&(v=document.createElement("IFRAME"),v.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,v.frameBorder=0,v.setAttribute("src","javascript:false;"),document.body.insertBefore(v,document.body.firstChild),this.idPull[e]=v),this.idPull[e].style.left=h+"px",this.idPull[e].style.top=w+"px",
this.idPull[e].style.width=this.idPull[g].offsetWidth+"px",this.idPull[e].style.height=this.idPull[g].offsetHeight+"px",this.idPull[e].style.zIndex=this.idPull[g].style.zIndex-1,this.idPull[e].style.display=""));a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onShow",[a]);null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!1)}}};this._redistribSubLevelSelection=function(a,
c){for(;0<this.conf.opened_poly.length;)this.conf.opened_poly.pop();var e=this._getSubItemToDeselectByPolygon(c);this._removeSubItemFromSelected(-1,-1);for(var g=0;g<e.length;g++)null!=this.idPull[e[g]]&&e[g]!=a&&"enabled"==this.itemPull[e[g]].state&&(this.idPull[e[g]].className="sub_item");for(g=0;g<this.conf.opened_poly.length;g++)this.conf.opened_poly[g]!=c&&this._hidePolygon(this.conf.opened_poly[g]);if("enabled"==this.itemPull[a].state){this.idPull[a].className="sub_item_selected";if(this.itemPull[a].complex&&
this.conf.dload&&"no"==this.itemPull[a].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(a,!0);this.itemPull[a].loaded="get";var h=a.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=h;for(var c in this.conf.dload_params)a.params[c]=this.conf.dload_params[c];return a};this.loadStruct(this.conf.dload_url)}(this.itemPull[a].complex||this.conf.dload&&"yes"==this.itemPull[a].loaded)&&this.itemPull[a].complex&&null!=this.idPull["polygon_"+
a]&&(this._updateItemComplexState(a,!0,!0),this._showPolygon(a,this.conf.dir_sublv));this._addSubItemToSelected(a,c);this.conf.selected=a}};this._doOnClick=function(a,c,e){this.conf.last_click=a;if(null!=this.itemPull[this.idPrefix+a].href_link&&"enabled"==this.itemPull[this.idPrefix+a].state){c=document.createElement("FORM");e=String(this.itemPull[this.idPrefix+a].href_link).split("?");c.action=e[0];if(null!=e[1]){e=String(e[1]).split("&");for(var g=0;g<e.length;g++){var h=String(e[g]).split("="),
v=document.createElement("INPUT");v.type="hidden";v.name=h[0]||"";v.value=h[1]||"";c.appendChild(v)}}null!=this.itemPull[this.idPrefix+a].href_target&&(c.target=this.itemPull[this.idPrefix+a].href_target);c.style.display="none";document.body.appendChild(c);c.submit();null!=c&&document.body.removeChild(c)}else if("c"!=c.charAt(0)&&"d"!=c.charAt(1)&&"s"!=c.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[a,this.conf.ctx_zoneid,e]);else if("d"==c.charAt(1)||"win"==this.conf.mode&&"t"==
c.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}};this._doOnTouchMenu=function(a){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a]))};this._searchMenuNode=function(a,c){for(var e=[],g=0;g<c.length;g++)if("object"==typeof c[g]){5==c[g].length&&"object"!=typeof c[g][0]&&c[g][0].replace(this.idPrefix,"")==a&&0==g&&(e=c);var h=this._searchMenuNode(a,
c[g]);0<h.length&&(e=h)}return e};this._getMenuNodes=function(a){var c=[],e;for(e in this.itemPull)this.itemPull[e].parent==a&&(c[c.length]=e);return c};this._genStr=function(a){for(var c="dhxId_",e=0;e<a;e++)c+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return c};this.getItemType=function(a){a=this.idPrefix+a;return null==this.itemPull[a]?null:this.itemPull[a].type};this.forEachItem=function(a){for(var c in this.itemPull)a(String(c).replace(this.idPrefix,
""))};this._clearAndHide=function(){e.conf.selected=-1;for(e.conf.last_click=-1;0<e.conf.opened_poly.length;)e.conf.opened_poly.pop();for(var a=0;a<e.conf.selected_sub.length;a++){var c=e.conf.selected_sub[a][0];null!=e.idPull[c]&&"enabled"==e.itemPull[c].state&&("sub_item_selected"==e.idPull[c].className&&(e.idPull[c].className="sub_item"),e.idPull[c].className=="dhtmlxMenu_"+e.conf.skin+"_TopLevel_Item_Selected"&&(e.idPull[c].className=null!=e.itemPull[c].cssNormal?e.itemPull[c].cssNormal:"dhtmlxMenu_"+
e.conf.skin+"_TopLevel_Item_Normal"));e._hidePolygon(c)}e.conf.is_touched=!1;e.conf.context&&e.conf.ctx_hideall&&e._hidePolygon(e.idPrefix+e.topId)};this._showSubLevelItem=function(a,c){null!=document.getElementById("arrow_"+this.idPrefix+a)&&(document.getElementById("arrow_"+this.idPrefix+a).style.display=c?"none":"");null!=document.getElementById("image_"+this.idPrefix+a)&&(document.getElementById("image_"+this.idPrefix+a).style.display=c?"none":"");null!=document.getElementById(this.idPrefix+a)&&
(document.getElementById(this.idPrefix+a).style.display=c?"":"none")};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)};this.idPrefix=this._genStr(12)+"_";this._bodyClick=function(a){a=a||event;2==a.button||window.dhx4.isOpera&&1==a.ctrlKey||(e.conf.context?e.conf.ctx_autohide&&(!window.dhx4.isOpera||e._isContextMenuVisible()&&window.dhx4.isOpera)&&e._hideContextMenu():e._clearAndHide&&e._clearAndHide())};this._bodyContext=function(a){a=a||event;var c=String((a.srcElement||a.target).className);
if(-1==c.search("dhtmlxMenu")||-1==c.search("SubLevelArea")){c=!0;for(a=a.target||a.srcElement;null!=a;)null!=a.id&&e.isContextZone(a.id)&&(c=!1),a==document.body&&(c=!1),a=a.parentNode;c&&e.hideContextMenu()}};"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext));this.unload=function(){window.dhx4._eventable(this,
"clear");dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(a){}this.conf.live_id=null;"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+
this.topId,!0);this.idPull=this.itemPull=null;if(this.conf.context)for(var c in this.conf.ctx_zones)this.removeContextZone(c);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null);null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base=this.base.onselectstart=null);for(c in this)this[c]=null;e=null};dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=
this;window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0});window.dhx4._eventable(this);1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu();null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,
this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(g in{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[g]&&("function"==typeof this.conf.autoload[g]?this.attachEvent(g,this.conf.autoload[g]):"function"==typeof window[this.conf.autoload[g]]&&this.attachEvent(g,window[this.conf.autoload[g]]));null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text);null!=this.conf.autoload.align&&
this.setAlign(this.conf.autoload.align);null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode);null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow);for(g in this.conf.autoload)this.conf.autoload[g]=null,delete this.conf.autoload[g];this.conf.autoload=null;return this}
dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var a={params:{}},c;for(c in this.conf.dload_params)a.params[c]=this.conf.dload_params[c];return a},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))};
dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(a){var c=0,e;for(e in this.itemPull){var g=this.itemPull[e].parent,h=this.itemPull[e].type;null!=this.idPull[e]&&(g!=a||"item"!=h&&"radio"!=h&&"checkbox"!=h||"none"==this.idPull[e].style.display||c++)}return c};
dhtmlXMenuObject.prototype._redefineComplexState=function(a){if(this.idPrefix+this.topId!=a&&null!=this.idPull["polygon_"+a]&&null!=this.idPull[a]){var c=this._countVisiblePolygonItems(a);0<c&&!this.itemPull[a].complex&&this._updateItemComplexState(a,!0,!1);0==c&&this.itemPull[a].complex&&this._updateItemComplexState(a,!1,!1)}};
dhtmlXMenuObject.prototype._updateItemComplexState=function(a,c,e){if(!this.conf.context&&"TopLevel"==this._getItemLevelType(a.replace(this.idPrefix,"")))this.itemPull[a].complex=c;else if(null!=this.idPull[a]&&null!=this.itemPull[a]&&(this.itemPull[a].complex=c,a!=this.idPrefix+this.topId))if(c=null,e=this.idPull[a].childNodes[this.conf.rtl?0:2],e.childNodes[0]&&0===String(e.childNodes[0].className).search("complex_arrow")&&(c=e.childNodes[0]),this.itemPull[a].complex){if(null==c){c=document.createElement("DIV");
c.className="complex_arrow";for(c.id="arrow_"+a;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(c)}this.conf.dload&&"get"==this.itemPull[a].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=c.className&&(c.className="complex_arrow_loading"):c.className="complex_arrow"}else this.itemPull[a].complex||null==c||(e.removeChild(c),null!=this.itemPull[a].hotkey_backup&&this.setHotKey&&this.setHotKey(a.replace(this.idPrefix,""),this.itemPull[a].hotkey_backup))};
dhtmlXMenuObject.prototype._getItemLevelType=function(a){return this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};
dhtmlXMenuObject.prototype._updateItemImage=function(a,c){a=this.idPrefix+a;var e=this.itemPull[a].type;if("checkbox"!=e&&"radio"!=e){var g=this.itemPull[a].parent==this.idPrefix+this.topId&&!this.conf.context,e=null;if(g)for(var h=0;h<this.idPull[a].childNodes.length;h++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[a].childNodes[h].className&&(e=this.idPull[a].childNodes[h])}catch(l){}else{try{e=this.idPull[a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(m){}if(null==e||"undefined"==typeof e.className||
"sub_icon"!=e.className)e=null}h=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(0<h.length)if(null!=e)e.src=this.conf.icons_path+h;else if(g)e=document.createElement("IMG"),e.className="dhtmlxMenu_TopLevel_Item_Icon",e.src=this.conf.icons_path+h,e.border="0",e.id="image_"+a,!this.conf.rtl&&0<this.idPull[a].childNodes.length?this.idPull[a].insertBefore(e,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(e);else{e=document.createElement("IMG");e.className="sub_icon";
e.src=this.conf.icons_path+h;e.border="0";e.id="image_"+a;for(g=this.idPull[a].childNodes[this.conf.rtl?2:0];0<g.childNodes.length;)g.removeChild(g.childNodes[0]);g.appendChild(e)}else null!=e&&(g=e.parentNode,g.removeChild(e),g.innerHTML="&nbsp;")}};
dhtmlXMenuObject.prototype._getAllParents=function(a){var c=[],e;for(e in this.itemPull)if(this.itemPull[e].parent==a&&(c[c.length]=this.itemPull[e].id,this.itemPull[e].complex))for(var g=this._getAllParents(this.itemPull[e].id),h=0;h<g.length;h++)c[c.length]=g[h];return c};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var a=window.dhx4.screenDim();this.conf.v.x1=a.left;this.conf.v.x2=a.right;this.conf.v.y1=a.top;this.conf.v.y2=a.bottom}};
dhtmlXMenuObject.prototype.getItemPosition=function(a){a=this.idPrefix+a;var c=-1;if(null==this.itemPull[a])return c;for(var e=this.itemPull[a].parent,e=null!=this.idPull["polygon_"+e]?this.idPull["polygon_"+e].tbd:this.cont,g=0;g<e.childNodes.length;g++)if(e.childNodes[g]==this.idPull["separator_"+a]||e.childNodes[g]==this.idPull[a])c=g;return c};
dhtmlXMenuObject.prototype.setItemPosition=function(a,c){a=this.idPrefix+a;if(null!=this.idPull[a]){var e=this.itemPull[a].parent==this.idPrefix+this.topId,g=this.idPull[a],h=this.getItemPosition(a.replace(this.idPrefix,"")),l=this.itemPull[a].parent,l=null!=this.idPull["polygon_"+l]?this.idPull["polygon_"+l].tbd:this.cont;l.removeChild(l.childNodes[h]);0>c&&(c=0);e&&1>c&&(c=1);c<l.childNodes.length?l.insertBefore(g,l.childNodes[c]):l.appendChild(g)}};
dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;return null==this.itemPull[a]?null:(null!=this.itemPull[a].parent?this.itemPull[a].parent:this.topId).replace(this.idPrefix,"")};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)+"_";this.itemPull={}};
"undefined"==typeof dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={});
dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(a,c){var e=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var g=0;g<e.length;g++)e[g]!=a&&this._hidePolygon(e[g]),null!=this.idPull[e[g]]&&e[g]!=a&&(this.idPull[e[g]].className=this.idPull[e[g]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+a].state&&(this.idPull[this.idPrefix+a].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+
a,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?a:this.conf.selected:a,this.itemPull[this.idPrefix+a].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+a,this.conf.dir_toplv))};
dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.conf.dir_toplv="bottom";this.conf.dir_sublv=this.conf.rtl?"left":"right";if(this.conf.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var a=this._getMenuNodes(this.idPrefix+this.topId),c=0;c<a.length;c++)"item"==this.itemPull[a[c]].type&&this._renderToplevelItem(a[c],null),"separator"==this.itemPull[a[c]].type&&this._renderSeparator(a[c],null)};
dhtmlXMenuObject.prototype._renderToplevelItem=function(a,c){var e=this,g=document.createElement("DIV");g.id=a;g.className="enabled"==this.itemPull[a].state&&null!=this.itemPull[a].cssNormal?this.itemPull[a].cssNormal:"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[a].state?"Normal":"Disabled");if(""!=this.itemPull[a].title){var h=document.createElement("DIV");h.className="top_level_text";h.innerHTML=this.itemPull[a].title;g.appendChild(h)}0<this.itemPull[a].tip.length&&(g.title=
this.itemPull[a].tip);if(""!=this.itemPull[a].imgen||""!=this.itemPull[a].imgdis)if(h=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"]){var l=document.createElement("IMG");l.border="0";l.id="image_"+a;l.src=this.conf.icons_path+h;l.className="dhtmlxMenu_TopLevel_Item_Icon";0<g.childNodes.length&&!this.conf.rtl?g.insertBefore(l,g.childNodes[0]):g.appendChild(l)}g.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};g.oncontextmenu=
function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont));null!=c&&(c++,0>c&&(c=0),c>this.cont.childNodes.length-1&&(c=null));null!=c?this.cont.insertBefore(g,this.cont.childNodes[c]):this.cont.appendChild(g);this.idPull[g.id]=g;this.itemPull[a].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[a].id,
this.itemPull[a].id);g.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler);var a=e._getSubItemToDeselectByPolygon("parent");e._removeSubItemFromSelected(-1,-1);for(var c=0;c<a.length;c++)a[c]!=this.id&&e._hidePolygon(a[c]),null!=e.idPull[a[c]]&&a[c]!=this.id&&(null!=e.itemPull[a[c]].cssNormal?e.idPull[a[c]].className=e.itemPull[a[c]].cssNormal:("sub_item_selected"==e.idPull[a[c]].className&&(e.idPull[a[c]].className="sub_item"),e.idPull[a[c]].className=e.idPull[a[c]].className.replace(/Selected/g,
"Normal")));if("enabled"==e.itemPull[this.id].state){this.className="dhtmlxMenu_"+e.conf.skin+"_TopLevel_Item_Selected";e._addSubItemToSelected(this.id,"parent");e.conf.selected="win"==e.conf.mode?-1!=e.conf.selected?this.id:e.conf.selected:this.id;if(e.conf.dload){if("no"==e.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime();e.itemPull[this.id].loaded="get";var g=this.id.replace(e.idPrefix,"");e._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=g;for(var c in this.conf.dload_params)a.params[c]=
this.conf.dload_params[c];return a};e.loadStruct(e.conf.dload_url)}e.conf.top_mode&&"web"==e.conf.mode&&!e.conf.context&&(this._mouseOver=!0)}if((!e.conf.dload||e.conf.dload&&(!e.itemPull[this.id].loaded||"yes"==e.itemPull[this.id].loaded))&&e.itemPull[this.id].complex&&-1!=e.conf.selected)if(e.conf.top_mode&&"web"==e.conf.mode&&!e.conf.context){this._mouseOver=!0;var h=this.id;this._menuOpenTM=window.setTimeout(function(){e._showPolygon(h,e.conf.dir_toplv)},e.conf.top_tmtime)}else e._showPolygon(this.id,
e.conf.dir_toplv)}e._doOnTouchMenu(this.id.replace(e.idPrefix,""))};g.onmouseout=function(){e.itemPull[this.id].complex&&-1!=e.conf.selected||"enabled"!=e.itemPull[this.id].state||(g.className=null!=e.itemPull[this.id].cssNormal?e.itemPull[this.id].cssNormal:"dhtmlxMenu_"+e.conf.skin+"_TopLevel_Item_Normal");"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript"));e.conf.top_mode&&"web"==e.conf.mode&&
!e.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))};g.onclick=function(a){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler);if("web"==e.conf.mode||"disabled"!=e.itemPull[this.id].state){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;if("win"==e.conf.mode&&e.itemPull[this.id].complex){if(e.conf.selected==this.id){e.conf.selected=-1;var c=!1}else e.conf.selected=this.id,c=!0;c?e._showPolygon(this.id,e.conf.dir_toplv):e._hidePolygon(this.id)}var c=
e.itemPull[this.id].complex?"c":"-",g="enabled"!=e.itemPull[this.id].state?"d":"-";a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};e._doOnClick(this.id.replace(e.idPrefix,""),c+g+"t",a);return!1}};"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};
dhtmlXMenuObject.prototype._addSubMenuPolygon=function(a,c){this._renderSublevelPolygon(a,c);for(var e=this._getMenuNodes(c),g=0;g<e.length;g++)"separator"==this.itemPull[e[g]].type?this._renderSeparator(e[g],null):this._renderSublevelItem(e[g],null);for(var g=0;g<e.length;g++)this.itemPull[e[g]].complex&&this._addSubMenuPolygon(a,this.itemPull[e[g]].id)};
dhtmlXMenuObject.prototype._renderSublevelPolygon=function(a,c){var e=document.createElement("DIV");e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":"");e.dir="ltr";e.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};e.id="polygon_"+c;e.onclick=function(a){a=a||event;a.cancelBubble=!0};e.style.display="none";document.body.insertBefore(e,document.body.firstChild);e.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';
var g=document.createElement("TABLE");g.className="dhtmlxMebu_SubLevelArea_Tbl";g.cellSpacing=0;g.cellPadding=0;g.border=0;var h=document.createElement("TBODY");g.appendChild(h);e.childNodes[1].appendChild(g);e.tbl=g;e.tbd=h;this.idPull[e.id]=e;null!=this.sxDacProc&&(this.idPull["sxDac_"+c]=new this.sxDacProc(e,e.className),window.dhx4.isIE?(this.idPull["sxDac_"+c]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+c]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+c]._setSpeed(this.dacSpeed),
this.idPull["sxDac_"+c]._setCustomCycle(this.dacCycles)));return e};
dhtmlXMenuObject.prototype._renderSublevelItem=function(a,c){var e=this,g=document.createElement("TR");g.className="enabled"==this.itemPull[a].state?"sub_item":"sub_item_dis";var h=document.createElement("TD");h.className="sub_item_icon";var l=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(""!=l){var m=this.itemPull[a].type;if("checkbox"==m||"radio"==m){var n=document.createElement("DIV");n.id="image_"+this.itemPull[a].id;n.className="sub_icon "+l;h.appendChild(n)}"checkbox"!=
m&&"radio"!=m&&(n=document.createElement("IMG"),n.id="image_"+this.itemPull[a].id,n.className="sub_icon",n.src=this.conf.icons_path+l,h.appendChild(n))}else h.innerHTML="&nbsp;";l=document.createElement("TD");l.className="sub_item_text";""!=this.itemPull[a].title?(m=document.createElement("DIV"),m.className="sub_item_text",m.innerHTML=this.itemPull[a].title,l.appendChild(m)):l.innerHTML="&nbsp;";m=document.createElement("TD");m.className="sub_item_hk";this.itemPull[a].complex?(n=document.createElement("DIV"),
n.className="complex_arrow",n.id="arrow_"+this.itemPull[a].id,m.appendChild(n)):0<this.itemPull[a].hotkey.length&&!this.itemPull[a].complex?(n=document.createElement("DIV"),n.className="sub_item_hk",n.innerHTML=this.itemPull[a].hotkey,m.appendChild(n)):m.innerHTML="&nbsp;";g.appendChild(this.conf.rtl?m:h);g.appendChild(l);g.appendChild(this.conf.rtl?h:m);g.id=this.itemPull[a].id;g.parent=this.itemPull[a].parent;0<this.itemPull[a].tip.length&&(g.title=this.itemPull[a].tip);g.onselectstart=function(a){a=
a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};g.onmouseover=function(a){e.conf.hide_tm[this.id]&&window.clearTimeout(e.conf.hide_tm[this.id]);"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler);this._visible||e._redistribSubLevelSelection(this.id,this.parent);this._visible=!0};g.onmouseout=function(){"web"==e.conf.mode&&(e.conf.tm_handler&&window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e&&e._clearAndHide&&e._clearAndHide()},e.conf.tm_sec,
"JavaScript"));var a=this;e.conf.hide_tm[this.id]&&window.clearTimeout(e.conf.hide_tm[this.id]);e.conf.hide_tm[this.id]=window.setTimeout(function(){a._visible=!1},50)};g.onclick=function(a){if(e.checkEvent("onClick")||!e.itemPull[this.id].complex){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;tc=e.itemPull[this.id].complex?"c":"-";td="enabled"==e.itemPull[this.id].state?"-":"d";a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};switch(e.itemPull[this.id].type){case "checkbox":e._checkboxOnClickHandler(this.id.replace(e.idPrefix,
""),tc+td+"n",a);break;case "radio":e._radioOnClickHandler(this.id.replace(e.idPrefix,""),tc+td+"n",a);break;case "item":e._doOnClick(this.id.replace(e.idPrefix,""),tc+td+"n",a)}return!1}};h=this.idPull["polygon_"+this.itemPull[a].parent];null!=c&&(c++,0>c&&(c=0),c>h.tbd.childNodes.length-1&&(c=null));null!=c&&null!=h.tbd.childNodes[c]?h.tbd.insertBefore(g,h.tbd.childNodes[c]):h.tbd.appendChild(g);this.idPull[g.id]=g};
dhtmlXMenuObject.prototype._renderSeparator=function(a,c){var e=this.conf.context?"SubLevelArea":this.itemPull[a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=e||!this.conf.context){var g=this;if("TopLevel"!=e){var h=document.createElement("TR");h.className="sub_sep";var l=document.createElement("TD");l.colSpan="3";h.appendChild(l)}var m=document.createElement("DIV");m.id="separator_"+a;m.className="TopLevel"==e?"top_sep":"sub_sep";m.onselectstart=function(a){a=a||event;
a.preventDefault?a.preventDefault():a.returnValue=!1};m.onclick=function(a){a=a||event;a.cancelBubble=!0;a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};g._doOnClick(this.id.replace("separator_"+g.idPrefix,""),"--s",a)};"TopLevel"==e?(null!=c?(c++,0>c&&(c=0),null!=this.cont.childNodes[c]?this.cont.insertBefore(m,this.cont.childNodes[c]):this.cont.appendChild(m)):(h=this.cont.childNodes[this.cont.childNodes.length-1],-1==String(h).search("TopLevel_Text")?this.cont.appendChild(m):this.cont.insertBefore(m,
h)),this.idPull[m.id]=m):(e=this.idPull["polygon_"+this.itemPull[a].parent],null!=c&&(c++,0>c&&(c=0),c>e.tbd.childNodes.length-1&&(c=null)),null!=c&&null!=e.tbd.childNodes[c]?e.tbd.insertBefore(h,e.tbd.childNodes[c]):e.tbd.appendChild(h),l.appendChild(m),this.idPull[m.id]=h)}};
dhtmlXMenuObject.prototype.addNewSeparator=function(a,c){c=this.idPrefix+(null!=c?c:this._genStr(24));var e=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(c,e,"","separator",!1,"","");this._renderSeparator(c,this.getItemPosition(a))};
dhtmlXMenuObject.prototype._initObj=function(a,c,e){a instanceof Array||(e=a.parentId,null!=e&&0!==String(e).indexOf(this.idPrefix)&&(e=this.idPrefix+String(e)),a=a.items);for(var g=0;g<a.length;g++){if("undefined"==typeof a[g].id||null==a[g].id)a[g].id=this._genStr(24);null==a[g].text&&(a[g].text="");0!==String(a[g].id).indexOf(this.idPrefix)&&(a[g].id=this.idPrefix+String(a[g].id));var h={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""},l;for(l in h)"undefined"==typeof a[g][l]&&
(a[g][l]=h[l]);""==a[g].imgen&&null!=a[g].img&&(a[g].imgen=a[g].img);""==a[g].imgdis&&null!=a[g].img_disabled&&(a[g].imgdis=a[g].img_disabled);null==a[g].title&&null!=a[g].text&&(a[g].title=a[g].text);null!=a[g].href&&(null!=a[g].href.link&&(a[g].href_link=a[g].href.link),null!=a[g].href.target&&(a[g].href_target=a[g].href.target));if(null!=a[g].userdata)for(l in a[g].userdata)this.userData[a[g].id+"_"+l]=a[g].userdata[l];"undefined"!=typeof a[g].enabled&&0==window.dhx4.s2b(a[g].enabled)?a[g].state=
"disabled":"undefined"!=typeof a[g].disabled&&1==window.dhx4.s2b(a[g].disabled)&&(a[g].state="disabled");"undefined"==typeof a[g].parent&&(a[g].parent=null!=e?e:this.idPrefix+this.topId);"checkbox"==a[g].type&&(a[g].checked=window.dhx4.s2b(a[g].checked),a[g].imgen=a[g].imgdis="chbx_"+(a[g].checked?"1":"0"));if("radio"==a[g].type){a[g].checked=window.dhx4.s2b(a[g].checked);a[g].imgen=a[g].imgdis="rdbt_"+(a[g].checked?"1":"0");if("undefined"==typeof a[g].group||null==a[g].group)a[g].group=this._genStr(24);
null==this.radio[a[g].group]&&(this.radio[a[g].group]=[]);this.radio[a[g].group].push(a[g].id)}this.itemPull[a[g].id]=a[g];null!=a[g].items&&0<a[g].items.length?(this.itemPull[a[g].id].complex=!0,this._initObj(a[g].items,!0,a[g].id)):this.conf.dload&&1==a[g].complex&&(this.itemPull[a[g].id].loaded="no");this.itemPull[a[g].id].items=null}if(!0!==c)if(1==this.conf.dload)if(null==e)this._initTopLevelMenu();else{this._addSubMenuPolygon(e,e);if(this.conf.selected==e){var m=(c=this.itemPull[e].parent==
this.idPrefix+this.topId)&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv;a=!1;if(c&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&(c=this.idPull[e],1==c._mouseOver&&(g=this.conf.top_tmtime-((new Date).getTime()-c._dynLoadTM),1<g))){var n=e,r=this;c._menuOpenTM=window.setTimeout(function(){r._showPolygon(n,m);r=n=null},g);a=!0}a||this._showPolygon(e,m)}this.itemPull[e].loaded="yes";1==this.conf.dload_icon&&this._updateLoaderIcon(e,!1)}else this._init()};
dhtmlXMenuObject.prototype._xmlToJson=function(a,c){var e=[];if(null==c){var g=a.getElementsByTagName(this.conf.tags.root);if(null==g||null!=g&&0==g.length)return{items:[]};g=g[0]}else g=a;null!=g.getAttribute("parentId")&&(c=this.idPrefix+g.getAttribute("parentId"));for(var h=0;h<g.childNodes.length;h++)if("undefined"!=typeof g.childNodes[h].tagName&&String(g.childNodes[h].tagName).toLowerCase()==this.conf.tags.item){var l=g.childNodes[h],m={id:this.idPrefix+(l.getAttribute("id")||this._genStr(24)),
title:l.getAttribute("text")||"",imgen:l.getAttribute("img")||"",imgdis:l.getAttribute("imgdis")||"",tip:"",hotkey:"",type:l.getAttribute("type")||"item"};null!=l.getAttribute("cssNormal")&&(m.cssNormal=l.getAttribute("cssNormal"));"checkbox"==m.type&&(m.checked=l.getAttribute("checked"));"radio"==m.type&&(m.checked=l.getAttribute("checked"),m.group=l.getAttribute("group"));m.state="enabled";null!=l.getAttribute("enabled")&&0==window.dhx4.s2b(l.getAttribute("enabled"))?m.state="disabled":null!=l.getAttribute("disabled")&&
1==window.dhx4.s2b(l.getAttribute("disabled"))&&(m.state="disabled");m.parent=null!=c?c:this.idPrefix+this.topId;if(this.conf.dload)m.complex=null!=l.getAttribute("complex"),m.complex&&(m.loaded="no");else{var n=this._xmlToJson(l,m.id);m.items=n.items;m.complex=0<m.items.length}for(n=0;n<l.childNodes.length;n++)if("undefined"!=typeof l.childNodes[n].tagName){var r=String(l.childNodes[n].tagName||"").toLowerCase();if(r==this.conf.tags.userdata){var u=l.childNodes[n];null!=u.getAttribute("name")&&(this.userData[m.id+
"_"+u.getAttribute("name")]=null!=u.firstChild&&null!=u.firstChild.nodeValue?u.firstChild.nodeValue:"")}r==this.conf.tags.text_ext&&(m.title=l.childNodes[n].firstChild.nodeValue);r==this.conf.tags.tooltip&&(m.tip=l.childNodes[n].firstChild.nodeValue);r==this.conf.tags.hotkey&&(m.hotkey=l.childNodes[n].firstChild.nodeValue);r==this.conf.tags.href&&"item"==m.type&&(m.href_link=l.childNodes[n].firstChild.nodeValue,null!=l.childNodes[n].getAttribute("target")&&(m.href_target=l.childNodes[n].getAttribute("target")))}e.push(m)}return l=
{parentId:c,items:e}};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,c){this.conf.dload=!0;this.conf.dload_url=a;this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&";this.conf.dload_icon=c;this._init()};
dhtmlXMenuObject.prototype._updateLoaderIcon=function(a,c){if(null!=this.idPull[a]&&!(0<=String(this.idPull[a].className).search("TopLevel_Item"))){var e=this.conf.rtl?0:2;this.idPull[a].childNodes[e]&&this.idPull[a].childNodes[e].childNodes[0]&&(e=this.idPull[a].childNodes[e].childNodes[0],0===String(e.className).search("complex_arrow")&&(e.className="complex_arrow"+(c?"_loading":"")))}};
dhtmlXMenuObject.prototype.addNewSibling=function(a,c,e,g,h,l){c=this.idPrefix+(null!=c?c:this._genStr(24));var m=this.idPrefix+(null!=a?this.getParentId(a):this.topId);this._addItemIntoGlobalStrorage(c,m,e,"item",g,h,l);m!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(c,this.getItemPosition(a)):this._renderToplevelItem(c,this.getItemPosition(a))};
dhtmlXMenuObject.prototype.addNewChild=function(a,c,e,g,h,l,m){if(null==a)if(this.conf.context)a=this.topId;else{this.addNewSibling(a,e,g,h,l,m);null!=c&&this.setItemPosition(e,c);return}e=this.idPrefix+(null!=e?e:this._genStr(24));this.setHotKey&&this.setHotKey(a,"");a=this.idPrefix+a;this._addItemIntoGlobalStrorage(e,a,g,"item",h,l,m);null==this.idPull["polygon_"+a]&&this._renderSublevelPolygon(a,a);this._renderSublevelItem(e,c-1);this._redefineComplexState(a)};
dhtmlXMenuObject.prototype.removeItem=function(a,c,e){c||(a=this.idPrefix+a);var g=null;if(a!=this.idPrefix+this.topId){if(null==this.itemPull[a])return;this.idPull["polygon_"+a]&&this.idPull["polygon_"+a]._tmShow&&window.clearTimeout(this.idPull["polygon_"+a]._tmShow);if("separator"==this.itemPull[a].type){var h=this.idPull["separator_"+a];this.itemPull[a].parent==this.idPrefix+this.topId?(h.onclick=null,h.onselectstart=null,h.id=null):(h.childNodes[0].childNodes[0].onclick=null,h.childNodes[0].childNodes[0].onselectstart=
null,h.childNodes[0].childNodes[0].id=null,h.childNodes[0].removeChild(h.childNodes[0].childNodes[0]),h.removeChild(h.childNodes[0]));h.parentNode.removeChild(h);this.idPull["separator_"+a]=null;this.itemPull[a]=null;delete this.idPull["separator_"+a]}else{g=this.itemPull[a].parent;h=this.idPull[a];h.onclick=null;h.oncontextmenu=null;h.onmouseover=null;h.onmouseout=null;h.onselectstart=null;for(h.id=null;0<h.childNodes.length;)h.removeChild(h.childNodes[0]);h.parentNode.removeChild(h);this.idPull[a]=
null;this.itemPull[a]=null;delete this.idPull[a]}delete this.itemPull[a]}for(var l in this.itemPull)this.itemPull[l].parent==a&&this.removeItem(l,!0,!0);h=Array(a);null==g||e||null==this.idPull["polygon_"+g]||0!=this.idPull["polygon_"+g].tbd.childNodes.length||(h.push(g),this._updateItemComplexState(g,!1,!1));for(g=0;g<h.length;g++)this.idPull["polygon_"+h[g]]&&(l=this.idPull["polygon_"+h[g]],l.onclick=null,l.oncontextmenu=null,l.tbl.removeChild(l.tbd),l.tbd=null,l.childNodes[1].removeChild(l.tbl),
l.tbl=null,l.id=null,l.parentNode.removeChild(l),window.dhx4.isIE6&&(l="polygon_"+h[g]+"_ie6cover",null!=this.idPull[l]&&(document.body.removeChild(this.idPull[l]),delete this.idPull[l])),null!=this.idPull["arrowup_"+a]&&this._removeArrow&&this._removeArrow("arrowup_"+a),null!=this.idPull["arrowdown_"+a]&&this._removeArrow&&this._removeArrow("arrowdown_"+a),this.idPull["polygon_"+h[g]]=null,delete this.idPull["polygon_"+h[g]]);"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()};
dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(a,c,e,g,h,l,m){a={id:a,title:e,imgen:null!=l?l:"",imgdis:null!=m?m:"",type:g,state:1==h?"disabled":"enabled",parent:c,complex:!1,hotkey:"",tip:""};this.itemPull[a.id]=a};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0;1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1);null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)};
dhtmlXMenuObject.prototype.addContextZone=function(a){if(a==document.body){a="document.body."+this.idPrefix;var c=document.body}else c="string"==typeof a?document.getElementById(a):a;var e=!1,g;for(g in this.conf.ctx_zones)e=e||g==a||this.conf.ctx_zones[g]==c;if(1==e)return!1;this.conf.ctx_zones[a]=c;var h=this;window.dhx4.isOpera?(this.operaContext=function(a){h._doOnContextMenuOpera(a,h)},c.addEventListener("mouseup",this.operaContext,!1)):(null==c.oncontextmenu||c._oldContextMenuHandler||(c._oldContextMenuHandler=
c.oncontextmenu),c.oncontextmenu=function(a){for(var c in dhtmlXMenuObject.prototype.liveInst)c!=h.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[c].context&&dhtmlXMenuObject.prototype.liveInst[c]._hideContextMenu();a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;h._doOnContextBeforeCall(a,this);return!1})};
dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(a,c){for(var e in dhtmlXMenuObject.prototype.liveInst)e!=c.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[e].context&&dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu();a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;0==a.button&&1==a.ctrlKey&&c._doOnContextBeforeCall(a,this);return!1};
dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a))return!1;a==document.body&&(a="document.body."+this.idPrefix);var c=this.conf.ctx_zones[a];window.dhx4.isOpera?c.removeEventListener("mouseup",this.operaContext,!1):(c.oncontextmenu=null!=c._oldContextMenuHandler?c._oldContextMenuHandler:null,c._oldContextMenuHandler=null);try{this.conf.ctx_zones[a]=null,delete this.conf.ctx_zones[a]}catch(e){}return!0};
dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var c=!1;null!=this.conf.ctx_zones[a]&&this.conf.ctx_zones[a]==document.getElementById(a)&&(c=!0);return c};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display};
dhtmlXMenuObject.prototype._showContextMenu=function(a,c,e){this._clearAndHide();if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler);this.idPull[this.idPrefix+this.topId]=[a,c];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[e])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};
dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(a,c){this.conf.ctx_zoneid=c.id;this._clearAndHide();this._hideContextMenu();var e=a.srcElement||a.target,g=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?a.offsetX:a.layerX,h=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?a.offsetY:a.layerY,g=window.dhx4.absLeft(e)+g,e=window.dhx4.absTop(e)+h;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[c.id,a])&&
this.conf.ctx_autoshow&&(this._showContextMenu(g,e,c.id),this.callEvent("onAfterContextMenu",[c.id,a])):this.conf.ctx_autoshow&&(this._showContextMenu(g,e,c.id),this.callEvent("onAfterContextMenu",[c.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(a,c){this._showContextMenu(a,c,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.conf.ctx_autoshow=1==a?!0:!1};
dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.conf.ctx_autohide=1==a?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.conf.ctx_hideall=1==a?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall};
dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var a in this.itemPull)if(this.itemPull[a].parent==this.idPrefix+this.topId&&null!=this.idPull[a]){var c=!1,e=!1;this.idPull[a].parentNode.firstChild==this.idPull[a]&&(c=!0);this.idPull[a].parentNode.lastChild==this.idPull[a]&&(e=!0);for(var g in this.itemPull)"separator"==this.itemPull[g].type&&this.itemPull[g].parent==this.idPrefix+this.topId&&(this.idPull[a].nextSibling==this.idPull["separator_"+g]&&(e=!0),this.idPull[a].previousSibling==
this.idPull["separator_"+g]&&(c=!0));this.idPull[a].style.borderLeftWidth=c?"1px":"0px";this.idPull[a].style.borderTopLeftRadius=this.idPull[a].style.borderBottomLeftRadius=c?"3px":"0px";this.idPull[a].style.borderTopRightRadius=this.idPull[a].style.borderBottomRightRadius=e?"3px":"0px";this.idPull[a]._bl=c;this.idPull[a]._br=e}};
dhtmlXMenuObject.prototype._improveTerraceButton=function(a,c){c?(this.idPull[a].style.borderBottomLeftRadius=this.idPull[a]._bl?"3px":"0px",this.idPull[a].style.borderBottomRightRadius=this.idPull[a]._br?"3px":"0px"):(this.idPull[a].style.borderBottomLeftRadius="0px",this.idPull[a].style.borderBottomRightRadius="0px")};
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(a,c,e,g,h){"undefined"!=typeof h?a=h:(a=document.createElement("DIV"),a.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")));this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=!0;this._updateIdx();return a},dhtmlXCellObject.prototype.attachMenu=function(a){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",
["menu"]),"undefined"==typeof a&&(a={}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(a),this._adjustCont(this._idd),a.parent=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=
function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu});dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))};
dhtmlXMenuObject.prototype.isItemEnabled=function(a){return null!=this.itemPull[this.idPrefix+a]?"enabled"==this.itemPull[this.idPrefix+a].state:!1};
dhtmlXMenuObject.prototype._changeItemState=function(a,c,e){var g=this.idPrefix+a;null!=this.itemPull[g]&&null!=this.idPull[g]&&this.itemPull[g].state!=c&&(this.itemPull[g].state=c,this.idPull[g].className=this.itemPull[g].parent!=this.idPrefix+this.topId||this.conf.context?"sub_item"+("enabled"==this.itemPull[g].state?"":"_dis"):"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[g].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+a,this.itemPull[this.idPrefix+
a].complex,!1),this._updateItemImage(a,e),this.idPrefix+this.conf.last_click==g&&"TopLevel"!=e&&this._redistribSubLevelSelection(g,this.itemPull[g].parent));return!1};dhtmlXMenuObject.prototype.getItemText=function(a){return null!=this.itemPull[this.idPrefix+a]?this.itemPull[this.idPrefix+a].title:""};
dhtmlXMenuObject.prototype.setItemText=function(a,c){a=this.idPrefix+a;if(null!=this.itemPull[a]&&null!=this.idPull[a])if(this._clearAndHide(),this.itemPull[a].title=c,this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context){e=null;for(g=0;g<this.idPull[a].childNodes[1].childNodes.length;g++)"sub_item_text"==String(this.idPull[a].childNodes[1].childNodes[g].className||"")&&(e=this.idPull[a].childNodes[1].childNodes[g]);""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?
e&&(e.parentNode.removeChild(e),this.idPull[a].childNodes[1].innerHTML="&nbsp;"):(e||(e=document.createElement("DIV"),e.className="sub_item_text",this.idPull[a].childNodes[1].innerHTML="",this.idPull[a].childNodes[1].appendChild(e)),e.innerHTML=this.itemPull[a].title)}else{for(var e=null,g=0;g<this.idPull[a].childNodes.length;g++)try{"top_level_text"==this.idPull[a].childNodes[g].className&&(e=this.idPull[a].childNodes[g])}catch(h){}""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?
null!=e&&e.parentNode.removeChild(e):(e||(e=document.createElement("DIV"),e.className="top_level_text",this.conf.rtl&&0<this.idPull[a].childNodes.length?this.idPull[a].insertBefore(e,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(e)),e.innerHTML=this.itemPull[a].title)}};
dhtmlXMenuObject.prototype.loadFromHTML=function(a,c,e){var g=this.conf.tags.item;this.conf.tags.item="div";a="string"==typeof a?document.getElementById(a):a;var h=this._xmlToJson(a,this.idPrefix+this.topId);this._initObj(h);this.conf.tags.item=g;c&&a.parentNode.removeChild(a);objOd=null;if(null!=onload)if("function"==typeof e)e();else if("function"==typeof window[e])window[e]()};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)};
dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(a){var c=null;null!=this.idPull[this.idPrefix+a]&&(c="none"==this.idPull[this.idPrefix+a].style.display);return c};
dhtmlXMenuObject.prototype._changeItemVisible=function(a,c){var e=this.idPrefix+a;null!=this.itemPull[e]&&("separator"==this.itemPull[e].type&&(e="separator_"+e),null!=this.idPull[e]&&(this.idPull[e].style.display=c?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+a].parent)))};dhtmlXMenuObject.prototype.setUserData=function(a,c,e){this.userData[this.idPrefix+a+"_"+c]=e};
dhtmlXMenuObject.prototype.getUserData=function(a,c){return null!=this.userData[this.idPrefix+a+"_"+c]?this.userData[this.idPrefix+a+"_"+c]:null};dhtmlXMenuObject.prototype.setOpenMode=function(a){this.conf.mode="win"==a?"win":"web"};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.conf.tm_sec=isNaN(a)?400:a};
dhtmlXMenuObject.prototype.getItemImage=function(a){var c=[null,null];a=this.idPrefix+a;"item"==this.itemPull[a].type&&(c[0]=this.itemPull[a].imgen,c[1]=this.itemPull[a].imgdis);return c};dhtmlXMenuObject.prototype.setItemImage=function(a,c,e){"item"==this.itemPull[this.idPrefix+a].type&&(this.itemPull[this.idPrefix+a].imgen=c,this.itemPull[this.idPrefix+a].imgdis=e,this._updateItemImage(a,this._getItemLevelType(a)))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")};
dhtmlXMenuObject.prototype.setVisibleArea=function(a,c,e,g){this.conf.v_enabled=!0;this.conf.v.x1=a;this.conf.v.x2=c;this.conf.v.y1=e;this.conf.v.y2=g};dhtmlXMenuObject.prototype.setTooltip=function(a,c){a=this.idPrefix+a;null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.idPull[a].title=0<c.length?c:null,this.itemPull[a].tip=c)};dhtmlXMenuObject.prototype.getTooltip=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].tip};
dhtmlXMenuObject.prototype.setTopText=function(a){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=a)};
dhtmlXMenuObject.prototype.setAlign=function(a){this.conf.align==a||"left"!=a&&"right"!=a||(this.conf.align=a,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left")))};dhtmlXMenuObject.prototype.setHref=function(a,c,e){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].href_link=c,null!=e&&(this.itemPull[this.idPrefix+a].href_target=e))};
dhtmlXMenuObject.prototype.clearHref=function(a){null!=this.itemPull[this.idPrefix+a]&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(a){for(var c=Array(a);this.getParentId(a)!=this.topId;)a=this.getParentId(a),c[c.length]=a;return c.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].checked};
dhtmlXMenuObject.prototype._setCheckboxState=function(a,c){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].checked=c)};
dhtmlXMenuObject.prototype._updateCheckboxImage=function(a){if(null!=this.idPull[this.idPrefix+a]){this.itemPull[this.idPrefix+a].imgen="chbx_"+(this._getCheckboxState(a)?"1":"0");this.itemPull[this.idPrefix+a].imgdis=this.itemPull[this.idPrefix+a].imgen;try{this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+a].imgen}catch(c){}}};
dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(a,c,e){"d"!=c.charAt(1)&&null!=this.itemPull[this.idPrefix+a]&&(c=this._getCheckboxState(a),this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[a,c,this.conf.ctx_zoneid,e])&&this.setCheckboxState(a,!c):this.setCheckboxState(a,!c),this.checkEvent("onClick")&&this.callEvent("onClick",[a]))};dhtmlXMenuObject.prototype.setCheckboxState=function(a,c){this._setCheckboxState(a,c);this._updateCheckboxImage(a)};
dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};
dhtmlXMenuObject.prototype.addCheckbox=function(a,c,e,g,h,l,m){if(!this.conf.context||c!=this.topId)if(null==this.itemPull[this.idPrefix+c]||"child"==a&&"item"!=this.itemPull[this.idPrefix+c].type)return;var n="chbx_"+(l?"1":"0");"sibling"==a?(a=this.idPrefix+(null!=g?g:this._genStr(24)),g=this.idPrefix+this.getParentId(c),this._addItemIntoGlobalStrorage(a,g,h,"checkbox",m,n,n),this.itemPull[a].checked=l,this._renderSublevelItem(a,this.getItemPosition(c))):(a=this.idPrefix+(null!=g?g:this._genStr(24)),
g=this.idPrefix+c,this._addItemIntoGlobalStrorage(a,g,h,"checkbox",m,n,n),this.itemPull[a].checked=l,null==this.idPull["polygon_"+g]&&this._renderSublevelPolygon(g,g),this._renderSublevelItem(a,e-1),this._redefineComplexState(g))};
dhtmlXMenuObject.prototype.setHotKey=function(a,c){a=this.idPrefix+a;if(null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[a].complex){var e=this.itemPull[a].type;if("item"==e||"checkbox"==e||"radio"==e){e=null;try{"sub_item_hk"==this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(e=this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(g){}if(0==c.length)this.itemPull[a].hotkey_backup=
this.itemPull[a].hotkey,this.itemPull[a].hotkey="",null!=e&&e.parentNode.removeChild(e);else{this.itemPull[a].hotkey=c;this.itemPull[a].hotkey_backup=null;if(null==e){e=document.createElement("DIV");e.className="sub_item_hk";for(var h=this.idPull[a].childNodes[this.conf.rtl?0:2];0<h.childNodes.length;)h.removeChild(h.childNodes[0]);h.appendChild(e)}e.innerHTML=c}}}};dhtmlXMenuObject.prototype.getHotKey=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].hotkey};
dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var c=this._getSubItemToDeselectByPolygon(a),e=0;e<this.conf.opened_poly.length;e++)this.conf.opened_poly[e]!=a&&this._hidePolygon(this.conf.opened_poly[e]);for(e=0;e<c.length;e++)null!=this.idPull[c[e]]&&"enabled"==this.itemPull[c[e]].state&&(this.idPull[c[e]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")};
dhtmlXMenuObject.prototype._checkArrowsState=function(a){var c=this.idPull["polygon_"+a].childNodes[1],e=this.idPull["arrowup_"+a];a=this.idPull["arrowdown_"+a];e.className=0==c.scrollTop?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(e.over?"_Over":"");a.className=c.scrollTop+c.offsetHeight<c.scrollHeight?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(a.over?"_Over":""):"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled"};
dhtmlXMenuObject.prototype._addUpArrow=function(a){var c=this,e=document.createElement("DIV");e.pId=this.idPrefix+a;e.id="arrowup_"+this.idPrefix+a;e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp";e.over=!1;e.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);
c._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,c._canScrollUp=!0,c._doScrollUp(this.pId,!0))};e.onmouseout=function(){"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript"));this.over=!1;c._canScrollUp=!1;this.className!="dhtmlxMenu_"+c.conf.skin+
"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(c.conf.of_utm))};e.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};a=this.idPull["polygon_"+this.idPrefix+a];a.childNodes[0].appendChild(e);this.idPull[e.id]=e;a=e=null};
dhtmlXMenuObject.prototype._addDownArrow=function(a){var c=this,e=document.createElement("DIV");e.pId=this.idPrefix+a;e.id="arrowdown_"+this.idPrefix+a;e.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown";e.over=!1;e.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);
c._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,c._canScrollDown=!0,c._doScrollDown(this.pId,!0))};e.onmouseout=function(){"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript"));this.over=!1;c._canScrollDown=!1;this.className!="dhtmlxMenu_"+
c.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+c.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(c.conf.of_dtm))};e.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};a=this.idPull["polygon_"+this.idPrefix+a];a.childNodes[2].appendChild(e);this.idPull[e.id]=e;a=e=null};dhtmlXMenuObject.prototype._removeUpArrow=function(a){this._removeArrow("arrowup_"+this.idPrefix+a)};
dhtmlXMenuObject.prototype._removeDownArrow=function(a){this._removeArrow("arrowdown_"+this.idPrefix+a)};dhtmlXMenuObject.prototype._removeArrow=function(a){var c=this.idPull[a];c.onselectstart=null;c.oncontextmenu=null;c.onmouseover=null;c.onmouseout=null;c.onclick=null;c.parentNode&&c.parentNode.removeChild(c);this.idPull[a]=null;try{delete this.idPull[a]}catch(e){}};
dhtmlXMenuObject.prototype._isArrowExists=function(a){return null!=this.idPull["arrowup_"+a]&&null!=this.idPull["arrowdown_"+a]?!0:!1};
dhtmlXMenuObject.prototype._doScrollUp=function(a,c){var e=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollUp&&0<e.scrollTop){var g=!1,h=e.scrollTop-this.conf.of_ustep;0>h&&(g=!0,h=0);e.scrollTop=h;if(g)c=!0;else{var l=this;this.conf.of_utm=window.setTimeout(function(){l._doScrollUp(a,!1);l=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(a);c&&this._checkArrowsState(a)};
dhtmlXMenuObject.prototype._doScrollDown=function(a,c){var e=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollDown&&e.scrollTop+e.offsetHeight<=e.scrollHeight){var g=!1,h=e.scrollTop+this.conf.of_dstep;h+e.offsetHeight>=e.scrollHeight&&(g=!0,h=e.scrollHeight-e.offsetHeight);e.scrollTop=h;if(g)c=!0;else{var l=this;this.conf.of_dtm=window.setTimeout(function(){l._doScrollDown(a,!1);l=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(a);c&&this._checkArrowsState(a)};
dhtmlXMenuObject.prototype._countPolygonItems=function(a){var c=0,e;for(e in this.itemPull){var g=this.itemPull[e].type;this.itemPull[e].parent!=this.idPrefix+a||"item"!=g&&"radio"!=g&&"checkbox"!=g||c++}return c};
dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if("auto"===a)this.conf.overflow_limit=0,this.conf.auto_overflow=!0;else if(!(0==this.conf.overflow_limit&&0>=a))if(this._clearAndHide(),0<=this.conf.overflow_limit&&0<a)this.conf.overflow_limit=a;else if(0<this.conf.overflow_limit&&0>=a){for(var c in this.itemPull)this._isArrowExists(c)&&(a=String(c).replace(this.idPrefix,""),this._removeUpArrow(a),this._removeDownArrow(a),this.idPull["polygon_"+c].childNodes[1].style.height="");this.conf.overflow_limit=
0}};dhtmlXMenuObject.prototype._getRadioImgObj=function(a){try{var c=this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(e){c=null}return c};dhtmlXMenuObject.prototype._setRadioState=function(a,c){var e=this._getRadioImgObj(a);if(null!=e){var g=this.itemPull[this.idPrefix+a];g.checked=c;g.imgen="rdbt_"+(g.checked?"1":"0");g.imgdis=g.imgen;e.className="sub_icon "+g.imgen}};
dhtmlXMenuObject.prototype._radioOnClickHandler=function(a,c,e){"d"!=c.charAt(1)&&null!=this.itemPull[this.idPrefix+a].group&&(c=this.itemPull[this.idPrefix+a].group,this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[c,this.getRadioChecked(c),a,this.conf.ctx_zoneid,e])&&this.setRadioChecked(c,a):this.setRadioChecked(c,a),this.checkEvent("onClick")&&this.callEvent("onClick",[a]))};
dhtmlXMenuObject.prototype.getRadioChecked=function(a){for(var c=null,e=0;e<this.radio[a].length;e++){var g=this.radio[a][e].replace(this.idPrefix,""),h=this._getRadioImgObj(g);null!=h&&null!=h.className.match(/rdbt_1$/gi)&&(c=g)}return c};dhtmlXMenuObject.prototype.setRadioChecked=function(a,c){if(null!=this.radio[a])for(var e=0;e<this.radio[a].length;e++){var g=this.radio[a][e].replace(this.idPrefix,"");this._setRadioState(g,g==c)}};
dhtmlXMenuObject.prototype.addRadioButton=function(a,c,e,g,h,l,m,n){if(!this.conf.context||c!=this.topId)if(null==this.itemPull[this.idPrefix+c]||"child"==a&&"item"!=this.itemPull[this.idPrefix+c].type)return;g=this.idPrefix+(null!=g?g:this._genStr(24));var r="rdbt_"+(m?"1":"0");"sibling"==a?(a=this.idPrefix+this.getParentId(c),this._addItemIntoGlobalStrorage(g,a,h,"radio",n,r,r),this._renderSublevelItem(g,this.getItemPosition(c))):(a=this.idPrefix+c,this._addItemIntoGlobalStrorage(g,a,h,"radio",
n,r,r),null==this.idPull["polygon_"+a]&&this._renderSublevelPolygon(a,a),this._renderSublevelItem(g,e-1),this._redefineComplexState(a));c=null!=l?l:this._genStr(24);this.itemPull[g].group=c;null==this.radio[c]&&(this.radio[c]=[]);this.radio[c][this.radio[c].length]=g;1==m&&this.setRadioChecked(c,String(g).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"};
dhtmlXMenuObject.prototype._readLevel=function(a){var c="",e;for(e in this.itemPull)if(this.itemPull[e].parent==a){var g="",h="",l="",m=String(this.itemPull[e].id).replace(this.idPrefix,""),n="",r=""!=this.itemPull[e].title?' text="'+this.itemPull[e].title+'"':"",u="";"item"==this.itemPull[e].type&&(""!=this.itemPull[e].imgen&&(g=' img="'+this.itemPull[e].imgen+'"'),""!=this.itemPull[e].imgdis&&(h=' imgdis="'+this.itemPull[e].imgdis+'"'),""!=this.itemPull[e].hotkey&&(l="<hotkey>"+this.itemPull[e].hotkey+
"</hotkey>"));"separator"==this.itemPull[e].type?n=' type="separator"':"disabled"==this.itemPull[e].state&&(u=' enabled="false"');"checkbox"==this.itemPull[e].type&&(n=' type="checkbox"'+(this.itemPull[e].checked?' checked="true"':""));"radio"==this.itemPull[e].type&&(n=' type="radio" group="'+this.itemPull[e].group+'" '+(this.itemPull[e].checked?' checked="true"':""));c+="<item id='"+m+"'"+r+n+g+h+u+">";c+=l;this.itemPull[e].complex&&(c+=this._readLevel(e));c+="</item>"}return c};
dhtmlXMenuObject.prototype.enableEffect=function(a,c,e){this._menuEffect="opacity"==a||"slide"==a||"slide+"==a?a:!1;this._pOpStyleIE=0<=navigator.userAgent.search(/MSIE\s[678]\.0/gi);for(var g in this.idPull)0===g.search(/polygon/)&&(this._pOpacityApply(g,this._pOpStyleIE?100:1),this.idPull[g].style.height="");this._pOpMax=("undefined"==typeof c?100:c)/(this._pOpStyleIE?1:100);this._pOpStyleName=this._pOpStyleIE?"filter":"opacity";this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":
"#";this._pSlSteps=this._pOpStyleIE?10:20;this._pSlTMTimeMax=e||50};dhtmlXMenuObject.prototype._showPolygonEffect=function(a){this._pShowHide(a,!0)};dhtmlXMenuObject.prototype._hidePolygonEffect=function(a){this._pShowHide(a,!1)};dhtmlXMenuObject.prototype._pOpacityApply=function(a,c){this.idPull[a].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",c||this.idPull[a]._op)};
dhtmlXMenuObject.prototype._pShowHide=function(a,c){if(this.idPull){if(null!=this.idPull[a]._tmShow){if(0<this.idPull[a]._step_h&&1==c||0>this.idPull[a]._step_h&&0==c)return;window.clearTimeout(this.idPull[a]._tmShow);this.idPull[a]._tmShow=null;this.idPull[a]._max_h=null}if(0!=c||"hidden"!=this.idPull[a].style.visibility&&"none"!=this.idPull[a].style.display){1==c&&"none"==this.idPull[a].style.display&&(this.idPull[a].style.visibility="hidden",this.idPull[a].style.display="");if(null==this.idPull[a]._max_h){this.idPull[a]._max_h=
parseInt(this.idPull[a].offsetHeight);this.idPull[a]._h=1==c?0:this.idPull[a]._max_h;this.idPull[a]._step_h=Math.round(this.idPull[a]._max_h/this._pSlSteps)*(1==c?1:-1);if(0==this.idPull[a]._step_h)return;this.idPull[a]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps);"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[a].op_tm=this.idPull[a]._step_tm,this.idPull[a].op_step=this._pOpMax/this._pSlSteps*(1==c?1:-1),this._pOpStyleIE&&(this.idPull[a].op_step=Math.round(this.idPull[a].op_step)),
this.idPull[a]._op=1==c?0:this._pOpMax):this.idPull[a]._op=this._pOpStyleIE?100:1;this._pOpacityApply(a);0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="0px");this.idPull[a].style.visibility="visible"}this._pEffectSet(a,this.idPull[a]._h+this.idPull[a]._step_h)}}};
dhtmlXMenuObject.prototype._pEffectSet=function(a,c){if(this.idPull){this.idPull[a]._tmShow&&window.clearTimeout(this.idPull[a]._tmShow);this.idPull[a]._h=Math.max(0,Math.min(c,this.idPull[a]._max_h));0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height=this.idPull[a]._h+"px");c+=this.idPull[a]._step_h;if("slide+"==this._menuEffect||"opacity"==this._menuEffect)this.idPull[a]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[a]._op+this.idPull[a].op_step)),this._pOpacityApply(a);if(0<
this.idPull[a]._step_h&&c<=this.idPull[a]._max_h||0>this.idPull[a]._step_h&&0<=c){var e=this;this.idPull[a]._tmShow=window.setTimeout(function(){e._pEffectSet(a,c)},this.idPull[a]._step_tm)}else{0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="");0>this.idPull[a]._step_h&&(this.idPull[a].style.visibility="hidden");if("slide+"==this._menuEffect||"opacity"==this._menuEffect)this.idPull[a]._op=0>this.idPull[a]._step_h?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(a);this.idPull[a]._tmShow=
null;this.idPull[a]._h=null;this.idPull[a]._max_h=null;this.idPull[a]._step_tm=null}}};
function dhtmlXRibbon(a){var c=this,e;this.conf={type:"ribbon",icons_path:a&&a.icons_path?a.icons_path:"",arrows_mode:a&&a.arrows_mode?a.arrows_mode:null,skin:"dhx_skyblue"};this._eventHandlers={};this._base=null;this._items={};this._tabbar=null;this.childIds=[];"string"==typeof a?e=a:a&&a.tagName?e=a:a&&a.parent&&(a.parent.tagName||"string"==typeof a.parent)&&(e=a.parent);this._doOnHighlight0=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),l=c._items[e._dhx_ribbonId];if(!l.conf.disable){if(c.items[l.type]&&
"function"==typeof c.items[l.type].mouseover&&1!=c.items[l.type].mouseover(l,c,a))return!1;/dhxrb_highlight0/.test(e.className)||(e.className+=" dhxrb_highlight0")}};this._doOffHighlight0=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),l=c._items[e._dhx_ribbonId];if(!l.conf.disable){if(c.items[l.type]&&"function"==typeof c.items[l.type].mouseout&&1!=c.items[l.type].mouseout(l,c,a))return!1;/dhxrb_highlight1/.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_highlight1/,
""));/dhxrb_highlight0/.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_highlight0/,""))}};this._doOnHighlight1=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),l=c._items[e._dhx_ribbonId];if(!l.conf.disable){c.callEvent("_showPopup",[l.id]);if(c.items[l.type]&&"function"==typeof c.items[l.type].mousedown&&1!=c.items[l.type].mousedown(l,c,a))return!1;/dhxrb_highlight1/.test(e.className)||(e.className+=" dhxrb_highlight1")}};this._doOffHighlight1=function(a){a=a||
event;var e=c._findItemByNode(a.target||a.srcElement),l=c._items[e._dhx_ribbonId];if(!l.conf.disable){if(c.items[l.type]&&"function"==typeof c.items[l.type].mouseup&&1!=c.items[l.type].mouseup(l,c,a))return!1;/dhxrb_highlight1/.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_highlight1/,""))}};this._doOnClick=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),e=c._items[e._dhx_ribbonId];e.conf.disable||c.items[e.type]&&"function"==typeof c.items[e.type].click&&c.items[e.type].click(e,
c,a)};this._doOnFocus=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),e=c._items[e._dhx_ribbonId];e.conf.disable||(c.callEvent("_showPopup",[e.id]),c.items[e.type]&&"function"==typeof c.items[e.type].focus&&c.items[e.type].focus(e,c,a))};this._doOnBlur=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),e=c._items[e._dhx_ribbonId];e.conf.disable||c.items[e.type]&&"function"==typeof c.items[e.type].blur&&c.items[e.type].blur(e,c,a)};this._doOnChange=function(a){a=
a||event;var e=c._findItemByNode(a.target||a.srcElement),e=c._items[e._dhx_ribbonId];e.conf.disable||c.items[e.type]&&"function"==typeof c.items[e.type].change&&c.items[e.type].change(e,c,a)};this._doOnKeydown=function(a){a=a||event;var e=c._findItemByNode(a.target||a.srcElement),e=c._items[e._dhx_ribbonId];e.conf.disable||c.items[e.type]&&"function"==typeof c.items[e.type].keydown&&c.items[e.type].keydown(e,c,a)};this._tabCustomApi={enable:function(a,e){var l=null;if(1!=(e||!1))for(var l=c._items[this._idd],
m=0;m<l.childIds.length;m++)c.enable(l.childIds[m]);return c._tabOriginalApi.enable.apply(this,[a])},disable:function(a,e){var l=null;if(0!=e)for(var l=c._items[this._idd],m=0;m<l.childIds.length;m++)c.disable(l.childIds[m]);return c._tabOriginalApi.disable.apply(this,[a])},close:function(a){c._removeTab(c._items[this._idd]);c._tabOriginalApi.close.apply(this,[a]);for(var e in c._tabOriginalApi)this[e]=null}};this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return c.callEvent("onSelect",
arguments)});this._tabbar.attachEvent("onTabClick",function(){return c.callEvent("onTabClick",arguments)});this._tabbar.attachEvent("onTabClose",function(){return c.callEvent("onTabClose",arguments)})};"string"==typeof e?this._base=document.getElementById(e):e&&e.tagName?this._base=e:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base));e=dhx4.skin||("undefined"!=
typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"dhx_skyblue";"object"==typeof a&&a.skin&&(e=a.skin);this.setSkin(e);dhx4._eventable(this);dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0});this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0});this._base.className+=" dhxrb_without_tabbar";this._base.innerHTML="<div class='dhxrb_background_area'></div>";null!=a&&(a.json?this.loadStruct(a.json,a.onload):a.xml?this.loadStruct(a.xml,a.onload):
this._renderData(a));this.unload=function(){for(var a=[],e=0;e<this.childIds.length;e++)a.push(this.childIds[e]);dhx4._enableDataLoading(this,null,null,null,"clear");dhx4._eventable(this,"clear");for(e=0;e<a.length;e++)"tab"==this._items[a[e]].type?this.tabs(a[e]).close(!1):this.removeItem(a[e]);this._tabbar&&(this._tabbar.unload(),this._tabbar=null);this._base.innerHTML="";this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/ig,
"");for(var l in this)this[l]=null;c=null}}dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()};
dhtmlXRibbon.prototype._renderData=function(a){var c=this._base.firstChild;null!=a&&(this.conf.icons_path=a.icons_path||this.conf.icons_path,a.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),c.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(c),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),null!=this.conf.arrows_mode&&this._tabbar.setArrowsMode(this.conf.arrows_mode),this.childIds=this._appendTabs(a.tabs)):a.items instanceof
Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(c.className)&&(c.className="dhxrb_background_area"),c.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(a.items,c.firstChild)),this.callEvent("_onHeightChanged",[]))};
dhtmlXRibbon.prototype._xmlToJson=function(a){a=a.lastChild||null;var c={},e=[];a&&"ribbon"==a.tagName&&(e=this._convertXmlNodeListIntoObject(a.childNodes));e[0]&&e[0].type&&"block"==e[0].type.toLowerCase()?c.items=e:c.tabs=e;return c};dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(a){var c,e,g=[],h;e=a.length;for(c=0;c<e;c++)(h=this._covertXmlNodeToObject(a[c]))&&g.push(h);return g};
dhtmlXRibbon.prototype._covertXmlNodeToObject=function(a){if(!a||!a.tagName||"item"!=a.tagName.toLowerCase()&&"tab"!=a.tagName.toLowerCase())return null;var c,e,g=a.attributes,h={};e=g.length;for(c=0;c<e;c++)switch(g[c].name){case "isbig":h.isbig=dhx4.s2b(g[c].value);break;case "state":h.state=dhx4.s2b(g[c].value);break;default:h[g[c].name]=g[c].value}a.childNodes.length&&("buttonCombo"==a.getAttribute("type")||"buttonSelect"==a.getAttribute("type")?h.data=a:"tab"==a.tagName.toLowerCase()?h.items=
this._convertXmlNodeListIntoObject(a.childNodes):h.list=this._convertXmlNodeListIntoObject(a.childNodes));return h};dhtmlXRibbon.prototype._appendTabs=function(a){var c,e,g,h=[];e=a.length;for(c=0;c<e;c++)g=this._addTab(a[c]),a[c].items instanceof Array&&(g.childIds=this._appendBlocks(a[c].items,g.base,g)),h.push(g.id);return h};
dhtmlXRibbon.prototype._addTab=function(a){var c,e={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(c in a)"items"!=c&&(e.conf[c]=a[c]);for(e.id=a.id?a.id:dhx4.newId();this._items[e.id];)e.id=dhx4.newId();this._tabbar.addTab(e.id,e.conf.text,e.conf.width,e.conf.position,e.conf.active);e.base.className="dhxrb_g_area";e.base._dhx_ribbonId=e.id;this.tabs(e.id).attachObject(e.base);this._changeApiForTab(this.tabs(e.id));return this._items[e.id]=
e};dhtmlXRibbon.prototype._changeApiForTab=function(a){for(var c in this._tabOriginalApi)this._tabOriginalApi[c]=this._tabOriginalApi[c]||a[c],a[c]=this._tabCustomApi[c]};dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null};
dhtmlXRibbon.prototype._appendBlocks=function(a,c,e){var g,h,l,m,n,r,u=[];e=e||null;h=a.length;for(g=0;g<h;g++)if("object"==typeof a[g]&&"block"==a[g].type){l=this._addBlock(a[g],c);if(a[g].list&&a[g].list instanceof Array)for(m=a[g].list,n=m.length,r=0;r<n;r++)this._addItem(l.id,null,null,m[r]);null!=e&&(l.parentId=e.id);l.conf.disable&&this.disable(l.id);u.push(l.id)}return u};
dhtmlXRibbon.prototype._addBlock=function(a,c){var e,g;e={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(g in a)"list"!=g&&"type"!=g&&"id"!=g&&(e.conf[g]=a[g]);for(e.id=a.id?a.id:dhx4.newId();this._items[e.id];)e.id=dhx4.newId();e.base.className="dhxrb_block_base";c.appendChild(e.base);e.contForItems.className="dhxrb_block_items";
e.contForText.className="dhxrb_block_label";e.base.appendChild(e.contForItems);e.conf.text&&(e.contForText.innerHTML=e.conf.text,"top"==e.conf.text_pos?e.base.insertBefore(e.contForText,e.contForItems):e.base.appendChild(e.contForText));e.base._dhx_ribbonId=e.id;return this._items[e.id]=e};
dhtmlXRibbon.prototype._addItem=function(a,c,e,g){a=this._items[a];var h;e=null;var l=this,m;if("newLevel"!=g.type&&!this.items[g.type])return null;"newLevel"==g.type?this._addNewLevel(a):"group"==a.type?(h=document.createElement("div"),h.className="dhxrb_in_group",a.base.appendChild(h)):g.isbig?(h=document.createElement("div"),h.className="dhxrb_big_button",a.contForItems.appendChild(h)):(c=this._getContainerForSmallItem(a),h=document.createElement("div"),h.className="rows"==a.conf.mode?"dhxrb_in_row":
"dhxrb_3rows_button",c.appendChild(h));if(h){this._attachEventForItem(h);m={icons_path:g.icons_path||this.conf.icons_path,skin:this.conf.skin};for(var n in g)m[n]=g[n];m.id||(m.id=dhx4.newId());for(;this._items[m.id];)m.id=dhx4.newId();e=this.items[m.type]&&this.items[m.type].render?this.items[m.type].render(h,m):null}null!=e&&(this._items[e.id]=e,e.parentId=a.id,a.childIds.push(e.id),h._dhx_ribbonId=e.id,m.onclick&&"function"==typeof m.onclick&&(this._eventHandlers[e.id]=this._eventHandlers[e.id]||
{},this._eventHandlers[e.id].onclick=m.onclick),e.callEvent=function(){l.callEvent.apply(l,arguments)},e._callHandler=function(){l._callHandler.apply(l,arguments)},this.items[m.type]&&"function"==typeof this.items[m.type].callAfterInit&&this.items[m.type].callAfterInit.apply(this,[e]));return e};dhtmlXRibbon.prototype._callHandler=function(a,c){this._eventHandlers[a]&&this._eventHandlers[a].onclick&&this._eventHandlers[a].onclick.apply(this,c)};dhtmlXRibbon.prototype.items={};
dhtmlXRibbon.prototype.items.button={render:function(a,c){var e,g;g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:c.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:c.skin}};for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);a.innerHTML="<img class='dhxrb_image"+(g.conf.img?"'":" dhxrb_invisible'")+" src='"+(g.conf.img?g.conf.icons_path+g.conf.img:"")+"' /><div class='dhxrb_label_button'>"+g.conf.text+"</div>";"function"==typeof this.afterRender&&this.afterRender(g);
g.conf.disable&&this.disable(g);return g},getText:function(a){return a.conf.text},setText:function(a,c){var e=a.base.childNodes[1];a.conf.text=c;e.innerHTML=c},setImage:function(a,c){a.conf.img=c;0==a.conf.disable&&(a.base.childNodes[0].src=a.conf.icons_path+a.conf.img)},setImageDis:function(a,c){a.conf.imgdis=c;1==a.conf.disable&&(a.base.childNodes[0].src=a.conf.icons_path+a.conf.imgdis)},mousedown:function(a,c,e){return!0},click:function(a,c,e){if(0!=e.button)return!1;c._callHandler(a.id,[a.id]);
a.callEvent("onClick",[a.id]);return!1},disable:function(a){var c=a.base.childNodes[0],e=a.base.childNodes[1];a.conf.imgdis&&(c.src=a.conf.icons_path+a.conf.imgdis,/\s?dhxrb_invisible/i.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_invisible/i,"")));/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style");return!0},enable:function(a){var c=a.base.childNodes[0],e=a.base.childNodes[1];a.conf.img?c.src=a.conf.icons_path+a.conf.img:/\s?dhxrb_invisible/i.test(c.className)||
(c.className+=" dhxrb_invisible");/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,""));return!0}};
dhtmlXRibbon.prototype.items.buttonTwoState={click:function(a,c,e){return!1},afterRender:function(a){a.conf.state&&this.setState(a,a.conf.state)},mouseover:function(a){/dhxrb_highlight0/.test(a.base.className)||(a.base.className+=" dhxrb_highlight0");return!1},mouseout:function(a){/dhxrb_highlight0/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight0/,""));return!1},mousedown:function(a,c,e){c._callHandler(a.id,[a.id,!a.conf.state]);this.setState(a,!a.conf.state,
!0);return!1},mouseup:function(a){return!1},setState:function(a,c,e){e=e||!1;(c=dhx4.s2b(c))?/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,""));a.conf.state=c;e&&a.callEvent("onStateChange",[a.id,a.conf.state])},getState:function(a){return 1==a.conf.state}};
dhtmlXRibbon.prototype.items.buttonSegment={click:function(a,c,e){return!1},mousedown:function(a,c,e){this.setState(a,c,!0);return!1},callAfterInit:function(a){if(a.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(a,this))a.conf.state&&(a.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(a,this,!1)},afterRender:function(){},setState:function(a,c,e){e=e||!1;var g=null;0==dhx4.s2b(a.conf.state)&&(g=this._getSelectedNeighbor(a,c),null!=g&&this._unSelect(g),
/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"),a.conf.state=!0,e&&(c._callHandler(a.id,[a.id,g?g.id:null]),c.callEvent("onStateChange",[a.id,g?g.id:null])))},remove:function(a,c){var e=dhx4.s2b(a.conf.state),g=null,h=0,l=c._items[a.parentId];if(e){for(;l.childIds[h]&&null==g;)e=c._items[l.childIds[h]],"buttonSegment"==e.type&&e!=a&&(g=e),h++;g&&this.setState(g,c)}},_unSelect:function(a){dhx4.s2b(a.conf.state)&&(/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=
a.base.className.replace(/\s?dhxrb_highlight1/,"")),a.conf.state=!1)},_getSelectedNeighbor:function(a,c){var e=c._items[a.parentId],g,h,l,m=null;h=e.childIds.length;for(g=0;g<h;g++)if(l=c._items[e.childIds[g]],"buttonSegment"==l.type&&l.conf.state){m=l;break}return m}};
dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(a){a.base.childNodes[1].innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>";a.menu=null;this.itemCollection.push(a);this._attachEventToWindow()},setText:function(a,c){var e=a.base.childNodes[1].lastChild;a.conf.text=c;a.base.childNodes[1].innerHTML=c;a.base.childNodes[1].appendChild(e)},setOptionText:function(a,c,e){null!=a.menu?a.menu.setItemText(c,e):this._loopThroughItems(a.conf.items,
c,e,!1)},getOptionText:function(a,c){return null!=a.menu?a.menu.getItemText(c):this._loopThroughItems(a.conf.items,c,null,!0)},_loopThroughItems:function(a,c,e,g){for(var h=0;h<a.length;h++){if(a[h].id==c)return 1!=g?(a[h].text=e,!0):a[h].text;if(null!=a[h].items){var l=this._loopThroughItems(a[h].items,c,e,g);if(null!=l)return l}}return null},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,
!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus);this._isAttachedEventInWindow=!1},_hideAllMenus:function(a){a=a||event;a=a.target||a.srcElement;for(var c=!0;null!=a&&1==c;)null!=a.className&&/SubLevelArea_Polygon/i.test(a.className)?c=!1:a=a.parentNode;
if(0!=c){a=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var e in a)c=a[e],c.menu instanceof dhtmlXMenuObject&&(c._skipHiding?c._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(c))}},mousedown:function(a,c,e){a._skipHiding=!0;this.showMenu(a);return!1},mouseup:function(a){return!1},click:function(){},setState:function(){},showMenu:function(a){var c=dhx4.absLeft(a.base),e=dhx4.absTop(a.base)+a.base.offsetHeight;a.menu instanceof dhtmlXMenuObject?a.menu.showContextMenu(c,
e):(a.menu=new dhtmlXMenuObject({parent:a.base,icons_path:a.conf.icons_path,context:!0,items:a.conf.items,skin:a.conf.skin}),a.conf.data&&(a.menu.loadStruct(a.conf.data),delete a.conf.data),a.menu.setAutoHideMode(!1),a.menu.attachEvent("onHide",function(c){null==c&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(a)}),a.menu.attachEvent("onShow",function(c){null==c&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(a)}),a.menu.attachEvent("onClick",function(c){a.callEvent("onClick",[c,
a.id])}),a.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(a))},hideMenu:function(a){a.menu instanceof dhtmlXMenuObject&&a.menu.hideContextMenu()},remove:function(a){a.menu instanceof dhtmlXMenuObject&&(a.menu.unload(),a.menu=null);a.base.oncontextmenu=null;a=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,a);-1!=a&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(a,1);0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&
this._detachEventFromWindow()},setSkin:function(a,c){a.menu instanceof dhtmlXMenuObject&&a.menu.setSkin(c)},_doOnHideMenu:function(a){a._skipHiding?a._skipHiding=!1:/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(a){/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1")}};
dhtmlXRibbon.prototype.items.group={render:function(a,c){var e,g;g={base:a,id:c.id,type:c.type,conf:{disable:!1,skin:c.skin},childIds:[]};a.className="dhxrb_group";for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);return g},callAfterInit:function(a){this._detachEventFromItem(a.base);var c,e,g=a.conf.list,h;e=g?g.length:0;for(c=0;c<e;c++)h=this._addItem(a.id,null,null,g[c]),null!=h&&(!(h=h.base.childNodes[1])||h.innerHTML||/\s?dhxrb_label_hide/i.test(h.className)||(h.className+=" dhxrb_label_hide"));
dhtmlXRibbon.prototype.items.group.normalize(a);a.conf.disable&&this.disable(a.id)},normalize:function(a){for(var c=a.base.children,e=c.length,g=!1,h=0,l=0;l<e;l++)if(!/dhxrb_separator_group/i.test(c[l].className)&&/dhxrb_item_hide/i.test(c[l].className))h++;else if(0==Math.ceil((l-h)/2)-Math.floor((l-h)/2)){if(/dhxrb_separator_group/i.test(c[l].className)){c[l].parentNode.removeChild(c[l]);g=!0;break}}else if(!/dhxrb_separator_group/i.test(c[l].className)){e=document.createElement("div");e.className=
"dhxrb_separator_groupp";a.base.insertBefore(e,c[l]);g=!0;break}g?this.normalize(a):(a=a.base.lastChild)&&/dhxrb_separator_group/i.test(a.className)&&a.parentNode.removeChild(a)},hideChild:function(a,c){var e=dhtmlXRibbon.prototype._indexOf(a.base.children,c.base);if(0==e)e++;else if(-1!=e)e--;else return;(e=a.base.children[e])&&/dhxrb_separator_group/i.test(e.className)&&e.parentNode.removeChild(e)},showChild:function(a){this.normalize(a)}};
dhtmlXRibbon.prototype.items.input={render:function(a,c){var e,g;g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:c.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:c.skin,value:""}};for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);a.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+g.conf.text+"</div>";"function"==typeof this.afterRender&&this.afterRender(g);g.conf.disable&&this.disable(g);g.conf.width&&this.setWidth(g,g.conf.width);
g.conf.value&&this.setValue(g,g.conf.value);return g},callAfterInit:function(a){var c=a.base.childNodes[0];this._detachEventFromItem(a.base);this._attachEventsToInput(c)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(a){a.conf.value=a.base.childNodes[0].value},keydown:function(a,c,e){13==e.keyCode&&(a.conf.value=a.base.childNodes[0].value,c.callEvent("onEnter",[a.id,a.conf.value]))},remove:function(a,c){c._detachEventsFromInput(a.base.childNodes[0])},
getValue:function(a){return a.base.childNodes[0].value},setValue:function(a,c){a.base.childNodes[0].value=c;a.conf.value=c},setWidth:function(a,c){a.base.childNodes[0].style.width=parseInt(c)+"px"},disable:function(a){var c=a.base.childNodes[1];a.base.childNodes[0].disabled=!0;/\s?dhxrb_disable_text_style/i.test(c.className)||(c.className+=" dhxrb_disable_text_style");return!0},enable:function(a){var c=a.base.childNodes[1];a.base.childNodes[0].disabled=!1;/\s?dhxrb_disable_text_style/i.test(c.className)&&
(c.className=c.className.replace(/\s?dhxrb_disable_text_style/i,""));return!0},getInput:function(a){return a.base.childNodes[0]}};dhtmlXRibbon.prototype.getInput=function(a){a=this._items[a];return null==a||"input"!=a.type?null:this.items[a.type].getInput(a)};
dhtmlXRibbon.prototype.items.checkbox={render:function(a,c){var e,g;g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:c.isbig?"bottom":"right",disable:!1,checked:!1}};for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);a.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+g.conf.text+"</div>";"function"==typeof this.afterRender&&this.afterRender(g);g.conf.checked&&this.check(g);return g},callAfterInit:function(a){a.conf.disable&&this.disable(a.id)},setText:dhtmlXRibbon.prototype.items.button.setText,
getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(a){return!1},mouseup:function(a){return!1},click:function(a,c,e){if(0!=e.button)return!1;"checkbox"==a.type&&(a.conf.checked?this.uncheck(a,!0):this.check(a,!0))},check:function(a,c){c=c||!1;"checkbox"==a.type&&(a.conf.checked=!0,/\s?dhxrb_checked/i.test(a.base.className)||(a.base.className+=" dhxrb_checked"),c&&a.callEvent("onCheck",[a.id,a.conf.checked]))},uncheck:function(a,c){c=c||!1;"checkbox"==a.type&&(a.conf.checked=!1,
/\s?dhxrb_checked/i.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_checked/i,"")),c&&a.callEvent("onCheck",[a.id,a.conf.checked]))},isChecked:function(a){return"checkbox"!=a.type?!1:1==a.conf.checked},disable:function(a){return!0},enable:function(a){return!0}};
dhtmlXRibbon.prototype.items.text={render:function(a,c){var e={base:a,id:c.id,type:c.type,conf:{text:""}},g;for(g in c)"id"!=g&&"type"!=g&&(e.conf[g]=c[g]);a.innerHTML="<div class='dhxrb_item_text'>"+e.conf.text+"</div>";"function"==typeof this.afterRender&&this.afterRender(e);return e},callAfterInit:function(a){this._detachEventFromItem(a.base)},getText:function(a){return a.conf.text},setText:function(a,c){a.conf.text=c;a.base.firstChild.innerHTML=a.conf.text}};
dhtmlXRibbon.prototype.items.buttonCombo={render:function(a,c){var e,g,h={};g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:"right",width:140,skin:c.skin,callEvent:!0}};for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);for(e in g.conf)"text"!=e&&"text_pos"!=e&&"disable"!=e&&"data"!=e&&(h[e]=g.conf[e]);g.base.className+=" dhxrb_buttoncombo_cont";g.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+g.conf.text+"</div>";h.parent=g.base.firstChild;
g.combo=new dhtmlXCombo(h);g.combo.setSkin(h.skin);g.combo.attachEvent("onChange",function(a,c){g._callHandler(g.id,[a,c]);1==g.conf.callEvent&&g.callEvent("onSelectOption",[g.id,a,c]);g.conf.callEvent=!0});g.conf.data&&(g.combo.load(g.conf.data),delete g.conf.data);"function"==typeof this.afterRender&&this.afterRender(g);g.conf.disable&&this.disable(g);return g},callAfterInit:function(a){this._detachEventFromItem(a.base)},disable:function(a){var c=a.base.lastChild;a.combo instanceof dhtmlXCombo&&
a.combo.disable();/\s?dhxrb_disable_text_style/i.test(c.className)||(c.className+=" dhxrb_disable_text_style");return!0},enable:function(a){var c=a.base.lastChild;a.combo instanceof dhtmlXCombo&&a.combo.enable();/\s?dhxrb_disable_text_style/i.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_disable_text_style/i,""));return!0},remove:function(a){a.combo instanceof dhtmlXCombo&&(a.combo.unload(),a.combo=null)},getValue:function(a){var c=null;a.combo instanceof dhtmlXCombo&&(c=a.combo.getSelectedValue());
return c},setValue:function(a,c,e){a.combo instanceof dhtmlXCombo&&(a.conf.callEvent=e,a.combo.setComboValue(c))},setSkin:function(a,c){a.combo instanceof dhtmlXCombo&&a.combo.setSkin(c)}};
dhtmlXRibbon.prototype.items.slider={render:function(a,c){var e,g,h={};g={base:a,id:c.id,type:c.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}};for(e in c)"id"!=e&&"onclick"!=e&&"type"!=e&&(g.conf[e]=c[e]);for(e in g.conf)"text"!=e&&"text_pos"!=e&&"isbig"!=e&&(h[e]=g.conf[e]);g.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+g.conf.text+"</div>";h.parent=g.base.firstChild.firstChild;
g.slider=new dhtmlXSlider(h);"function"==typeof this.afterRender&&this.afterRender(g);g.conf.disable&&this.disable(g);g.slider.attachEvent("onChange",function(a){g._callHandler(g.id,[a]);g.callEvent("onValueChange",[g.id,a])});return g},callAfterInit:function(a){this._detachEventFromItem(a.base)},setSkin:function(a,c){a.slider instanceof dhtmlXSlider&&a.slider.setSkin(c)},disable:function(a){var c=a.base.childNodes[1];a.slider instanceof dhtmlXSlider&&a.slider.disable();/\s?dhxrb_disable_text_style/i.test(c.className)||
(c.className+=" dhxrb_disable_text_style");return!0},enable:function(a){var c=a.base.childNodes[1];a.slider instanceof dhtmlXSlider&&a.slider.enable();/\s?dhxrb_disable_text_style/i.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_disable_text_style/i,""));return!0},remove:function(a){a.slider instanceof dhtmlXSlider&&(a.slider.unload(),a.slider=null)},getValue:function(a){var c=null;a.slider instanceof dhtmlXSlider&&(c=a.slider.getValue());return c},setValue:function(a,c){a.slider instanceof
dhtmlXSlider&&a.slider.setValue(c)}};dhtmlXRibbon.prototype.items._extends=function(a,c){for(var e in c)a[e]=a[e]||c[e];return a};
dhtmlXRibbon.prototype._addNewLevel=function(a){var c,e;"rows"==a.conf.mode?(c=a.contForItems.lastChild,c&&/dhxrb_block_rows/i.test(c.className)&&3>c.childNodes.length||(c=document.createElement("div"),c.className="dhxrb_block_rows",a.contForItems.appendChild(c)),e=document.createElement("div"),e.className="dhxrb_block_row",c.appendChild(e)):(e=document.createElement("div"),e.className="dhxrb_3rows_block",a.contForItems.appendChild(e))};
dhtmlXRibbon.prototype._attachEventForItem=function(a){"function"==typeof window.addEventListener?(a.addEventListener("mouseover",this._doOnHighlight0,!1),a.addEventListener("mouseout",this._doOffHighlight0,!1),a.addEventListener("mousedown",this._doOnHighlight1,!1),a.addEventListener("mouseup",this._doOffHighlight1,!1),a.addEventListener("click",this._doOnClick,!1)):(a.attachEvent("onmouseover",this._doOnHighlight0),a.attachEvent("onmouseout",this._doOffHighlight0),a.attachEvent("onmousedown",this._doOnHighlight1),
a.attachEvent("onmouseup",this._doOffHighlight1),a.attachEvent("onclick",this._doOnClick))};
dhtmlXRibbon.prototype._detachEventFromItem=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("mouseover",this._doOnHighlight0,!1),a.removeEventListener("mouseout",this._doOffHighlight0,!1),a.removeEventListener("mousedown",this._doOnHighlight1,!1),a.removeEventListener("mouseup",this._doOffHighlight1,!1),a.removeEventListener("click",this._doOnClick,!1)):(a.detachEvent("onmouseover",this._doOnHighlight0),a.detachEvent("onmouseout",this._doOffHighlight0),a.detachEvent("onmousedown",
this._doOnHighlight1),a.detachEvent("onmouseup",this._doOffHighlight1),a.detachEvent("onclick",this._doOnClick))};
dhtmlXRibbon.prototype._attachEventsToInput=function(a){"function"==typeof window.addEventListener?(a.addEventListener("focus",this._doOnFocus,!1),a.addEventListener("blur",this._doOnBlur,!1),a.addEventListener("change",this._doOnChange,!1),a.addEventListener("keydown",this._doOnKeydown,!1)):(a.attachEvent("onfocus",this._doOnFocus),a.attachEvent("onblur",this._doOnBlur),a.attachEvent("onchange",this._doOnChange),a.attachEvent("onkeydown",this._doOnKeydown))};
dhtmlXRibbon.prototype._detachEventsFromInput=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("focus",this._doOnFocus,!1),a.removeEventListener("blur",this._doOnBlur,!1),a.removeEventListener("change",this._doOnChange,!1),a.removeEventListener("keydown",this._doOnKeydown,!1)):(a.detachEvent("onfocus",this._doOnFocus),a.detachEvent("onblur",this._doOnBlur),a.detachEvent("onchange",this._doOnChange),a.detachEvent("onkeydown",this._doOnKeydown))};
dhtmlXRibbon.prototype._getContainerForSmallItem=function(a){var c=a.contForItems.lastChild,e=null;"rows"==a.conf.mode?c&&/\s?dhxrb_block_rows/i.test(c.className)?(e=c.lastChild,e||(e=document.createElement("div"),e.className="dhxrb_block_row",c.appendChild(e))):(c=document.createElement("div"),c.className="dhxrb_block_rows",a.contForItems.appendChild(c),e=document.createElement("div"),e.className="dhxrb_block_row",c.appendChild(e)):c&&/dhxrb_3rows_block/i.test(c.className)&&3>c.childNodes.length?
e=c:(e=document.createElement("div"),e.className="dhxrb_3rows_block",a.contForItems.appendChild(e));return e};dhtmlXRibbon.prototype._findItemByNode=function(a){for(;a&&!a._dhx_ribbonId;)a=a.parentNode;return a};dhtmlXRibbon.prototype._indexOf=function(a,c){var e,g;g=a.length;for(e=0;e<g;e++)if(a[e]==c)return e;return-1};
dhtmlXRibbon.prototype._removeItem=function(a){var c;c=-1;var e=this._items[a.parentId];"group"==a.type?this._removeGroup(a):(delete this._items[a.id],c=a.base.parentNode,this._detachEventFromItem(a.base),c.removeChild(a.base),"block"==e.type?c!=e.contForItems&&0==c.childNodes.length&&c.parentNode.removeChild(c):"group"==e.type&&dhtmlXRibbon.prototype.items.group.normalize(e),c=this._indexOf(e.childIds,a.id),-1!=c&&e.childIds.splice(c,1),this.items[a.type]&&"function"==typeof this.items[a.type].remove&&
this.items[a.type].remove(a,this))};dhtmlXRibbon.prototype._removeGroup=function(a){for(var c=[],e=this._items[a.parentId],g=a.base.parentNode,h=0;h<a.childIds.length;h++)c.push(this._items[a.childIds[h]]);for(h=0;h<c.length;h++)this._removeItem(c[h]);delete this._items[a.id];a.base.parentNode&&g.removeChild(a.base);0==g.childNodes.length&&g.parentNode.removeChild(g);c=this._indexOf(e.childIds,a.id);-1!=c&&e.childIds.splice(c,1);this.items[a.type]&&"function"==typeof this.items[a.type].remove&&this.items[a.type].remove(a)};
dhtmlXRibbon.prototype._removeBlock=function(a){for(var c=[],e=0;e<a.childIds.length;e++)c.push(this._items[a.childIds[e]]);for(e=0;e<c.length;e++)this._removeItem(c[e]);delete this._items[a.id];a.base.parentNode.removeChild(a.base);c=a.parentId?this._items[a.parentId]:this;a=this._indexOf(c.childIds,a.id);-1!=a&&c.childIds.splice(a,1)};
dhtmlXRibbon.prototype._removeTab=function(a,c){for(var e=[],g=0;g<a.childIds.length;g++)e.push(this._items[a.childIds[g]]);for(g=0;g<e.length;g++)this._removeBlock(e[g]);delete this._items[a.id];e=this._indexOf(this.childIds,a.id);-1!=e&&this.childIds.splice(e,1)};dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0};
dhtmlXRibbon.prototype._setSkinForItems=function(a){var c,e;for(c in this._items)e=this._items[c],e.conf.skin=a,dhtmlXRibbon.prototype.items[e.type]&&"function"==typeof dhtmlXRibbon.prototype.items[e.type].setSkin&&dhtmlXRibbon.prototype.items[e.type].setSkin(e,a)};
dhtmlXRibbon.prototype._setBlockText=function(a,c){a.conf.text=c;a.contForText.innerHTML=c;!c&&0!=c&&a.contForText.parentNode?a.contForText.parentNode.removeChild(a.contForText):a.contForText.parentNode||("top"==a.conf.text_pos?a.base.insertBefore(a.contForText,a.contForItems):a.base.appendChild(a.contForText))};
dhtmlXRibbon.prototype.hide=function(a){a=this._items[a];if((!this.items[a.type]||"function"!=typeof this.items[a.type].hide||1==this.items[a.type].hide(a))&&"tab"!=a.type){/\s?dhxrb_item_hide/i.test(a.base.className)||(a.base.className+=" dhxrb_item_hide");var c=this._items[a.parentId];c&&this.items[c.type]&&"function"==typeof this.items[c.type].hideChild&&this.items[c.type].hideChild(c,a)}};
dhtmlXRibbon.prototype.show=function(a){a=this._items[a];if((!this.items[a.type]||"function"!=typeof this.items[a.type].show||1==this.items[a.type].show(a))&&"tab"!=a.type){/\s?dhxrb_item_hide/i.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_item_hide/i,""));var c=this._items[a.parentId];c&&this.items[c.type]&&"function"==typeof this.items[c.type].showChild&&this.items[c.type].showChild(c,a)}};
dhtmlXRibbon.prototype.check=function(a,c){c=dhx4.s2b(c);var e=this._items[a];e&&!e.conf.checked&&"function"==typeof this.items[e.type].check&&(this.items[e.type].check(e),c&&this.callEvent("onCheck",[e.id,e.conf.checked]))};dhtmlXRibbon.prototype.uncheck=function(a,c){c=dhx4.s2b(c);var e=this._items[a];e&&e.conf.checked&&"function"==typeof this.items[e.type].uncheck&&(this.items[e.type].uncheck(e),c&&this.callEvent("onCheck",[e.id,e.conf.checked]))};
dhtmlXRibbon.prototype.isChecked=function(a){if((a=this._items[a])&&"function"==typeof this.items[a.type].isChecked)return this.items[a.type].isChecked(a)};
dhtmlXRibbon.prototype.disable=function(a,c){var e=this._items[a];if((!this.items[e.type]||"function"!=typeof this.items[e.type].disable||1==this.items[e.type].disable(e))&&"tab"!=e.type){if("block"==e.type||"group"==e.type)for(var g=0;g<e.childIds.length;g++)this.disable(e.childIds[g]);/\s?dhxrb_item_disable/i.test(e.base.className)||(e.base.className+=" dhxrb_item_disable");e.conf.disable=!0}};
dhtmlXRibbon.prototype.enable=function(a,c){var e=this._items[a];if((!this.items[e.type]||"function"!=typeof this.items[e.type].enable||1==this.items[e.type].enable(e))&&"tab"!=e.type){if("block"==e.type||"group"==e.type)for(q=0;q<e.childIds.length;q++)this.enable(e.childIds[q]);/\s?dhxrb_item_disable/i.test(e.base.className)&&(e.base.className=e.base.className.replace(/\s?dhxrb_item_disable/i,""));e.conf.disable=!1}};
dhtmlXRibbon.prototype.isEnabled=function(a){a=this._items[a];if(this.items[a.type]&&"function"==typeof this.items[a.type].isEnabled)return this.items[a.type].isEnabled(a);if("tab"!=a.type)return 1!=a.conf.disable};dhtmlXRibbon.prototype.isVisible=function(a){a=this._items[a];if(this.items[a.type]&&"function"==typeof this.items[a.type].isVisible)return this.items[a.type].isVisible(a);if("tab"!=a.type)return!/\s?dhxrb_item_hide/i.test(a.base.className)};
dhtmlXRibbon.prototype.setItemState=function(a,c,e){c=dhx4.s2b(c);e=dhx4.s2b(e);if((a=this._items[a])&&"function"==typeof this.items[a.type].setState)switch(a.type){case "buttonSegment":this.items[a.type].setState(a,this,e);break;default:this.items[a.type].setState(a,c,e)}};dhtmlXRibbon.prototype.getItemState=function(a){if((a=this._items[a])&&"function"==typeof this.items[a.type].getState)switch(a.type){case "buttonTwoState":case "buttonSegment":return this.items[a.type].getState(a)}return null};
dhtmlXRibbon.prototype.setIconPath=function(a){this.conf.icons_path=a};dhtmlXRibbon.prototype.removeItem=function(a){a=this._items[a];if(null!=a)switch(a.type){case "tab":break;case "block":this._removeBlock(a);break;case "group":this._removeGroup(a);break;default:this._removeItem(a)}};
dhtmlXRibbon.prototype.setSkin=function(a){a="string"==typeof a?a.toLowerCase():"";if(1==this._skinCollection[a]){var c,e=-1,g;c=this._base.className.match(/\S\w+/ig);if(c instanceof Array){for(g in this._skinCollection)if(-1==e)e=this._indexOf(c,"dhtmlxribbon_"+g);else break;e=-1==e?c.length:e}else c=[],e=0;c[e]="dhtmlxribbon_"+a;this._base.className=c.join(" ");this.conf.skin=a;null!=this._tabbar&&this._tabbar.setSkin(a);this._setSkinForItems(a)}};
dhtmlXRibbon.prototype.tabs=function(a){if(this._tabbar instanceof dhtmlXTabBar)return this._tabbar.tabs(a)};dhtmlXRibbon.prototype.getItemType=function(a){if(a=this._items[a])return a.type};dhtmlXRibbon.prototype.getValue=function(a){a=this._items[a];var c=void 0;a&&this.items[a.type]&&"function"==typeof this.items[a.type].getValue&&(c=this.items[a.type].getValue(a));return c};
dhtmlXRibbon.prototype.setValue=function(a,c,e){(a=this._items[a])&&this.items[a.type]&&"function"==typeof this.items[a.type].setValue&&this.items[a.type].setValue(a,c,!1===e?!1:!0)};dhtmlXRibbon.prototype.getItemText=function(a){return(a=this._items[a])?"tab"==a.type?this.tabs(a.id).getText():"block"==a.type?this.items.button.getText(a):this.items[a.type]&&"function"==typeof this.items[a.type].getText?this.items[a.type].getText(a):null:null};
dhtmlXRibbon.prototype.setItemText=function(a,c){var e=this._items[a];e&&("tab"==e.type?this.tabs(e.id).setText(c):"block"==e.type?this._setBlockText(e,c):this.items[e.type]&&"function"==typeof this.items[e.type].setText&&this.items[e.type].setText(e,c))};dhtmlXRibbon.prototype.setItemOptionText=function(a,c,e){a=this._items[a];"buttonSelect"==a.type&&this.items[a.type].setOptionText(a,c,e)};
dhtmlXRibbon.prototype.getItemOptionText=function(a,c){var e=this._items[a];return"buttonSelect"==e.type?this.items[e.type].getOptionText(e,c):null};dhtmlXRibbon.prototype.setItemImage=function(a,c){var e=this._items[a];null!=e&&null!=this.items[e.type]&&"function"==typeof this.items[e.type].setImage&&this.items[e.type].setImage(e,c)};
dhtmlXRibbon.prototype.setItemImageDis=function(a,c){var e=this._items[a];null!=e&&null!=this.items[e.type]&&"function"==typeof this.items[e.type].setImageDis&&this.items[e.type].setImageDis(e,c)};dhtmlXRibbon.prototype.getCombo=function(a){a=this._items[a];return null!=a&&"buttonCombo"==a.type?a.combo:null};
(function(){var a=dhtmlXRibbon.prototype.items;a.buttonTwoState=a._extends(a.buttonTwoState,a.button);a.buttonSelect=a._extends(a.buttonSelect,a.buttonTwoState);a.buttonSegment=a._extends(a.buttonSegment,a.buttonTwoState)})();
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_ribbon=function(a,c,e,g,h){"undefined"!=typeof h?a=h:(a=document.createElement("DIV"),a.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")));this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.ribbon=!0;this._updateIdx();this._adjustCont(this._idd);return a},dhtmlXCellObject.prototype.attachRibbon=function(a){if(null==
this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.callEvent("_onBeforeContentAttach",["ribbon"]);"undefined"==typeof a&&(a={});"undefined"==typeof a.skin&&(a.skin=this.conf.skin);a.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);var c=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){c._adjustCont(c._idd)});this._adjustCont();a=a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=
function(){this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon});
function dhtmlXToolbarObject(a,c){var e=this;this.conf={skin:c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue",align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if("object"==typeof a&&null!=a&&"undefined"==typeof a.tagName){if(null!=a.icons_path||null!=a.icon_path)this.conf.icons_path=a.icons_path||a.icon_path;null!=a.icons_size&&(this.conf.icons_size_autoload=
a.icons_size);null!=a.json&&(this.conf.json_autoload=a.json);null!=a.xml&&(this.conf.xml_autoload=a.xml);null!=a.onload&&(this.conf.onload_autoload=a.onload);if(null!=a.onclick||null!=a.onClick)this.conf.auto_onclick=a.onclick||a.onClick;null!=a.items&&(this.conf.items_autoload=a.items);null!=a.skin&&(this.conf.skin=a.skin);null!=a.align&&(this.conf.align_autostart=a.align);a=a.parent}for(this.cont="object"!=typeof a?document.getElementById(a):a;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);
a=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);window.dhx4.isIPad&&(this.cont.ontouchstart=function(a){a=a||event;if("input"==String(a.target.tagName||"").toLowerCase())return!0;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1});this.setSkin(this.conf.skin);this.objPull={};this.anyUsed="none";this._genStr=function(a){for(var c="dhxId_",e=0;e<a;e++)c+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*
Math.random()));return c};this.rootTypes="button buttonSelect buttonTwoState separator label slider text buttonInput".split(" ");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0});window.dhx4._eventable(this);this._getObj=function(a,c){for(var e=null,m=0;m<a.childNodes.length;m++)null!=a.childNodes[m].tagName&&String(a.childNodes[m].tagName).toLowerCase()==String(c).toLowerCase()&&(e=a.childNodes[m]);return e};this._addImgObj=function(a){var c=
document.createElement("IMG");0<a.childNodes.length?a.insertBefore(c,a.childNodes[0]):a.appendChild(c);return c};this._setItemImage=function(a,c,e){1==e?a.imgEn=c:a.imgDis=c;!a.state&&1==e||a.state&&0==e||(e=this._getObj(a.obj,"img"),null==e&&(e=this._addImgObj(a.obj)),e.src=this.conf.icons_path+c)};this._clearItemImage=function(a,c){1==c?a.imgEn="":a.imgDis="";if(!(!a.state&&1==c||a.state&&0==c)){var e=this._getObj(a.obj,"img");null!=e&&e.parentNode.removeChild(e)}};this._setItemText=function(a,
c){var e=this._getObj(a.obj,"div");null==c||0==c.length?null!=e&&e.parentNode.removeChild(e):(null==e&&(e=document.createElement("DIV"),e.className="dhxtoolbar_text",a.obj.appendChild(e)),e.innerHTML=c)};this._getItemText=function(a){a=this._getObj(a.obj,"div");return null!=a?a.innerHTML:""};this._enableItem=function(a){if(!a.state){a.state=!0;"buttonTwoState"==this.objPull[a.id].type&&1==this.objPull[a.id].obj.pressed?(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):
(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.obj.renderAs=a.obj.className);a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var c=this._getObj(a.obj,"img");""!=a.imgEn?(null==c&&(c=this._addImgObj(a.obj)),c.src=this.conf.icons_path+a.imgEn):null!=c&&c.parentNode.removeChild(c)}};this._disableItem=function(a){if(a.state){a.state=!1;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[a.id].type&&a.obj.pressed?"pres_":"")+"dis";a.obj.renderAs=
"dhx_toolbar_btn dhxtoolbar_btn_def";a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var c=this._getObj(a.obj,"img");""!=a.imgDis?(null==c&&(c=this._addImgObj(a.obj)),c.src=this.conf.icons_path+a.imgDis):null!=c&&c.parentNode.removeChild(c);null!=a.polygon&&"none"!=a.polygon.style.display&&(window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(a.id,
!0),this.callEvent("onButtonSelectHide",[a.obj.idd]));this.anyUsed="none"}};this.clearAll=function(){for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""))};this._doOnClick=function(a){e&&e.forEachItem&&e.forEachItem(function(a){"buttonSelect"==e.objPull[e.idPrefix+a].type&&(a=e.objPull[e.idPrefix+a],!0===a.arw._skip?a.arw._skip=!1:"none"!=a.polygon.style.display&&(a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",a.obj.className=a.obj.renderAs,a.arw.className=String(a.obj.renderAs).replace("btn",
"arw"),e.anyUsed="none",window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none"),"dhx_terrace"==e.conf.skin&&e._improveTerraceButtonSelect(a.id,!0),e.callEvent("onButtonSelectHide",[a.obj.idd])))})};window.dhx4.isIPad?document.addEventListener("touchstart",this._doOnClick,!1):"undefined"!=typeof window.addEventListener?window.addEventListener("mousedown",this._doOnClick,!1):document.body.attachEvent("onmousedown",this._doOnClick);
null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null);null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=
null);this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null);"function"==typeof this.conf.auto_onclick?this.attachEvent("onClick",this.conf.auto_onclick):"string"==typeof this.conf.auto_onclick&&"function"==typeof window[this.conf.auto_onclick]&&this.attachEvent("onClick",window[this.conf.auto_onclick]);return this}
dhtmlXToolbarObject.prototype.addSpacer=function(a){var c=this.idPrefix+a;if(null!=this._spacer){if(this._spacer.idd==a)return;if(this._spacer==this.objPull[c].obj.parentNode){for(var e=!0;e;){var g=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(g==a||0==this._spacer.childNodes.length)null!=this.objPull[c].arw&&this.base.appendChild(this.objPull[c].arw),e=!1}this._spacer.idd=a;this._fixSpacer();return}if(this.base==this.objPull[c].obj.parentNode){for(var e=!0,
h=null!=this.objPull[c].arw;e;)g=this.base.childNodes.length-1,1==h&&this.base.childNodes[g]==this.objPull[c].arw&&(e=!1),this.base.childNodes[g].idd==a&&(e=!1),e&&(0<this._spacer.childNodes.length?this._spacer.insertBefore(this.base.childNodes[g],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[g]));this._spacer.idd=a;this._fixSpacer();return}}else{c=null;for(g=0;g<this.base.childNodes.length;g++)this.base.childNodes[g]==this.objPull[this.idPrefix+a].obj&&(c=g,null!=this.objPull[this.idPrefix+
a].arw&&(c=g+1));if(null!=c){this._spacer=document.createElement("DIV");this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right";this._spacer.dir="ltr";for(this._spacer.idd=a;this.base.childNodes.length>c+1;)this._spacer.appendChild(this.base.childNodes[c+1]);this.cont.appendChild(this._spacer);this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};
dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;0<this._spacer.childNodes.length;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}};
dhtmlXToolbarObject.prototype._fixSpacer=function(){if("undefined"==typeof window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};
dhtmlXToolbarObject.prototype.getType=function(a){var c=this.getParentId(a);if(null!=c){var e=null;a=this.objPull[this.idPrefix+c]._listOptions[a];null!=a&&(e=null!=a.sep?"buttonSelectSeparator":"buttonSelectButton");return e}return null==this.objPull[this.idPrefix+a]?null:this.objPull[this.idPrefix+a].type};dhtmlXToolbarObject.prototype.getTypeExt=function(a){a=this.getType(a);return"buttonSelectButton"==a||"buttonSelectSeparator"==a?"buttonSelectButton"==a?"button":"separator":null};
dhtmlXToolbarObject.prototype.inArray=function(a,c){for(var e=0;e<a.length;e++)if(a[e]==c)return!0;return!1};dhtmlXToolbarObject.prototype.getParentId=function(a){var c=null,e;for(e in this.objPull)if(this.objPull[e]._listOptions)for(var g in this.objPull[e]._listOptions)g==a&&(c=String(e).replace(this.idPrefix,""));return c};
dhtmlXToolbarObject.prototype._addItem=function(a,c){"string"==typeof a.text&&(a.text=window.dhx4.trim(a.text),0==a.text.length&&(a.text=null));this._addItemToStorage(a,c);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.addButton=function(a,c,e,g,h){this._addItem({id:a,type:"button",text:e,img:g,imgdis:h},c)};dhtmlXToolbarObject.prototype.addText=function(a,c,e){this._addItem({id:a,type:"text",text:e},c)};
dhtmlXToolbarObject.prototype.addButtonSelect=function(a,c,e,g,h,l,m,n,r,u){for(var v=[],w=0;w<g.length;w++){var x={};g[w]instanceof Array?(x.id=g[w][0],x.type="obj"==g[w][1]?"button":"separator",x.text=g[w][2]||null,x.img=g[w][3]||null):g[w]instanceof Object&&null!=g[w]&&"undefined"!=typeof g[w].id&&"undefined"!=typeof g[w].type&&(x.id=g[w].id,x.type="obj"==g[w].type?"button":"separator",x.text=g[w].text,x.img=g[w].img);v.push(x)}this._addItem({id:a,type:"buttonSelect",text:e,img:h,imgdis:l,renderSelect:m,
openAll:n,options:v,maxOpen:r,mode:u},c)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(a,c,e,g,h){this._addItem({id:a,type:"buttonTwoState",img:g,imgdis:h,text:e},c)};dhtmlXToolbarObject.prototype.addSeparator=function(a,c){this._addItem({id:a,type:"separator"},c)};dhtmlXToolbarObject.prototype.addSlider=function(a,c,e,g,h,l,m,n,r){this._addItem({id:a,type:"slider",length:e,valueMin:g,valueMax:h,valueNow:l,textMin:m,textMax:n,toolTip:r},c)};
dhtmlXToolbarObject.prototype.addInput=function(a,c,e,g){this._addItem({id:a,type:"buttonInput",value:e,width:g},c)};dhtmlXToolbarObject.prototype.forEachItem=function(a){for(var c in this.objPull)this.inArray(this.rootTypes,this.objPull[c].type)&&a(this.objPull[c].id.replace(this.idPrefix,""))};
(function(){for(var a="isVisible enableItem disableItem isEnabled setItemText getItemText setItemToolTip getItemToolTip getInput setItemImage setItemImageDis clearItemImage clearItemImageDis setItemState getItemState setItemToolTipTemplate getItemToolTipTemplate setValue getValue setMinValue getMinValue setMaxValue getMaxValue setWidth getWidth setMaxOpen".split(" "),c=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],e=function(a,c){return function(e,
g,h){e=this.idPrefix+e;return null!=this.objPull[e][a]?this.objPull[e][a].call(this.objPull[e],g,h):c}},g=0;g<a.length;g++){var h=a[g];dhtmlXToolbarObject.prototype[h]=e(h,c[g])}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;null!=this.objPull[a]&&null!=this.objPull[a].showItem&&(this.objPull[a].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())};
dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;null!=this.objPull[a]&&null!=this.objPull[a].hideItem&&(this.objPull[a].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};
dhtmlXToolbarObject.prototype._getPosition=function(a,c){if(null==this.objPull[this.idPrefix+a])return null;for(var e=null,g=0,h=0;h<this.base.childNodes.length;h++)null!=this.base.childNodes[h].idd&&(this.base.childNodes[h].idd==a&&(e=g),g++);if(!e&&null!=this._spacer)for(h=0;h<this._spacer.childNodes.length;h++)null!=this._spacer.childNodes[h].idd&&(this._spacer.childNodes[h].idd==a&&(e=g),g++);return e};dhtmlXToolbarObject.prototype.setPosition=function(a,c){this._setPosition(a,c)};
dhtmlXToolbarObject.prototype._setPosition=function(a,c){if(null!=this.objPull[this.idPrefix+a]){isNaN(c)&&(c=this.base.childNodes.length);0>c&&(c=0);var e=null;this._spacer&&(e=this._spacer.idd,this.removeSpacer());var g=this.objPull[this.idPrefix+a];this.base.removeChild(g.obj);g.arw&&this.base.removeChild(g.arw);var h=this._getIdByPosition(c,!0);null==h[0]?(this.base.appendChild(g.obj),g.arw&&this.base.appendChild(g.arw)):(this.base.insertBefore(g.obj,this.base.childNodes[h[1]]),g.arw&&this.base.insertBefore(g.arw,
this.base.childNodes[h[1]+1]));null!=e&&this.addSpacer(e)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(a,c){for(var e=null,g=0,h=0,l=0;l<this.base.childNodes.length;l++)null!=this.base.childNodes[l].idd&&null==e&&g++==a&&(e=this.base.childNodes[l].idd),null==e&&h++;return 1==c?[e,null==e?null:h]:e};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};
dhtmlXToolbarObject.prototype._removeItem=function(a){var c=this.getType(a);a=this.idPrefix+a;var e=this.objPull[a];"button"==c&&(e.obj._doOnMouseOver=null,e.obj._doOnMouseOut=null,e.obj._doOnMouseUp=null,e.obj._doOnMouseUpOnceAnywhere=null,e.obj.onclick=null,e.obj.onmouseover=null,e.obj.onmouseout=null,e.obj.onmouseup=null,e.obj.onmousedown=null,e.obj.onselectstart=null,e.obj.renderAs=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.state=null,e.img=null,e.imgEn=null,
e.imgDis=null,e.type=null,e.enableItem=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemText=null,e.getItemText=null,e.setItemImage=null,e.clearItemImage=null,e.setItemImageDis=null,e.clearItemImageDis=null,e.setItemToolTip=null,e.getItemToolTip=null);"buttonTwoState"==c&&(e.obj._doOnMouseOver=null,e.obj._doOnMouseOut=null,e.obj.onmouseover=null,e.obj.onmouseout=null,e.obj.onmousedown=null,e.obj.onselectstart=null,e.obj.renderAs=null,e.obj.idd=null,
e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.state=null,e.img=null,e.imgEn=null,e.imgDis=null,e.type=null,e.enableItem=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemText=null,e.getItemText=null,e.setItemImage=null,e.clearItemImage=null,e.setItemImageDis=null,e.clearItemImageDis=null,e.setItemToolTip=null,e.getItemToolTip=null,e.setItemState=null,e.getItemState=null);if("buttonSelect"==c){for(var g in e._listOptions)this.removeListOption(a,
g);e._listOptions=null;e.polygon._ie6cover&&(document.body.removeChild(e.polygon._ie6cover),e.polygon._ie6cover=null);e.p_tbl.removeChild(e.p_tbody);e.polygon.removeChild(e.p_tbl);e.polygon.onselectstart=null;document.body.removeChild(e.polygon);e.p_tbody=null;e.p_tbl=null;e.polygon=null;e.obj.onclick=null;e.obj.onmouseover=null;e.obj.onmouseout=null;e.obj.onmouseup=null;e.obj.onmousedown=null;e.obj.onselectstart=null;e.obj.idd=null;e.obj.iddPrefix=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;
e.arw.onclick=null;e.arw.onmouseover=null;e.arw.onmouseout=null;e.arw.onmouseup=null;e.arw.onmousedown=null;e.arw.onselectstart=null;e.arw.parentNode.removeChild(e.arw);e.arw=null;e.renderSelect=null;e.state=null;e.type=null;e.id=null;e.img=null;e.imgEn=null;e.imgDis=null;e.openAll=null;e._isListButton=null;e._separatorButtonSelectObject=null;e._buttonButtonSelectObject=null;e.setWidth=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemText=
null;e.getItemText=null;e.setItemImage=null;e.clearItemImage=null;e.setItemImageDis=null;e.clearItemImageDis=null;e.setItemToolTip=null;e.getItemToolTip=null;e.addListOption=null;e.removeListOption=null;e.showListOption=null;e.hideListOption=null;e.isListOptionVisible=null;e.enableListOption=null;e.disableListOption=null;e.isListOptionEnabled=null;e.setListOptionPosition=null;e.getListOptionPosition=null;e.setListOptionImage=null;e.getListOptionImage=null;e.clearListOptionImage=null;e.setListOptionText=
null;e.getListOptionText=null;e.setListOptionToolTip=null;e.getListOptionToolTip=null;e.forEachListOption=null;e.getAllListOptions=null;e.setListOptionSelected=null;e.getListOptionSelected=null}"buttonInput"==c&&(e.obj.childNodes[0].onkeydown=null,e.obj.removeChild(e.obj.childNodes[0]),e.obj.w=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.type=null,e.enableItem=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemToolTip=
null,e.getItemToolTip=null,e.setWidth=null,e.getWidth=null,e.setValue=null,e.getValue=null,e.setItemText=null,e.getItemText=null);if("slider"==c){window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",e.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",e.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",
e.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",e.pen._doOnMouseMoveEnd));e.pen.allowMove=null;e.pen.initXY=null;e.pen.maxX=null;e.pen.minX=null;e.pen.nowX=null;e.pen.newNowX=null;e.pen.valueMax=null;e.pen.valueMin=null;e.pen.valueNow=null;e.pen._definePos=null;e.pen._detectLimits=null;e.pen._doOnMouseMoveStart=null;e.pen._doOnMouseMoveEnd=null;e.pen.onmousedown=null;e.obj.removeChild(e.pen);e.pen=null;e.label.tip=null;document.body.removeChild(e.label);e.label=null;e.obj.onselectstart=
null;for(e.obj.idd=null;0<e.obj.childNodes.length;)e.obj.removeChild(e.obj.childNodes[0]);e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.state=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.setItemToolTipTemplate=null;e.getItemToolTipTemplate=null;e.setMaxValue=null;e.setMinValue=null;e.getMaxValue=null;e.getMinValue=null;e.setValue=null;e.getValue=null;e.showItem=null;e.hideItem=null;e.isVisible=null}"separator"==c&&(e.obj.onselectstart=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),
e.obj=null,e.id=null,e.type=null,e.showItem=null,e.hideItem=null,e.isVisible=null);"text"==c&&(e.obj.onselectstart=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.type=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setWidth=null,e.setItemText=null,e.getItemText=null);this.objPull[this.idPrefix+a]=null;delete this.objPull[this.idPrefix+a]};
(function(){for(var a="addListOption removeListOption showListOption hideListOption isListOptionVisible enableListOption disableListOption isListOptionEnabled setListOptionPosition getListOptionPosition setListOptionText getListOptionText setListOptionToolTip getListOptionToolTip setListOptionImage getListOptionImage clearListOptionImage forEachListOption getAllListOptions setListOptionSelected getListOptionSelected".split(" "),c=function(a){return function(c,e,g,r,u,v){c=this.idPrefix+c;if(null!=
this.objPull[c]&&"buttonSelect"==this.objPull[c].type)return this.objPull[c][a].call(this.objPull[c],e,g,r,u,v)}},e=0;e<a.length;e++){var g=a[e];dhtmlXToolbarObject.prototype[g]=c(g)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(a,c){return a+c};
dhtmlXToolbarObject.prototype._separatorObject=function(a,c,e){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(c);this.obj.title=e.title||"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};window.dhx4.isIPad&&(this.obj.ontouchstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1});
a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};return this};
dhtmlXToolbarObject.prototype._textObject=function(a,c,e){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(c);this.obj.title=e.title||"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};window.dhx4.isIPad&&(this.obj.ontouchstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1});
this.obj.innerHTML=e.text||"";a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(a){this.obj.innerHTML=a};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(a){this.obj.style.width=a+"px"};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._buttonObject=function(a,c,e){this.id=a.idPrefix+c;this.state=null!=e.enabled?!1:!0;this.imgEn=e.img||"";this.imgDis=e.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=e.hidden?"none":"";this.obj.allowClick=!1;this.obj.extAction=e.action||null;this.obj.renderAs=this.obj.className;this.obj.idd=
String(c);this.obj.title=e.title||"";this.obj.pressed=!1;this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=e.text?"<div class='dhxtoolbar_text'>"+e.text+"</div>":"");var g=this;this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=!0;0!=g.state&&
"none"==a.anyUsed&&(this.renderAs=this.className="dhx_toolbar_btn dhxtoolbar_btn_over")};this.obj._doOnMouseOut=function(){this.allowClick=!1;0!=g.state&&"none"==a.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.renderAs)};this.obj.onclick=function(c){if(0!=g.state&&0!=this.allowClick){c=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](c)}catch(e){}a&&a.callEvent&&a.callEvent("onClick",[c])}};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=
function(c){if(0==g.state)return c=c||event,c.preventDefault?c.preventDefault():c.returnValue=!1,c.cancelBubble=!0,!1;if("none"==a.anyUsed)return a.anyUsed=this.idd,this.className="dhx_toolbar_btn dhxtoolbar_btn_pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){a.anyUsed="none";this._doOnMouseOut()},!1};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(e){if(0!=g.state&&("none"==a.anyUsed||a.anyUsed==this.idd)&&(e=a.anyUsed,this._doOnMouseUp(),
window.dhx4.isIPad&&"none"!=e)){if(this.extAction){var l=this;window.setTimeout(function(){try{window[l.extAction](c)}catch(a){}l=null},1)}a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")])}};window.dhx4.isIPad&&(this.obj.ontouchmove=function(a){this._doOnMouseUp()});this.obj._doOnMouseUp=function(){a.anyUsed="none";this.className=this.renderAs;this.pressed=!1};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=
function(){this._doOnMouseOut()}};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(c){a._setItemText(this,c)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=
function(c){a._setItemImage(this,c,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(c){a._setItemImage(this,c,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._buttonSelectObject=function(a,c,e){this.id=a.idPrefix+c;this.state=null!=e.enabled?"true"==e.enabled?!0:!1:!0;this.imgEn=e.img||"";this.imgDis=e.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.mode=e.mode||"button";"select"==this.mode?(this.openAll=!0,this.renderSelect=!1,e.text&&0!=e.text.length||(e.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(e.openAll),this.renderSelect=null==e.renderSelect?!0:window.dhx4.s2b(e.renderSelect));
this.maxOpen=isNaN(e.maxOpen?e.maxOpen:"")?null:e.maxOpen;this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!a._sbw){var c=document.createElement("DIV");c.className="dhxtoolbar_maxopen_test";document.body.appendChild(c);var e=document.createElement("DIV");e.className="dhxtoolbar_maxopen_test2";c.appendChild(e);a._sbw=c.offsetWidth-e.offsetWidth;c.removeChild(e);document.body.removeChild(c)}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=!1;this.obj.extAction=e.action||
null;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=e.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.idd=String(c);this.obj.title=e.title||"";this.callEvent=this.obj.pressed=!1;this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=e.text?"<div class='dhxtoolbar_text'>"+e.text+"</div>":
"");a.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};a.base.appendChild(this.arw);var g=this;this.obj.onmouseover=function(c){"none"==a.anyUsed&&g.state&&(g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over",
g.obj.className=g.obj.renderAs,g.arw.className=String(g.obj.renderAs).replace("btn","arw"))};this.obj.onmouseout=function(){g.obj.allowClick=!1;"none"==a.anyUsed&&g.state&&(g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",g.obj.className=g.obj.renderAs,g.arw.className=String(g.obj.renderAs).replace("btn","arw"),g.callEvent=!1)};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;1!=this.openAll&&(this.obj.onclick=function(c){if(g.obj.allowClick&&g.state&&"none"==a.anyUsed){c=
g.obj.idd.replace(a.idPrefix,"");if(g.obj.extAction)try{window[g.obj.extAction](c)}catch(e){}a.callEvent("onClick",[c])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(c){"none"==a.anyUsed&&g.state&&(g.obj.allowClick=!0,g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",g.callEvent=!0)},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(c){c=c||event;c.cancelBubble=!0;if("none"==a.anyUsed&&g.state&&(g.obj.className=
g.obj.renderAs,g.arw.className=String(g.obj.renderAs).replace("btn","arw"),window.dhx4.isIPad)){if(this.extAction){var e=this;window.setTimeout(function(){try{window[e.extAction](h)}catch(a){}e=null},1)}if(g.callEvent){var h=g.obj.idd.replace(a.idPrefix,"");a.callEvent("onClick",[h])}}});window.dhx4.isIPad&&(this.obj.ontouchmove=this.obj.onmouseout);this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(c){c=c||event;var e=0===this.className.indexOf("dhx_toolbar_arw")?this:this.nextSibling;
e._skip?(c=c||event,c.cancelBubble=!0):e._skip=!0;if(g.state){if(a.anyUsed==g.obj.idd)g.obj.className=g.obj.renderAs,g.arw.className=String(g.obj.renderAs).replace("btn","arw"),a.anyUsed="none",window.dhx4.zim.clear(g.polygon._idd),g.polygon.style.display="none",g.polygon._ie6cover&&(g.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(g.id,!0),a.callEvent("onButtonSelectHide",[g.obj.idd]);else{"none"!=a.anyUsed&&"buttonSelect"==a.objPull[a.idPrefix+
a.anyUsed].type&&(c=a.objPull[a.idPrefix+a.anyUsed],"none"!=c.polygon.style.display&&(c.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",c.obj.className=c.obj.renderAs,c.arw.className=String(g.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(c.polygon._idd),c.polygon.style.display="none",c.polygon._ie6cover&&(c.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(c.id,!0),a.callEvent("onButtonSelectHide",[c.obj.idd])));g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";
g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.anyUsed=g.obj.idd;g.polygon.style.top="0px";g.polygon.style.visibility="hidden";g.polygon.style.zIndex=window.dhx4.zim.reserve(g.polygon._idd);g.polygon.style.display="";"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(g.id,!1);g._fixMaxOpenHeight(g.maxOpen||null);a._autoDetectVisibleArea();c=window.dhx4.absTop(g.obj)+g.obj.offsetHeight+a.conf.sel_ofs_y;e=g.polygon.offsetHeight;if(c+e>a.tY2){var h=null!=g.maxOpen?Math.floor((a.tY2-c)/
22):0;1<=h?g._fixMaxOpenHeight(h):(c=window.dhx4.absTop(g.obj)-e-a.conf.sel_ofs_y,0>c&&(c=0))}g.polygon.style.top=c+"px";a.rtl?g.polygon.style.left=window.dhx4.absLeft(g.obj)+g.obj.offsetWidth-g.polygon.offsetWidth+a.conf.sel_ofs_x+"px":(c=document.body.scrollLeft+(window.innerWidth||document.body.clientWidth),e=window.dhx4.absLeft(g.obj)+a.conf.sel_ofs_x,e+g.polygon.offsetWidth>c&&(e=window.dhx4.absLeft(g.arw)+g.arw.offsetWidth-g.polygon.offsetWidth),g.polygon.style.left=Math.max(e,5)+"px");g.polygon.style.visibility=
"visible";g.polygon._ie6cover&&(g.polygon._ie6cover.style.left=g.polygon.style.left,g.polygon._ie6cover.style.top=g.polygon.style.top,g.polygon._ie6cover.style.width=g.polygon.offsetWidth+"px",g.polygon._ie6cover.style.height=g.polygon.offsetHeight+"px",g.polygon._ie6cover.style.display="");a.callEvent("onButtonSelectShow",[g.obj.idd])}return!1}};this.arw.onclick=function(a){a=a||event;a.cancelBubble=!0};this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(a){a=a||event;a.cancelBubble=!0};
!0===this.openAll&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,window.dhx4.isIPad&&(this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend));this.obj.iddPrefix=a.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(c){var e="auto",h=!1;if(null!==c){var r=0,u;for(u in this._listOptions)r++;r>c?(this._ph=22*c,e=this._ph+"px"):h=!0}this.polygon.style.width="auto";this.polygon.style.height="auto";
h||null==g.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+a._sbw+"px",this.polygon.style.height=e)};this._separatorButtonSelectObject=function(a,c,e){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(a){a=a||event;
a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};isNaN(e)?e=g.p_tbody.childNodes.length+1:1>e&&(e=1);e>g.p_tbody.childNodes.length?g.p_tbody.appendChild(this.obj.tr):g.p_tbody.insertBefore(this.obj.tr,g.p_tbody.childNodes[e-1]);this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td.appendChild(this.obj.sep);
g._listOptions[a]=this.obj;return this};this._buttonButtonSelectObject=function(c,e,h){var r=!0;"undefined"!=typeof e.enabled?r=window.dhx4.s2b(e.enabled):"undefined"!=typeof e.disabled&&(r=window.dhx4.s2b(e.disabled));this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=r;this.obj.tr.extAction=e.action||null;this.obj.tr._selected=null!=e.selected;this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&g.renderSelect?" tr_btn_selected":"":" tr_btn_disabled");this.obj.tr.onselectstart=
function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.tr.idd=String(c);isNaN(h)?h=g.p_tbody.childNodes.length+1:1>h&&(h=1);h>g.p_tbody.childNodes.length?g.p_tbody.appendChild(this.obj.tr):g.p_tbody.insertBefore(this.obj.tr,g.p_tbody.childNodes[h-1]);this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td_b=document.createElement("TD");
this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b));null!=e.img?(this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+a.conf.icons_path+e.img+"' border='0'>",this.obj.tr._img=e.img):this.obj.td_a.innerHTML="&nbsp;";this.obj.td_b.innerHTML=
"<div class='btn_sel_text'>"+(null!=e.text?e.text:e.itemText||"")+"</div>";this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){!this.en||this._selected&&g.renderSelect||(this.className="tr_btn tr_btn_over")};this.obj.tr.onmouseout=function(){this.en&&(this._selected&&g.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")};this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(c){c=c||event;
c.cancelBubble=!0;if(this.en){g.setListOptionSelected(this.idd.replace(a.idPrefix,""));g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";g.obj.className=g.obj.renderAs;g.arw.className=String(g.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(g.polygon._idd);g.polygon.style.display="none";g.polygon._ie6cover&&(g.polygon._ie6cover.style.display="none");"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(g.id,!0);a.anyUsed="none";a.callEvent("onButtonSelectHide",[g.obj.idd]);c=this.idd.replace(a.idPrefix,
"");if(this.extAction)try{window[this.extAction](c)}catch(e){}a.callEvent("onClick",[c])}};g._listOptions[c]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+a.conf.skin+" dhxtoolbar_icons_"+a.conf.iconSize;this.polygon.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.polygon.onmousedown=function(a){a=a||event;a.cancelBubble=!0};this.polygon.style.overflowY=
"auto";this.polygon._idd=window.dhx4.newId();window.dhx4.isIPad&&(this.polygon.ontouchstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1});this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(null!=e.options)for(c=0;c<e.options.length;c++){var h=
"_"+(e.options[c].type||"")+"ButtonSelectObject";null==e.options[c].id&&(e.options[c].id=a._genStr(24));"function"==typeof this[h]&&new this[h](e.options[c].id,e.options[c])}document.body.appendChild(this.polygon);window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter=
"alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover));this.setWidth=function(a){this.obj.style.width=a-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};
this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(c){a._setItemText(this,c)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(c){a._setItemImage(this,c,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(c){a._setItemImage(this,
c,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a;this.arw.title=a};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(a,c,e,g,h){"button"!=e&&"separator"!=e||new this["_"+e+"ButtonSelectObject"](a,{id:a,type:e,text:g,img:h},c)};this.removeListOption=function(a){if(this._isListButton(a,!0)){var c=this._listOptions[a];if(null!=c.td_a&&null!=c.td_b){c.td_a.onselectstart=null;for(c.td_b.onselectstart=null;0<
c.td_a.childNodes.length;)c.td_a.removeChild(c.td_a.childNodes[0]);for(;0<c.td_b.childNodes.length;)c.td_b.removeChild(c.td_b.childNodes[0]);c.tr.onselectstart=null;c.tr.onmouseover=null;c.tr.onmouseout=null;for(c.tr.onclick=null;0<c.tr.childNodes.length;)c.tr.removeChild(c.tr.childNodes[0]);c.tr.parentNode.removeChild(c.tr);c.td_a=null;c.td_b=null}else{c.sep.onselectstart=null;c.td.onselectstart=null;for(c.tr.onselectstart=null;0<c.td.childNodes.length;)c.td.removeChild(c.td.childNodes[0]);for(;0<
c.tr.childNodes.length;)c.tr.removeChild(c.tr.childNodes[0]);c.tr.parentNode.removeChild(c.tr);c.sep=null;c.td=null}c.tr=null;this._listOptions[a]=null;try{delete this._listOptions[a]}catch(e){}}};this.showListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="")};this.hideListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="none")};this.isListOptionVisible=function(a){if(this._isListButton(a,!0))return"none"!=this._listOptions[a].tr.style.display};
this.enableListOption=function(c){this._isListButton(c)&&(this._listOptions[c].tr.en=!0,this._listOptions[c].tr.className="tr_btn"+(this._listOptions[c].tr._selected&&a.renderSelect?" tr_btn_selected":""))};this.disableListOption=function(a){this._isListButton(a)&&(this._listOptions[a].tr.en=!1,this._listOptions[a].tr.className="tr_btn tr_btn_disabled")};this.isListOptionEnabled=function(a){if(this._isListButton(a))return this._listOptions[a].tr.en};this.setListOptionPosition=function(a,c){if(this._listOptions[a]&&
this.getListOptionPosition(a)!=c&&!isNaN(c)){1>c&&(c=1);var e=this._listOptions[a].tr;this.p_tbody.removeChild(e);c>this.p_tbody.childNodes.length?this.p_tbody.appendChild(e):this.p_tbody.insertBefore(e,this.p_tbody.childNodes[c-1])}};this.getListOptionPosition=function(a){var c=-1;if(!this._listOptions[a])return c;for(var e=0;e<this.p_tbody.childNodes.length;e++)this.p_tbody.childNodes[e]==this._listOptions[a].tr&&(c=e+1);return c};this.setListOptionImage=function(c,e){this._isListButton(c)&&(this._listOptions[c].tr.childNodes[a.rtl?
1:0].innerHTML="<img src='"+a.conf.icons_path+e+"' class='btn_sel_img'>")};this.getListOptionImage=function(c){if(this._isListButton(c)){c=this._listOptions[c].tr.childNodes[a.rtl?1:0];var e=null;0<c.childNodes.length&&(e=c.childNodes[0].src);return e}};this.clearListOptionImage=function(c){if(this._isListButton(c)){for(c=this._listOptions[c].tr.childNodes[a.rtl?1:0];0<c.childNodes.length;)c.removeChild(c.childNodes[0]);c.innerHTML="&nbsp;"}};this.setListOptionText=function(c,e){this._isListButton(c)&&
(this._listOptions[c].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML=e)};this.getListOptionText=function(c){if(this._isListButton(c))return this._listOptions[c].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML};this.setListOptionToolTip=function(a,c){this._isListButton(a)&&(this._listOptions[a].tr.title=c)};this.getListOptionToolTip=function(a){if(this._isListButton(a))return this._listOptions[a].tr.title};this.forEachListOption=function(a){for(var c in this._listOptions)a(c)};this.getAllListOptions=
function(){var a=[],c;for(c in this._listOptions)a[a.length]=c;return a};this.setListOptionSelected=function(a){for(var c in this._listOptions){var e=this._listOptions[c];null!=e.td_a&&null!=e.td_b&&e.tr.en&&(c==a?(e.tr._selected=!0,e.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(e.tr._img?this.setItemImage(e.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(a)))):(e.tr._selected=!1,e.tr.className="tr_btn"))}};this.getListOptionSelected=
function(){var a=null,c;for(c in this._listOptions)1==this._listOptions[c].tr._selected&&(a=c);return a};this._isListButton=function(a,c){return null==this._listOptions[a]||!c&&"tr_sep"==this._listOptions[a].tr.className?!1:!0};this.setMaxOpen=function(a){this._ph=null;"number"==typeof a?(this.maxOpen=a,this._maxOpenTest()):this.maxOpen=null};e.width&&this.setWidth(e.width);"select"==this.mode&&"undefined"!=typeof e.selected&&this.setListOptionSelected(e.selected);return this};
dhtmlXToolbarObject.prototype._buttonInputObject=function(a,c,e){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(c);this.obj.w=null!=e.width?e.width:100;this.obj.title=null!=e.title?e.title:"";this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=e.value?" value='"+e.value+"'":"")+">";var g=this;this.obj.childNodes[0].onkeydown=
function(c){c=c||event;13==c.keyCode&&a.callEvent("onEnter",[g.obj.idd,this.value])};a.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=!1};this.disableItem=function(){this.obj.childNodes[0].disabled=!0};this.isEnabled=function(){return!this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return"none"!=this.obj.style.display};this.setValue=function(a){this.obj.childNodes[0].value=
a};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(a){this.obj.w=a;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};"undefined"!=typeof e.enabled&&0==window.dhx4.s2b(e.enabled)&&this.disableItem();return this};
dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,c,e){this.id=a.idPrefix+c;this.state=null!=e.enabled?!1:!0;this.imgEn=null!=e.img?e.img:"";this.imgDis=null!=e.imgdis?e.imgdis:"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.pressed=null!=e.selected;this.obj.extAction=e.action||null;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis");
this.obj.style.display=null!=e.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.idd=String(c);this.obj.title=e.title||"";this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=e.text?"<div class='dhxtoolbar_text'>"+e.text+"</div>":"");a.base.appendChild(this.obj);var g=this;this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=
!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){0!=g.state&&"none"==a.anyUsed&&(this.renderAs=this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_over":this.className="dhx_toolbar_btn dhxtoolbar_btn_over")};this.obj._doOnMouseOut=function(){0!=g.state&&"none"==a.anyUsed&&(this.renderAs=this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_def":this.className="dhx_toolbar_btn dhxtoolbar_btn_def")};this.obj[window.dhx4.isIPad?
"ontouchstart":"onmousedown"]=function(c){if((!a.checkEvent("onBeforeStateChange")||a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed]))&&0!=g.state&&"none"==a.anyUsed){this.className=(this.pressed=!this.pressed)?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs;c=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](c,this.pressed)}catch(e){}a.callEvent("onStateChange",[c,this.pressed]);return!1}};this.setItemState=function(c,e){if(this.obj.pressed!=
c&&(1==c?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis"),this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.renderAs=this.obj.className),1==e)){var g=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](g,this.obj.pressed)}catch(n){}a.callEvent("onStateChange",[g,this.obj.pressed])}};this.getItemState=
function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(c){a._setItemText(this,c)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(c){a._setItemImage(this,
c,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(c){a._setItemImage(this,c,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._sliderObject=function(a,c,e){this.id=a.idPrefix+c;this.state=null!=e.enabled?"true"==e.enabled?!0:!1:!0;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=e.hidden?"none":"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.idd=String(c);this.obj.len=null!=e.length?Number(e.length):50;this.obj.innerHTML="<div class='dhxtoolbar_text'>"+
(e.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(e.textMax||"")+"</div>";a.base.appendChild(this.obj);var g=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var h=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+
a.conf.skin+(a.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=e.toolTip||"%v";this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var l=this.label;this.pen.valueMin=null!=e.valueMin?Number(e.valueMin):0;this.pen.valueMax=null!=e.valueMax?Number(e.valueMax):100;this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax);this.pen.valueNow=null!=e.valueNow?Number(e.valueNow):this.pen.valueMax;this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax);
this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin);this.pen._detectLimits=function(){this.minX=g.obj.childNodes[1].offsetLeft+2;this.maxX=g.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=!1;this.pen[window.dhx4.isIPad?
"ontouchstart":"onmousedown"]=function(a){0!=g.state&&(a=a||event,this.initXY=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=l.tip&&(l.style.visibility="hidden",l.style.display="",l.innerHTML=l.tip.replace("%v",this.valueNow),l.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-l.offsetWidth/2)+"px",l.style.top=window.dhx4.absTop(this)-l.offsetHeight-3+"px",l.style.visibility=
"",l.style.zIndex=window.dhx4.zim.reserve(l._zi)))};this.pen._doOnMouseMoveStart=function(a){a=a||event;if(h.allowMove){var c=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,e=c-h.initXY;if(!(c<window.dhx4.absLeft(h)+Math.round(h.offsetWidth/2)&&h.nowX==h.minX||c>window.dhx4.absLeft(h)+Math.round(h.offsetWidth/2)&&h.nowX==h.maxX))return h.newNowX=h.nowX+e,h.newNowX<h.minX&&(h.newNowX=h.minX),h.newNowX>h.maxX&&(h.newNowX=h.maxX),h.nowX=h.newNowX,h.style.left=h.nowX+"px",h.initXY=c,h.newValueNow=
Math.round((h.valueMax-h.valueMin)*(h.newNowX-h.minX)/(h.maxX-h.minX)+h.valueMin),""!=l.tip&&(l.innerHTML=l.tip.replace(/%v/gi,h.newValueNow),l.style.left=Math.round(window.dhx4.absLeft(h)+h.offsetWidth/2-l.offsetWidth/2)+"px",l.style.top=window.dhx4.absTop(h)-l.offsetHeight-3+"px"),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1}};this.pen._doOnMouseMoveEnd=function(){h.allowMove&&(h.className="dhxtoolbar_sl_pen",h.allowMove=!1,h.nowX=h.newNowX,h.valueNow=h.newValueNow,
""!=l.tip&&(l.style.display="none",window.dhx4.zim.clear(l._zi)),a.callEvent("onValueChange",[g.obj.idd.replace(a.idPrefix,""),h.valueNow]))};window.dhx4.isIPad?(document.addEventListener("touchmove",h._doOnMouseMoveStart,!1),document.addEventListener("touchend",h._doOnMouseMoveEnd,!1)):"undefined"!=typeof window.addEventListener?(window.addEventListener("mousemove",h._doOnMouseMoveStart,!1),window.addEventListener("mouseup",h._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",h._doOnMouseMoveStart),
document.body.attachEvent("onmouseup",h._doOnMouseMoveEnd));this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")};this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setValue=
function(c,e){c=Number(c);c<this.pen.valueMin&&(c=this.pen.valueMin);c>this.pen.valueMax&&(c=this.pen.valueMax);this.pen.valueNow=c;this.pen._definePos();1==e&&a.callEvent("onValueChange",[this.obj.idd.replace(a.idPrefix,""),this.pen.valueNow])};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(a,c){a=Number(a);a>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=c,this.obj.childNodes[0].style.display=0<c.length?"":"none",this.pen.valueMin=a,this.pen.valueNow<this.pen.valueMin&&
(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())};this.setMaxValue=function(a,c){a=Number(a);a<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=c,this.obj.childNodes[4].style.display=0<c.length?"":"none",this.pen.valueMax=a,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())};this.getMinValue=function(){return[this.pen.valueMin,this.obj.childNodes[0].innerHTML]};this.getMaxValue=function(){return[this.pen.valueMax,
this.obj.childNodes[4].innerHTML]};this.setItemToolTipTemplate=function(a){this.label.tip=a};this.getItemToolTipTemplate=function(){return this.label.tip};return this};
dhtmlXToolbarObject.prototype.unload=function(){this.conf.isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):"function"==typeof window.addEventListener?window.removeEventListener("mousedown",this._doOnClick,!1):document.body.detachEvent("onmousedown",this._doOnClick);this._doOnClick=null;this.clearAll();this.objPull=null;this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.cont.removeChild(this.base);
for(this.base=null;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.conf=this.items=this.setMaxOpen=this.getUserData=this.setUserData=this.unload=this.getListOptionSelected=this.setListOptionSelected=this.getAllListOptions=this.forEachListOption=this.clearListOptionImage=this.getListOptionImage=this.setListOptionImage=this.getListOptionToolTip=
this.setListOptionToolTip=this.getListOptionText=this.setListOptionText=this.getListOptionPosition=this.setListOptionPosition=this.isListOptionEnabled=this.disableListOption=this.enableListOption=this.isListOptionVisible=this.hideListOption=this.showListOption=this.removeListOption=this.addListOption=this.removeItem=this.setPosition=this.getPosition=this.getWidth=this.setWidth=this.getMaxValue=this.setMaxValue=this.getMinValue=this.setMinValue=this.getValue=this.setValue=this.getItemToolTipTemplate=
this.setItemToolTipTemplate=this.getItemState=this.setItemState=this.clearItemImageDis=this.clearItemImage=this.setItemImageDis=this.setItemImage=this.getItemToolTip=this.setItemToolTip=this.getItemText=this.setItemText=this.isEnabled=this.disableItem=this.enableItem=this.isVisible=this.hideItem=this.showItem=this.forEachItem=this.addInput=this.addSlider=this.addSeparator=this.addButtonTwoState=this.addButtonSelect=this.addText=this.addButton=this.getParentId=this.inArray=this.getTypeExt=this.getType=
this.removeSpacer=this.addSpacer=this.clearAll=this.loadXMLString=this.loadXML=this.setIconPath=this.setIconsPath=this.setSkin=this.setAlign=this._removeItem=this._autoDetectVisibleArea=this._sliderObject=this._buttonTwoStateObject=this._buttonInputObject=this._buttonSelectObject=this._buttonObject=this._textObject=this._separatorObject=this._getIdByPosition=this._setPosition=this._getPosition=this._addItem=this._genStr=this._addItemToStorage=this._xmlParser=this._disableItem=this._enableItem=this._getItemText=
this._setItemText=this._clearItemImage=this._setItemImage=this._addImgObj=this._getObj=this._sbw=this.setRTL=this._rtlParseBtn=this._rtl=this.rootTypes=this.idPrefix=this.anyUsed=this.tY2=this.tY1=this.tX2=this.tX1=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};
dhtmlXToolbarObject.prototype._initObj=function(a){for(var c=0;c<a.length;c++)this._addItemToStorage(a[c]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};
dhtmlXToolbarObject.prototype._xmlToJson=function(a){var c=[];a=a.getElementsByTagName("toolbar");if(null!=a&&null!=a[0]){a=a[0];for(var e=function(a){a=a.getElementsByTagName("itemText");return null!=a&&null!=a[0]?window.dhx4._xmlNodeValue(a[0]):null},g="id type hidden title text enabled img imgdis action openAll renderSelect mode maxOpen width value selected length textMin textMax toolTip valueMin valueMax valueNow".split(" "),h="id type enabled disabled action selected img text".split(" "),l=0;l<
a.childNodes.length;l++)if("item"==a.childNodes[l].tagName){for(var m={},n=0;n<g.length;n++){var r=a.childNodes[l].getAttribute(g[n]);null!=r&&(m[g[n]]=r)}for(var u=0;u<a.childNodes[l].childNodes.length;u++){if("item"==a.childNodes[l].childNodes[u].tagName&&"buttonSelect"==m.type){for(var v={},n=0;n<h.length;n++)r=a.childNodes[l].childNodes[u].getAttribute(h[n]),null!=r&&(v[h[n]]=r);r=a.childNodes[l].childNodes[u].getElementsByTagName("userdata");for(n=0;n<r.length;n++){v.userdata||(v.userdata={});
var w,x;try{w=r[n].getAttribute("name")}catch(y){w=null}try{x=r[n].firstChild.nodeValue}catch(C){x=""}null!=w&&(v.userdata[w]=x)}v.text=e(a.childNodes[l].childNodes[u])||v.text;null==m.options&&(m.options=[]);m.options.push(v)}if("userdata"==a.childNodes[l].childNodes[u].tagName){null==m.userdata&&(m.userdata={});v={};try{v.name=a.childNodes[l].childNodes[u].getAttribute("name")}catch(A){v.name=null}try{v.value=a.childNodes[l].childNodes[u].firstChild.nodeValue}catch(D){v.value=""}null!=v.name&&(m.userdata[v.name]=
v.value)}}m.text=e(a.childNodes[l])||m.text;c.push(m)}e=null}return c};
dhtmlXToolbarObject.prototype._addItemToStorage=function(a,c){var e=a.id||this._genStr(24),g=a.type||"";"spacer"==g?this.addSpacer(this._lastId):this._lastId=e;if(""!=g&&null!=this["_"+g+"Object"]){if("buttonSelect"==g&&null!=a.options)for(var h=0;h<a.options.length;h++)"obj"==a.options[h].type&&(a.options[h].type="button"),"sep"==a.options[h].type&&(a.options[h].type="separator");if("slider"==g){var h={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",
text_max:"textMax"},l;for(l in h)null==a[h[l]]&&null!=a[l]&&(a[h[l]]=a[l])}"buttonInput"==g&&null==a.value&&null!=a.text&&(a.value=a.text);"buttonTwoState"==g&&"undefined"==typeof a.selected&&"undefined"!=typeof a.pressed&&window.dhx4.s2b(a.pressed)&&(a.selected=!0);"undefined"==typeof a.enabled&&"undefined"!=typeof a.disabled&&window.dhx4.s2b(a.disabled)&&(a.enabled=!1);null==a.imgDis&&null!=a.img_disabled&&(a.imgdis=a.img_disabled);"undefined"!=typeof a.openAll&&null!=a.openAll||"dhx_terrace"!=
this.conf.skin||(a.openAll=!0);this.objPull[this.idPrefix+e]=new this["_"+g+"Object"](this,e,a);this.objPull[this.idPrefix+e].type=g;this.setPosition(e,c)}if(null!=a.userdata)for(l in a.userdata)this.setUserData(e,l,a.userdata[l]);if(null!=a.options)for(h=0;h<a.options.length;h++)if(null!=a.options[h].userdata)for(l in a.options[h].userdata)this.setListOptionUserData(a.id,a.options[h].id,l,a.options[h].userdata[l])};
dhtmlXToolbarObject.prototype.setSkin=function(a,c){!0===c?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=a,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize);for(var e in this.objPull){var g=
this.objPull[e];"slider"==g.type&&(g.pen._detectLimits(),g.pen._definePos(),g.label.className="dhx_toolbar_slider_label_"+this.conf.skin);"buttonSelect"==g.type&&(g.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize)}"dhx_terrace"==a&&this._improveTerraceSkin()};
dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align="right"==a?"right":"left";this.base.className="right"==a?"dhxtoolbar_float_right":"dhxtoolbar_float_left";this._spacer&&(this._spacer.className="right"==a?" dhxtoolbar_float_left":" dhxtoolbar_float_right")};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[a]?a:18;this.setSkin(this.conf.skin,!0);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};
dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(a,c,e){a=this.idPrefix+a;null!=this.objPull[a]&&(null==this.objPull[a].userData&&(this.objPull[a].userData={}),this.objPull[a].userData[c]=e)};dhtmlXToolbarObject.prototype.getUserData=function(a,c){a=this.idPrefix+a;return null!=this.objPull[a]&&null!=this.objPull[a].userData?this.objPull[a].userData[c]||null:null};
dhtmlXToolbarObject.prototype._isListOptionExists=function(a,c){if(null==this.objPull[this.idPrefix+a])return!1;var e=this.objPull[this.idPrefix+a];return"buttonSelect"!=e.type||null==e._listOptions[c]?!1:!0};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,c,e,g){this._isListOptionExists(a,c)&&(a=this.objPull[this.idPrefix+a]._listOptions[c],null==a.userData&&(a.userData={}),a.userData[e]=g)};
dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,c,e){if(!this._isListOptionExists(a,c))return null;a=this.objPull[this.idPrefix+a]._listOptions[c];return a.userData?a.userData[e]?a.userData[e]:null:null};
dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var a=[],c={separator:!0,text:!0},e=[this.base];null!=this._spacer&&e.push(this._spacer);for(var g=0;g<e.length;g++){a[g]=[];for(var h=0;h<e[g].childNodes.length;h++)if(null!=e[g].childNodes[h].idd&&"none"!=e[g].childNodes[h].style.display){var l=this.idPrefix+e[g].childNodes[h].idd;null!=this.objPull[l]&&this.objPull[l].obj==e[g].childNodes[h]&&a[g].push({a:l,type:this.objPull[l].type,
node:this.objPull[l]["buttonSelect"==this.objPull[l].type?"arw":"obj"]})}e[g]=null}for(g=0;g<a.length;g++)for(h=0;h<a[g].length;h++){var e=a[g][h],m=!1,n=!1;if(!c[e.type]){if(h==a[g].length-1||null!=a[g][h+1]&&c[a[g][h+1].type])m=!0;if(0==h||0<=h-1&&null!=a[g][h-1]&&c[a[g][h-1].type])n=!0}e.node.style.borderRightWidth=m?"1px":"0px";e.node.style.borderTopRightRadius=e.node.style.borderBottomRightRadius=m?this.conf.terrace_radius:"0px";"buttonSelect"==e.type?(e.node.previousSibling.style.borderTopLeftRadius=
e.node.previousSibling.style.borderBottomLeftRadius=n?this.conf.terrace_radius:"0px",e.node.previousSibling._br=m,e.node.previousSibling._bl=n):e.node.style.borderTopLeftRadius=e.node.style.borderBottomLeftRadius=n?this.conf.terrace_radius:"0px";e.node._br=m;e.node._bl=n}for(g=0;g<a.length;g++){for(h=0;h<a[g].length;h++){for(l in a[g][h])a[g][h][l]=null;a[g][h]=null}a[g]=null}};
dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(a,c){var e=this.objPull[a];1==c?(e.obj.style.borderBottomLeftRadius=e.obj._bl?this.conf.terrace_radius:"0px",e.arw.style.borderBottomRightRadius=e.obj._br?this.conf.terrace_radius:"0px"):(e.obj.style.borderBottomLeftRadius="0px",e.arw.style.borderBottomRightRadius="0px")};
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_toolbar=function(a,c,e,g,h){"undefined"!=typeof h?a=h:(a=document.createElement("DIV"),a.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")),a.firstChild.className="dhx_toolbar_base_18_dhx_skyblue");this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=!0;this._updateIdx();return a},dhtmlXCellObject.prototype.attachToolbar=
function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.callEvent("_onBeforeContentAttach",["toolbar"]),"undefined"==typeof a?a={}:"string"==typeof a&&(a={skin:a}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),
a=a.parent=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=
function(){return this.dataNodes.toolbar});
function dhtmlXEditor(a,c){var e=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:"focus blur keydown keyup keypress mouseup mousedown click touchend".split(" "),iOSfix:null!=navigator.userAgent.match(/Mobile/gi)&&null!=navigator.userAgent.match(/iPad/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi)};this._doOnAccess=this._doOnFocusChanged=null;"object"==typeof a&&null!=a&&null==a.tagName&&(c=a.skin,null!=a.content&&(this.conf.content=
a.content),null!=a.contentHTML&&(this.conf.contentHTML=a.contentHTML),null!=a.iconsPath&&(this.conf.iconsPath=a.iconsPath),null!=a.toolbar&&(this.conf.toolbar=window.dhx4.s2b(a.toolbar)),null!=a.onFocusChanged&&(this._doOnFocusChanged=a.onFocusChanged),null!=a.onAccess&&(this._doOnAccess=a.onAccess),a=a.parent);this.conf.skin=c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue";"string"==typeof a&&(a=document.getElementById(a));this.base=
a;for(this.base.className+=" dhxeditor_"+this.conf.skin;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);var g=window.dhx4.isIE?this.base.currentStyle.position:null!=window.getComputedStyle?window.getComputedStyle(this.base,null).getPropertyValue("position"):"";"relative"!=g&&"absolute"!=g&&(this.base.style.position="relative");this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.cBlock=document.createElement("DIV");this.cBlock.className=
"dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;window.dhx4.isOpera&&(this.editor.scrolling="yes");this.setSizes();var h=this.editor;"undefined"!=typeof window.addEventListener?h.onload=function(){for(var a=0;a<e.conf.evs.length;a++)h.contentWindow.addEventListener(e.conf.evs[a],e._ev,!1)}:h.onreadystatechange=function(a){if("undefined"!=
typeof h.readyState&&"complete"==h.readyState)try{for(a=0;a<e.conf.evs.length;a++)h.contentWindow.document.body.attachEvent("on"+e.conf.evs[a],e._ev)}catch(c){}};this._ev=function(a){a=a||event;var c=a.type;if(1==e.conf.iOSfix&&"touchend"==c)e.editor.contentWindow.focus();else if(e.callEvent("onAccess",[c,a]),"function"==typeof e._doOnAccess)e._doOnAccess(c,a);else if("string"==typeof e._doOnAccess&&"function"==typeof window[e._doOnAccess])window[e._doOnAccess](c,a)};this._focus=function(){window.dhx4.isIE?
this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(a,c){var e="";!0===a&&null!=this.getContent&&(e=this.getContent());var g=this.editor.contentWindow.document;g.open("text/html","replace");window.dhx4.isOpera?g.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+
(!0!==c?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isKHTML?g.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(!0!==c?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isIE?g.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none; } </style></head><body "+
(!0!==c?"contenteditable='true'":"")+" tabindex='0'></body></html>"):g.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(!0!==c?"contenteditable='true'":"")+" tabindex='0'></body></html>");g.close();window.dhx4.isIE?g.contentEditable=!0!==c:g.designMode=!0!==c?"On":"Off";if(window.dhx4.isFF)try{g.execCommand("useCSS",
!1,!0)}catch(h){}!0===a&&null!=this.setContent&&this.setContent(e)};this._prepareContent();this._doOnResize=function(){window.clearTimeout(e.conf.resizeTM);e.conf.resizeTM=window.setTimeout(function(){e.setSizes&&e.setSizes()},e.conf.resizeTMTime)};this._runCommand=function(a,c){if(!0!==this.conf.roMode){2>arguments.length&&(c=null);window.dhx4.isIE&&this.edWin.focus();try{this.editor.contentWindow.document.execCommand(a,!1,c)}catch(e){}if(window.dhx4.isIE){this.edWin.focus();var g=this;window.setTimeout(function(){g.edWin.focus();
g=null},1)}}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat");var a=this.getContent(),a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)};this._doOnClick=function(a){a=a||window.event;e._showInfo(a.target||a.srcElement)};this._doOnMouseDown=function(a){a=a||window.event;e._showInfo(a.target||a.srcElement)};this._doOnKeyUp=
function(a){a=a||window.event;var c=a.target||a.srcElement;1=={37:1,38:1,39:1,40:1,13:1}[a.keyCode]&&e._showInfo(c)};this._getParentByTag=function(a,c){c=c.toLowerCase();var e=a;do if(""==c||e.nodeName.toLowerCase()==c)return e;while(e=e.parentNode);return a};this._isStyleProperty=function(a,c,e,g){c=c.toLowerCase();do if(a.nodeName.toLowerCase()==c&&a.style[e]==g)return!0;while(a=a.parentNode);return!1};this._setStyleProperty=function(a,c){this.style[c]=!1;var e=this._getParentByTag(a,c);e&&e.tagName.toLowerCase()==
c&&(this.style[c]=!0);"del"==c&&this._getParentByTag(a,"strike")&&"strike"==this._getParentByTag(a,"strike").tagName.toLowerCase()&&(this.style.del=!0)};this._showInfo=function(a){if((a=this._getSelectionBounds().end?this._getSelectionBounds().end:a)&&this._setStyleProperty)try{if(this.edWin.getComputedStyle){var c=this.edWin.getComputedStyle(a,null),e=401==c.getPropertyValue("font-weight")?700:c.getPropertyValue("font-weight");this.style={fontStyle:c.getPropertyValue("font-style"),fontSize:c.getPropertyValue("font-size"),
textDecoration:c.getPropertyValue("text-decoration"),fontWeight:e,fontFamily:c.getPropertyValue("font-family"),textAlign:c.getPropertyValue("text-align")};window.dhx4.isKHTML&&(this.style.fontStyle=c.getPropertyValue("font-style"),this.style.vAlign=c.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(a,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(a,"span","textDecoration","underline"))}else c=a.currentStyle,this.style={fontStyle:c.fontStyle,fontSize:c.fontSize,
textDecoration:c.textDecoration,fontWeight:c.fontWeight,fontFamily:c.fontFamily,textAlign:c.textAlign};this._setStyleProperty(a,"h1");this._setStyleProperty(a,"h2");this._setStyleProperty(a,"h3");this._setStyleProperty(a,"h4");window.dhx4.isKHTML||(this._setStyleProperty(a,"del"),this._setStyleProperty(a,"sub"),this._setStyleProperty(a,"sup"),this._setStyleProperty(a,"u"));this.callEvent("onFocusChanged",[this.style,c])}catch(g){return null}};this._getSelectionBounds=function(){var a,c,e,g;if(this.edWin.getSelection){a=
this.edWin.getSelection();if(window.dhx4.isEdge&&0==a.rangeCount)return{root:null,start:null,end:null};a=a.getRangeAt(a.rangeCount-1);e=a.startContainer;g=a.endContainer;c=a.commonAncestorContainer;"#text"==e.nodeName&&(c=c.parentNode);"#text"==e.nodeName&&(e=e.parentNode);"body"==e.nodeName.toLowerCase()&&(e=e.firstChild);"#text"==g.nodeName&&(g=g.parentNode);"body"==g.nodeName.toLowerCase()&&(g=g.lastChild);e==g&&(c=e);return{root:c,start:e,end:g}}if(this.edWin.document.selection){a=this.edDoc.selection.createRange();
if(!a.duplicate)return null;c=a.parentElement();g=a.duplicate();var h=a.duplicate();g.collapse(!0);h.moveToElementText(g.parentElement());h.setEndPoint("EndToStart",g);e=g.parentElement();g=a.duplicate();h=a.duplicate();h.collapse(!1);g.moveToElementText(h.parentElement());g.setEndPoint("StartToEnd",h);g=h.parentElement();"body"==e.nodeName.toLowerCase()&&(e=e.firstChild);"body"==g.nodeName.toLowerCase()&&(g=g.lastChild);e==g&&(c=e);return{root:c,start:e,end:g}}return null};this.getContent=function(){return this.edDoc.body?
window.dhx4.isFF?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&0==this.edDoc.body.innerText.length?"":this.edDoc.body.innerHTML:""};this.setContent=function(a){a=a||"";if(this.edDoc.body){var c=!1;window.dhx4.isFF&&(c=navigator.userAgent.match(/Firefox\/(\d*)/),c=null!=c&&28>c[1]);c?("undefined"==typeof this.conf.ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=0<this.editor.contentWindow.document.body.innerHTML.length),
this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=a:(this.editor.contentWindow.document.body.innerHTML="",0==a.length&&(a=" "),this._runCommand("InsertHTML",a))):this.editor.contentWindow.document.body.innerHTML=a;this.callEvent("onContentSet",[])}else this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=a,this._onFirstLoad=function(){e.setContent(e.conf.firstLoadData);"function"==typeof window.addEventListener?e.edWin.removeEventListener("load",e._onFirstLoad,
!1):e.edWin.detachEvent("onload",e._onFirstLoad);e.conf.firstLoadData=null;e.conf.firstLoadEv=!1;e._onFirstLoad=null},"function"==typeof window.addEventListener?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))};this.setContentHTML=function(a){window.dhx4.ajax.get(a,function(a){null!=a.xmlDoc.responseText&&e.setContent(a.xmlDoc.responseText)})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(a){if("function"==typeof this._doOnFocusChanged)this._doOnFocusChanged(a);
else if("string"==typeof this._doOnFocusChanged&&"function"==typeof window[this._doOnFocusChanged])window[this._doOnFocusChanged](a)});"function"==typeof window.addEventListener?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",
this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp));this.unload=function(){if("function"==typeof window.addEventListener){window.removeEventListener("resize",this._doOnResize,!1);this.edDoc.removeEventListener("click",this._doOnClick,!1);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1);window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1);for(var a=0;a<e.conf.evs.length;a++)h.contentWindow.removeEventListener(e.conf.evs[a],e._ev,!1);null!=
this.tb&&1==this.conf.iOSfix&&(this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,!1),this._doOnIOSFix=null)}else for(window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp),a=0;a<e.conf.evs.length;a++)h.contentWindow.document.body.detachEvent("on"+e.conf.evs[a],e._ev);this._doOnFocusChanged=this._doOnAccess=null;"function"==typeof window.addEventListener?this.editor.onload=null:this.editor.onreadystatechange=
null;this.editor.parentNode.removeChild(this.editor);this.edWin=this.edDoc=this.editor=null;this.cell._unload();this.tb=this.cell=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;for(this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);e=h=this.unload=this.isReadonly=this.setReadonly=this.setContentHTML=this.setContent=
this.getContent=this._getSelectionBounds=this._showInfo=this.clearFormatting=this.applyUnderscore=this.applyItalic=this.applyBold=this._runCommand=this.setSizes=this.init=this.setIconsPath=this._doOnResize=this._prepareContent=this._focus=this._ev=this._doOnMouseDown=this._doOnKeyUp=this._doOnClick=this.base=null};1==this.conf.toolbar&&"function"==typeof this.attachToolbar&&"function"==typeof window.dhtmlXToolbarObject&&(this.attachToolbar(this.conf.iconsPath),1==this.conf.iOSfix&&(this._doOnIOSFix=
function(){e.editor.contentWindow.focus()},this.tb.cont.addEventListener("touchend",this._doOnIOSFix,!1)));this.setIconsPath=function(a){this.conf.iconsPath=a};0<this.conf.content.length?(this.setContent(this.conf.content),this.conf.content=""):0<this.conf.contentHTML.length&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML="");return this}
dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);null!=this.editor&&(this.editor.style.left="5px",this.editor.style.width=this.base.clientWidth-5+"px")};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=!0===a;this._prepareContent(!0,this.conf.roMode);this.cBlock.style.display=this.conf.roMode?"":"none"};dhtmlXEditor.prototype.isReadonly=function(a){return this.conf.roMode||!1};
dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;this.tb&&(this.cell.detachToolbar(a),this.tb=null,this.attachToolbar());this.setSizes()};
window.dhtmlXEditorCell=function(a,c){dhtmlXCellObject.apply(this,[a,"_editor"]);this.editor=c;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject;
dhtmlXEditorCell.prototype._stbInit=function(){var a=this,c=document.createElement("DIV");c.className="dhx_cell_stb";this.cell.insertBefore(c,this.cell.childNodes[this.conf.idx.cont]);c.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};var e={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"},g;for(g in e){var h=document.createElement("A");h.href="javascript:void(0);";h.tabIndex=-1;c.appendChild(h);
h.onmousedown=h.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};var l=document.createElement("DIV");l.className="dhx_cell_stb_button btn_"+g;l._actv=g.charAt(0);l._cmd=e[g];h.appendChild(l);l.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};l.onmousedown=function(c){c=c||event;c.preventDefault?c.preventDefault():c.returnValue=!1;a.editor[this._cmd]();a.editor.callEvent("onToolbarClick",[this._actv])};l=h=null}c=
null;this._stbUnload=function(){var c=this.cell.childNodes[this.conf.idx.stb];for(c.onselectstart=null;0<c.childNodes.length;)c.lastChild.onmousedown=c.lastChild.onclick=null,c.lastChild.firstChild.onmousedown=c.lastChild.firstChild.onclick=null,c.lastChild.firstChild._actv=c.lastChild.firstChild._cmd=null,c.lastChild.removeChild(c.lastChild.firstChild),c.removeChild(c.lastChild);c.parentNode.removeChild(c);a=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;
delete this.conf.idx_data.stb;this._updateIdx()};this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight};
dhtmlXCellObject.prototype.attachEditor=function(a){this.callEvent("_onBeforeContentAttach",["editor"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if("object"!=typeof a||null==a)a={};a.parent=c;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);c=null;a=a.parent=null;"undefined"!=typeof window.dhtmlXPortalCell&&this instanceof window.dhtmlXPortalCell&&(null==this.portal.conf.editor_ev&&
(a=this.portal.attachEvent("onBeforeDrag",function(a){"editor"==this.cdata[a].dataType&&(this.cdata[a].conf.editor_cont=this.cdata[a].dataObj.getContent());return!0}),c=this.portal.attachEvent("onDrop",function(a){"editor"==this.cdata[a].dataType&&(this.cdata[a].dataObj.setContent(this.cdata[a].conf.editor_cont),this.cdata[a].dataObj._prepareContent(!0),this.cdata[a].conf.editor_cont=null)}),this.portal.conf.editor_ev=[a,c]),this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){this.detachEvent(this.conf.editor_ev);
this.conf.editor_ev=null;if(this instanceof window.dhtmlXPortalCell){var a=!1,c;for(c in this.portal.cdata)this.portal.cdata[c]!=this&&"editor"==this.portal.cdata[c].dataType&&(a=!0);if(0==a){for(a=0;a<this.portal.conf.editor_ev.length;a++)this.portal.detachEvent(this.portal.conf.editor_ev[a]);this.portal.conf.editor_ev=null}}}));this.callEvent("_onContentAttach",[]);return this.dataObj};
dhtmlXEditor.prototype.attachToolbar=function(a){if(null==this.tb){null!=a&&(this.conf.iconsPath=a);this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();this._availFonts="Arial;Arial Narrow;Comic Sans MS;Courier;Georgia;Impact;Tahoma;Times New Roman;Verdana".split(";");this._initFont=this._availFonts[0];this._xmlFonts="";for(a=0;a<this._availFonts.length;a++){var c=String(this._availFonts[a]).replace(/\s/g,
"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+c+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(c).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]\x3e</itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"};this._xmlSizes="";for(var e in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+e+":"+this._availSizes[e]+'" text="'+this._availSizes[e]+
'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';
this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",!1);this.tb.setItemState("alignRight",!1);this.tb.setItemState("alignJustify",!1);this.tb.setItemState("alignLeft",!1);a&&this.tb.setItemState(a,!0)};this._checkH=function(a){this.tb.setItemState("applyH1",!1);this.tb.setItemState("applyH2",!1);this.tb.setItemState("applyH3",!1);this.tb.setItemState("applyH4",!1);a&&this.tb.setItemState(a,!0)};this._doOnFocusChanged=function(a){if(a.h1||a.h2||a.h3||a.h4)this.tb.setItemState("applyBold",
!1);else{var c=-1!=String(a.fontWeight).search(/bold/i)||700<=Number(a.fontWeight);this.tb.setItemState("applyBold",c)}c="alignLeft";-1!=String(a.textAlign).search(/center/)&&(c="alignCenter");-1!=String(a.textAlign).search(/right/)&&(c="alignRight");-1!=String(a.textAlign).search(/justify/)&&(c="alignJustify");this.tb.setItemState(c,!0);this._checkAlign(c);this.tb.setItemState("applyH1",a.h1);this.tb.setItemState("applyH2",a.h2);this.tb.setItemState("applyH3",a.h3);this.tb.setItemState("applyH4",
a.h4);window._KHTMLrv&&(a.sub="sub"==a.vAlign,a.sup="super"==a.vAlign);this.tb.setItemState("applyItalic","italic"==a.fontStyle);this.tb.setItemState("applyStrikethrough",a.del);this.tb.setItemState("applySub",a.sub);this.tb.setItemState("applySuper",a.sup);this.tb.setItemState("applyUnderscore",a.u)};this._doOnToolbarClick=function(a){var c=String(a).split(":");null!=this[c[0]]&&"function"==typeof this[c[0]]&&(this[c[0]](c[1]),this.callEvent("onToolbarClick",[a]))};this._doOnStateChange=function(a,
c){this[a]();switch(a){case "alignLeft":case "alignCenter":case "alignRight":case "alignJustify":this._checkAlign(a);break;case "applyH1":case "applyH2":case "applyH3":case "applyH4":this._checkH(a)}this.callEvent("onToolbarClick",[a])};this._doOnBeforeStateChange=function(a,c){return"alignLeft"!=a&&"alignCenter"!=a&&"alignRight"!=a&&"alignJustify"!=a||1!=c?!0:!1};var g=this;this.tb.attachEvent("onClick",function(a){g._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(a,c){g._doOnStateChange(a,
c)});this.tb.attachEvent("onBeforeStateChange",function(a,c){return g._doOnBeforeStateChange(a,c)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};
this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};
this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",!1);this.tb.setItemState("applyItalic",!1);this.tb.setItemState("applyStrikethrough",!1);this.tb.setItemState("applySub",!1);this.tb.setItemState("applySuper",!1);this.tb.setItemState("applyUnderscore",!1);var a=this.getContent(),
a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)}}};
dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping");this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this));this.attachEvent("onBeforeRender",dhtmlx.bind(function(a){this._settings.sort&&(a.block(),a.sort(this._settings.sort),a.unblock())},this));this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this));this.attachEvent("onBeforeSort",
dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(a,c){a.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1);this.block();this.clearAll();this.unblock()},c))},sum:function(a,c){a=dhtmlx.Template.setter(a);c=c||this.data;var e=0;c.each(function(c){e+=1*a(c)});return e},min:function(a,c){a=dhtmlx.Template.setter(a);c=c||this.data;var e=Infinity;c.each(function(c){1*a(c)<e&&(e=1*a(c))});return 1*e},max:function(a,c){a=dhtmlx.Template.setter(a);c=c||
this.data;var e=-Infinity;c.each(function(c){1*a(c)>e&&(e=1*a(c))});return e},_split_data_by:function(a){var c=function(a,c){a=dhtmlx.Template.setter(a);return a(c[0])},e=dhtmlx.Template.setter(a.by);a.map[e]||(a.map[e]=[e,c]);var g={},h=[];this.data.each(function(a){var c=e(a);g[c]||(h.push({id:c}),g[c]=dhtmlx.toArray());g[c].push(a)});for(var l in a.map){var m=a.map[l][1]||c;"function"!=typeof m&&(m=this[m]);for(var n=0;n<h.length;n++)h[n][l]=m.call(this,a.map[l][0],g[h[n].id])}this.data._not_grouped_order=
this.data.order;this.data._not_grouped_pull=this.data.pull;this.data.order=dhtmlx.toArray();this.data.pull={};for(n=0;n<h.length;n++)a=this.data.id(h[n]),this.data.pull[a]=h[n],this.data.order.push(a);this.callEvent("onStoreUpdated",[])},group:function(a,c){this.ungroup(!1);this._split_data_by(a);!1!==c&&this.data.callEvent("onStoreUpdated",[])},ungroup:function(a){this.data._not_grouped_order&&(this.data.order=this.data._not_grouped_order,this.data.pull=this.data._not_grouped_pull,this.data._not_grouped_pull=
this.data._not_grouped_order=null);!1!==a&&this.data.callEvent("onStoreUpdated",[])},group_setter:function(a){dhtmlx.assert("object"==typeof a,"Incorrect group value");dhtmlx.assert(a.by,"group.by is mandatory");dhtmlx.assert(a.map,"group.map is mandatory");return a},sort_setter:function(a){"object"!=typeof a&&(a={by:a});this._mergeSettings(a,{as:"string",dir:"asc"});return a}};
dhtmlx.Date={Locale:{month_full:"January February March April May June July August September October November December".split(" "),month_short:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),day_full:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),day_short:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},date_part:function(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},time_part:function(a){return(a.valueOf()/1E3-60*a.getTimezoneOffset())%
86400},week_start:function(a){var c=a.getDay();this.config.start_on_monday&&(0===c?c=6:c--);return this.date_part(this.add(a,-1*c,"day"))},month_start:function(a){a.setDate(1);return this.date_part(a)},year_start:function(a){a.setMonth(0);return this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(a,c,e){var g=new Date(a.valueOf());switch(e){case "day":g.setDate(g.getDate()+c);break;case "week":g.setDate(g.getDate()+7*c);break;case "month":g.setMonth(g.getMonth()+c);break;
case "year":g.setYear(g.getFullYear()+c);break;case "hour":g.setHours(g.getHours()+c);break;case "minute":g.setMinutes(g.getMinutes()+c);break;default:return dhtmlx.Date["add_"+e](a,c,e)}return g},to_fixed:function(a){return 10>a?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(a,c){a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case "%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case "%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case "%j":return'"+date.getDate()+"';
case "%n":return'"+(date.getMonth()+1)+"';case "%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case "%Y":return'"+date.getFullYear()+"';case "%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case "%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case "%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case "%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case "%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case "%g":return'"+((date.getHours()+11)%12+1)+"';
case "%G":return'"+date.getHours()+"';case "%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case "%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case "%a":return'"+(date.getHours()>11?"pm":"am")+"';case "%A":return'"+(date.getHours()>11?"PM":"AM")+"';case "%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case "%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return a}});c&&(a=a.replace(/date\.get/g,"date.getUTC"));return new Function("date",'return "'+
a+'";')},str_to_date:function(a,c){for(var e="var temp=date.split(/[^0-9a-zA-Z]+/g);",g=a.match(/%[a-zA-Z]/g),h=0;h<g.length;h++)switch(g[h]){case "%j":case "%d":e+="set[2]=temp["+h+"]||1;";break;case "%n":case "%m":e+="set[1]=(temp["+h+"]||1)-1;";break;case "%y":e+="set[0]=temp["+h+"]*1+(temp["+h+"]>50?1900:2000);";break;case "%g":case "%G":case "%h":case "%H":e+="set[3]=temp["+h+"]||0;";break;case "%i":e+="set[4]=temp["+h+"]||0;";break;case "%Y":e+="set[0]=temp["+h+"]||0;";break;case "%a":case "%A":e+=
"set[3]=set[3]%12+((temp["+h+"]||'').toLowerCase()=='am'?0:12);";break;case "%s":e+="set[5]=temp["+h+"]||0;"}g="set[0],set[1],set[2],set[3],set[4],set[5]";c&&(g=" Date.UTC("+g+")");return new Function("date","var set=[0,0,1,0,0,0]; "+e+" return new Date("+g+");")},getISOWeek:function(a){if(!a)return!1;var c=a.getDay();0===c&&(c=7);var e=new Date(a.valueOf());e.setDate(a.getDate()+(4-c));a=e.getFullYear();e=Math.floor((e.getTime()-(new Date(a,0,1)).getTime())/864E5);return 1+Math.floor(e/7)},getUTCISOWeek:function(a){return this.getISOWeek(a)}};
dhtmlx.math={};dhtmlx.math._toHex="0123456789ABCDEF".split("");dhtmlx.math.toHex=function(a,c){a=parseInt(a,10);for(str="";0<a;)str=this._toHex[a%16]+str,a=Math.floor(a/16);for(;str.length<c;)str="0"+str;return str};dhtmlx.math.hexToDec=function(a){return parseInt(a,16)};
dhtmlx.math.toRgb=function(a){var c,e;"string"!=typeof a?(c=a[0],e=a[1],a=a[2]):-1!=a.indexOf("rgb")?(a=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),c=a[0],e=a[1],a=a[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),c=this.hexToDec(a.substr(0,2)),e=this.hexToDec(a.substr(2,2)),a=this.hexToDec(a.substr(4,2)));c=parseInt(c,10)||0;e=parseInt(e,10)||0;a=parseInt(a,10)||0;if(0>c||255<c)c=0;if(0>e||255<e)e=0;if(0>a||255<a)a=0;return[c,e,a]};
dhtmlx.math.hsvToRgb=function(a,c,e){var g,h,l,m,n;g=Math.floor(a/60)%6;h=a/60-g;a=e*(1-c);l=e*(1-h*c);c=e*(1-(1-h)*c);n=m=h=0;switch(g){case 0:h=e;m=c;n=a;break;case 1:h=l;m=e;n=a;break;case 2:h=a;m=e;n=c;break;case 3:h=a;m=l;n=e;break;case 4:h=c;m=a;n=e;break;case 5:h=e,m=a,n=l}h=Math.floor(255*h);m=Math.floor(255*m);n=Math.floor(255*n);return[h,m,n]};
dhtmlx.math.rgbToHsv=function(a,c,e){var g,h,l;a/=255;c/=255;e/=255;g=Math.min(a,c,e);h=Math.max(a,c,e);l=0;h==g?l=0:h==a&&c>=e?l=60*(c-e)/(h-g)+0:h==a&&c<e?l=60*(c-e)/(h-g)+360:h==c?l=60*(e-a)/(h-g)+120:h==e&&(l=60*(a-c)/(h-g)+240);return[l,0==h?0:1-g/h,h]};dhtmlx.presets||(dhtmlx.presets={});
dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,
borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",
gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}};dhtmlx.ui.Map=function(a){this.name="Map";this._id="map_"+dhtmlx.uid();this._key=a;this._map=[];this._areas=[]};
dhtmlx.ui.Map.prototype={addRect:function(a,c,e){this._areas.push({index:e,points:c});this._createMapArea(a,"RECT",c,e)},addPoly:function(a,c,e){this._createMapArea(a,"POLY",c,e)},_createMapArea:function(a,c,e,g){var h="";4==arguments.length&&(h="userdata='"+g+"'");this._map.push("<area "+this._key+"='"+a+"' shape='"+c+"' coords='"+e.join()+"' "+h+"></area>")},addSector:function(a,c,e,g,h,l,m,n){var r=[];r.push(g);for(r.push(Math.floor(h*m));c<e;c+=Math.PI/18)r.push(Math.floor(g+l*Math.cos(c))),r.push(Math.floor((h+
l*Math.sin(c))*m));r.push(Math.floor(g+l*Math.cos(e)));r.push(Math.floor((h+l*Math.sin(e))*m));r.push(g);r.push(Math.floor(h*m));return this.addPoly(a,r,n)},render:function(a){var c=dhtmlx.html.create("DIV");c.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";a.appendChild(c);var e=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";c.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+
"</map><img "+e+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>";a._htmlmap=c;this._map=[]}};dhtmlx.chart={};
dhtmlx.chart.scatter={pvt_render_scatter:function(a,c,e,g,h,l){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var m=this._getLimits(),n=this._getLimits("h","xValue");h||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),c,e,g,m.min,m.max),this._drawHXAxis(this.canvases.x.getCanvas(),c,e,g,n.min,n.max));var m={min:this._settings.yAxis.start,
max:this._settings.yAxis.end},n={min:this._settings.xAxis.start,max:this._settings.xAxis.end},r=this._getScatterParams(a,c,e,g,n,m);this._mapStart=e;for(var u=0;u<c.length;u++)this._drawScatterItem(a,l,e,g,r,n,m,c[u],h)},_getScatterParams:function(a,c,e,g,h,l){a={};a.totalHeight=g.y-e.y;a.totalWidth=g.x-e.x;this._calcScatterUnit(a,h.min,h.max,a.totalWidth,"X");this._calcScatterUnit(a,l.min,l.max,a.totalHeight,"Y");return a},_drawScatterItem:function(a,c,e,g,h,l,m,n,r){l=this._calculateScatterItemPosition(h,
g,e,l,n,"X");e=this._calculateScatterItemPosition(h,e,g,m,n,"Y");this._drawItem(a,l,e,n,this._settings.label.call(this,n),r,c)},_calculateScatterItemPosition:function(a,c,e,g,h,l){h=this._settings["X"==l?"xValue":"value"].call(this,h);var m=a["valueFactor"+l],m=(parseFloat(h||0)-g.min)*m;a=a["unit"+l];a=e[l.toLowerCase()]-("X"==l?-1:1)*Math.floor(a*m);0>m&&(a=e[l.toLowerCase()]);h>g.max&&(a=c[l.toLowerCase()]);h<g.min&&(a=e[l.toLowerCase()]);return a},_calcScatterUnit:function(a,c,e,g,h){c=this._getRelativeValue(c,
e);h=h||"";a["relValue"+h]=c[0];a["valueFactor"+h]=c[1];a["unit"+h]=a["relValue"+h]?g/a["relValue"+h]:10}};
dhtmlx.chart.radar={pvt_render_radar:function(a,c,e,g,h,l){this._renderRadarChart(a,c,e,g,h,l)},_renderRadarChart:function(a,c,e,g,h,l){if(c.length){var m=this._getPieParameters(e,g);g=this._settings.radius?this._settings.radius:m.radius;for(var n=this._settings.x?this._settings.x:m.x,m=this._settings.y?this._settings.y:m.y,r=[],u=0;u<c.length;u++)r.push(1);r=this._getRatios(r,c.length);this._mapStart=e;h||this._drawRadarAxises(r,n,m,g,c);this._drawRadarData(a,r,n,m,g,c,h,l)}},_drawRadarData:function(a,
c,e,g,h,l,m,n){var r,u,v,w,x,y,C,A,D,H,E,F;v=this._settings;x=v.yAxis.start;u=this._getRelativeValue(x,v.yAxis.end);h=(w=u[0])?h/w:h/2;F=u[1];u=H=-Math.PI/2;A=[];for(w=C=0;w<l.length;w++)E||(E=v.value(l[w]),E=(parseFloat(E||0)-x)*F),y=Math.floor(h*E),E=v.value(w!=l.length-1?l[w+1]:l[0]),E=(parseFloat(E||0)-x)*F,D=Math.floor(h*E),r=u,u=w!=l.length-1?H+c[w]-1E-4:H,y=C||this._getPositionByAngle(r,e,g,y),C=this._getPositionByAngle(u,e,g,D),A.push(y);v.fill&&this._fillRadarChart(a,A,l);v.disableLines||
this._strokeRadarChart(a,A,l);v.disableItems||this._drawRadarItemMarkers(a,A,l,m,n)},_drawRadarItemMarkers:function(a,c,e,g,h){for(var l=0;l<c.length;l++)this._drawItem(a,c[l].x,c[l].y,e[l],this._settings.label.call(this,e),g,h)},_fillRadarChart:function(a,c,e){var g,h;a.globalAlpha=this._settings.alpha.call(this,{});a.beginPath();for(var l=0;l<c.length;l++)a.fillStyle=this._settings.fill.call(this,e[l]),g=c[l],h=c[l+1]||c[0],l||a.moveTo(g.x,g.y),a.lineTo(h.x,h.y);a.fill();a.globalAlpha=1},_strokeRadarChart:function(a,
c,e){for(var g,h,l=0;l<c.length;l++)g=c[l],h=c[l+1]||c[0],this._drawLine(a,g.x,g.y,h.x,h.y,this._settings.line.color.call(this,e[l]),this._settings.line.width)},_drawRadarAxises:function(a,c,e,g,h){var l=this._settings.yAxis,m=this._settings.xAxis,n=l.start,r=l.end,u=l.step,v={},w=this._configYAxis;if("undefined"==typeof w.step||"undefined"==typeof w.start||"undefined"==typeof w.end)n=this._getLimits(),v=this._calculateScale(n.min,n.max),n=v.start,r=v.end,u=v.step,l.end=r,l.start=n;var x=[],y,C,A=
0,D=g*u/(r-n),H;1>u&&(y=Math.min(this._log10(u),0>=n?0:this._log10(n)),H=Math.pow(10,-y));var E=[];this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale"));var F=this.canvases.scale.getCanvas();for(y=r;y>=n;y-=u){v.fixNum&&(y=parseFloat((new Number(y)).toFixed(v.fixNum)));x.push(Math.floor(A*D)+.5);H&&(y=Math.round(y*H)/H);this.canvases.scale.renderTextAt("middle","left",c,e-g+x[x.length-1],l.template(y.toString()),"dhx_axis_item_y dhx_radar");if(2>a.length){this._drawScaleSector(F,
"arc",c,e,g-x[x.length-1],-Math.PI/2,3*Math.PI/2,y);return}var J=-Math.PI/2,K=J,L;for(C=0;C<a.length;C++)y==r&&E.push(K),L=J+a[C]-1E-4,this._drawScaleSector(F,w.lineShape||"line",c,e,g-x[x.length-1],K,L,y,C,h[y]),K=L;A++}for(y=0;y<E.length;y++)a=this._getPositionByAngle(E[y],c,e,g),m.lines.call(this,h[y],y)&&this._drawLine(F,c,e,a.x,a.y,m?m.lineColor.call(this,h[y]):"#cfcfcf",1),this._drawRadarScaleLabel(F,c,e,g,E[y],m?m.template.call(this,h[y]):"&nbsp;")},_drawScaleSector:function(a,c,e,g,h,l,m,
n,r){var u,v;if(0>h)return!1;u=this._getPositionByAngle(l,e,g,h);v=this._getPositionByAngle(m,e,g,h);var w=this._settings.yAxis;w.bg&&(a.beginPath(),a.moveTo(e,g),"arc"==c?a.arc(e,g,h,l,m,!1):(a.lineTo(u.x,u.y),a.lineTo(v.x,v.y)),a.fillStyle=w.bg(n,r),a.moveTo(e,g),a.fill(),a.closePath());w.lines.call(this,n)&&(a.lineWidth=1,a.beginPath(),"arc"==c?a.arc(e,g,h,l,m,!1):(a.moveTo(u.x,u.y),a.lineTo(v.x,v.y)),a.strokeStyle=w.lineColor.call(this,n),a.stroke())},_drawRadarScaleLabel:function(a,c,e,g,h,l){a=
this.canvases.scale.renderText(0,0,l,"dhx_axis_radar_title",1);l=a.scrollWidth;var m=a.offsetHeight;c=this._getPositionByAngle(h,c,e,g+5);g=e=0;if(0>h||h>Math.PI)g=-m;h>Math.PI/2&&(e=-l);if(.001>Math.abs(h+Math.PI/2)||.001>Math.abs(h-Math.PI/2))e=-l/2;else if(.001>Math.abs(h)||.001>Math.abs(h-Math.PI))g=-m/2;a.style.top=c.y+g+"px";a.style.left=c.x+e+"px";a.style.width=l+"px";a.style.whiteSpace="nowrap"}};
dhtmlx.chart.area={pvt_render_area:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C,A,D,H,E;w=this._calculateLineParams(a,c,e,g,h);n=this._settings;u=n.eventRadius||Math.floor(w.cellWidth/2);if(c.length){x=[];C=n.offset?e.x+.5*w.cellWidth:e.x;for(r=0;r<c.length;r++)if(v=c[r],m=this._getPointY(v,e,g,w),H=C+w.cellWidth*r,m){E="object"==typeof m?m.y0:m;if(r&&this._settings.fixOverflow){y=this._getPointY(c[r-1],e,g,w);if(y.out&&y.out==m.out)continue;A=w.cellWidth*(r-1)-.5+C;D="object"==typeof y?y.y0:y;y.out&&
(y="min"==y.out?g.y:e.y,x.push([this._calcOverflowX(A,H,D,E,y),y]));m.out&&(y="min"==m.out?g.y:e.y,x.push([this._calcOverflowX(A,H,D,E,y),y]),r==c.length-1&&y==e.y&&x.push([H,e.y]))}m.out||(x.push([H,E]),l.addRect(v.id,[H-u-e.x,E-u-e.y,H+u-e.x,E+u-e.y],h));n.yAxis||(m=n.offset||r!=c.length-1?"center":"left",this.canvases[h].renderTextAt(!1,m,H,E-n.labelOffset,n.label(v)))}x.length&&(x.push([H,g.y]),x.push([x[0][0],g.y]));a.globalAlpha=this._settings.alpha.call(this,c[0]);a.fillStyle=this._settings.color.call(this,
c[0]);a.beginPath();this._path(a,x);a.fill();n.border&&(a.lineWidth=n.borderWidth||1,n.borderColor?a.strokeStyle=n.borderColor.call(this,c[0]):this._setBorderStyles(a,a.fillStyle),a.beginPath(),this._path(a,x),a.stroke());a.lineWidth=1;a.globalAlpha=1}}};
dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C;w=this._calculateLineParams(a,c,e,g,h);n=this._settings;u=n.eventRadius||Math.floor(w.cellWidth/2);if(c.length){x=[];C=[];y=n.offset?e.x+.5*w.cellWidth:e.x;var A=function(a,e){return h?c[a].$startY?e-g.y+c[a].$startY:0:e},D=function(a,c,e){e=(e.y-c.y)/(e.x-c.x);return e*a+c.y-e*c.x};for(r=0;r<c.length;r++)v=c[r],r?y+=w.cellWidth:(m=A(r,g.y),x.push([y,m])),m=A(r,this._getPointY(v,e,g,w)),C.push(isNaN(m)&&!r?
c[r].$startY||g.y:m),m&&(x.push([y,m]),l.addRect(v.id,[y-u-e.x,m-u-e.y,y+u-e.x,m+u-e.y],h),n.yAxis||this.canvases[h].renderTextAt(!1,"center",y,m-n.labelOffset,n.label(v)));x.push([y,A(r-1,g.y)]);if(h)for(r=c.length-2;0<r;r--)y-=w.cellWidth,(m=c[r].$startY)&&x.push([y,m]);x.push([x[0][0],x[0][1]]);a.globalAlpha=this._settings.alpha.call(this,c[0]);a.fillStyle=this._settings.color.call(this,c[0]);a.beginPath();this._path(a,x);a.fill();for(r=0;r<c.length;r++){m=C[r];if(!m)for(r==c.length-1&&(m=c[r].$startY),
a=r+1;a<c.length;a++)if(C[a]){m={x:e.x,y:C[0]};a={x:e.x+w.cellWidth*a,y:C[a]};m=D(e.x+w.cellWidth*r,m,a);break}c[r].$startY=m}}}};
dhtmlx.chart.spline={pvt_render_spline:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C;u=this._calculateLineParams(a,c,e,g,h);m=this._settings;this._mapStart=e;r=[];if(c.length){w=m.offset?e.x+.5*u.cellWidth:e.x;for(n=0;n<c.length;n++)if(x=this._getPointY(c[n],e,g,u))v=n?u.cellWidth*n-.5+w:w,r.push({x:v,y:x,index:n});v=this._getSplineParameters(r);for(n=0;n<r.length;n++){w=r[n].x;y=r[n].y;if(n<r.length-1){x=r[n+1].x;C=r[n+1].y;for(u=w;u<x;u++){var A=this._getSplineYPoint(u,w,n,v.a,v.b,v.c,v.d);A<e.y&&
(A=e.y);A>g.y&&(A=g.y);var D=this._getSplineYPoint(u+1,w,n,v.a,v.b,v.c,v.d);D<e.y&&(D=e.y);D>g.y&&(D=g.y);this._drawLine(a,u,A,u+1,D,m.line.color(c[n]),m.line.width)}this._drawLine(a,x-1,this._getSplineYPoint(u,w,n,v.a,v.b,v.c,v.d),x,C,m.line.color(c[n]),m.line.width)}this._drawItem(a,w,y,c[r[n].index],m.label(c[r[n].index]),h,l)}}},_getSplineParameters:function(a){var c,e,g,h,l,m,n=[];h=[];var r=a.length;for(c=0;c<r-1;c++)n[c]=a[c+1].x-a[c].x,h[c]=(a[c+1].y-a[c].y)/n[c];e=[];g=[];e[0]=0;e[1]=2*(n[0]+
n[1]);g[0]=0;g[1]=6*(h[1]-h[0]);for(c=2;c<r-1;c++)e[c]=2*(n[c-1]+n[c])-n[c-1]*n[c-1]/e[c-1],g[c]=6*(h[c]-h[c-1])-n[c-1]*g[c-1]/e[c-1];h=[];h[r-1]=h[0]=0;for(c=r-2;1<=c;c--)h[c]=(g[c]-n[c]*h[c+1])/e[c];e=[];g=[];l=[];m=[];for(c=0;c<r-1;c++)e[c]=a[c].y,g[c]=-n[c]*h[c+1]/6-n[c]*h[c]/3+(a[c+1].y-a[c].y)/n[c],l[c]=h[c]/2,m[c]=(h[c+1]-h[c])/(6*n[c]);return{a:e,b:g,c:l,d:m}},_getSplineYPoint:function(a,c,e,g,h,l,m){return g[e]+(a-c)*(h[e]+(a-c)*(l[e]+(a-c)*m[e]))}};
dhtmlx.chart.barH={pvt_render_barH:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C,A,D,H,E,F,J,K,L,I;r=(g.y-e.y)/c.length;x=this._getLimits("h");y=x.max;x=x.min;E=g.x-e.x;I=!!this._settings.yAxis;h||this._drawHScales(a,c,e,g,x,y,r);I&&(y=parseFloat(this._settings.xAxis.end),x=parseFloat(this._settings.xAxis.start));A=this._getRelativeValue(x,y);n=A[0];A=A[1];J=n?E/n:10;I||(H=10,J=n?(E-H)/n:10);n=parseInt(this._settings.width,10);E=this._series.length;var M=this._settings.seriesMargin;m=this._settings.seriesPadding;
this._series&&n*E+m+(2<E?M*E:0)>r&&(n=r/E-m-(2<E?M:0));m=(r-n*E-M*(E-1))/2;this._settings.border&&(n=parseInt(n,10),m=parseInt(m,10));D="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(n/5);C=!1;(v=this._settings.gradient)&&"function"!=typeof v?(C=v,v=!1):v&&(v=a.createLinearGradient(e.x,e.y,g.x,e.y),this._settings.gradient(v));I||this._drawLine(a,e.x-.5,e.y,e.x-.5,g.y,"#000000",1);for(w=0;w<c.length;w++)if(F=parseFloat(this._settings.value(c[w]||0)),F>y&&(F=
y),F-=x,F*=A,K=e.x,L=e.y+m+(2<E?M*h:0)+parseInt(w*r,10)+n*h,0>F&&"auto"==this._settings.origin||this._settings.xAxis&&0===F&&!("auto"!=this._settings.origin&&this._settings.origin>x))this.canvases[h].renderTextAt("middle","right",K+10,L+n/2+m,this._settings.label(c[w]));else{0>F&&"auto"!=this._settings.origin&&this._settings.origin>x&&(F=0);I||(F+=H/J);u=v||this._settings.color.call(this,c[w]);this._settings.border&&this._drawBarHBorder(a,K,L,n,x,D,J,F,u);a.globalAlpha=this._settings.alpha.call(this,
c[w]);var N=this._drawBarH(a,g,K,L,n,x,D,J,F,u,v,C);0!=C&&this._drawBarHGradient(a,K,L,n,x,D,J,F,u,C);a.globalAlpha=1;N[3]==L?(this.canvases[h].renderTextAt("middle","left",N[0]-5,N[3]+Math.floor(n/2),this._settings.label(c[w])),l.addRect(c[w].id,[N[0]-e.x,N[3]-e.y,N[2]-e.x,N[3]+n-e.y],h)):(this.canvases[h].renderTextAt("middle",!1,N[2]+5,N[1]+Math.floor(n/2),this._settings.label(c[w])),l.addRect(c[w].id,[N[0]-e.x,L-e.y,N[2]-e.x,N[3]-e.y],h))}},_setBarHPoints:function(a,c,e,g,h,l,m,n,r){var u=0;h>
l*m&&(u=-Math.asin((h-l*m)/h)+Math.PI/2);a.moveTo(c,e+n);var v=c+l*m-h-(h?0:n);h<l*m&&a.lineTo(v,e+n);h&&0<h&&a.arc(v,e+h,h-n,-Math.PI/2+u,0,!1);m=e+g-h-(h?0:n);l=v+h-(h?n:0);a.lineTo(l,m);h&&0<h&&a.arc(v,m,h-n,0,Math.PI/2-u,!1);g=e+g-n;a.lineTo(c,g);r||a.lineTo(c,e+n);return[l,g]},_drawHScales:function(a,c,e,g,h,l,m){a=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),a=this._drawHXAxis(this.canvases.x.getCanvas(),c,e,g,h,l));this._settings.yAxis&&(this.canvases.y||
(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),c,e,g,m,a))},_drawHYAxis:function(a,c,e,g,h,l){if(this._settings.yAxis){var m=parseInt(l?l:e.x,10)-.5,n=e.y;this._drawLine(a,m,g.y+.5,m,n,this._settings.yAxis.color,1);for(var r=0;r<c.length;r++){var u="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(c[r]))<this._settings.origin;l=n+h/2+r*h;this.canvases.y.renderTextAt("middle",u?!1:"left",u?m+5:m-5,l,this._settings.yAxis.template(c[r]),
"dhx_axis_item_y",u?0:m-10);this._settings.yAxis.lines.call(this,c[r])&&this._drawLine(a,e.x,l,g.x,l,this._settings.yAxis.lineColor.call(this,c[r]),1)}this._drawLine(a,e.x+.5,n+.5,g.x,n+.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(e,g)}},_drawHXAxis:function(a,c,e,g,h,l){var m;c={};var n=this._settings.xAxis;if(n){var r=g.y+.5,u=e.x-.5,v=g.x-.5,w=e.x;this._drawLine(a,u,r,v,r,n.color,1);n.step&&(m=parseFloat(n.step));if("undefined"==typeof this._configXAxis.step||"undefined"==
typeof this._configXAxis.start||"undefined"==typeof this._configXAxis.end)c=this._calculateScale(h,l),h=c.start,l=c.end,m=c.step,this._settings.xAxis.end=l,this._settings.xAxis.start=h,this._settings.xAxis.step=m;if(0!==m){for(var x=(v-u)*m/(l-h),y=0,C=h;C<=l;C+=m){c.fixNum&&(C=parseFloat((new Number(C)).toFixed(c.fixNum)));var A=Math.floor(u+y*x)+.5;C==h&&"auto"==this._settings.origin||!n.lines.call(this,C)||this._drawLine(a,A,r,A,e.y,this._settings.xAxis.lineColor.call(this,C),1);C==this._settings.origin&&
(w=A+1);this.canvases.x.renderTextAt(!1,!0,A,r+2,n.template(C.toString()),"dhx_axis_item_x");y++}this.canvases.x.renderTextAt(!0,!1,u,g.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",g.x-e.x);n.lines.call(this,{})||this._drawLine(a,u,e.y-.5,v,e.y-.5,this._settings.xAxis.color,.2);return w}}},_correctBarHParams:function(a,c,e,g,h,l,m){var n=c;this._settings.yAxis&&"auto"!=this._settings.origin&&this._settings.origin>m&&(n=c+=(this._settings.origin-m)*h,g-=this._settings.origin-
m,0>g&&(g*=-1,a.translate(c,e+l),a.rotate(Math.PI),c=.5,e=0),c+=.5);return{value:g,x0:c,y0:e,start:n}},_drawBarH:function(a,c,e,g,h,l,m,n,r,u,v,w){a.save();e=this._correctBarHParams(a,e,g,r,n,h,l);a.fillStyle=u;a.beginPath();0<n*e.value?(h=this._setBarHPoints(a,e.x0,e.y0,h,m,n,e.value,this._settings.border?1:0),v&&!w&&a.lineTo(c.x,e.y0+(this._settings.border?1:0))):h=[e.x0,e.y0+1];a.fill();a.restore();return[e.y0!=g?e.start-h[0]:e.start,e.y0,e.y0!=g?e.start:h[0],e.y0!=g?g:h[1]]},_drawBarHBorder:function(a,
c,e,g,h,l,m,n,r){a.save();c=this._correctBarHParams(a,c,e,n,m,g,h);a.beginPath();this._setBorderStyles(a,r);a.globalAlpha=.9;0<m*c.value&&this._setBarHPoints(a,c.x0,c.y0,g,l,m,c.value,a.lineWidth/2,1);a.stroke();a.restore()},_drawBarHGradient:function(a,c,e,g,h,l,m,n,r,u){a.save();c=this._correctBarHParams(a,c,e,n,m,g,h);r=this._setBarGradient(a,c.x0,c.y0+g,c.x0+m*c.value,c.y0,u,r,"x");a.fillStyle=r.gradient;a.beginPath();0<m*c.value&&this._setBarHPoints(a,c.x0,c.y0+r.offset,g-2*r.offset,l,m,c.value,
r.offset);a.fill();a.globalAlpha=1;a.restore()}};dhtmlx.assert(dhtmlx.chart.barH);
dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(a,c,e,g,h,l){var m,n,r,u,v=g.x-e.x,w=!!this._settings.yAxis;n=this._getStackedLimits(c);m=n.max;n=n.min;var x=Math.floor((g.y-e.y)/c.length);h||this._drawHScales(a,c,e,g,n,m,x);w&&(m=parseFloat(this._settings.xAxis.end),n=parseFloat(this._settings.xAxis.start));r=this._getRelativeValue(n,m);u=r[0];r=r[1];var y=u?v/u:10;if(!w)var C=10,y=u?(v-C)/u:10;u=parseInt(this._settings.width,10);u+4>x&&(u=x-4);var A=(x-u)/2,D=!1,H=this._settings.gradient;
H&&(D=!0);w||this._drawLine(a,e.x-.5,e.y,e.x-.5,g.y,"#000000",1);for(var E=0,F=g=0;F<this._series.length;F++)F==h&&(g=E),"stackedBarH"==this._series[F].view&&E++;for(var F=0;F<c.length;F++){g||(c[F].$startX=e.x);E=parseFloat(this._settings.value(c[F]||0));E>m&&(E=m);var E=E-n,E=E*r,J=e.x,K=e.y+A+F*x;g?J=c[F].$startX:c[F].$startX=J;if(0>E||this._settings.yAxis&&0===E)this.canvases.y.renderTextAt("middle",!0,J+10,K+u/2,this._settings.label(c[F]));else{w||(E+=C/y);var L=this._settings.color.call(this,
c[F]);a.globalAlpha=this._settings.alpha.call(this,c[F]);a.fillStyle=this._settings.color.call(this,c[F]);a.beginPath();var I=this._setBarHPoints(a,J,K,u,0,y,E,this._settings.border?1:0);H&&!D&&a.lineTo(e.x+v,K+(this._settings.border?1:0));a.fill();0!=D&&(I=this._setBarGradient(a,J,K+u,J,K,D,L,"x"),a.fillStyle=I.gradient,a.beginPath(),I=this._setBarHPoints(a,J,K,u,0,y,E,0),a.fill());this._settings.border&&this._drawBarHBorder(a,J,K,u,n,0,y,E,L);a.globalAlpha=1;this.canvases[h].renderTextAt("middle",
!0,c[F].$startX+(I[0]-c[F].$startX)/2-1,K+(I[1]-K)/2,this._settings.label(c[F]));l.addRect(c[F].id,[c[F].$startX-e.x,K-e.y,I[0]-e.x,I[1]-e.y],h);c[F].$startX=I[0]}}}};
dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(a,c,e,g,h,l){var m,n,r,u=g.y-e.y;r=!!this._settings.yAxis;var v=!!this._settings.xAxis;n=this._getStackedLimits(c);m=n.max;n=n.min;var w=Math.floor((g.x-e.x)/c.length);h||this._drawScales(c,e,g,n,m,w);r&&(m=parseFloat(this._settings.yAxis.end),n=parseFloat(this._settings.yAxis.start));m=this._getRelativeValue(n,m);r=m[0];m=m[1];u=r?u/r:10;r=parseInt(this._settings.width,10);r+4>w&&(r=w-4);var x=Math.floor((w-r)/2),y=this._settings.gradient?this._settings.gradient:
!1;v||this._drawLine(a,e.x,g.y+.5,g.x,g.y+.5,"#000000",1);for(v=0;v<c.length;v++){var C=parseFloat(this._settings.value(c[v]||0));if(C){h||(C-=n);var C=C*m,A=e.x+x+v*w,D=g.y;h?D=c[v].$startY:c[v].$startY=D;if(!(D<e.y+1))if(0>C||this._settings.yAxis&&0===C)this.canvases.y.renderTextAt(!0,!0,A+Math.floor(r/2),D,this._settings.label(c[v]));else{var H=this._settings.color.call(this,c[v]);a.globalAlpha=this._settings.alpha.call(this,c[v]);a.fillStyle=this._settings.color.call(this,c[v]);a.beginPath();
var E=this._setStakedBarPoints(a,A-(this._settings.border?.5:0),D,r+(this._settings.border?.5:0),u,C,0,e.y);a.fill();y&&(a.save(),E=this._setBarGradient(a,A,D,A+r,E[1],y,H,"y"),a.fillStyle=E.gradient,a.beginPath(),E=this._setStakedBarPoints(a,A+E.offset,D,r-2*E.offset,u,C,this._settings.border?1:0,e.y),a.fill(),a.restore());this._settings.border&&(a.save(),this._setBorderStyles(a,H),a.beginPath(),this._setStakedBarPoints(a,A-.5,D,r+1,u,C,0,e.y,1),a.stroke(),a.restore());a.globalAlpha=1;this.canvases[h].renderTextAt(!1,
!0,A+Math.floor(r/2),E[1]+(D-E[1])/2-7,this._settings.label(c[v]));l.addRect(c[v].id,[A-e.x,E[1]-e.y,E[0]-e.x,(c[v].$startY||D)-e.y],h);c[v].$startY=this._settings.border?E[1]+1:E[1]}}else h&&c[v].$startY||(c[v].$startY=g.y)}},_setStakedBarPoints:function(a,c,e,g,h,l,m,n,r){a.moveTo(c,e);h=e-h*l+m;h<n&&(h=n);a.lineTo(c,h);n=h;a.lineTo(c+g,n);g=c+g;a.lineTo(g,e);r||a.lineTo(c,e);return[g,n-2*m]}};
dhtmlx.chart.line={pvt_render_line:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C,A,D;u=this._calculateLineParams(a,c,e,g,h);m=this._settings;if(c.length){v=m.offset?e.x+.5*u.cellWidth:e.x;r=[];for(n=0;n<c.length;n++)if(D=this._getPointY(c[n],e,g,u)){x=n?u.cellWidth*n-.5+v:v;C="object"==typeof D?D.y0:D;if(n&&this._settings.fixOverflow){A=this._getPointY(c[n-1],e,g,u);if(A.out&&A.out==D.out)continue;w=u.cellWidth*(n-1)-.5+v;y="object"==typeof A?A.y0:A;A.out&&(A="min"==A.out?g.y:e.y,r.push({x:this._calcOverflowX(w,
x,y,C,A),y:A}));D.out&&(A="min"==D.out?g.y:e.y,r.push({x:this._calcOverflowX(w,x,y,C,A),y:A}))}D.out||r.push({x:x,y:D,index:n})}this._mapStart=e;for(n=1;n<=r.length;n++)w=r[n-1].x,y=r[n-1].y,n<r.length&&(x=r[n].x,C=r[n].y,this._drawLine(a,w,y,x,C,m.line.color.call(this,c[n-1]),m.line.width),m.line&&m.line.shadow&&(a.globalAlpha=.3,this._drawLine(a,w+2,y+m.line.width+8,x+2,C+m.line.width+8,"#eeeeee",m.line.width+3),a.globalAlpha=1)),"undefined"!=typeof r[n-1].index&&this._drawItem(a,w,y,c[r[n-1].index],
m.label(c[r[n-1].index]),h,l,e)}},_calcOverflowX:function(a,c,e,g,h){return a+(h-e)*(c-a)/(g-e)},_drawItem:function(a,c,e,g,h,l,m){var n=this._settings.item,r=parseInt(n.radius.call(this,g),10)||0,u=this._mapStart;if(r){a.save();if(n.shadow){a.lineWidth=1;a.strokeStyle="#bdbdbd";a.fillStyle="#bdbdbd";for(var v=[.1,.2,.3],w=v.length-1;0<=w;w--)a.globalAlpha=v[w],a.strokeStyle="#d0d0d0",a.beginPath(),this._strokeChartItem(a,c,e+2*r/3,r+w+1,n.type),a.stroke();a.beginPath();a.globalAlpha=.3;a.fillStyle=
"#bdbdbd";this._strokeChartItem(a,c,e+2*r/3,r+1,n.type);a.fill()}a.restore();"image"==n.type&&n.src?this._drawImage(a,c-r,e-r,n.src,2*r,2*r):(a.lineWidth=n.borderWidth,a.fillStyle=n.color.call(this,g),a.strokeStyle=n.borderColor.call(this,g),a.globalAlpha=n.alpha.call(this,g),a.beginPath(),this._strokeChartItem(a,c,e,r+1,n.type),a.fill(),a.stroke(),a.globalAlpha=1)}h&&this.canvases[l].renderTextAt(!1,!0,c,e-r-this._settings.labelOffset,this._settings.label.call(this,g));a=this._settings.eventRadius||
r+1;m.addRect(g.id,[c-a-u.x,e-a-u.y,c+a-u.x,e+a-u.y],l)},_drawImage:function(a,c,e,g,h,l){var m=document.createElement("img");m.style.display="none";m.style.width=h+"px";m.style.height=l+"px";document.body.appendChild(m);m.src=g;g=function(){a.drawImage(m,c,e)};m.complete?g(m):m.onload=g},_strokeChartItem:function(a,c,e,g,h){var l=[];c=parseInt(c,10);e=parseInt(e,10);!h||"square"!=h&&"s"!=h?!h||"diamond"!=h&&"d"!=h?l=!h||"triangle"!=h&&"t"!=h?[[c,e,g,0,2*Math.PI,!0]]:[[c,e-g],[c+Math.sqrt(3)*g/2,
e+g/2],[c-Math.sqrt(3)*g/2,e+g/2],[c,e-g]]:(h=1<a.lineWidth?a.lineWidth*Math.sqrt(2)/4:0,l=[[c,e-g],[c+g,e],[c,e+g],[c-g,e],[c+h,e-g-h]]):(g*=Math.sqrt(2)/2,l=[[c-g-a.lineWidth/2,e-g],[c+g,e-g],[c+g,e+g],[c-g,e+g],[c-g,e-g]]);this._path(a,l)},_getPointY:function(a,c,e,g){var h=g.minValue,l=g.maxValue,m=g.unit,n=g.valueFactor;a=this._settings.value(a);n*=parseFloat(a||0)-h;this._settings.yAxis||(n+=g.startValue/m);g=e.y-m*n;if(!this._settings.fixOverflow||"line"!=this._settings.view&&"area"!=this._settings.view){if(a>
l&&(g=c.y),0>n||a<h)g=e.y}else if(a>l)g={y:c.y,y0:g,out:"max"};else if(0>n||a<h)g={y:e.y,y0:g,out:"min"};return g},_calculateLineParams:function(a,c,e,g,h){a={};a.totalHeight=g.y-e.y;a.cellWidth=(g.x-e.x)/(this._settings.offset?c.length:c.length-1);var l=!!this._settings.yAxis,m=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(c):this._getLimits();a.maxValue=m.max;a.minValue=m.min;h||this._drawScales(c,e,g,a.minValue,a.maxValue,a.cellWidth);l&&(a.maxValue=parseFloat(this._settings.yAxis.end),
a.minValue=parseFloat(this._settings.yAxis.start));e=this._getRelativeValue(a.minValue,a.maxValue);c=e[0];a.valueFactor=e[1];a.unit=c?a.totalHeight/c:10;a.startValue=0;l||(a.startValue=10,a.unit!=a.totalHeight&&(a.unit=c?(a.totalHeight-a.startValue)/c:10));return a}};
dhtmlx.chart.bar={pvt_render_bar:function(a,c,e,g,h,l){var m,n,r,u,v,w,x,y,C,A,D;m=g.y-e.y;D=!!this._settings.yAxis;A=!!this._settings.xAxis;n=this._getLimits();u=n.max;v=n.min;n=(g.x-e.x)/c.length;h||"auto"!=this._settings.origin&&!D||this._drawScales(c,e,g,v,u,n);D&&(u=parseFloat(this._settings.yAxis.end),v=parseFloat(this._settings.yAxis.start));x=this._getRelativeValue(v,u);w=x[0];x=x[1];C=w?m/w:w;D||"auto"!=this._settings.origin&&A||(y=10,C=w?(m-y)/w:y);!h&&"auto"!=this._settings.origin&&!D&&
this._settings.origin>v&&this._drawXAxis(a,c,e,g,n,g.y-C*(this._settings.origin-v));m=parseInt(this._settings.width,10);var H=w=0;for(r=0;r<this._series.length;r++)r==h&&(H=w),"bar"==this._series[r].view&&w++;var E=this._settings.seriesMargin;r=this._settings.seriesPadding;this._series&&m*w+r+(2<w?E*w:0)>n&&(m=n/w-r-(2<w?E:0));var F=(n-m*w-E*(w-1))/2;this._settings.border&&(m=parseInt(m,10),F=parseInt(F,10));var J="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(m/
5),K=!1,L=this._settings.gradient;L&&"function"!=typeof L?(K=L,L=!1):L&&(L=a.createLinearGradient(0,g.y,0,e.y),this._settings.gradient(L));A||this._drawLine(a,e.x,g.y+.5,g.x,g.y+.5,"#000000",1);for(r=0;r<c.length;r++){var I=parseFloat(this._settings.value(c[r])||0);if(!isNaN(I)){I>u&&(I=u);var I=I-v,I=I*x,M=e.x+F+(2<w?E*H:0)+r*n+m*H,N=g.y;if(0>I||this._settings.yAxis&&0===I&&!("auto"!=this._settings.origin&&this._settings.origin>v))this.canvases[h].renderTextAt(!0,!0,M+Math.floor(m/2),N,this._settings.label(c[r]));
else{D||"auto"!=this._settings.origin&&A||(I+=y/C);var P=L||this._settings.color.call(this,c[r]);a.globalAlpha=this._settings.alpha.call(this,c[r]);var O=this._drawBar(a,e,M,N,m,v,J,C,I,P,L,K);K&&this._drawBarGradient(a,M,N,m,v,J,C,I,P,K);this._settings.border&&this._drawBarBorder(a,M,N,m,v,J,C,I,P);a.globalAlpha=1;O[0]!=M?this.canvases[h].renderTextAt(!1,!0,M+Math.floor(m/2),O[1],this._settings.label(c[r])):this.canvases[h].renderTextAt(!0,!0,M+Math.floor(m/2),O[3],this._settings.label(c[r]));l.addRect(c[r].id,
[M-e.x,O[3]-e.y,O[2]-e.x,O[1]-e.y],h)}}}},_correctBarParams:function(a,c,e,g,h,l,m){var n=e;this._settings.xAxis&&"auto"!=this._settings.origin&&this._settings.origin>m&&(n=e-=(this._settings.origin-m)*h,g-=this._settings.origin-m,0>g&&(g*=-1,a.translate(c+l,e),a.rotate(Math.PI),e=c=0),e-=.5);return{value:g,x0:c,y0:e,start:n}},_drawBar:function(a,c,e,g,h,l,m,n,r,u,v,w){a.save();a.fillStyle=u;g=this._correctBarParams(a,e,g,r,n,h,l);h=0<n*g.value?this._setBarPoints(a,g.x0,g.y0,h,m,n,g.value,this._settings.border?
1:0):[g.x0,g.y0];v&&!w&&a.lineTo(g.x0+(this._settings.border?1:0),c.y);a.fill();a.restore();return[g.x0,g.x0!=e?g.start-h[1]-g.y0:g.y0,g.x0!=e?e+h[0]:h[0],g.x0!=e?g.start-g.y0:h[1]]},_drawBarBorder:function(a,c,e,g,h,l,m,n,r){a.save();c=this._correctBarParams(a,c,e,n,m,g,h);this._setBorderStyles(a,r);0<m*c.value&&this._setBarPoints(a,c.x0,c.y0,g,l,m,c.value,a.lineWidth/2,1);a.stroke();a.restore()},_drawBarGradient:function(a,c,e,g,h,l,m,n,r,u){a.save();c=this._correctBarParams(a,c,e,n,m,g,h);r=this._setBarGradient(a,
c.x0,c.y0,c.x0+g,c.y0-m*c.value+2,u,r,"y");u=this._settings.border?1:0;a.fillStyle=r.gradient;0<m*c.value&&this._setBarPoints(a,c.x0+r.offset,c.y0,g-2*r.offset,l,m,c.value,r.offset+u);a.fill();a.restore()},_setBarPoints:function(a,c,e,g,h,l,m,n,r){a.beginPath();var u=0;if(h>l*m){var v=(h-l*m)/h;1>=v&&-1<=v&&(u=-Math.acos(v)+Math.PI/2)}a.moveTo(c+n,e);v=e-Math.floor(l*m)+h+(h?0:n);h<l*m&&a.lineTo(c+n,v);h&&0<h&&a.arc(c+h,v,h-n,-Math.PI+u,-Math.PI/2,!1);m=c+g-h-n;l=v-h+(h?n:0);a.lineTo(m,l);h&&0<h&&
a.arc(m,v,h-n,-Math.PI/2,0-u,!1);g=c+g-n;a.lineTo(g,e);r||a.lineTo(c+n,e);return[g,l]}};
dhtmlx.chart.pie={pvt_render_pie:function(a,c,e,g,h,l){this._renderPie(a,c,e,g,1,l,h)},_renderPie:function(a,c,e,g,h,l,m){if(c.length){var n=this._getPieParameters(e,g);g=this._settings.radius?this._settings.radius:n.radius;if(!(0>g)){var r=this._getValues(c),u=this._getTotalValue(r),v=this._getRatios(r,u),w=this._settings.x?this._settings.x:n.x,n=this._settings.y?this._settings.y:n.y;1==h&&this._settings.shadow&&this._addShadow(a,w,n,g);var n=n/h,x=-Math.PI/2,y,C=[];a.scale(1,h);this._settings.gradient&&
this._showRadialGradient(a,w,n,g,1!=h?w+g/3:w,1!=h?n+g/3:n);this._settings.labelLines&&(this._labelMargins=this._getLabelMargins(v,g));for(var A=0;A<c.length;A++)if(r[A]){a.strokeStyle=1==c.length?this._settings.color.call(this,c[A]):this._settings.lineColor.call(this,c[A]);a.beginPath();a.moveTo(w,n);C.push(x);y=-Math.PI/2+v[A]-1E-4;a.arc(w,n,g,x,y,!1);a.lineTo(w,n);var D=this._settings.color.call(this,c[A]);a.fillStyle=D;a.fill();this._settings.pieInnerText&&this._drawSectorLabel(w,n,5*g/6,x,y,
h,this._settings.pieInnerText(c[A],u),!0);this._settings.label&&this._drawSectorLabel(w,n,g,x,y,h,this._settings.label(c[A]),0,this._labelMargins?this._labelMargins[A]:{},a);1!=h&&(this._createLowerSector(a,w,n,x,y,g,!0),a.fillStyle="#000000",a.globalAlpha=.2,this._createLowerSector(a,w,n,x,y,g,!1),a.globalAlpha=1,a.fillStyle=D);l.addSector(c[A].id,x,y,w-e.x,n-e.y/h,g,h,m);x=y}a.globalAlpha=.8;if(1<C.length)for(A=0;A<C.length;A++)e=this._getPositionByAngle(C[A],w,n,g),this._drawLine(a,w,n,e.x,e.y,
this._settings.lineColor.call(this,c[A]),2);1==h&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(w,n,g+1,0,2*Math.PI,!1),a.stroke());a.globalAlpha=1;a.scale(1,1/h)}}},_getLabelMargins:function(a,c){var e,g,h,l,m={1:[0]};for(h=1;h<a.length;h++){e=-Math.PI/2+(1<h?a[h-1]-(a[h-1]-a[h-2])/2:a[h-1]/2);g=-Math.PI/2+a[h]-(a[h]-a[h-1])/2;var n=Math.cos(g),r=Math.sin(g),u=Math.cos(e);l=Math.sin(e);e=Math.round((c+8)*Math.abs(Math.sin(g)-Math.sin(e)));n=0>n?0>r?4:3:0>r?1:2;u=0>u?0>l?4:3:0>l?1:2;
m[n]||(m[n]=[]);m[n].push(u==n?e:0)}h=[];for(var v in m)if(u=n=0,1==v||3==v){l=v-1;for(r=0;0<l;)m[l]&&(r+=m[l].length),l--;h[r+m[v].length-1]={y:0,x:0};for(l=m[v].length-2;0<=l;)n=(n||l)&&18>m[v][l+1]-n?n+(18-m[v][l+1]):0,h[r+l]={y:n*(1==v?-1:1)},l--;for(l=h.length-m[v].length;l<h.length;l++)0!=h[l].y?(u+=6,h[l].x=u):u=h[l].x=0}else{l=1;for(h.push({y:0,x:0});l<m[v].length;)n=18>m[v][l]-n?n+(18-m[v][l]):0,h.push({y:n*(4==v?-1:1)}),l++;for(l=h.length-1;l>=h.length-m[v].length;l--)0!=h[l].y?(u+=8,h[l].x=
u):(u=0,h[l].x=0)}return h},_getValues:function(a){for(var c=[],e=0;e<a.length;e++)c.push(parseFloat(this._settings.value(a[e])||0));return c},_getTotalValue:function(a){for(var c=0,e=0;e<a.length;e++)c+=a[e];return c},_getRatios:function(a,c){var e,g=[],h=0;c=c||this._getTotalValue(a);for(var l=0;l<a.length;l++)e=a[l],g[l]=2*Math.PI*(c?(e+h)/c:1/a.length),h+=e;return g},_getPieParameters:function(a,c){var e=c.x-a.x,g=c.y-a.y,h=a.x+e/2,l=a.y+g/2,e=Math.min(e/2,g/2);return{x:h,y:l,radius:e}},_createLowerSector:function(a,
c,e,g,h,l,m){a.lineWidth=1;if(0>=g&&0<=h||0<=g&&h<=Math.PI||.003<Math.abs(g-Math.PI)&&g<=Math.PI&&h>=Math.PI){0>=g&&0<=h&&(g=0,m=!1,this._drawSectorLine(a,c,e,l,g,h));g<=Math.PI&&h>=Math.PI&&(h=Math.PI,m=!1,this._drawSectorLine(a,c,e,l,g,h));var n=(this._settings.height||Math.floor(l/4))/this._settings.cant;a.beginPath();a.arc(c,e,l,g,h,!1);a.lineTo(c+l*Math.cos(h),e+l*Math.sin(h)+n);a.arc(c,e+n,l,h,g,!0);a.lineTo(c+l*Math.cos(g),e+l*Math.sin(g));a.fill();m&&a.stroke()}},_drawSectorLine:function(a,
c,e,g,h,l){a.beginPath();a.arc(c,e,g,h,l,!1);a.stroke()},_addShadow:function(a,c,e,g){a.globalAlpha=.5;for(var h="#c4c4c4 #c6c6c6 #cacaca #dcdcdc #dddddd #e0e0e0 #eeeeee #f5f5f5 #f8f8f8".split(" "),l=h.length-1;-1<l;l--)a.beginPath(),a.fillStyle=h[l],a.arc(c+1,e+1,g+l,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},_getGrayGradient:function(a){a.addColorStop(0,"#ffffff");a.addColorStop(.7,"#7a7a7a");a.addColorStop(1,"#000000");return a},_showRadialGradient:function(a,c,e,g,h,l){a.beginPath();var m;"function"!=
typeof this._settings.gradient?(m=a.createRadialGradient(h,l,g/4,c,e,g),m=this._getGrayGradient(m)):m=this._settings.gradient(m);a.fillStyle=m;a.arc(c,e,g,0,2*Math.PI,!0);a.fill();a.globalAlpha=.7},_drawSectorLabel:function(a,c,e,g,h,l,m,n,r,u){if(m=this.canvases[0].renderText(0,0,m,0,1)){var v=m.scrollWidth;m.style.width=v+"px";v>a&&(v=a);var w=.2>h-g?4:8;n&&(w=v/1.8);var x=g+(h-g)/2,y=e;e=n?5*e/6:e+this._settings.labelOffset;e-=(w-8)/2;var C=-w,A="right";if(x>=Math.PI/2&&x<Math.PI||x<=3*Math.PI/
2&&x>=Math.PI)C=-v-C,A="left";var D=0;!n&&1>l&&0<x&&x<Math.PI&&(D=(this._settings.height||Math.floor(e/4))/l);l=(c+Math.floor(e+D)*Math.sin(x))*l+-8;e=a+Math.floor(e+w/2)*Math.cos(x)+C;h=h<Math.PI/2+.01;(g=g<Math.PI/2)&&h?e=Math.max(e,a+3):g||h?n||this._settings.labelLines||!(x>=Math.PI/2&&x<Math.PI||x<=3*Math.PI/2&&x>=Math.PI)||(e+=v/3):e=Math.min(e,a-v);this._settings.labelLines&&!n&&(Math.abs((Math.abs(r||0)+Math.abs(y*Math.sin(x)))/Math.sin(x)),r.y&&(l+=r.y),e="left"==A?e-r.x:e+r.x,u.beginPath(),
u.strokeStyle="#555",a+=y*Math.cos(x),c+=y*Math.sin(x),u.moveTo(a,c),n=e-("left"==A?C-8:2),r=l,"left"==A&&n>a?(n=a-Math.abs(r-c+16)/Math.tan(x-Math.PI),r+=16,x<Math.PI&&(r-=8)):r+=8,u.lineTo(n,r),u.lineTo(n+("left"==A?-5:5),r),u.stroke(),l=r-8,e=n+C+("left"==A?-15:15));m.style.top=l+"px";m.style.left=e+"px";m.style.width=v+"px";m.style.textAlign=A;m.style.whiteSpace="nowrap"}}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(a,c,e,g,h,l){this._renderPie(a,c,e,g,this._settings.cant,l)}};
dhtmlx.chart.donut={pvt_render_donut:function(a,c,e,g,h,l){c.length&&(this._renderPie(a,c,e,g,1,l),c=this._settings,e=this._getPieParameters(e,g),g=c.radius?c.radius:e.radius,g=c.innerRadius&&c.innerRadius<g?c.innerRadius:g/3,h=c.x?c.x:e.x,c=c.y?c.y:e.y,a.fillStyle="#ffffff",a.beginPath(),a.arc(h,c,g,0,2*Math.PI,!0),a.fill())}};
dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(a){return this._grid=a},getRecords:function(a){return a.rowsBuffer},getDetails:function(a){for(var c={},e=0;e<this._grid.getColumnsNum();e++)c["data"+e]=this._grid[this._grid_getter](a,e);return c},getInfo:function(a){return{_size:0,_from:0}}};
dhtmlx.ui.Canvas=function(a,c,e){this._canvas_labels=[];this._canvas_name=c;this._obj=a;var g=a.offsetWidth*(window.devicePixelRatio||1),h=a.offsetHeight*(window.devicePixelRatio||1);e=(e||"")+(";width:"+a.offsetWidth+"px;height:"+a.offsetHeight+"px;");this._prepareCanvas(c,e,g,h)};
dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(a,c,e,g){this._canvas=dhtmlx.html.create("canvas",{width:e,height:g,canvas_id:a,style:c||""});this._obj.appendChild(this._canvas);this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser"));return this._canvas},getCanvas:function(a){a=(this._canvas||this._prepareCanvas()).getContext(a||
"2d");this._webixDevicePixelRatio||(this._webixDevicePixelRatio=!0,a.scale(window.devicePixelRatio||1,window.devicePixelRatio||1));return a},_resizeCanvas:function(){if(this._canvas){var a=this._canvas.parentNode.offsetWidth,c=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",a*(window.devicePixelRatio||1));this._canvas.setAttribute("height",c*(window.devicePixelRatio||1));this._canvas.style.width=a+"px";this._canvas.style.height=c+"px";this._webixDevicePixelRatio=!1}},renderText:function(a,
c,e,g,h){if(e)return a=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(g?" "+g:""),style:"left:"+a+"px; top:"+c+"px;"},e),this._obj.appendChild(a),this._canvas_labels.push(a),h&&(a.style.width=h+"px"),a},renderTextAt:function(a,c,e,g,h,l,m){if(h=this.renderText.call(this,e,g,h,l,m))a&&(h.style.top="middle"==a?parseInt(g-h.offsetHeight/2,10)+"px":g-h.offsetHeight+"px"),c&&(h.style.left="left"==c?e-h.offsetWidth+"px":parseInt(e-h.offsetWidth/2,10)+"px");return h},clearCanvas:function(a){for(var c=
[],c=0;c<this._canvas_labels.length;c++)this._obj.removeChild(this._canvas_labels[c]);this._canvas_labels=[];if(!a&&this._obj._htmlmap){for(c=this._getMapAreas();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._obj.offsetWidth*(window.devicePixelRatio||1),this._obj.offsetHeight*(window.devicePixelRatio||1))},toggleCanvas:function(){this._toggleCanvas("none"==
this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(a){var c,e;for(e=0;e<this._canvas_labels.length;e++)this._canvas_labels[e].style.display=a?"":"none";if(this._obj._htmlmap)for(c=this._getMapAreas(),e=0;e<c.length;e++)a?c[e].removeAttribute("disabled"):c[e].setAttribute("disabled","true");this._canvas.style.display=a?"":"none"},_getMapAreas:function(){var a=[],c,e;c=this._obj._htmlmap.getElementsByTagName("AREA");
for(e=0;e<c.length;e++)c[e].getAttribute("userdata")==this._canvas_name&&a.push(c[e]);return a}};
dhtmlXChart=function(a){this.name="Chart";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_chart");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,!0);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.Destruction);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var c in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[c]);
a.preset&&this.definePreset(a);this._parseSettings(a,this.defaults);this._series=[this._settings];this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this));this.attachEvent("onLocateData",this._switchSerie)};
dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(a,c,e){c=e.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,c,e])){a=this._settings;var g=a.legend.values;a=g&&"undefined"!=typeof g[c].toggle?g[c].toggle:a.legend.toggle;"undefined"!=typeof c&&1<this._series.length&&a&&(-1!=e.className.indexOf("hidden")?this.showSeries(c):this.hideSeries(c))}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,
arguments)},resize:function(){for(var a in this.canvases)this.canvases[a]._resizeCanvas();this.render()},view_setter:function(a){dhtmlx.chart[a]||dhtmlx.error("Chart type extension is not loaded: "+a);"undefined"==typeof this._settings.offset&&(this._settings.offset=!("area"==a||"stackedArea"==a));"radar"!=a||this._settings.yAxis||this.define("yAxis",{});"scatter"==a&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{}));return a},clearCanvas:function(){if(this.canvases&&
"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,c,e,g,h;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(c in this.canvases)this.canvases[c].clearCanvas();else this.canvases={};this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth));a=this._getChartBounds(this._obj.offsetWidth,
this._obj.offsetHeight);this._map=g=new dhtmlx.ui.Map(this._id);h=this._settings;e=this._getChartData();for(c=0;c<this._series.length;c++)this._settings=this._series[c],this.canvases[c]||(this.canvases[c]=new dhtmlx.ui.Canvas(this._obj,c,"z-index:"+(2+c))),this["pvt_render_"+this._settings.view](this.canvases[c].getCanvas(),e,a.start,a.end,c,g);g.render(this._obj);this._obj.lastChild.style.zIndex=1E3;this._applyBounds(this._obj.lastChild,a);this.callEvent("onAfterRender",[]);this._settings=h}},_applyBounds:function(a,
c){var e={};e.left=c.start.x;e.top=c.start.y;e.width=c.end.x-c.start.x;e.height=c.end.y-c.start.y;for(var g in e)a.style[g]=e[g]+"px"},_getChartData:function(){var a,c,e,g,h,l;g=this.data.getRange();a=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis";if((c=this._settings[a])&&c.units&&"object"==typeof c.units){e=c.units;a=[];if("undefined"!=typeof e.start&&"undefined"!=typeof e.end&&"undefined"!=typeof e.next)for(h=e.start;h<=e.end;)a.push(h),h=e.next.call(this,h);else"[object Array]"===
Object.prototype.toString.call(e)&&(a=e);e=[];if(a.length){h=c.value;l={};for(c=0;c<g.length;c++)l[h(g[c])]=c;for(c=0;c<a.length;c++)"undefined"!=typeof l[a[c]]?(g[l[a[c]]].$unit=a[c],e.push(g[l[a[c]]])):e.push({$unit:a[c]})}return e}return g},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define("value",a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,
pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){"function"!=typeof a&&a&&!0===a&&(a="light");return a},colormap:{RAINBOW:function(a){a=Math.floor(this.indexById(a.id)/this.dataCount()*1536);1536==a&&--a;return this._rainbow[Math.floor(a/256)](a%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return a&&0!=a?dhtmlx.Template.obj_setter(a):!1},definePreset:function(a){this.define("preset",a.preset);delete a.preset},
preset_setter:function(a){var c,e,g;this.defaults=dhtmlx.extend({},this.defaults);if("object"==typeof dhtmlx.presets.chart[a]){g=dhtmlx.presets.chart[a];for(c in g)if("object"==typeof g[c])if(this.defaults[c]&&"object"==typeof this.defaults[c])for(e in this.defaults[c]=dhtmlx.extend({},this.defaults[c]),g[c])this.defaults[c][e]=g[c][e];else this.defaults[c]=dhtmlx.extend({},g[c]);else this.defaults[c]=g[c];return a}return!1},legend_setter:function(a){if(!a)return this.legendObj&&(this.legendObj.innerHTML=
"",this.legendObj=null),!1;"object"!=typeof a&&(a={template:a});this._mergeSettings(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});a.template=dhtmlx.Template.setter(a.template);return a},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,
color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a});this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));for(var c=["alpha","borderColor","color","radius"],e=0;e<c.length;e++)a[c[e]]=dhtmlx.Template.setter(a[c[e]]);return a},line_setter:function(a){"object"!=typeof a&&
(a={color:a});dhtmlx.extend(this.defaults.line,a);a=dhtmlx.extend({},this.defaults.line);a.color=dhtmlx.Template.setter(a.color);return a},padding_setter:function(a){"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a});this._mergeSettings(a,{left:50,right:20,top:35,bottom:40});return a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a});a.value||(a.value=a.template);this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});
this._converToTemplate(["lineColor","template","lines","value"],a);this._configXAxis=dhtmlx.extend({},a);return a},yAxis_setter:function(a){this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});this._converToTemplate(["lineColor","template","lines","bg"],a);this._configYAxis=dhtmlx.extend({},a);return a},_converToTemplate:function(a,c){for(var e=0;e<a.length;e++)c[a[e]]=dhtmlx.Template.setter(c[a[e]])},_drawScales:function(a,c,e,g,h,l){var m=
0;this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),m=this._drawYAxis(this.canvases.y.getCanvas(),a,c,e,g,h));this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),a,c,e,l,m));return m},_drawXAxis:function(a,c,e,g,h,l){var m=e.x-.5;l=parseInt(l?l:g.y,10)+.5;for(var n=g.x,r,u=!0,v=0;v<c.length;v++){!0===this._settings.offset?r=m+h/2+v*h:(r=v==c.length-1?g.x:m+v*
h,u=!!v);r=Math.ceil(r)-.5;var w="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(c[v]))<this._settings.origin;this._drawXAxisLabel(r,l,c[v],u,w);(this._settings.offset||v)&&this._settings.xAxis.lines.call(this,c[v])&&this._drawXAxisLine(a,r,g.y,e.y,c[v])}this.canvases.x.renderTextAt(!0,!1,m,g.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",g.x-e.x);this._drawLine(a,m,l,n,l,this._settings.xAxis.color,1);this._settings.xAxis.lines.call(this,
{})&&this._settings.offset&&this._drawLine(a,n+.5,g.y,n+.5,e.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(a,c,e,g,h,l){var m;c={};if(this._settings.yAxis){var n=e.x-.5,r=g.y,u=e.y,v=g.y;this._settings.yAxis.step&&(m=parseFloat(this._settings.yAxis.step));if("undefined"==typeof this._configYAxis.step||"undefined"==typeof this._configYAxis.start||"undefined"==typeof this._configYAxis.end)c=this._calculateScale(h,l),h=c.start,l=c.end,m=c.step,this._settings.yAxis.end=l,this._settings.yAxis.start=
h;this._setYAxisTitle(e,g);0===m&&(l=h,m=1);for(var w=l==h?r-u:(r-u)*m/(l-h),x=0,y=h;y<=l;y+=m){c.fixNum&&(y=parseFloat((new Number(y)).toFixed(c.fixNum)));var C=Math.floor(r-x*w)+.5;y==h&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,y)||this._drawLine(a,n,C,g.x,C,this._settings.yAxis.lineColor.call(this,y),1);y==this._settings.origin&&(v=C);var A=y;1>m&&(A=Math.min(this._log10(m),0>=h?0:this._log10(h)),A=Math.pow(10,-A),y=A=Math.round(y*A)/A);this.canvases.y.renderText(0,
C-5,this._settings.yAxis.template(A.toString()),"dhx_axis_item_y",e.x-5);x++}this._drawLine(a,n,r+1,n,u,this._settings.yAxis.color,1);return v}},_setYAxisTitle:function(a,c){var e="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":"");if(e=this.canvases.y.renderTextAt("middle",!1,0,parseInt((c.y-a.y)/2+a.y,10),this._settings.yAxis.title,e))e.style.left=(dhtmlx.env.transform?(e.offsetHeight-e.offsetWidth)/2:0)+"px"},_calculateScale:function(a,c){"auto"!=this._settings.origin&&this._settings.origin<
a&&(a=this._settings.origin);var e,g,h;e=(c-a)/8||1;var l=Math.floor(this._log10(e));h=Math.pow(10,l);e=5<e/h?10:5;e=parseInt(e,10)*h;if(e>Math.abs(a))g=0>a?-e:0;else{h=Math.abs(a);g=Math.floor(this._log10(h));var m=h/Math.pow(10,g);g=Math.ceil(10*m)/10*Math.pow(10,g)-e;for(1<h&&.1<e&&(g=Math.ceil(g));0>a?g<=a:g>=a;)g-=e;0>a&&(g=-g-2*e)}for(h=g;h<c;)h+=e,h=parseFloat((new Number(h)).toFixed(Math.abs(l)));return{start:g,end:h,step:e,fixNum:Math.abs(l)}},_getLimits:function(a,c){var e,g;g=arguments.length&&
"h"==a?this._configXAxis:this._configYAxis;c=c||"value";if(g&&"undefined"!=typeof g.end&&"undefined"!=typeof g.start&&g.step)e=parseFloat(g.end),g=parseFloat(g.start);else if(e=this.max(this._series[0][c]),g=g&&"undefined"!=typeof g.start?parseFloat(g.start):this.min(this._series[0][c]),1<this._series.length)for(var h=1;h<this._series.length;h++){var l=this.max(this._series[h][c]),m=this.min(this._series[h][c]);l>e&&(e=l);m<g&&(g=m)}return{max:e,min:g}},_log10:function(a){return Math.floor(Math.log(a)/
Math.LN10)},_drawXAxisLabel:function(a,c,e,g,h){this._settings.xAxis&&(a=this.canvases.x.renderTextAt(h,g,a,c-(h?2:0),this._settings.xAxis.template(e)))&&(a.className+=" dhx_axis_item_x")},_drawXAxisLine:function(a,c,e,g,h){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(a,c,e,c,g,this._settings.xAxis.lineColor.call(this,h),1)},_drawLine:function(a,c,e,g,h,l,m){a.strokeStyle=l;a.lineWidth=m;a.beginPath();a.moveTo(c,e);a.lineTo(g,h);a.stroke();a.lineWidth=1},_getRelativeValue:function(a,
c){return[c!=a?c-a:a,1]},_rainbow:[function(a){return"#FF"+dhtmlx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhtmlx.math.toHex(a/2+128,2)+"00"},function(a){return"#"+dhtmlx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhtmlx.math.toHex(a,2)},function(a){return"#00"+dhtmlx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhtmlx.math.toHex(a,2)+"00FF"}],addSeries:function(a){var c=this._settings;this._settings=dhtmlx.extend({},c);this._parseSettings(a,{});this._series.push(this._settings);
this._settings=c},_switchSerie:function(a,c,e){this._active_serie=1==this._series.length?c.getAttribute("userdata"):this._getActiveSeries(e);if(this._series[this._active_serie]){for(e=0;e<this._series.length;e++)(a=this._series[e].tooltip)&&a.disable();c.getAttribute("disabled")||(a=this._series[this._active_serie].tooltip)&&a.enable()}},_getActiveSeries:function(a){var c,e,g,h,l;e=this._map._areas;c=dhtmlx.html.offset(this._obj._htmlmap);g=dhtmlx.html.pos(a);a=g.x-c.x;l=g.y-c.y;for(g=0;g<e.length;g++)c=
e[g].points,a<=c[2]&&a>=c[0]&&l<=c[3]&&l>=c[1]&&(h?e[g].index>h.index&&(h=e[g]):h=e[g]);return h?h.index:0},hideSeries:function(a){this.canvases[a].hideCanvas();this._settings.legend.values&&this._settings.legend.values[a]&&(this._settings.legend.values[a].$hidden=!0);this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas();this._settings.legend.values&&this._settings.legend.values[a]&&delete this._settings.legend.values[a].$hidden;this._drawLegend()},_changeColorSV:function(a,c,e){a=
dhtmlx.math.toRgb(a);a=dhtmlx.math.rgbToHsv(a[0],a[1],a[2]);a[1]*=c;a[2]*=e;return"rgb("+dhtmlx.math.hsvToRgb(a[0],a[1],a[2])+")"},_setBorderStyles:function(a,c){var e;e=dhtmlx.math.toRgb(c);e=dhtmlx.math.rgbToHsv(e[0],e[1],e[2]);e[2]/=2;c="rgb("+dhtmlx.math.hsvToRgb(e[0],e[1],e[2])+")";a.strokeStyle=c;1==a.globalAlpha&&(a.globalAlpha=.9)},_drawLegend:function(a,c){var e,g,h,l,m,n=0,r=0,u,v;a=a||[];u=this.canvases.legend.getCanvas();g=this._settings.legend;l="x"!=this._settings.legend.layout?"width:"+
g.width+"px":"";this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj));this.canvases.legend.clearCanvas(!0);h=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+n+"px; top:"+r+"px;"+l},"");g.padding&&(h.style.padding=g.padding+"px");this.legendObj=h;this._obj.appendChild(h);l=[];if(g.values)for(e=0;e<g.values.length;e++)l.push(this._drawLegendText(h,g.values[e].text,"undefined"!=typeof g.values[e].id?typeof g.values[e].id:e,g.values[e].$hidden));
else for(e=0;e<a.length;e++)l.push(this._drawLegendText(h,g.template(a[e])));m=h.offsetWidth;e=h.offsetHeight;m<this._obj.offsetWidth&&("x"==g.layout&&"center"==g.align&&(n=(this._obj.offsetWidth-m)/2),"right"==g.align&&(n=this._obj.offsetWidth-m),g.margin&&"center"!=g.align&&(n+=("left"==g.align?1:-1)*g.margin));e<this._obj.offsetHeight&&("middle"==g.valign&&"center"!=g.align&&"x"!=g.layout?r=(this._obj.offsetHeight-e)/2:"bottom"==g.valign&&(r=this._obj.offsetHeight-e),g.margin&&"middle"!=g.valign&&
(r+=("top"==g.valign?1:-1)*g.margin));h.style.left=n+"px";h.style.top=r+"px";u.save();for(e=0;e<l.length;e++)v=l[e],g.values&&g.values[e].$hidden?(m=!0,h=g.values[e].disableColor?g.values[e].disableColor:"#d9d9d9"):(m=!1,h=g.values?g.values[e].color:this._settings.color.call(this,a[e])),this._drawLegendMarker(u,v.offsetLeft+n+("right"==g.marker.position?v.offsetWidth-g.marker.width:0),v.offsetTop+r,h,v.offsetHeight,m,e);u.restore()},_drawLegendText:function(a,c,e,g){var h="",l=this._settings.legend;
"x"==l.layout&&(h="float:left;");var m=l.marker.position,h=dhtmlx.html.create("DIV",{style:h+"padding-"+(m&&"right"==m?"right":"left")+":"+(10+l.marker.width)+"px","class":"dhx_chart_legend_item"+(g?" hidden":"")},c);2<arguments.length&&h.setAttribute("series_id",e);a.appendChild(h);return h},_drawLegendMarker:function(a,c,e,g,h,l,m){var n=[],n=this._settings.legend.marker,r=this._settings.legend.values,r=r&&r[m].markerType?r[m].markerType:n.type;g&&(a.fillStyle=g,a.strokeStyle=this._getDarkenColor(g,
.75));a.beginPath();if("round"!=r&&n.radius)if("item"==r){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){a.beginPath();a.lineWidth=this._series[m].line.width;a.strokeStyle=l?g:this._series[m].line.color.call(this,{});var u=c+5,r=e+h/2;a.moveTo(u,r);u+=n.width;a.lineTo(u,r);a.stroke()}m=this._series[m].item;if(r=parseInt(m.radius.call(this,{}),10)||0){if("image"==m.type&&m.src){this._drawImage(a,c+5,e+n.height/2-5,m.src,2*r,2*r);return}a.beginPath();l?(a.lineWidth=
m.borderWidth,a.strokeStyle=g,a.fillStyle=g):(a.lineWidth=m.borderWidth,a.fillStyle=m.color.call(this,{}),a.strokeStyle=m.borderColor.call(this,{}),a.globalAlpha=m.alpha.call(this,{}));a.beginPath();c+=n.width/2+5;this._strokeChartItem(a,c,e+h/2,r+1,m.type);a.fill();a.stroke()}a.globalAlpha=1}else a.lineWidth=1,c+=5,e+=parseInt(h/2-n.height/2,10),n=[[c+n.radius,e+n.radius,n.radius,Math.PI,3*Math.PI/2,!1],[c+n.width-n.radius,e],[c+n.width-n.radius,e+n.radius,n.radius,-Math.PI/2,0,!1],[c+n.width,e+
n.height-n.radius],[c+n.width-n.radius,e+n.height-n.radius,n.radius,0,Math.PI/2,!1],[c+n.radius,e+n.height],[c+n.radius,e+n.height-n.radius,n.radius,Math.PI/2,Math.PI,!1],[c,e+n.radius]],this._path(a,n);else a.lineWidth=n.height,a.lineCap=r,c+=a.lineWidth/2+5,e+=h/2,a.moveTo(c,e),u=c+n.width-n.height+1,a.lineTo(u,e);a.stroke();a.fill()},_getDarkenColor:function(a,c){var e;e=dhtmlx.math.toRgb(a);e=dhtmlx.math.rgbToHsv(e[0],e[1],e[2]);e[2]*=c;return"rgb("+dhtmlx.math.hsvToRgb(e[0],e[1],e[2])+")"},_getChartBounds:function(a,
c){var e,g,h,l;e=this._settings.padding.left;g=this._settings.padding.top;h=a-this._settings.padding.right;l=c-this._settings.padding.bottom;if(this._settings.legend){var m=this._settings.legend,n=this._settings.legend.width,r=this._settings.legend.height;"x"==m.layout?"center"==m.valign?"right"==m.align?h-=n:"left"==m.align&&(e+=n):"bottom"==m.valign?l-=r:g+=r:"right"==m.align?h-=n:"left"==m.align&&(e+=n)}return{start:{x:e,y:g},end:{x:h,y:l}}},_getStackedLimits:function(a){var c,e,g;if(this._settings.yAxis&&
"undefined"!=typeof this._settings.yAxis.end&&"undefined"!=typeof this._settings.yAxis.start&&this._settings.yAxis.step)e=parseFloat(this._settings.yAxis.end),g=parseFloat(this._settings.yAxis.start);else{for(c=0;c<a.length;c++)for(a[c].$sum=0,a[c].$min=Infinity,e=0;e<this._series.length;e++)g=parseFloat(this._series[e].value(a[c])||0),isNaN(g)||(-1!=this._series[e].view.toLowerCase().indexOf("stacked")&&(a[c].$sum+=g),g<a[c].$min&&(a[c].$min=g));e=-Infinity;g=Infinity;for(c=0;c<a.length;c++)a[c].$sum>
e&&(e=a[c].$sum),a[c].$min<g&&(g=a[c].$min);0<g&&(g=0)}return{max:e,min:g}},_setBarGradient:function(a,c,e,g,h,l,m,n){var r;"light"==l?(a="x"==n?a.createLinearGradient(c,e,g,e):a.createLinearGradient(c,e,c,h),r=[[0,"#FFFFFF"],[.9,m],[1,m]],l=2):"falling"==l||"rising"==l?(a="x"==n?a.createLinearGradient(c,e,g,e):a.createLinearGradient(c,e,c,h),c=dhtmlx.math.toRgb(m),c=dhtmlx.math.rgbToHsv(c[0],c[1],c[2]),c[1]*=.5,c="rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")","falling"==l?r=[[0,c],[.7,m],[1,m]]:
"rising"==l&&(r=[[0,m],[.3,m],[1,c]]),l=0):(a.globalAlpha=.37,l=0,a="x"==n?a.createLinearGradient(c,h,c,e):a.createLinearGradient(c,e,g,e),r=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]);this._gradient(a,r);return{gradient:a,offset:l}},_getPositionByAngle:function(a,c,e,g){a*=-1;c+=Math.cos(a)*g;e-=Math.sin(a)*g;return{x:c,y:e}},_gradient:function(a,c){for(var e=0;e<c.length;e++)a.addColorStop(c[e][0],c[e][1])},_path:function(a,c){var e,g;for(e=0;e<c.length;e++)g=
e?"lineTo":"moveTo",2<c[e].length&&(g="arc"),a[g].apply(a,c[e])},_circle:function(a,c,e,g){a.arc(c,e,g,2*Math.PI,!0)},_addMapRect:function(a,c,e,g,h){a.addRect(c,[e[0].x-g.x,e[0].y-g.y,e[1].x-g.x,e[1].y-g.y],h)}};dhtmlx.compat("layout");
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachChart=function(a){this.callEvent("_onBeforeContentAttach",["chart"]);var c=document.createElement("DIV");c.id="dhxChartObj_"+window.dhx4.newId();c.style.width="100%";c.style.height="100%";document.body.appendChild(c);this._attachObject(c);a.container=c.id;this.dataType="chart";this.dataObj=new dhtmlXChart(a);this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()});return this.dataObj});
dhtmlx.ui.pager=function(a){this.name="Pager";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(a,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this._settings;this.refresh()};
dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(a,c){this.select(c)}},select:function(a){switch(a){case "next":a=this._settings.page+1;break;case "prev":a=this._settings.page-1;break;case "first":a=0;break;case "last":a=this._settings.limit-1}0>a&&(a=0);a>=this.data.limit&&(a=this.data.limit-1);this.callEvent("onBeforePageChange",[this._settings.page,a])&&(this.data.page=1*a,this.refresh(),this.callEvent("onAfterPageChange",[a]))},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),
pages:function(a){var c="";if(-1==a.page)return"";a.min=a.page-Math.round((a.group-1)/2);a.max=a.min+a.group-1;0>a.min&&(a.max+=-1*a.min,a.min=0);a.max>=a.limit&&(a.min-=Math.min(a.min,a.max-a.limit+1),a.max=a.limit-1);for(var e=a.min||0;e<=a.max;e++)c+=this.button({id:e,index:e+1,selected:e==a.page?"_selected":""});return c},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",
selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var a=this._settings;a.limit=Math.ceil(a.count/a.size);a.limit&&a.limit!=a.old_limit&&(a.page=Math.min(a.limit-1,a.page));var c=a.page;if(-1!=c&&c!=a.old_page||a.limit!=a.old_limit)this.render(),this.callEvent("onRefresh",
[]),a.old_limit=a.limit,a.old_page=a.page},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};
dhtmlx.DataProcessor={_dp_init:function(a){a._methods=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(c){a.setUpdated(c,!0,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(a,e){a.getUserData&&a.getUserData(e,this._userdata)},this));this.attachEvent("onBeforeDelete",function(c){if(a._silent_mode)return!0;var e=a.getState(c);if("inserted"==e)return a.setUpdated(c,!1),!0;if("deleted"==e)return!1;if("true_deleted"==e)return!0;a.setUpdated(c,!0,"deleted");
return!1});this.attachEvent("onAfterEditStop",function(c){a.setUpdated(c,!0,"updated")});this.attachEvent("onBindUpdate",function(c){window.setTimeout(function(){a.setUpdated(c.id,!0,"updated")},1)});a._getRowData=function(a,e){var g=this.obj.data.get(a),h={},l;for(l in g)0!==l.indexOf("_")&&(h[l]=g[l]);return h};a._clearUpdateFlag=function(){};this._userdata={};a.attachEvent("insertCallback",this._dp_callback);a.attachEvent("updateCallback",this._dp_callback);a.attachEvent("deleteCallback",function(a,
e){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.remove(e)});dhtmlx.compat("dataProcessor",a)},_dp_callback:function(a,c){this.obj.data.set(c,dhtmlx.DataDriver.xml.getDetails(a.firstChild));this.obj.data.refresh(c)},setItemStyle:function(a,c){var e=this._locateHTML(a);e&&(e.style.cssText+=";"+c)},changeId:function(a,c){this.data.changeId(a,c);this.refresh()},setUserData:function(a,c,e){a?this.data.get(a)[c]=e:this._userdata[c]=e},getUserData:function(a,c){return a?this.data.get(a)[c]:
this._userdata[c]}};(function(){dhtmlx.DataProcessor._dp_init=dhtmlx.DataProcessor._dp_init})();
dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var a=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(c,e,g){a.apply(this,arguments);if(!g){var h=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};h.from||(h.from=this.dragStartObject);dhtmlx.DragControl._checkLand(c,e,!0)}};var c=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(a,g,h){!h&&dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=
e.dragStartNode,dhtmlx.DragControl._stopDrag(a,!0));c.apply(this,arguments)};var e=new dhtmlDragAndDropObject,g=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){g.apply(this,arguments);var a=dhtmlx.DragControl._drag_context;if(a){for(var c=[],h=[],l=0;l<a.source.length;l++)c[l]={idd:a.source[l]},h.push(a.source[l]);e.dragStartNode={parentNode:{},parentObject:{idd:c,id:1==h.length?h[0]:h,treeNod:{object:a.from}}};e.dragStartNode.parentObject.treeNod._dragged=c;e.dragStartObject=
a.from}};var h=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(a,c,g){h.apply(this,arguments);this._last||g||(a=e.checkLanding(a,c,!0))};var l=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(a,c){l.apply(this,arguments);e.lastLanding&&!c&&e.stopDrag(a,!1,!0)};var m=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(a){var c=null;a&&(c=m.apply(this,arguments));if(!c){for(var c=e.dragStartObject,g=[],h=c._dragged,l=0;l<h.length;l++)g.push(h[l].idd||
h[l].id);dhtmlx.DragControl._drag_context.source=g}return c}}};
dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(a,c,e,g){if(a=this.get(a))return e&&(dhtmlx.assert(e.externalData,"DataMove :: External object doesn't support operation"),a=e.externalData(a)),e=e||this,e.add(e.externalData(a,g),c);dhtmlx.log("Warning","Incorrect ID in DataMove::copy")},move:function(a,c,e,g){if(a instanceof Array)for(g=0;g<a.length;g++){var h=(e||this).indexById(this.move(a[g],c,e,a[g]));a[g+1]&&(c=h+(this.indexById(a[g+
1])<h?0:1))}else if(nid=a,0>c)dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");else{if(h=this.get(a))return e&&e!=this?(dhtmlx.assert(e.externalData,"DataMove :: External object doesn't support operation"),nid=e.add(e.externalData(h,g),c),this.remove(a)):this.data.move(this.indexById(a),c),nid;dhtmlx.log("Warning","Incorrect ID in DataMove::move")}},moveUp:function(a,c){return this.move(a,this.indexById(a)-(c||1))},moveDown:function(a,c){return this.moveUp(a,-1*(c||1))},moveTop:function(a){return this.move(a,
0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,c){var e=dhtmlx.extend({},a);e.id=c||dhtmlx.uid();e.$selected=e.$template=null;return e}};
dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(a,c,e){a=dhtmlx.toNode(a);a.dhx_drop=this._getCtrl(c);e&&(a.dhx_master=!0)},_getCtrl:function(a){a=a||dhtmlx.DragControl;var c=this._drag_masters.find(a);0>c&&(c=this._drag_masters.length,this._drag_masters.push(a));return c},addDrag:function(a,c){a=dhtmlx.toNode(a);a.dhx_drag=this._getCtrl(c);dhtmlx.event(a,"mousedown",this._preStart,a)},_preStart:function(a){dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),
dhtmlx.DragControl.destroyDrag());dhtmlx.DragControl._active=this;dhtmlx.DragControl._start_pos={x:a.pageX,y:a.pageY};dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse);a.cancelBubble=!0;return!1},_preStartFalse:function(a){dhtmlx.DragControl._dhx_drag_mm=
dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(a){var c=a.pageY;5>Math.abs(a.pageX-dhtmlx.DragControl._start_pos.x)&&5>Math.abs(c-dhtmlx.DragControl._start_pos.y)||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(a)&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=
dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(a)))},_stopDrag:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._last&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,
a),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,a));dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(a){var c=dhtmlx.html.pos(a);dhtmlx.DragControl._html.style.top=c.y+dhtmlx.DragControl.top+"px";dhtmlx.DragControl._html.style.left=c.x+dhtmlx.DragControl.left+"px";dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(a.srcElement||a.target,a);a.cancelBubble=!0;return!1},_checkLand:function(a,
c){for(;a&&"BODY"!=a.tagName;){if(a.dhx_drop){if(this._last&&(this._last!=a||a.dhx_master))this.onDragOut(this._active,this._last,a,c);if(!this._last||this._last!=a||a.dhx_master)if(this._last=null,this._landing=this.onDragIn(dhtmlx.DragControl._active,a,c))this._last=a;return}a=a.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,c))},sendSignal:function(a){dhtmlx.DragControl.active="start"==a},getMaster:function(a){return this._drag_masters[a.dhx_drag||
a.dhx_drop]},getContext:function(a){return this._drag_context},createDrag:function(a){var c=dhtmlx.DragControl._active,e=this._drag_masters[c.dhx_drag];if(e.onDragCreate)a=e.onDragCreate(c,a),a.style.position="absolute",a.style.zIndex=dhtmlx.zIndex.drag,a.onmousemove=dhtmlx.DragControl._skip_mark;else{c=dhtmlx.DragControl.onDrag(c,a);if(!c)return!1;a=document.createElement("DIV");a.innerHTML=c;a.className="dhx_drag_zone";a.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(a)}dhtmlx.DragControl._html=
a;return!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var a=dhtmlx.DragControl._active,c=this._drag_masters[a.dhx_drag];if(c&&c.onDragDestroy)c.onDragDestroy(a,dhtmlx.DragControl._html);else dhtmlx.html.remove(dhtmlx.DragControl._html);dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(a,c,e){var g=this._drag_masters[c.dhx_drop];if(g.onDragIn&&g!=this)return g.onDragIn(a,c,e);
c.className+=" dhx_drop_zone";return c},onDragOut:function(a,c,e,g){var h=this._drag_masters[c.dhx_drop];if(h.onDragOut&&h!=this)return h.onDragOut(a,c,e,g);c.className=c.className.replace("dhx_drop_zone","");return null},onDrop:function(a,c,e,g){var h=this._drag_masters[c.dhx_drop];dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(a);if(h.onDrop&&h!=this)return h.onDrop(a,c,e,g);c.appendChild(a)},onDrag:function(a,c){var e=this._drag_masters[a.dhx_drag];if(e.onDrag&&e!=this)return e.onDrag(a,
c);dhtmlx.DragControl._drag_context={source:a,from:a};return"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>"}};
dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface");dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface");dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included");!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(a){a&&(this._initHandlers(this),delete this.drag_setter);return a});this.dragMarker&&(this.attachEvent("onBeforeDragIn",
this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(a){dhtmlx.DragControl.addDrop(a._obj,a,!0);dhtmlx.DragControl.addDrag(a._obj,a)},onDragIn:function(a,c,e){c=this.locate(e)||null;var g=dhtmlx.DragControl._drag_context;a=dhtmlx.DragControl.getMaster(a);var h=this._locateHTML(c)||this._obj;if(h==dhtmlx.DragControl._landing)return h;g.target=c;g.to=a;if(!this.callEvent("onBeforeDragIn",[g,e]))return g.id=null;dhtmlx.html.addCss(h,"dhx_drag_over");return h},onDragOut:function(a,
c,e,g){a=this.locate(g)||null;e!=this._dataobj&&(a=null);if((this._locateHTML(a)||(e?dhtmlx.DragControl.getMaster(e)._obj:window.undefined))==dhtmlx.DragControl._landing)return null;e=dhtmlx.DragControl._drag_context;dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over");e.target=e.to=null;this.callEvent("onDragOut",[e,g]);return null},onDrop:function(a,c,e,g){a=dhtmlx.DragControl._drag_context;a.to=this;a.index=a.target?this.indexById(a.target):this.dataCount();a.new_id=dhtmlx.uid();
this.callEvent("onBeforeDrop",[a,g])&&(a.from==a.to?this.move(a.source,a.index):a.from?a.from.move(a.source,a.index,a.to,a.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[a,g]))},onDrag:function(a,c){var e=this.locate(c),g=[e];if(e){if(this.getSelected){var h=this.getSelected();-1!=dhtmlx.PowerArray.find.call(h,e)&&(g=h)}g=dhtmlx.DragControl._drag_context={source:g,start:e};g.from=this;if(this.callEvent("onBeforeDrag",[g,c]))return g.html||this._toHTML(this.get(e))}return null}};
dhtmlx.EditAbility={_init:function(a){this._edit_bind=this._edit_id=null;dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore");dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack");this.attachEvent("onEditKeyPress",function(a,e,g){13!=a||g?27==a&&this.stopEdit(!0):this.stopEdit()});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(a){if(this.stopEdit(!1,a)&&this.callEvent("onBeforeEditStart",
[a])){var c=this.data.get(a);c.$template||(c.$template="edit",this.data.refresh(a),this._edit_id=a,this._save_binding(a),this._edit_bind(!0,c),this.callEvent("onAfterEditStart",[a]))}},stopEdit:function(a,c){if(!this._edit_id)return!0;if(this._edit_id==c)return!1;var e={};a?e=null:this._edit_bind(!1,e);if(!this.callEvent("onBeforeEditStop",[this._edit_id,e]))return!1;var g=this.data.get(this._edit_id);g.$template=null;a||this._edit_bind(!1,g);g=this._edit_id;this._edit_bind=this._edit_id=null;this.data.refresh(g);
this.callEvent("onAfterEditStop",[g,e]);return!0},_save_binding:function(a){a=this._locateHTML(a);var c="",e="",g=[];if(a){a=a.getElementsByTagName("*");for(var h="",l=0;l<a.length;l++)1==a[l].nodeType&&(h=a[l].getAttribute("bind"))&&(c+="els["+g.length+"].value="+h+";",e+=h+"=els["+g.length+"].value;",g.push(a[l]),a[l].className+=" dhx_allow_selection",a[l].onselectstart=this._block_native);a=null}c=Function("obj","els",c);e=Function("obj","els",e);this._edit_bind=function(a,h){a?(c(h,g),g.length&&
g[0].select&&g[0].select()):e(h,g)}},_block_native:function(a){return(a||event).cancelBubble=!0}};
dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this));this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this));this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(a,c){for(var e=this._selected.length-
1;0<=e;e--)this._selected[e]==a&&(this._selected[e]=c)},_data_filtered:function(){for(var a=this._selected.length-1;0<=a;a--)if(0>this.data.indexById(this._selected[a])){var c=this._selected[a],e=this.item(c);e&&delete e.$selected;this._selected.splice(a,1);this.callEvent("onSelectChange",[c])}},_data_updated:function(a,c,e){"delete"==e?this._selected.remove(a):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(a){a.$selected&&
this.select(a.id)},this)},_select_mark:function(a,c,e){if(!e&&!this.callEvent("onBeforeSelect",[a,c]))return!1;this.data.item(a).$selected=c;e?e.push(a):(c?this._selected.push(a):this._selected.remove(a),this._refresh_selection(a));return!0},select:function(a,c,e){if(!a)return this.selectAll();if(a instanceof Array)for(var g=0;g<a.length;g++)this.select(a[g],c,e);else if(this.data.exists(a)){if(e&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],a);c||1==this._selected.length&&
this._selected[0]==a||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1);this.isSelected(a)?c&&this.unselect(a):this._select_mark(a,!0)&&this.callEvent("onAfterSelect",[a])}else dhtmlx.error("Incorrect id in select command: "+a)},unselect:function(a){if(!a)return this.unselectAll();this.isSelected(a)&&this._select_mark(a,!1)},selectAll:function(a,c){var e=[];(a||c?this.data.getRange(a||null,c||null):this.data.getRange()).each(function(a){this.data.item(a.id).$selected||(this._selected.push(a.id),
this._select_mark(a.id,!0,e));return a.id},this);this._refresh_selection(e)},unselectAll:function(){var a=[];this._selected.each(function(c){this._select_mark(c,!1,a)},this);this._selected=dhtmlx.toArray();this._refresh_selection(a)},isSelected:function(a){return-1!=this._selected.find(a)},getSelected:function(a){switch(this._selected.length){case 0:return a?[]:"";case 1:return a?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(a){return 100<
a.length||a.length>this.data.dataCount/2},_refresh_selection:function(a){"object"!=typeof a&&(a=[a]);if(a.length){if(this._is_mass_selection(a))this.data.refresh();else for(var c=0;c<a.length;c++)this.render(a[c],this.data.item(a[c]),"update");this._silent_selection||this.callEvent("onSelectChange",[a])}}};
dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore");dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible");this._html=document.createElement("DIV")},_toHTML:function(a){dhtmlx.assert(!a.$template||this.type["template_"+a.$template],"RenderStack :: Unknown template: "+a.$template);this.callEvent("onItemRender",[a]);return this.type._item_start(a,this.type)+(a.$template?this.type["template_"+a.$template]:this.type.template)(a,
this.type)+this.type._item_end},_toHTMLObject:function(a){this._html.innerHTML=this._toHTML(a);return this._html.firstChild},_locateHTML:function(a){if(this._htmlmap)return this._htmlmap[a];this._htmlmap={};for(var c=this._dataobj.childNodes,e=0;e<c.length;e++){var g=c[e].getAttribute(this._id);g&&(this._htmlmap[g]=c[e])}return this._locateHTML(a)},locate:function(a){return dhtmlx.html.locate(a,this._id)},show:function(a){if(a=this._locateHTML(a))this._dataobj.scrollTop=a.offsetTop-this._dataobj.offsetTop},
render:function(a,c,e,g){if(a)switch(g=this._locateHTML(a),e){case "update":if(!g)return;c=this._htmlmap[a]=this._toHTMLObject(c);dhtmlx.html.insertBefore(c,g);dhtmlx.html.remove(g);break;case "delete":if(!g)return;dhtmlx.html.remove(g);delete this._htmlmap[a];break;case "add":c=this._htmlmap[a]=this._toHTMLObject(c);dhtmlx.html.insertBefore(c,this._locateHTML(this.data.next(a)),this._dataobj);break;case "move":this.render(a,c,"delete");this.render(a,c,"add");break;default:dhtmlx.error("Unknown render command: "+
e)}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(a){this.attachEvent("onBeforeRender",function(){var a=this._settings.pager._settings;if(-1==a.page)return!1;this.data.min=a.page*a.size;this.data.max=(a.page+1)*a.size-1;return!0});var c=new dhtmlx.ui.pager(a);a=dhtmlx.bind(function(){this.data.refresh()},this);c.attachEvent("onRefresh",a);
this.data.attachEvent("onStoreUpdated",function(a){a=this.dataCount();a!=c._settings.count&&(c._settings.count=a,-1==c._settings.page&&(c._settings.page=0),c.refresh())});return c},height_setter:function(a){"auto"==a&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this)));return a},_correct_height:function(){this._dataobj.style.overflow="hidden";this._dataobj.style.height="1px";var a=this._dataobj.scrollHeight;this._dataobj.style.height=
a+"px";if(dhtmlx._isFF){var c=this._dataobj.scrollHeight;c!=a&&(this._dataobj.style.height=c+"px")}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var a=this.type,c=(a.border||0)+2*(a.padding||0)+2*(a.margin||0);return{x:a.width+c,y:a.height+c}},x_count_setter:function(a){var c=this._getDimension(),e=dhtmlx.$customScroll?0:18;this._dataobj.style.width=c.x*a+("auto"!=this._settings.height?e:0)+"px";return a},y_count_setter:function(a){var c=this._getDimension();this._dataobj.style.height=
c.y*a+"px";return a}};
dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};this._dataobj.style.overflowY="scroll";dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this.data._unrendered_area=[];this.data.getIndexRange=this._getIndexRange},_locateHTML:function(a){return this._htmlmap[a]},show:function(a){range=this._getVisibleRange();
a=this.data.indexById(a);this._dataobj.scrollTop=Math.floor(a/range._dx)*range._y},_getIndexRange:function(a,c){0!==c&&(c=Math.min(c||Infinity,this.dataCount()-1));for(var e=dhtmlx.toArray(),g=a||0;g<=c;g++){var h=this.item(this.order[g]);this.order.length>g&&(h?"loading"==h.$template&&this._unrendered_area.push(this.order[g]):(this.order[g]=dhtmlx.uid(),h={id:this.order[g],$template:"loading"},this._unrendered_area.push(this.order[g])),e.push(h))}return e},render:function(a,c,e,g){if(a)switch(g=
this._locateHTML(a),e){case "update":if(!g)break;a=this._htmlmap[a]=this._toHTMLObject(c);dhtmlx.html.insertBefore(a,g);dhtmlx.html.remove(g);break;default:this._render_delayed()}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(a){var c=
document.createElement("DIV");c.className="dhxdataview_placeholder";c.style.cssText="height:"+a+"px; width:100%; overflow:hidden;";return c},_render_visible_rows:function(a,c){this.data._unrendered_area=[];var e=this._getVisibleRange();if(!this._dataobj.firstChild||c)this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(e._max)),this._htmlrows=[this._dataobj.firstChild];for(var g=Math.max(e._from,0),h=this.data.max||0===this.data.max?this.data.max:Infinity;g<=e._height;){for(;this._htmlrows[g]&&
this._htmlrows[g]._filled&&g<=e._height;)g++;if(g>e._height)break;for(var l=g;!this._htmlrows[l];)l--;var m=this._htmlrows[l],n=g*e._dx+(this.data.min||0);if(n>h)break;var r=Math.min(n+e._dx-1,h),u=this._create_placeholder(e._y),r=this.data.getIndexRange(n,r);if(!r.length)break;u.innerHTML=r.map(this._toHTML,this).join("");for(var v=0;v<r.length;v++)this._htmlmap[this.data.idByIndex(n+v)]=u.childNodes[v];n=parseInt(m.style.height,10);l=(g-l)*e._y;n=n-l-e._y;dhtmlx.html.insertBefore(u,l?m.nextSibling:
m,this._dataobj);this._htmlrows[g]=u;u._filled=!0;0>=l&&0<n?(m.style.height=n+"px",this._htmlrows[g+1]=m):(0>l?dhtmlx.html.remove(m):m.style.height=l+"px",0<n&&(m=this._htmlrows[g+1]=this._create_placeholder(n),dhtmlx.html.insertBefore(m,u.nextSibling,this._dataobj)));g++}if(this.data._unrendered_area.length&&(g=this.indexById(this.data._unrendered_area[0]),h=this.indexById(this.data._unrendered_area.pop())+1,h>g)){if(!this.callEvent("onDataRequest",[g,h-g]))return!1;dhtmlx.assert(this.data.feed,
"Data feed is missed");this.data.feed.call(this,g,h-g)}dhtmlx._isIE&&this._getVisibleRange()._from!=e._from&&this._render_visible_rows()},_getVisibleRange:function(){var a=this._dataobj.scrollTop,c=this._dataobj.scrollWidth,e=this._dataobj.offsetHeight,g=this._getDimension(),c=Math.floor(c/g.x)||1,h=Math.floor(a/g.y),e=Math.ceil((e+a)/g.y)-1,l=this.data.max?this.data.max-this.data.min:this.data.dataCount(),l=Math.ceil(l/c)*g.y;return{_from:h,_height:e,_top:a,_max:l,_y:g.y,_dx:c}}};
dhtmlXDataView=function(a){this.name="DataView";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_dataview");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);
dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(a,{drag:!1,edit:!1,select:"multiselect",type:"default"});"auto"==this._settings.height||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack);this.data.provideApi(this,!0);this.config.autowidth&&(this.attachEvent("onBeforeRender",
function(){this.type.width=Math.floor(this._dataobj.scrollWidth/(1*this.config.autowidth||1))-2*this.type.padding-2*this.type.margin-2*this.type.border;this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type)}),dhtmlx.event(window,"resize",function(){this.refresh()},this));dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)};
dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(a,c){var e=this._locateHTML(a.target);this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),e&&(e.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",e.style.backgroundRepeat="no-repeat",this._drag_marker=e));if(e&&this._settings.auto_scroll){var g=
e.offsetTop,e=e.offsetHeight,h=this._obj.scrollTop,l=this._obj.offsetHeight;0<=g-e&&g-.75*e<h?h=Math.max(g-e,0):g+e/.75>h+l&&(h+=e);this._obj.scrollTop=h}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(a,c){this.stopEdit(!1,c)&&this._settings.select&&("multiselect"==this._settings.select?this.select(c,a.ctrlKey,a.shiftKey):this.select(c))}},on_dblclick:{dhx_dataview_item:function(a,c){this._settings.edit&&this.edit(c)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),
template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),
template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachDataView=function(a){this.callEvent("_onBeforeContentAttach",["dataview"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);"undefined"==typeof a&&(a={});c.id="DataViewObject_"+(new Date).getTime();a.container=c.id;a.skin=this.conf.skin;this.dataType="dataview";this.dataObj=new dhtmlXDataView(a);this.dataObj.setSizes=
function(){this.render()};c=null;this.callEvent("_onContentAttach",[]);return this.dataObj});
dhtmlXList=function(a){this.name="List";dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_list");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,
dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this._getDimension=function(){var a=this.type,e=2*(a.margin||0);return{x:a.width+e,y:a.height+e}};this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(a,{drag:!1,edit:!1,select:"multiselect",type:"default"});this.data.provideApi(this,!0);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)};
dhtmlXList.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(a,c){var e=this._locateHTML(a.target);if(e&&this._settings.auto_scroll){var g=e.offsetTop,e=e.offsetHeight,h=this._obj.scrollTop,l=this._obj.offsetHeight;0<=g-e&&g-.75*e<h?h=Math.max(g-e,0):g+e/.75>h+l&&(h+=e);this._obj.scrollTop=h}return!0},_id:"dhx_f_id",on_click:{dhx_list_item:function(a,c){this.stopEdit(!1,c)&&this._settings.select&&
("multiselect"==this._settings.select?this.select(c,a.ctrlKey,a.shiftKey):this.select(c))}},on_dblclick:{dhx_list_item:function(a,c){this._settings.edit&&this.edit(c)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),
height:50,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_list_item dhx_list_{obj.css}_item{-obj.$selected?_selected:}' style='width:100%; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachList=function(a){this.callEvent("_onBeforeContentAttach",["list"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);"undefined"==typeof a&&(a={});c.id="ListObject_"+(new Date).getTime();a.container=c.id;a.skin=this.conf.skin;this.dataType="list";this.dataObj=new dhtmlXList(a);this.dataObj.setSizes=function(){this.render()};
c=null;this.callEvent("_onContentAttach",[]);return this.dataObj});function xmlPointer(a){this.d=a}
xmlPointer.prototype={text:function(){return _isFF?(new XMLSerializer).serializeToString(this.d):this.d.xml},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(a,c,e,g){var h=this.d.childNodes,l=new xmlPointer;if(h.length)for(g=g||0;g<h.length&&(h[g].tagName!=a||(l.d=h[g],-1!=c.apply(e,[l,g])));g++);},get_all:function(){for(var a={},c=this.d.attributes,e=
0;e<c.length;e++)a[c[e].name]=c[e].value;return a},sub:function(a){var c=this.d.childNodes,e=new xmlPointer;if(c.length)for(var g=0;g<c.length;g++)if(c[g].tagName==a)return e.d=c[g],e},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,c){this.d.setAttribute(a,c)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(a){var c=this.d.childNodes;if(c.length)for(var e=0;e<c.length;e++)if(c[e].tagName==a)return!0;return!1},through:function(a,c,e,g,h){var l=this.d.childNodes;
if(l.length)for(var m=0;m<l.length;m++){if(l[m].tagName==a&&null!=l[m].getAttribute(c)&&""!=l[m].getAttribute(c)&&(!e||l[m].getAttribute(c)==e)){var n=new xmlPointer(l[m]);g.apply(h,[n,m])}n=this.d;this.d=l[m];this.through(a,c,e,g,h);this.d=n}}};
function dhtmlXTreeObject(a,c,e,g){dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch();if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}this.parentObject="object"!=typeof a?document.getElementById(a):a;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix(!0);this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=c;this.height=e;this.rootId=g;this.childCalc=null;this.def_line_img_x=this.def_img_y=this.def_img_x=
"18px";this.def_line_img_y="24px";this._dragged=[];this._selected=[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._dynDeleteBranches={};this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||
"";this.checkArray="iconUncheckAll.gif iconCheckAll.gif iconCheckGray.gif iconUncheckDis.gif iconCheckDis.gif iconCheckDis.gif".split(" ");this.radioArray="radio_off.gif radio_on.gif radio_on.gif radio_off.gif radio_on.gif radio_on.gif".split(" ");this.lineArray="line2.gif line3.gif line4.gif blank.gif blank.gif line1.gif".split(" ");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=
["leaf.gif","folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhx4._eventable(this);this.dragger=new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);
_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var l=this;this.allTree.onselectstart=new Function("return false;");_isMacOS&&(this.allTree.oncontextmenu=function(a){return l._doContClick(a||window.event,!0)});this.allTree.onmousedown=function(a){return l._doContClick(a||window.event)};this.XMLLoader=this._parseXMLTree;_isIE&&this.preventIECashing(!0);this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML=
"&nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);window.addEventListener&&window.addEventListener("unload",function(){try{l.destructor()}catch(a){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{l.destructor()}catch(a){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||
"dhx_skyblue");return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};
dhtmlXTreeObject.prototype._doContClick=function(a,c){if(!c&&2!=a.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var e=_isIE?a.srcElement:a.target;e&&"BODY"!=e.tagName&&!e.parentObject;)e=e.parentNode;if(!e||!e.parentObject)return!0;var g=e.parentObject;this.callEvent("onRightClick",[g.id,a])||((a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1});if(this._acMenu=g.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",
[g.id]))return!0;_isMacOS||((a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1});if(this._acMenu.showContextMenu){var e=window.document.documentElement,h=window.document.body,h=[e.scrollLeft||h.scrollLeft,e.scrollTop||h.scrollTop];_isIE?(e=a.clientX+h[0],h=a.clientY+h[1]):(e=a.pageX,h=a.pageY);this._acMenu.showContextMenu(e-1,h-1);this.contextID=g.id;a.cancelBubble=!0;this._acMenu._skip_hide=!0}else e.contextMenuId=g.id,e.contextMenu=this._acMenu,e.a=this._acMenu._contextStart,
e.a(e,a),e.a=null;return!1}return!0};
dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var a=document.createElement("DIV");a.innerHTML="&nbsp;";a.className="dhx_bg_img_fix";return a},this._setSrc=function(a,e){a.style.backgroundImage="url("+e+")"},this._getSrc=function(a){a=a.style.backgroundImage;return a.substr(4,a.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(a){return document.createElement(a==this.rootId?"div":"img")},this._setSrc=function(a,e){a.src=e},this._getSrc=function(a){return a.src})};
dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var c=this._idpull[a];c&&(c.parentObject=null,c.treeNod=null,c.childNodes=null,c.span=null,c.tr.nodem=null,c.tr=null,c.htmlNode.objBelong=null,c.htmlNode=null,this._idpull[a]=null)}this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(a in this)this[a]=null};function cObject(){return this}cObject.prototype={};
cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a};
function dhtmlXTreeItemObject(a,c,e,g,h,l){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=g;this.label=c;this.parentObject=e;this.actionHandler=h;this.images=[g.imageArray[0],g.imageArray[1],g.imageArray[2]];this.id=g._globalIdStorageAdd(a,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,l):this.treeNod._createItem(0,
this,l);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(a,c){if(this._globalIdStorageFind(a,1,1))return a=a+"_"+(new Date).valueOf(),this._globalIdStorageAdd(a,c);this._idpull[a]=c;this._pullSize++;return a};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--);this._locker&&this._locker[a]&&(this._locker[a]=!1)};
dhtmlXTreeObject.prototype._globalIdStorageFind=function(a,c,e,g){var h=this._idpull[a];if(h){h.unParsed&&!e&&this.reParse(h,0);this._srnd&&!h.htmlNode&&this._buildSRND(h,e);if(g&&this._edsbpsA)for(c=0;c<this._edsbpsA.length;c++)if(this._edsbpsA[c][2]==a)return dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",a]),null;return h}return this.slowParse&&0!=a&&!c?this.preParse(a):null};
dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var c=[];a.each("item",function(a){c.push(a.get("id"))},this);return c.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=dhx4.s2b(a)};dhtmlXTreeObject.prototype.findXML=function(a,c,e){};
dhtmlXTreeObject.prototype._getAllCheckedXML=function(a,c,e){var g=[];2==e&&a.through("item","checked",-1,function(a){g.push(a.get("id"))},this);1==e&&a.through("item","id",null,function(a){a.get("checked")&&-1!=a.get("checked")&&g.push(a.get("id"))},this);0==e&&a.through("item","id",null,function(a){a.get("checked")&&0!=a.get("checked")||g.push(a.get("id"))},this);return g.length?c+(c?this.dlmtr:"")+g.join(this.dlmtr):c?c:""};
dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,c){var e=a?"1":"";c.through("item","id",null,function(a){a.get("disabled")&&0!=a.get("disabled")||a.set("checked",e)},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(a,c){var e=[],g=function(a){a.sub_exists("item")?a.each("item",g,this):e.push(a.get("id"))};g(a);return e.join(",")};
dhtmlXTreeObject.prototype._getAllFatItemsXML=function(a,c){var e=[],g=function(a){a.sub_exists("item")&&(e.push(a.get("id")),a.each("item",g,this))};g(a);return e.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(a,c,e){c=[];e.through("item","id",null,function(a){c.push(a.get("id"))},this);return c.join(",")};
dhtmlXTreeObject.prototype.reParse=function(a){this.parsCount||this.callEvent("onXLS",[this,a.id]);this.xmlstate=1;var c=a.unParsed;a.unParsed=0;this.XMLloadingWarning=1;var e=this.parsingOn,g=this.waitUpdateXML,h=this.parsedArray;this.parsedArray=[];this.waitUpdateXML=!1;this.parsingOn=a.id;this.parsedArray=[];this.setCheckList="";this._parse(c,a.id,2);for(var l=this.setCheckList.split(this.dlmtr),m=0;m<this.parsedArray.length;m++)a.htmlNode.childNodes[0].appendChild(this.parsedArray[m]);c.get("order")&&
"none"!=c.get("order")&&this._reorderBranch(a,c.get("order"),!0);this.oldsmcheck=this.smcheck;this.smcheck=!1;for(c=0;c<l.length;c++)l[c]&&this.setCheck(l[c],1);this.smcheck=this.oldsmcheck;this.parsingOn=e;this.waitUpdateXML=g;this.parsedArray=h;this.XMLloadingWarning=0;this._redrawFrom(this,a);this._srnd&&!a._sready&&this.prepareSR(a.id);this.xmlstate=0;return!0};
dhtmlXTreeObject.prototype.preParse=function(a){if(!a||!this._p)return null;var c=!1;this._p.clone().through("item","id",a,function(a){this._globalIdStorageFind(a.up().get("id"));return c=!0},this);if(c){var e=this._globalIdStorageFind(a,!0,!1);e||dhx4.callEvent("ongetItemError",["The item "+a+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",a])}return e};
dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case "none":return a;case "utf8":return encodeURIComponent(a);default:return escape(a)}};dhtmlXTreeObject.prototype._drawNewTr=function(a,c){var e=document.createElement("tr"),g=document.createElement("td"),h=document.createElement("td");g.appendChild(document.createTextNode(" "));h.colSpan=3;h.appendChild(a);e.appendChild(g);e.appendChild(h);return e};
dhtmlXTreeObject.prototype.parse=function(a,c,e){"string"==typeof c&&(e=c,c=null);if("json"===e)return this._loadJSONObject(a,c);if("csv"===e)return this._loadCSVString(a,c);if("jsarray"===e)return this._loadJSArray(a,c);this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(a)},c)};
dhtmlXTreeObject.prototype.loadXMLString=function(){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this.parse.apply(this,arguments)};
dhtmlXTreeObject.prototype.load=function(a,c,e){"string"==typeof c&&(e=c,c=null);e=e||this._datamode;if("json"===e)return this._loadJSON(a,c);if("csv"===e)return this._loadCSV(a,c);if("jsarray"===e)return this._loadJSArrayFile(xmlString,c);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=this._parseXMLTree;var g=this;dhx4.ajax.get(a,function(a){g.XMLLoader(a.xmlDoc,c);g=null})};
dhtmlXTreeObject.prototype.loadXML=function(){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this.load.apply(this,arguments)};
dhtmlXTreeObject.prototype._attachChildNode=function(a,c,e,g,h,l,m,n,r,u,v){u&&u.parentObject&&(a=u.parentObject);0==a.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(a.XMLload=1,this._loadDynXML(a.id));var w=a.childsCount,x=a.childNodes;v&&v.tr.previousSibling&&(v.tr.previousSibling.previousSibling?u=v.tr.previousSibling.nodem:n=n.replace("TOP","")+",TOP");if(u){for(v=0;v<w;v++)if(x[v]==u){for(;w!=v;w--)x[1+w]=x[w];break}v++;w=v}if(n)for(var y=n.split(","),C=0;C<y.length;C++)switch(y[C]){case "TOP":0<
a.childsCount&&(u={},u.tr=a.childNodes[0].tr.previousSibling);a._has_top=!0;for(v=w;0<v;v--)x[v]=x[v-1];w=0}var A;(A=this._idpull[c])&&-1==A.span||(A=x[w]=new dhtmlXTreeItemObject(c,e,a,this,g,1),c=x[w].id,a.childsCount++);A.htmlNode||(A.label=e,A.htmlNode=this._createItem(this.checkBoxOff?1:0,A),A.htmlNode.objBelong=A);h&&(A.images[0]=h);l&&(A.images[1]=l);m&&(A.images[2]=m);e=this._drawNewTr(A.htmlNode);if(this.XMLloadingWarning||this._hAdI)A.htmlNode.parentNode.parentNode.style.display="none";
u&&u.tr&&u.tr.nextSibling?a.htmlNode.childNodes[0].insertBefore(e,u.tr.nextSibling):this.parsingOn==a.id?this.parsedArray[this.parsedArray.length]=e:a.htmlNode.childNodes[0].appendChild(e);u&&!u.span&&(u=null);this.XMLsource&&(A.XMLload=r&&0!=r?0:1);A.tr=e;e.nodem=A;0==a.itemId&&(e.childNodes[0].className="hiddenRow");(a._r_logic||this._frbtr)&&this._setSrc(A.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(n)for(y=n.split(","),C=0;C<y.length;C++)switch(y[C]){case "SELECT":this.selectItem(c,
!1);break;case "CALL":this.selectItem(c,!0);break;case "CHILD":A.XMLload=0;break;case "CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+c:this.setCheck(c,1);break;case "HCHECKED":this._setCheck(A,"unsure");break;case "OPEN":A.openMe=1}if(!this.XMLloadingWarning&&(0>this._getOpenState(a)&&!this._hAdI&&this.openItem(a.id),u&&(this._correctPlus(u),this._correctLine(u)),this._correctPlus(a),this._correctLine(a),this._correctPlus(A),2<=a.childsCount&&(this._correctPlus(x[a.childsCount-2]),
this._correctLine(x[a.childsCount-2])),2!=a.childsCount&&this._correctPlus(x[0]),this.tscheck&&this._correctCheckStates(a),this._onradh))if(1==this.xmlstate){var D=this.onXLE;this.onXLE=function(a){this._onradh(c);D&&D(a)}}else this._onradh(c);return A};dhtmlXTreeObject.prototype.enableContextMenu=function(a){a&&(this.cMenu=a)};
dhtmlXTreeObject.prototype.setItemContextMenu=function(a,c){for(var e=a.toString().split(this.dlmtr),g=0;g<e.length;g++){var h=this._globalIdStorageFind(e[g]);h&&(h.cMenu=c)}};dhtmlXTreeObject.prototype.insertNewItem=function(a,c,e,g,h,l,m,n,r){a=this._globalIdStorageFind(a);if(!a)return-1;c=this._attachChildNode(a,c,e,g,h,l,m,n,r);this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(a);return c};
dhtmlXTreeObject.prototype.insertNewChild=function(a,c,e,g,h,l,m,n,r){return this.insertNewItem(a,c,e,g,h,l,m,n,r)};dhtmlXTreeObject.prototype._parseXMLTree=function(a,c){var e=new xmlPointer(dhx4.ajax.xmltop("tree",a));this._parse(e);this._p=e;c&&c.call(this,a)};
dhtmlXTreeObject.prototype._parseItem=function(a,c,e,g){var h;if(!this._srnd||this._idpull[h=a.get("id")]&&this._idpull[h].span){var l=a.get_all();if("object"!=typeof this.waitUpdateXML||this.waitUpdateXML[l.id]){if(null===l.text||"undefined"==typeof l.text)l.text=a.sub("itemtext"),l.text&&(l.text=l.text.content());h=[];l.select&&h.push("SELECT");l.top&&h.push("TOP");l.call&&(this.nodeAskingCall=l.id);-1==l.checked?h.push("HCHECKED"):l.checked&&h.push("CHECKED");l.open&&h.push("OPEN");this.waitUpdateXML?
this._globalIdStorageFind(l.id)?g=this.updateItem(l.id,l.text,l.im0,l.im1,l.im2,l.checked,l.child):(0==this.npl?h.push("TOP"):e=c.childNodes[this.npl],g=this._attachChildNode(c,l.id,l.text,0,l.im0,l.im1,l.im2,h.join(","),l.child,0,e),l.id=g.id,e=null):g=this._attachChildNode(c,l.id,l.text,0,l.im0,l.im1,l.im2,h.join(","),l.child,g||0,e);l.tooltip&&(g.span.parentNode.parentNode.title=l.tooltip);l.style&&(g.span.style.cssText?g.span.style.cssText+=";"+l.style:g.span.setAttribute("style",g.span.getAttribute("style")+
"; "+l.style));l.radio&&(g._r_logic=!0);l.nocheckbox&&(g.span.parentNode.previousSibling.previousSibling.style.display="none",g.nocheckbox=!0);l.disabled&&(null!=l.checked&&this._setCheck(g,l.checked),this.disableCheckbox(g,1));g._acc=l.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,a,l,c?c.id:0);this.setItemColor(g,l.aCol,l.sCol);"1"==l.locked&&this.lockItem(g.id,!0,!0);(l.imwidth||l.imheight)&&this.setIconSize(l.imwidth,l.imheight,g);"0"!=l.closeable&&"1"!=l.closeable||
this.setItemCloseable(g,l.closeable);c="";l.topoffset&&this.setItemTopOffset(g,l.topoffset);this.slowParse&&"object"!=typeof this.waitUpdateXML?(!g.childsCount&&a.sub_exists("item")&&(g.unParsed=a.clone()),a.each("userdata",function(a){this.setUserData(l.id,a.get("name"),a.content())},this)):a.sub_exists("item")&&(c=this._parse(a,l.id,1));""!=c&&(this.nodeAskingCall=c);a.each("userdata",function(c){this.setUserData(a.get("id"),c.get("name"),c.content())},this)}else this._parse(a,l.id,1)}else this._addItemSRND(c.id,
h,a)};
dhtmlXTreeObject.prototype._parse=function(a,c,e,g){if(this._srnd&&!this.parentObject.offsetHeight){var h=this;return window.setTimeout(function(){h._parse(a,c,e,g)},100)}if(a.exists()){this.skipLock=!0;if(!c){c=a.get("id");this._dynDeleteBranches[c]&&(this.deleteChildItems(c),this._dynDeleteBranches[c]--,this._dynDeleteBranches[c]||delete this._dynDeleteBranches[c]);var l=a.get("dhx_security");l&&(dhtmlx.security_key=l);a.get("radio")&&(this.htmlNode._r_logic=!0);this.parsingOn=c;this.parsedArray=[];
this.nodeAskingCall=this.setCheckList=""}var m=this._globalIdStorageFind(c);if(!m)return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"]);this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;this.npl=0;a.each("item",function(g,h){m.XMLload=1;this._parseItem(g,m,0,0);if(this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(a,h+1,c,e,m.childsCount),-1;this.npl++},this,g);if(!e){a.each("userdata",function(c){this.setUserData(a.get("id"),
c.get("name"),c.content())},this);m.XMLload=1;if(this.waitUpdateXML)for(this.waitUpdateXML=!1,l=m.childsCount-1;0<=l;l--)m.childNodes[l]._dmark&&this.deleteItem(m.childNodes[l].id);this._globalIdStorageFind(this.parsingOn);for(l=0;l<this.parsedArray.length;l++)m.htmlNode.childNodes[0].appendChild(this.parsedArray[l]);this.parsedArray=[];this.lastLoadedXMLId=c;this.XMLloadingWarning=0;for(var l=this.setCheckList.split(this.dlmtr),n=0;n<l.length;n++)l[n]&&this.setCheck(l[n],1);this.XMLsource&&this.tscheck&&
this.smcheck&&m.id!=this.rootId&&(0===m.checkstate?this._setSubChecked(0,m):1===m.checkstate&&this._setSubChecked(1,m));this._redrawFrom(this,null,g);a.get("order")&&"none"!=a.get("order")&&this._reorderBranch(m,a.get("order"),!0);""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(a)}if(1==this.parsCount){this.parsingOn=null;this._srnd&&m.id!=this.rootId&&(this.prepareSR(m.id),this.XMLsource&&this.openItem(m.id));
a.through("item","open",null,function(a){this.openItem(a.get("id"))},this);if(!this._edsbps||!this._edsbpsA.length){var r=this;window.setTimeout(function(){r.callEvent("onXLE",[r,c])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;r=this;this._edsbps&&window.setTimeout(function(){r._distributedStep(c)},this._edsbpsD);if(!e&&this.onXLE)this.onXLE(this,c);return this.nodeAskingCall}};
dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(a){var e=a.get("id");if(!this._idpull[e]||this._idpull[e].XMLload)this._branchUpdate++,this.smartRefreshItem(a.get("id"),a)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(a,c){if(1==a.nodeType&&"userdata"==a.tagName){var e=a.getAttribute("name");e&&a.childNodes[0]&&this.setUserData(c,e,a.childNodes[0].data)}};
dhtmlXTreeObject.prototype._redrawFrom=function(a,c,e,g){if(c)h=c;else{var h=a._globalIdStorageFind(a.lastLoadedXMLId);a.lastLoadedXMLId=-1;if(!h)return 0}var l=0;for(e=e?e-1:0;e<h.childsCount;e++)if(this._branchUpdate&&1!=this._getOpenState(h)||c&&1!=g||(h.childNodes[e].htmlNode.parentNode.parentNode.style.display=""),1==h.childNodes[e].openMe&&(this._openItem(h.childNodes[e]),h.childNodes[e].openMe=0),a._redrawFrom(a,h.childNodes[e]),null!=this.childCalc){if(h.childNodes[e].unParsed||!h.childNodes[e].XMLload&&
this.XMLsource)h.childNodes[e].span.innerHTML=h.childNodes[e]._acc?h.childNodes[e].label+this.htmlcA+h.childNodes[e]._acc+this.htmlcB:h.childNodes[e].label;if(h.childNodes[e].childNodes.length&&this.childCalc){1==this.childCalc&&(h.childNodes[e].span.innerHTML=h.childNodes[e].label+this.htmlcA+h.childNodes[e].childsCount+this.htmlcB);if(2==this.childCalc){var m=h.childNodes[e].childsCount-(h.childNodes[e].pureChilds||0);m&&(h.childNodes[e].span.innerHTML=h.childNodes[e].label+this.htmlcA+m+this.htmlcB);
h.pureChilds?h.pureChilds++:h.pureChilds=1}3==this.childCalc&&(h.childNodes[e].span.innerHTML=h.childNodes[e].label+this.htmlcA+h.childNodes[e]._acc+this.htmlcB);4==this.childCalc&&(m=h.childNodes[e]._acc)&&(h.childNodes[e].span.innerHTML=h.childNodes[e].label+this.htmlcA+m+this.htmlcB)}else 4==this.childCalc&&l++;l+=h.childNodes[e]._acc;3==this.childCalc&&l++}h.unParsed||!h.XMLload&&this.XMLsource||(h._acc=l);a._correctLine(h);a._correctPlus(h);this.childCalc&&!c&&a._fixChildCountLabel(h)};
dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(a){if(!a.unParsed){if(this.rootId!=a.id){if(!a.htmlNode)return;for(var c=a.htmlNode.childNodes[0].childNodes,e=c.length,g=1;g<e;g++)c[g].style.display="none";this._correctPlus(a)}for(g=0;g<a.childsCount;g++)a.childNodes[g].childsCount&&this._xcloseAll(a.childNodes[g])}};
dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var c=0;c<a.childsCount;c++)this._xopenAll(a.childNodes[c])};
dhtmlXTreeObject.prototype._correctPlus=function(a){if(a.htmlNode){var c=a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,e=a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],g=this.lineArray;if(this.XMLsource&&!a.XMLload){if(g=this.plusArray,this._setSrc(e,this.iconURL+a.images[2]),this._txtimg)return c.innerHTML="[+]"}else if(a.childsCount||a.unParsed)if(a.htmlNode.childNodes[0].childNodes[1]&&"none"!=a.htmlNode.childNodes[0].childNodes[1].style.display){if(a.wsign||
(g=this.minusArray),this._setSrc(e,this.iconURL+a.images[1]),this._txtimg)return c.innerHTML="[-]"}else{if(a.wsign||(g=this.plusArray),this._setSrc(e,this.iconURL+a.images[2]),this._txtimg)return c.innerHTML="[+]"}else this._setSrc(e,this.iconURL+a.images[0]);e=2;a.treeNod.treeLinesOn?(a.parentObject&&(e=this._getCountStatus(a.id,a.parentObject)),this._setSrc(c,this.imPath+g[e])):this._setSrc(c,this.imPath+g[3])}};
dhtmlXTreeObject.prototype._correctLine=function(a){if(a.htmlNode){var c=a.parentObject;if(c)if(0!=this._getLineStatus(a.id,c)&&this.treeLinesOn)for(c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y";else for(c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage=
"",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat=""}};dhtmlXTreeObject.prototype._getCountStatus=function(a,c){return 1>=c.childsCount?c.id==this.rootId?4:0:c.childNodes[0].id==a?c.id==this.rootId?2:1:c.childNodes[c.childsCount-1].id==a?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(a,c){return c.childNodes[c.childsCount-1].id==a?0:1};
dhtmlXTreeObject.prototype._HideShow=function(a,c){if(this.XMLsource&&!a.XMLload)1!=c&&(a.XMLload=1,this._loadDynXML(a.id));else{a.unParsed&&this.reParse(a);var e=a.htmlNode.childNodes[0].childNodes,g=e.length;if(1<g){"none"==e[1].style.display&&1!=c||2==c?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var h=1;h<g;h++)e[h].style.display=nodestyle}this._correctPlus(a)}};
dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode)return 0;a=a.htmlNode.childNodes[0].childNodes;return 1>=a.length?0:"none"!=a[1].style.display?1:-1};
dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a]))return!1;this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]));return!1};
dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]))};
dhtmlXTreeObject.prototype._epnFHe=function(a,c,e){c!=this.rootId&&this.callEvent("onOpenEnd",[c,a.getOpenState(c)]);a.onXLE=a._oie_onXLE.pop();if(!e&&!a._oie_onXLE.length&&a.onXLE)a.onXLE(a,c)};dhtmlXTreeObject.prototype.onRowClickDown=function(a){a=a||window.event;this.parentObject.treeNod._selectItem(this.parentObject,a)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var a=[],c=0;c<this._selected.length;c++)a[c]=this._selected[c].id;return a.join(this.dlmtr)};
dhtmlXTreeObject.prototype._selectItem=function(a,c){this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId());this._amsel&&c&&(c.ctrlKey||c.metaKey||c.shiftKey)||this._unselectItems();if(a.i_sel&&this._amsel&&c&&(c.ctrlKey||c.metaKey))this._unselectItem(a);else if(!(a.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=a.parentObject))if(this._amsel&&c&&c.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==a.parentObject){var e=
this._getIndex(this._selected[this._selected.length-1]),g=this._getIndex(a);if(g<e)var h=e,e=g,g=h;for(;e<=g;e++)a.parentObject.childNodes[e].i_sel||this._markItem(a.parentObject.childNodes[e])}else this._markItem(a);this.checkEvent("onSelect")&&(g=this.getSelectedItemId(),g!=this._onSSCFold&&this.callEvent("onSelect",[g]))};dhtmlXTreeObject.prototype._markItem=function(a){a.scolor&&(a.span.style.color=a.scolor);a.span.className="selectedTreeRow";a.i_sel=!0;this._selected[this._selected.length]=a};
dhtmlXTreeObject.prototype.getIndexById=function(a){return(a=this._globalIdStorageFind(a))?this._getIndex(a):null};dhtmlXTreeObject.prototype._getIndex=function(a){for(var c=a.parentObject,e=0;e<c.childsCount;e++)if(c.childNodes[e]==a)return e};dhtmlXTreeObject.prototype._unselectItem=function(a){if(a&&a.i_sel)for(a.span.className="standartTreeRow",a.acolor&&(a.span.style.color=a.acolor),a.i_sel=!1,a=0;a<this._selected.length;a++)if(!this._selected[a].i_sel){this._selected.splice(a,1);break}};
dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var c=this._selected[a];c.span.className="standartTreeRow";c.acolor&&(c.span.style.color=c.acolor);c.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(a,c,e){a=a||window.event;var g=this.parentObject;c&&(g=c.parentObject);c=g.treeNod;var h=c.getSelectedItemId();a&&a.skipUnSel||c._selectItem(g,a);e||(g.actionHandler?g.actionHandler(g.id,h):c.callEvent("onClick",[g.id,h]))};
dhtmlXTreeObject.prototype._correctCheckStates=function(a){if(this.tscheck&&a&&a.id!=this.rootId){var c=a.childNodes,e=0,g=0;if(0!=a.childsCount){for(var h=0;h<a.childsCount;h++)if(!c[h].dscheck)if(0==c[h].checkstate)e=1;else if(1==c[h].checkstate)g=1;else{g=e=1;break}e&&g?this._setCheck(a,"unsure"):e?this._setCheck(a,!1):this._setCheck(a,!0);this._correctCheckStates(a.parentObject)}}};
dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck)return!0;this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);
return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};
dhtmlXTreeObject.prototype._createItem=function(a,c,e){var g=document.createElement("table");g.cellSpacing=0;g.cellPadding=0;g.border=0;this.hfMode&&(g.style.tableLayout="fixed");g.style.margin=0;g.style.padding=0;var h=document.createElement("tbody"),l=document.createElement("tr"),m=document.createElement("td");m.className="standartTreeImage";if(this._txtimg){var n=document.createElement("div");m.appendChild(n);n.className="dhx_tree_textSign"}else n=this._getImg(c.id),n.border="0","IMG"==n.tagName&&
(n.align="absmiddle"),m.appendChild(n),n.style.padding=0,n.style.margin=0,n.style.width=this.def_line_img_x;var n=document.createElement("td"),r=this._getImg(this.cBROf?this.rootId:c.id);r.checked=0;this._setSrc(r,this.imPath+this.checkArray[0]);r.style.width="18px";r.style.height="18px";a||(n.style.display="none");n.appendChild(r);this.cBROf||"IMG"!=r.tagName||(r.align="absmiddle");r.onclick=this.onCheckBoxClick;r.treeNod=this;r.parentObject=c;n.width=window._KHTMLrv?"16px":"20px";a=document.createElement("td");
a.className="standartTreeImage";r=this._getImg(this.timgen?c.id:this.rootId);r.onmousedown=this._preventNsDrag;r.ondragstart=this._preventNsDrag;r.border="0";this._aimgs&&(r.parentObject=c,"IMG"==r.tagName&&(r.align="absmiddle"),r.onclick=this.onRowSelect);e||this._setSrc(r,this.iconURL+this.imageArray[0]);a.appendChild(r);r.style.padding=0;r.style.margin=0;if(this.timgen)a.style.width=r.style.width=this.def_img_x,r.style.height=this.def_img_y;else if(r.style.width="0px",r.style.height="0px",_isOpera||
window._KHTMLrv)a.style.display="none";e=document.createElement("td");e.className="standartTreeRow";c.span=document.createElement("span");c.span.className="standartTreeRow";this.mlitems?(c.span.style.width=this.mlitems,c.span.style.display="block"):e.noWrap=!0;dhx4.isIE8?e.style.width="99999px":window._KHTMLrv||(e.style.width="100%");c.span.innerHTML=c.label;e.appendChild(c.span);e.parentObject=c;m.parentObject=c;e.onclick=this.onRowSelect;m.onclick=this.onRowClick;e.ondblclick=this.onRowClick2;this.ettip&&
(l.title=c.label);this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(a,this),a.parentObject=c),this.dragger.addDraggableItem(e,this));c.span.style.paddingLeft="5px";c.span.style.paddingRight="5px";e.style.verticalAlign="";e.style.fontSize="10pt";e.style.cursor=this.style_pointer;l.appendChild(m);l.appendChild(n);l.appendChild(a);l.appendChild(e);h.appendChild(l);g.appendChild(h);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))l.onmousemove=this._itemMouseIn,
l[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut;return g};dhtmlXTreeObject.prototype.setImagePath=function(a){this.iconURL=this.imPath=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var c=0,e=0;e<a.childsCount;e++)0==a.childNodes[e].childsCount&&c++;return c};
dhtmlXTreeObject.prototype._getChildCounterValue=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;if(a.unParsed||!a.XMLload&&this.XMLsource)return a._acc;switch(this.childCalc){case 1:return a.childsCount;case 2:return this._getLeafCount(a);case 3:return a._acc;case 4:return a._acc}};
dhtmlXTreeObject.prototype._fixChildCountLabel=function(a,c){if(null!=this.childCalc)if(a.unParsed||!a.XMLload&&this.XMLsource)a.span.innerHTML=a._acc?a.label+this.htmlcA+a._acc+this.htmlcB:a.label;else switch(this.childCalc){case 1:a.span.innerHTML=0!=a.childsCount?a.label+this.htmlcA+a.childsCount+this.htmlcB:a.label;break;case 2:var e=this._getLeafCount(a);a.span.innerHTML=0!=e?a.label+this.htmlcA+e+this.htmlcB:a.label;break;case 3:if(0!=a.childsCount){for(var g=e=0;g<a.childsCount;g++)a.childNodes[g]._acc||
(a.childNodes[g]._acc=0),e+=1*a.childNodes[g]._acc;e+=1*a.childsCount;a.span.innerHTML=a.label+this.htmlcA+e+this.htmlcB;a._acc=e}else a.span.innerHTML=a.label,a._acc=0;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject);break;case 4:if(0!=a.childsCount){for(g=e=0;g<a.childsCount;g++)a.childNodes[g]._acc||(a.childNodes[g]._acc=1),e+=1*a.childNodes[g]._acc;a.span.innerHTML=a.label+this.htmlcA+e+this.htmlcB;a._acc=e}else a.span.innerHTML=a.label,a._acc=1;a.parentObject&&
a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject)}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case "child":this.childCalc=1;break;case "leafs":this.childCalc=2;break;case "childrec":this.childCalc=3;break;case "leafsrec":this.childCalc=4;break;case "disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(a,c){this.htmlcA=a;this.htmlcB=c};
dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};
dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;this._xopenAll(a)};
dhtmlXTreeObject.prototype.getOpenState=function(a){return(a=this._globalIdStorageFind(a))?this._getOpenState(a):""};dhtmlXTreeObject.prototype.closeAllItems=function(a){a===window.undefined&&(a=this.rootId);a=this._globalIdStorageFind(a);if(!a)return 0;this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype.setUserData=function(a,c,e){if(a=this._globalIdStorageFind(a,0,!0))"hint"==c&&(a.htmlNode.childNodes[0].childNodes[0].title=e),"undefined"==typeof a.userData["t_"+c]&&(a._userdatalist=a._userdatalist?a._userdatalist+(","+c):c),a.userData["t_"+c]=e};dhtmlXTreeObject.prototype.getUserData=function(a,c){var e=this._globalIdStorageFind(a,0,!0);if(e)return e.userData["t_"+c]};
dhtmlXTreeObject.prototype.getItemColor=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;var c={};a.acolor&&(c.acolor=a.acolor);a.scolor&&(c.scolor=a.scolor);return c};dhtmlXTreeObject.prototype.setItemColor=function(a,c,e){if(a=a&&a.span?a:this._globalIdStorageFind(a))a.i_sel?e&&(a.span.style.color=e):c&&(a.span.style.color=c),e&&(a.scolor=e),c&&(a.acolor=c);else return 0};
dhtmlXTreeObject.prototype.getItemText=function(a){return(a=this._globalIdStorageFind(a))?a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0};dhtmlXTreeObject.prototype.getParentId=function(a){return(a=this._globalIdStorageFind(a))&&a.parentObject?a.parentObject.id:""};dhtmlXTreeObject.prototype.changeItemId=function(a,c){if(a!=c){var e=this._globalIdStorageFind(a);if(!e)return 0;e.id=c;e.span.contextMenuId=c;this._idpull[c]=this._idpull[a];delete this._idpull[a]}};
dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c._cimgs=[];c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};
dhtmlXTreeObject.prototype.doPaste=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;for(var c=0;c<this.nodeCut.length;c++)this._checkPNodes(a,this.nodeCut[c])||this._moveNode(this.nodeCut[c],a);this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=[]};
dhtmlXTreeObject.prototype._moveNode=function(a,c){if(1==this.dadmodec){var e=c;if(0>this.dadmodefix){for(;;){e=this._getPrevNode(e);if(-1==e){e=this.htmlNode;break}if(0==e.tr||""==e.tr.style.display||!e.parentObject)break}var g=c}else e.tr&&e.tr.nextSibling&&e.tr.nextSibling.nodem&&1>this._getOpenState(e)?e=e.tr.nextSibling.nodem:(e=this._getNextNode(e),-1==e&&(e=this.htmlNode)),g=e,e=c;return this._getNodeLevel(e,0)>this._getNodeLevel(g,0)?this.dropLower?g.id!=this.rootId?this._moveNodeTo(a,g.parentObject,
g):this._moveNodeTo(a,this.htmlNode,null):this._moveNodeTo(a,e.parentObject):this._moveNodeTo(a,g.parentObject,g)}return this._moveNodeTo(a,c)};dhtmlXTreeObject.prototype._fixNodesCollection=function(a,c){var e=0,g=a.childNodes,h=a.childsCount-1;if(c!=g[h]){for(var l=0;l<h;l++)g[l]==g[h]&&(g[l]=g[l+1],g[l+1]=g[h]);for(l=0;l<h+1;l++)if(e){var m=g[l];g[l]=e;e=m}else g[l]==c&&(e=g[l],g[l]=g[h])}};
dhtmlXTreeObject.prototype._recreateBranch=function(a,c,e,g){var h,l="";if(e){for(h=0;h<c.childsCount&&c.childNodes[h]!=e;h++);0!=h?e=c.childNodes[h-1]:(l="TOP",e="")}h=this._onradh;this._onradh=null;e=this._attachChildNode(c,a.id,a.label,0,a.images[0],a.images[1],a.images[2],l,0,e);e._userdatalist=a._userdatalist;e.userData=a.userData.clone();if(a._attrs){e._attrs={};for(var m in a._attrs)e._attrs[m]=a._attrs[m]}e.XMLload=a.XMLload;h&&(this._onradh=h,this._onradh(e.id));a.treeNod.dpcpy?a.treeNod._globalIdStorageFind(a.id):
e.unParsed=a.unParsed;this._correctPlus(e);for(h=0;h<a.childsCount;h++)this._recreateBranch(a.childNodes[h],e,0,1);!g&&this.childCalc&&this._redrawFrom(this,c);return e};
dhtmlXTreeObject.prototype._moveNodeTo=function(a,c,e){if(a.treeNod._nonTrivialNode)return a.treeNod._nonTrivialNode(this,c,e,a);if(this._checkPNodes(c,a))return!1;var g=c.mytype?a.treeNod.lWin!=c.lWin:a.treeNod.lWin!=c.treeNod.lWin;if(!this.callEvent("onDrag",[a.id,c.id,e?e.id:null,a.treeNod,c.treeNod]))return!1;0==c.XMLload&&this.XMLsource&&(c.XMLload=1,this._loadDynXML(c.id));this.openItem(c.id);var h=a.treeNod,l=a.parentObject.childsCount,m=a.parentObject;if(g||h.dpcpy){var n=a.id;a=this._recreateBranch(a,
c,e);h.dpcpy||h.deleteItem(n)}else{var r=c.childsCount,u=c.childNodes;0==r&&(c._open=!0);h._unselectItem(a);u[r]=a;a.treeNod=c.treeNod;c.childsCount++;r=this._drawNewTr(u[r].htmlNode);e?(c.htmlNode.childNodes[0].insertBefore(r,e.tr),this._fixNodesCollection(c,e),u=c.childNodes):(c.htmlNode.childNodes[0].appendChild(r),1==this.dadmode&&this._fixNodesCollection(c,e))}if(!h.dpcpy&&!g){var v=a.tr;document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){v.parentNode.removeChild(v)},
250):a.parentObject.htmlNode.childNodes[0].removeChild(a.tr);if(e&&c==a.parentObject)m.childNodes[m.childsCount-1]=0;else for(n=0;n<m.childsCount;n++)if(m.childNodes[n].id==a.id){m.childNodes[n]=0;break}h._compressChildList(m.childsCount,m.childNodes);m.childsCount--}if(!g&&!h.dpcpy){a.tr=r;r.nodem=a;a.parentObject=c;if(h!=c.treeNod){if(a.treeNod._registerBranch(a,h))return;this._clearStyles(a);this._redrawFrom(this,a.parentObject);this._onradh&&this._onradh(a.id)}this._correctPlus(c);this._correctLine(c);
this._correctLine(a);this._correctPlus(a);e?this._correctPlus(e):2<=c.childsCount&&(this._correctPlus(u[c.childsCount-2]),this._correctLine(u[c.childsCount-2]));this._correctPlus(u[c.childsCount-1]);this.tscheck&&this._correctCheckStates(c);h.tscheck&&h._correctCheckStates(m)}1<l&&(h._correctPlus(m.childNodes[l-2]),h._correctLine(m.childNodes[l-2]));h._correctPlus(m);h._correctLine(m);this._fixChildCountLabel(c);h._fixChildCountLabel(m);this.callEvent("onDrop",[a.id,c.id,e?e.id:null,h,c.treeNod]);
return a.id};
dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var c=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],e=c.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=!1;a._aimgs&&this.dragger.removeDraggableItem(c.nextSibling);this.checkBoxOff?(c.childNodes[0].style.display="",c.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(c.childNodes[0],this.imPath+this.checkArray[a.checkstate])):c.style.display="none";c.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(e);this.dragAndDropOff&&
this.dragger.addDraggableItem(e,this);this._aimgs&&this.dragger.addDraggableItem(c.nextSibling,this);e.childNodes[0].className="standartTreeRow";e.onclick=this.onRowSelect;e.ondblclick=this.onRowClick2;c.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(c=0;c<a.childsCount;c++)this._clearStyles(a.childNodes[c])}};
dhtmlXTreeObject.prototype._registerBranch=function(a,c){c&&c._globalIdStorageSub(a.id);a.id=this._globalIdStorageAdd(a.id,a);a.treeNod=this;for(var e=0;e<a.childsCount;e++)this._registerBranch(a.childNodes[e],c);return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseIn",a)};
dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(a,c){this.checkBoxOff=dhx4.s2b(a);this.cBROf=!(this.checkBoxOff||dhx4.s2b(c))};
dhtmlXTreeObject.prototype.setStdImages=function(a,c,e){this.imageArray[0]=a;this.imageArray[1]=c;this.imageArray[2]=e};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=dhx4.s2b(a)};
dhtmlXTreeObject.prototype.setImageArrays=function(a,c,e,g,h,l){switch(a){case "plus":this.plusArray[0]=c;this.plusArray[1]=e;this.plusArray[2]=g;this.plusArray[3]=h;this.plusArray[4]=l;break;case "minus":this.minusArray[0]=c,this.minusArray[1]=e,this.minusArray[2]=g,this.minusArray[3]=h,this.minusArray[4]=l}};dhtmlXTreeObject.prototype.openItem=function(a){this.skipLock=!0;return(a=this._globalIdStorageFind(a))?this._openItem(a):0};
dhtmlXTreeObject.prototype._openItem=function(a){var c=this._getOpenState(a);if(0>c||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,c]))return 0;this._HideShow(a,2);this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]))}else this._srnd&&this._HideShow(a,2);a.parentObject&&!this._skip_open_parent&&this._openItem(a.parentObject)};
dhtmlXTreeObject.prototype.closeItem=function(a){if(this.rootId==a)return 0;this.skipLock=!0;a=this._globalIdStorageFind(a);if(!a)return 0;a.closeble&&this._HideShow(a,1);this.skipLock=!1};dhtmlXTreeObject.prototype.getLevel=function(a){return(a=this._globalIdStorageFind(a))?this._getNodeLevel(a,0):0};dhtmlXTreeObject.prototype.setItemCloseable=function(a,c){c=dhx4.s2b(c);var e=a&&a.span?a:this._globalIdStorageFind(a);if(!e)return 0;e.closeble=c};
dhtmlXTreeObject.prototype._getNodeLevel=function(a,c){return a.parentObject?this._getNodeLevel(a.parentObject,c+1):c};dhtmlXTreeObject.prototype.hasChildren=function(a){return(a=this._globalIdStorageFind(a))?this.XMLsource&&!a.XMLload?!0:a.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var c=0,e=0;e<a.childsCount;e++)0==a.childNodes[e].childsCount&&c++;return c};
dhtmlXTreeObject.prototype.setItemText=function(a,c,e){a=this._globalIdStorageFind(a);if(!a)return 0;a.label=c;a.span.innerHTML=c;this.childCalc&&this._fixChildCountLabel(a);a.span.parentNode.parentNode.title=e||""};dhtmlXTreeObject.prototype.getItemTooltip=function(a){return(a=this._globalIdStorageFind(a))?a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"":""};
dhtmlXTreeObject.prototype.refreshItem=function(a){a||(a=this.rootId);this._globalIdStorageFind(a);this._dynDeleteBranches[a]=(this._dynDeleteBranches[a]||0)+1;this._loadDynXML(a)};dhtmlXTreeObject.prototype.setItemImage2=function(a,c,e,g){a=this._globalIdStorageFind(a);if(!a)return 0;a.images[1]=e;a.images[2]=g;a.images[0]=c;this._correctPlus(a)};dhtmlXTreeObject.prototype.setItemImage=function(a,c,e){a=this._globalIdStorageFind(a);if(!a)return 0;e?(a.images[1]=c,a.images[2]=e):a.images[0]=c;this._correctPlus(a)};
dhtmlXTreeObject.prototype.getSubItems=function(a){a=this._globalIdStorageFind(a,0,1);if(!a)return 0;if(a.unParsed)return this._getSubItemsXML(a.unParsed);var c="";for(i=0;i<a.childsCount;i++)c=c?c+(this.dlmtr+a.childNodes[i].id):""+a.childNodes[i].id;return c};
dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var c="",e=0;e<a.childsCount;e++)if(a.childNodes[e].unParsed||0<a.childNodes[e].childsCount){var g=a.childNodes[e].unParsed?this._getAllScraggyItemsXML(a.childNodes[e].unParsed,1):this._getAllScraggyItems(a.childNodes[e]);g&&(c=c?c+(this.dlmtr+g):g)}else c=c?c+(this.dlmtr+a.childNodes[e].id):""+a.childNodes[e].id;return c};
dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var c="",e=0;e<a.childsCount;e++)if(a.childNodes[e].unParsed||0<a.childNodes[e].childsCount){var c=c?c+(this.dlmtr+a.childNodes[e].id):""+a.childNodes[e].id,g=a.childNodes[e].unParsed?this._getAllFatItemsXML(a.childNodes[e].unParsed,1):this._getAllFatItems(a.childNodes[e]);g&&(c+=this.dlmtr+g)}return c};
dhtmlXTreeObject.prototype._getAllSubItems=function(a,c,e){e=e?e:this._globalIdStorageFind(a);if(!e)return 0;c="";for(var g=0;g<e.childsCount;g++){c=c?c+(this.dlmtr+e.childNodes[g].id):""+e.childNodes[g].id;var h=this._getAllSubItems(0,c,e.childNodes[g]);h&&(c+=this.dlmtr+h)}e.unParsed&&(c=this._getAllSubItemsXML(a,c,e.unParsed));return c};
dhtmlXTreeObject.prototype.selectItem=function(a,c,e){c=dhx4.s2b(c);a=this._globalIdStorageFind(a);if(!a||!a.parentObject)return 0;this.XMLloadingWarning?a.parentObject.openMe=1:this._openItem(a.parentObject);var g=null;e&&(g={ctrlKey:!0},a.i_sel&&(g.skipUnSel=!0));if(c)this.onRowSelect(g,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1);else this.onRowSelect(g,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)};
dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var a=[],c=0;c<this._selected.length;c++)a[c]=this._selected[c].span.innerHTML;return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(a,c){a--;for(var e=0;e<a;e++)0==c[e]&&(c[e]=c[e+1],c[e+1]=0)};
dhtmlXTreeObject.prototype._deleteNode=function(a,c,e){if(!c||!c.parentObject)return 0;var g=0,h=0;c.tr.nextSibling&&(g=c.tr.nextSibling.nodem);c.tr.previousSibling&&(h=c.tr.previousSibling.nodem);for(var l=c.parentObject,m=l.childsCount,n=l.childNodes,r=0;r<m;r++)if(n[r].id==a){e||l.htmlNode.childNodes[0].removeChild(n[r].tr);n[r]=0;break}this._compressChildList(m,n);e||l.childsCount--;g&&(this._correctPlus(g),this._correctLine(g));h&&(this._correctPlus(h),this._correctLine(h));this.tscheck&&this._correctCheckStates(l);
e||this._globalIdStorageRecSub(c)};dhtmlXTreeObject.prototype.setCheck=function(a,c){var e=this._globalIdStorageFind(a,0,1);e&&("unsure"===c?this._setCheck(e,c):(c=dhx4.s2b(c),this.tscheck&&this.smcheck?this._setSubChecked(c,e):this._setCheck(e,c)),this.smcheck&&this._correctCheckStates(e.parentObject))};
dhtmlXTreeObject.prototype._setCheck=function(a,c){if(a){if((a.parentObject._r_logic||this._frbtr)&&c)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var e=0;e<a.parentObject.childsCount;e++)this._setCheck(a.parentObject.childNodes[e],0);e=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate="unsure"==c?2:c?1:0;a.dscheck&&(a.checkstate=a.dscheck);this._setSrc(e,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}};
dhtmlXTreeObject.prototype.setSubChecked=function(a,c){var e=this._globalIdStorageFind(a);this._setSubChecked(c,e);this._correctCheckStates(e.parentObject)};
dhtmlXTreeObject.prototype._setSubChecked=function(a,c){a=dhx4.s2b(a);if(c){if((c.parentObject._r_logic||this._frbtr)&&a)for(var e=0;e<c.parentObject.childsCount;e++)this._setSubChecked(0,c.parentObject.childNodes[e]);c.unParsed&&this._setSubCheckedXML(a,c.unParsed);if(c._r_logic||this._frbtr)this._setSubChecked(a,c.childNodes[0]);else for(e=0;e<c.childsCount;e++)this._setSubChecked(a,c.childNodes[e]);e=c.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];c.checkstate=a?1:0;c.dscheck&&
(c.checkstate=c.dscheck);this._setSrc(e,this.imPath+(c.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[c.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(a){if(a=this._globalIdStorageFind(a))return a.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(a){if(a=this._globalIdStorageFind(a))for(var c=a.childsCount,e=0;e<c;e++)this._deleteNode(a.childNodes[0].id,a.childNodes[0])};
dhtmlXTreeObject.prototype.deleteItem=function(a,c){if(!this._onrdlh||this._onrdlh(a)){var e=this._deleteItem(a,c);e&&this._fixChildCountLabel(e)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype._deleteItem=function(a,c,e){c=dhx4.s2b(c);var g=this._globalIdStorageFind(a);if(g){var h=this.getParentId(a),l=g.parentObject;this._deleteNode(a,g,e);this._editCell&&this._editCell.id==a&&(this._editCell=null);this._correctPlus(l);this._correctLine(l);c&&h!=this.rootId&&this.selectItem(h,1);return l}};
dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var c=0;c<a.childsCount;c++)this._globalIdStorageRecSub(a.childNodes[c]),this._globalIdStorageSub(a.childNodes[c].id);this._globalIdStorageSub(a.id);a.span=null;a.tr.nodem=null;a.tr=null;a.htmlNode=null};
dhtmlXTreeObject.prototype.insertNewNext=function(a,c,e,g,h,l,m,n,r){a=this._globalIdStorageFind(a);if(!a||!a.parentObject)return 0;c=this._attachChildNode(0,c,e,g,h,l,m,n,r,a);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(a.parentObject);return c};dhtmlXTreeObject.prototype.getItemIdByIndex=function(a,c){var e=this._globalIdStorageFind(a);return!e||c>=e.childsCount?null:e.childNodes[c].id};
dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(a,c){var e=this._globalIdStorageFind(a);return!e||c>=e.childsCount?null:e.childNodes[c].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};
dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null);this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};
dhtmlXTreeObject.prototype.enableDragAndDrop=function(a,c){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0;(this.dragAndDropOff=dhx4.s2b(a))&&this.dragger.addDragLanding(this.allTree,this);1<arguments.length&&(this._ddronr=!dhx4.s2b(c))};
dhtmlXTreeObject.prototype._setMove=function(a,c,e){if(a.parentObject.span){c=dhx4.absTop(a);var g=dhx4.absTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;2==this.dadmode&&(e=e-c+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2,0<Math.abs(e)-a.offsetHeight/6?(this.dadmodec=1,0>e&&(this.dadmodefix=0-a.offsetHeight)):this.dadmodec=0);0==this.dadmodec?(a=a.parentObject.span,a.className+=" dragAndDropRow",this._lastMark=a):(this._clearMove(),
this.selectionBar.style.top=c-g+((parseInt(a.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",20<this.allTree.offsetWidth&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="");this._autoScroll(null,c,g)}};
dhtmlXTreeObject.prototype._autoScroll=function(a,c,e){this.autoScroll&&(a&&(c=dhx4.absTop(a),e=dhx4.absTop(this.allTree)-this.allTree.scrollTop),c-e-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),c-e<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))};
dhtmlXTreeObject.prototype._createDragNode=function(a,c){if(!this.dADTempOff)return null;var e=a.parentObject;if(!this.callEvent("onBeforeDrag",[e.id,c]))return null;e.i_sel||this._selectItem(e,c);this._checkMSelectionLogic();var e=document.createElement("div"),g=[];if(this._itim_dg)for(var h=0;h<this._selected.length;h++)g[h]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[h].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+
this._selected[h].span.innerHTML+"</td></tr></table>";else g=this.getSelectedItemText().split(this.dlmtr);e.innerHTML=g.join("");e.style.position="absolute";e.className="dragSpanDiv";this._dragged=[].concat(this._selected);return e};dhtmlXTreeObject.prototype._focusNode=function(a){a=dhx4.absTop(a.htmlNode)-dhx4.absTop(this.allTree);if(a>this.allTree.offsetHeight-30||0>a)this.allTree.scrollTop=a+this.allTree.scrollTop};
dhtmlXTreeObject.prototype._preventNsDrag=function(a){a&&a.preventDefault&&a.preventDefault();return!1};
dhtmlXTreeObject.prototype._drag=function(a,c,e){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);e.parentObject||(e=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0);this._clearMove();(c=a.parentObject.treeNod)&&c._clearMove&&c._clearMove("");if(!this.dragMove||this.dragMove()){a=c&&c._clearMove&&c._dragged?c._dragged:Array(a.parentObject);e=e.parentObject;for(var g=0;g<a.length;g++){var h=this._moveNode(a[g],e);this.dadmodec&&!1!==h&&(e=this._globalIdStorageFind(h,
!0,!0));h&&!this._sADnD&&this.selectItem(h,0,1)}}c&&(c._dragged=[])};
dhtmlXTreeObject.prototype._dragIn=function(a,c,e,g){if(!this.dADTempOff)return 0;var h=c.parentObject;if((c=a.parentObject)||!this._ddronr){if(!this.callEvent("onDragIn",[h.id,c?c.id:null,h.treeNod,this]))return c&&this._autoScroll(a),0;if(c){if(null==h.childNodes)return this._setMove(a,e,g),a;for(var h=h.treeNod,l=0;l<h._dragged.length;l++)if(this._checkPNodes(c,h._dragged[l]))return this._autoScroll(a),0;this.selectionBar.parentNode.removeChild(this.selectionBar);c.span.parentNode.appendChild(this.selectionBar);
this._setMove(a,e,g);if(0>=this._getOpenState(c)){var m=this;this._autoOpenId=c.id;this._autoOpenTimer=window.setTimeout(function(){m._autoOpenItem(null,m);m=null},1E3)}}else this.allTree.className+=" selectionBox";return a}};dhtmlXTreeObject.prototype._autoOpenItem=function(a,c){c.openItem(c._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};
dhtmlXTreeObject.prototype._getNextNode=function(a,c){return!c&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)};dhtmlXTreeObject.prototype._lastChild=function(a){return a.childsCount?this._lastChild(a.childNodes[a.childsCount-1]):a};
dhtmlXTreeObject.prototype._getPrevNode=function(a,c){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:-1};dhtmlXTreeObject.prototype.findItem=function(a,c,e){return(a=this._findNodeByLabel(a,c,e?this.htmlNode:null))?(this.selectItem(a.id,!0),this._focusNode(a),a.id):null};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,c,e){return(a=this._findNodeByLabel(a,c,e?this.htmlNode:null))?a.id:null};
dhtmlXTreeObject.prototype.findStrInXML=function(a,c,e){if(!a.childNodes&&a.item)return this.findStrInJSON(a,c,e);if(!a.childNodes)return!1;for(var g=0;g<a.childNodes.length;g++)if(1==a.childNodes[g].nodeType){var h=a.childNodes[g].getAttribute(c);h||"itemtext"!=a.childNodes[g].tagName||(h=a.childNodes[g].firstChild.data);if(h&&-1!=h.toLowerCase().search(e)||this.findStrInXML(a.childNodes[g],c,e))return!0}return!1};
dhtmlXTreeObject.prototype.findStrInJSON=function(a,c,e){for(var g=0;g<a.item.length;g++){var h=a.item[g].text;if(h&&-1!=h.toLowerCase().search(e)||a.item[g].item&&this.findStrInJSON(a.item[g],c,e))return!0}return!1};
dhtmlXTreeObject.prototype._findNodeByLabel=function(a,c,e){a=a.replace(/^( )+/,"").replace(/( )+$/,"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");e||(e=this._selected[0],e||(e=this.htmlNode));var g=e;if(c){var h=this._getPrevNode(g);-1==h&&(h=this._lastChild(this.htmlNode));h.unParsed&&this.findStrInXML(h.unParsed.d,"text",a)?(this.reParse(h),e=this._getPrevNode(g)):e=h;-1==e&&(e=this._lastChild(this.htmlNode))}else e.unParsed&&this.findStrInXML(e.unParsed.d,
"text",a)&&this.reParse(e),e=this._getNextNode(g),-1==e&&(e=this.htmlNode.childNodes[0]);for(;e&&e!=g;){if(e.label&&-1!=e.label.search(a))return e;if(c)h=this._getPrevNode(e),-1==h&&(h=this._lastChild(this.htmlNode)),h.unParsed&&this.findStrInXML(h.unParsed.d,"text",a)?(this.reParse(h),e=this._getPrevNode(e)):e=h,-1==e&&(e=this._lastChild(this.htmlNode));else{if(-1==e){if(g==this.htmlNode)break;e=this.htmlNode.childNodes[0]}e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)&&this.reParse(e);e=this._getNextNode(e);
-1==e&&(e=this.htmlNode)}}return null};
dhtmlXTreeObject.prototype.moveItem=function(a,c,e,g){a=this._globalIdStorageFind(a);if(!a)return 0;var h=null;switch(c){case "right":alert("Not supported yet");break;case "item_child":h=(g||this)._globalIdStorageFind(e);if(!h)return 0;h=(g||this)._moveNodeTo(a,h,0);break;case "item_sibling":h=(g||this)._globalIdStorageFind(e);if(!h)return 0;h=(g||this)._moveNodeTo(a,h.parentObject,h);break;case "item_sibling_next":h=(g||this)._globalIdStorageFind(e);if(!h)return 0;h=h.tr&&h.tr.nextSibling&&h.tr.nextSibling.nodem?
(g||this)._moveNodeTo(a,h.parentObject,h.tr.nextSibling.nodem):(g||this)._moveNodeTo(a,h.parentObject);break;case "left":a.parentObject.parentObject&&(h=this._moveNodeTo(a,a.parentObject.parentObject,a.parentObject));break;case "up":g=this._getPrevNode(a);if(-1==g||!g.parentObject)return null;h=this._moveNodeTo(a,g.parentObject,g);break;case "up_strict":g=this._getIndex(a);0!=g&&(h=this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[g-1]));break;case "down_strict":g=this._getIndex(a);c=a.parentObject.childsCount-
2;g==c?h=this._moveNodeTo(a,a.parentObject):g<c&&(h=this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[g+2]));break;case "down":g=this._getNextNode(this._lastChild(a));if(-1==g||!g.parentObject)return;g.parentObject==a.parentObject&&(g=this._getNextNode(g));if(-1==g)h=this._moveNodeTo(a,a.parentObject);else{if(-1==g||!g.parentObject)return;h=this._moveNodeTo(a,g.parentObject,g)}}_isIE&&8>_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0");return h};
dhtmlXTreeObject.prototype.setDragBehavior=function(a,c){this._sADnD=!dhx4.s2b(c);switch(a){case "child":this.dadmode=0;break;case "sibling":this.dadmode=1;break;case "complex":this.dadmode=2}};
dhtmlXTreeObject.prototype._loadDynXML=function(a,c){c=c||this.XMLsource;var e=(new Date).valueOf();this._ld_id=a;"function"==this.xmlalb?c&&c(this._escape(a)):"name"==this.xmlalb?this.load(c+this._escape(a)):"xmlname"==this.xmlalb?this.load(c+this._escape(a)+".xml?uid="+e):this.load(c+dhtmlx.url(c)+"uid="+e+"&id="+this._escape(a))};dhtmlXTreeObject.prototype.enableMultiselection=function(a,c){this._amsel=dhx4.s2b(a);this._amselS=dhx4.s2b(c)};
dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var a=[],c=0;c<this._selected.length;c++)for(var e=0;e<this._selected.length;e++)c!=e&&this._checkPNodes(this._selected[e],this._selected[c])&&(a[a.length]=this._selected[e]);for(c=0;c<a.length;c++)this._unselectItem(a[c])};dhtmlXTreeObject.prototype._checkPNodes=function(a,c){return this._dcheckf?!1:c==a?1:a.parentObject?this._checkPNodes(a.parentObject,c):0};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=dhx4.s2b(a)};
dhtmlXTreeObject.prototype.enableDistributedParsing=function(a,c,e){this._edsbps=dhx4.s2b(a);this._edsbpsA=[];this._edsbpsC=c||10;this._edsbpsD=e||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)};dhtmlXTreeObject.prototype.getItemParsingState=function(a){if(!this._globalIdStorageFind(a,!0,!0))return 0;if(this._edsbpsA)for(var c=0;c<this._edsbpsA.length;c++)if(this._edsbpsA[c][2]==a)return-1;return 1};
dhtmlXTreeObject.prototype._distributedStart=function(a,c,e,g,h){this._edsbpsA||(this._edsbpsA=[]);this._edsbpsA[this._edsbpsA.length]=[a,c,e,g,h]};
dhtmlXTreeObject.prototype._distributedStep=function(a){var c=this;if(this._edsbpsA&&this._edsbpsA.length){var e=this._edsbpsA[0];this.parsedArray=[];this._parse(e[0],e[2],e[3],e[1]);var g=this._globalIdStorageFind(e[2]);this._redrawFrom(this,g,e[4],this._getOpenState(g));e=this.setCheckList.split(this.dlmtr);for(g=0;g<e.length;g++)e[g]&&this.setCheck(e[g],1);this._edsbpsA=[].concat(this._edsbpsA.slice(1));this._edsbpsA.length||(window.setTimeout(function(){if(c.onXLE)c.onXLE(c,a);c.callEvent("onXLE",
[c,a])},1),c.xmlstate=0)}else c.XMLloadingWarning=0};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.preventIECaching=function(a){dhx4.ajax.cache=!a};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;
dhtmlXTreeObject.prototype.disableCheckbox=function(a,c){var e="object"!=typeof a?this._globalIdStorageFind(a,0,1):a;e&&(e.dscheck=dhx4.s2b(c)?(e.checkstate||0)%3+3:2<e.checkstate?e.checkstate-3:e.checkstate,this._setCheck(e),3>e.dscheck&&(e.dscheck=!1))};dhtmlXTreeObject.prototype.smartRefreshBranch=function(a,c){this._branchUpdate=1;this.smartRefreshItem(a,c)};
dhtmlXTreeObject.prototype.smartRefreshItem=function(a,c){for(var e=this._globalIdStorageFind(a),g=0;g<e.childsCount;g++)e.childNodes[g]._dmark=!0;this.waitUpdateXML=!0;c&&c.exists?this._parse(c,a):this._loadDynXML(a,c)};dhtmlXTreeObject.prototype.refreshItems=function(a,c){var e=a.toString().split(this.dlmtr);this.waitUpdateXML=[];for(var g=0;g<e.length;g++)this.waitUpdateXML[e[g]]=!0;this.load((c||this.XMLsource)+dhtmlx.url(c||this.XMLsource)+"ids="+this._escape(a))};
dhtmlXTreeObject.prototype.updateItem=function(a,c,e,g,h,l,m){var n=this._globalIdStorageFind(a);n.userData=new cObject;c&&(n.label=c);n.images=[e||this.imageArray[0],g||this.imageArray[1],h||this.imageArray[2]];this.setItemText(a,c);l&&this._setCheck(n,!0);"1"!=m||this.hasChildren(a)||(n.XMLload=0);this._correctPlus(n);n._dmark=!1;return n};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)};
dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate};
dhtmlXTreeObject.prototype.setItemTopOffset=function(a,c){var e;e="object"!=typeof a?this._globalIdStorageFind(a):a;var g=e.span.parentNode.parentNode;e.span.style.paddingBottom="1px";for(var h=0;h<g.childNodes.length;h++){if(0!=h)_isIE?(g.childNodes[h].style.height="18px",g.childNodes[h].style.paddingTop=parseInt(c)+"px"):g.childNodes[h].style.height=18+parseInt(c)+"px";else{var l=g.childNodes[h].firstChild;"DIV"!=g.childNodes[h].firstChild.tagName&&(l=document.createElement("DIV"),g.childNodes[h].insertBefore(l,
g.childNodes[h].firstChild));e.parentObject.id==this.rootId&&e.parentObject.childNodes[0]==e||!this.treeLinesOn||(g.childNodes[h].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")");l.innerHTML="&nbsp;";l.style.overflow="hidden"}l.style.verticalAlign=g.childNodes[h].style.verticalAlign="bottom";_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}};
dhtmlXTreeObject.prototype.setIconSize=function(a,c,e){if(e){e=e&&e.span?e:this._globalIdStorageFind(e);if(!e)return 0;e=e.span.parentNode.previousSibling.childNodes[0];a&&(e.style.width=a+"px",window._KHTMLrv&&(e.parentNode.style.width=a+"px"));c&&(e.style.height=c+"px",window._KHTMLrv&&(e.parentNode.style.height=c+"px"))}else this.def_img_x=a,this.def_img_y=c};
dhtmlXTreeObject.prototype.getItemImage=function(a,c,e){a=this._globalIdStorageFind(a);if(!a)return"";c=a.images[c||0];e&&(c=this.iconURL+c);return c};
dhtmlXTreeObject.prototype.enableRadioButtons=function(a,c){if(1==arguments.length)this._frbtr=dhx4.s2b(a),this.checkBoxOff=this.checkBoxOff||this._frbtr;else{var e=this._globalIdStorageFind(a);if(!e)return"";if((c=dhx4.s2b(c))&&!e._r_logic){e._r_logic=!0;for(var g=0;g<e.childsCount;g++)this._setCheck(e.childNodes[g],e.childNodes[g].checkstate)}if(!c&&e._r_logic)for(e._r_logic=!1,g=0;g<e.childsCount;g++)this._setCheck(e.childNodes[g],e.childNodes[g].checkstate)}};
dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){this.mlitems=!0===a?"100%":a};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=dhx4.s2b(a)};
dhtmlXTreeObject.prototype.clearSelection=function(a){a?this._unselectItem(this._globalIdStorageFind(a)):this._unselectItems()};dhtmlXTreeObject.prototype.showItemSign=function(a,c){var e=this._globalIdStorageFind(a);if(!e)return 0;dhx4.s2b(c)?(e.closeble=!0,e.wsign=!1):(this._openItem(e),e.closeble=!1,e.wsign=!0);this._correctPlus(e)};
dhtmlXTreeObject.prototype.showItemCheckbox=function(a,c){if(!a)for(var e in this._idpull)this.showItemCheckbox(this._idpull[e],c);"object"!=typeof a&&(a=this._globalIdStorageFind(a,0,0));if(!a)return 0;a.nocheckbox=!dhx4.s2b(c);a.span.parentNode.previousSibling.previousSibling.childNodes[0].parentNode.style.display=a.nocheckbox?"none":""};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};
dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0;this.ehlta=dhx4.s2b(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var a=this.childNodes[3].parentObject,c=a.treeNod;c.callEvent("onMouseOut",[a.id]);a.id==c._l_onMSI&&(c._l_onMSI=null);c.ehlta&&(a.span.className=a.span.className.replace("_lor",""))};
dhtmlXTreeObject.prototype._itemMouseIn=function(){var a=this.childNodes[3].parentObject,c=a.treeNod;c._l_onMSI!=a.id&&c.callEvent("onMouseIn",[a.id]);c._l_onMSI=a.id;c.ehlta&&(a.span.className=a.span.className.replace("_lor",""),a.span.className=a.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.focusItem=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;this._focusNode(a)};
dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;
dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var c="",e=0;e<a.childsCount;e++)if(a.childNodes[e].unParsed||0<a.childNodes[e].childsCount){var g=a.childNodes[e].unParsed?this._getAllScraggyItemsXML(a.childNodes[e].unParsed,1):this._getAllScraggyItems(a.childNodes[e]);g&&(c=c?c+(this.dlmtr+g):g)}else c=c?c+(this.dlmtr+a.childNodes[e].id):""+a.childNodes[e].id;return c};
dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var c="",e=0;e<a.childsCount;e++)if(a.childNodes[e].unParsed||0<a.childNodes[e].childsCount){var c=c?c+(this.dlmtr+a.childNodes[e].id):""+a.childNodes[e].id,g=a.childNodes[e].unParsed?this._getAllFatItemsXML(a.childNodes[e].unParsed,1):this._getAllFatItems(a.childNodes[e]);g&&(c+=this.dlmtr+g)}return c};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};
dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){a&&(a=this._globalIdStorageFind(a));return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};
dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)],c=this._getAllChecked("","",2);c&&a.push(c);return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(a,c,e){a||(a=this.htmlNode);a.checkstate==e&&(a.nocheckbox||(c=c?c+(this.dlmtr+a.id):""+a.id));for(var g=a.childsCount,h=0;h<g;h++)c=this._getAllChecked(a.childNodes[h],c,e);a.unParsed&&(c=this._getAllCheckedXML(a.unParsed,c,e));return c?c:""};
dhtmlXTreeObject.prototype.setItemStyle=function(a,c,e){e=e||!1;a=this._globalIdStorageFind(a);if(!a)return 0;a.span.style.cssText?a.span.style.cssText=e?c:a.span.style.cssText+";"+c:a.span.setAttribute("style",a.span.getAttribute("style")+"; "+c)};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=dhx4.s2b(a)};
dhtmlXTreeObject.prototype.setSkin=function(a){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+a;"dhx_terrace"!=a&&"dhx_web"!=a||this.enableTreeLines(!1)};
(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,a.width||"100%",a.height||"100%",a.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",
editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",
xml:"loadXML",skin:"setSkin"},{})})();
dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,e,g){a=dhx4.ajax.xpath(".//item",a)[0].getAttribute("text");this.obj.insertNewItem(g,e,a,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(a,e,g){a=dhx4.ajax.xpath(".//item",a)[0].getAttribute("text");this.obj.setItemText(e,a);this.obj.getParentId(e)!=g&&this.obj.moveItem(e,"item_child",g);this.setUpdated(e,!0,"updated")});a.attachEvent("deleteCallback",function(a,e,g){this.obj.setUserData(e,this.action_param,
"true_deleted");this.obj.deleteItem(e,!1)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(c,e){3==c&&a.setUpdated(e,!0);return!0});this.attachEvent("onDrop",function(c,e,g,h,l){h==l&&a.setUpdated(c,!0)});this._onrdlh=function(c){var e=a.getState(c);if("inserted"==e)return a.set_invalid(c,!1),a.setUpdated(c,!1),!0;if("true_deleted"==e)return a.setUpdated(c,!1),!0;a.setUpdated(c,!0,"deleted");return!1};this._onradh=function(c){a.setUpdated(c,!0,"inserted")};
a._getRowData=function(a){var e={};a=this.obj._globalIdStorageFind(a);for(var g=a.parentObject,h=0,h=0;h<g.childsCount&&g.childNodes[h]!=a;h++);e.tr_id=a.id;e.tr_pid=g.id;e.tr_order=h;e.tr_text=a.span.innerHTML;g=(a._userdatalist||"").split(",");for(h=0;h<g.length;h++)e[g[h]]=a.userData["t_"+g[h]];return e}};
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTree=function(a){this.callEvent("_onBeforeContentAttach",["tree"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(c,"100%","100%",a||0);this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom=
"2px";this.callEvent("_onContentAttach",[]);return this.dataObj});dhtmlXTreeObject.prototype.makeDraggable=function(a,c){"object"!=typeof a&&(a=document.getElementById(a));dragger=new dhtmlDragAndDropObject;dropper=new dhx_dragSomethingInTree;dragger.addDraggableItem(a,dropper);a.dragLanding=null;a.ondragstart=dropper._preventNsDrag;a.onselectstart=new Function("return false;");a.parentObject={};a.parentObject.img=a;a.parentObject.treeNod=dropper;dropper._customDrop=c};
dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(a){for(var c=document.getElementsByTagName("div"),e=0;e<c.length;e++)c[e].getAttribute("dragInDhtmlXTree")&&this.makeDragable(c[e],a)};
function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(a){var c=document.createElement("div");c.style.position="absolute";c.innerHTML=a.innerHTML||a.value;c.className="dragSpanDiv";return c};this._preventNsDrag=function(a){(a||window.event).cancelBubble=!0;a&&a.preventDefault&&a.preventDefault();return!1};this._nonTrivialNode=function(a,c,e,g){if(this._customDrop)return this._customDrop(a,g.img.id,c.id,e?e.id:null);var h=g.img.getAttribute("image")||"",l=g.img.id||"new";
g=g.img.getAttribute("text")||(_isIE?g.img.innerText:g.img.textContent);a[e?"insertNewNext":"insertNewItem"](e?e.id:c.id,l,g,"",h,h,h)}}
dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=dhx4.s2b(a);this._eItEdFlag||(this._edn_dblclick=this._edn_click_IE=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(a,e){this._edn_dblclick&&this._editItem(a,e);return!0}),this.setOnClickHandler(function(a,e){this._stopEditItem(a,e);this.ed_hist_clcik==a&&this._edn_click_IE&&this._editItem(a,e);this.ed_hist_clcik=a;return!0}),this._eItEdFlag=!0)};
dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)};dhtmlXTreeObject.prototype.setEditStartAction=function(a,c){this._edn_click_IE=dhx4.s2b(a);this._edn_dblclick=dhx4.s2b(c)};
dhtmlXTreeObject.prototype._stopEdit=function(a,c){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=a)){var e=!0;c?(e=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):e=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]);!0===e?e=this._editCell.span.childNodes[0].value:!1===e&&(e=this._editCell._oldValue);var g=e!=this._editCell._oldValue;this._editCell.span.innerHTML=e;this._editCell.label=this._editCell.span.innerHTML;
this._editCell.span.className=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};e=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell);this._editCell=null;c||this.callEvent("onEdit",[3,e,this,g]);this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}};
dhtmlXTreeObject.prototype._stopEditItem=function(a,c){this._stopEdit(a)};dhtmlXTreeObject.prototype.stopEdit=function(a){this._editCell&&this._stopEdit(this._editCell.id+"_non",a)};dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)};
dhtmlXTreeObject.prototype._editItem=function(a,c){if(this._eItEd){this._stopEdit();var e=this._globalIdStorageFind(a);if(e){var g=this.callEvent("onEdit",[0,a,this,e.span.innerHTML]);if(!0===g)g="undefined"!=typeof e.span.innerText?e.span.innerText:e.span.textContent;else if(!1===g)return;this.dADTempOffEd=this.dADTempOff;this.dADTempOff=!1;this._editCell=e;e._oldValue=g;e.span.innerHTML="<input type='text' class='intreeeditRow' />";e.span.style.paddingRight=e.span.style.paddingLeft="0px";e.span.onclick=
e.span.ondblclick=function(a){(a||event).cancelBubble=!0};e.span.childNodes[0].value=g;e.span.childNodes[0].onselectstart=function(a){return(a||event).cancelBubble=!0};e.span.childNodes[0].onmousedown=function(a){return(a||event).cancelBubble=!0};e.span.childNodes[0].focus();e.span.childNodes[0].focus();e.span.onclick=function(a){(a||event).cancelBubble=!0;return!1};e.span.className="";e.span.parentNode.className="";var h=this;e.span.childNodes[0].onkeydown=function(a){a||(a=window.event);13==a.keyCode?
(a.cancelBubble=!0,h._stopEdit(window.undefined)):27==a.keyCode&&h._stopEdit(window.undefined,!0);(a||event).cancelBubble=!0};this.callEvent("onEdit",[1,a,this])}}};function jsonPointer(a,c){this.d=a;this.dp=c}
jsonPointer.prototype={text:function(){var a=function(a){for(var g=[],h=0;h<a.length;h++)g.push("{"+c(a[h])+"}");return g.join(",")},c=function(e){var g=[],h;for(h in e)"object"==typeof e[h]?h.length?g.push('"'+h+'":['+a(e[h])+"]"):g.push('"'+h+'":{'+c(e[h])+"}"):g.push('"'+h+'":"'+e[h]+'"');return g.join(",")};return"{"+c(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(a,c,e){a=this.d[a];var g=new jsonPointer;
if(a)for(var h=0;h<a.length;h++)g.d=a[h],c.apply(e,[g,h])},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return!!this.d[a]},each_x:function(a,c,e,g,h){a=this.d[a];var l=new jsonPointer(0,this.d);if(a)for(h=h||0;h<a.length&&(!a[h][c]||(l.d=a[h],-1!=e.apply(g,[l,h])));h++);},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,c){this.d[a]=c},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(a,
c,e,g,h){var l=this.d[a];if(l.length)for(var m=0;m<l.length;m++){if(null!=l[m][c]&&""!=l[m][c]&&(!e||l[m][c]==e)){var n=new jsonPointer(l[m],this.d);g.apply(h,[n,m])}n=this.d;this.d=l[m];this.sub_exists(a)&&this.through(a,c,e,g,h);this.d=n}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,c){window.console&&window.console.info&&window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSArrayFile(a,c)};
dhtmlXTreeObject.prototype._loadJSArrayFile=function(a,c){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=function(a,c){eval("var z="+a.responseText);this._loadJSArray(z);c&&c.call(this,a)};dhx4.ajax.get(a,function(a){e.XMLLoader(a.xmlDoc,c)})};
dhtmlXTreeObject.prototype.loadCSV=function(a,c){window.console&&window.console.info&&window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadCSV(a,c)};
dhtmlXTreeObject.prototype._loadCSV=function(a,c){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=function(a,c){this._loadCSVString(a.responseText);c&&c.call(this,a)};dhx4.ajax.get(a,function(a){e.XMLLoader(a.xmlDoc,c)})};
dhtmlXTreeObject.prototype.loadJSArray=function(a,c){window.console&&window.console.info&&window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSArray(a,c)};
dhtmlXTreeObject.prototype._loadJSArray=function(a,c){for(var e=[],g=0;g<a.length;g++)e[a[g][1]]||(e[a[g][1]]=[]),e[a[g][1]].push({id:a[g][0],text:a[g][2]});var g={id:this.rootId},h=function(a,c){if(e[a.id]){a.item=e[a.id];for(var g=0;g<a.item.length;g++)c(a.item[g],c)}};h(g,h);this._loadJSONObject(g,c)};
dhtmlXTreeObject.prototype.loadCSVString=function(a,c){window.console&&window.console.info&&window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadCSVString(a,c)};
dhtmlXTreeObject.prototype._loadCSVString=function(a,c){for(var e=[],g=a.split("\n"),h=0;h<g.length;h++){var l=g[h].split(",");e[l[1]]||(e[l[1]]=[]);e[l[1]].push({id:l[0],text:l[2]})}g={id:this.rootId};h=function(a,c){if(e[a.id]){a.item=e[a.id];for(var g=0;g<a.item.length;g++)c(a.item[g],c)}};h(g,h);this._loadJSONObject(g,c)};
dhtmlXTreeObject.prototype.loadJSONObject=function(a,c){window.console&&window.console.info&&window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSONObject(a,c)};dhtmlXTreeObject.prototype._loadJSONObject=function(a,c){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var e=new jsonPointer(a);this._parse(e);this._p=e;c&&c()};
dhtmlXTreeObject.prototype.loadJSON=function(a,c){window.console&&window.console.info&&window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSON(a,c)};
dhtmlXTreeObject.prototype._loadJSON=function(a,c){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=function(a,c){try{eval("var t="+a.responseText)}catch(e){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",a,this]);return}var m=new jsonPointer(t);this._parse(m);this._p=m;c&&c.call(this,a)};dhx4.ajax.get(a,function(a){e.XMLLoader(a.xmlDoc,c)})};
dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var a=['{"id":"'+this.rootId+'", "item":['],c=[],e=0;e<this.htmlNode.childsCount;e++)c.push(this._serializeItemJSON(this.htmlNode.childNodes[e]));a.push(c.join(","));a.push("]}");return a.join("")};
dhtmlXTreeObject.prototype._serializeItemJSON=function(a){var c=[];if(a.unParsed)return a.unParsed.text();var e=this._selected.length?this._selected[0].id:"",g=a.span.innerHTML,g=g.replace(/\"/g,'\\"',g);this._xfullXML?c.push('{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(e==a.id?' "select":"1",':"")+' "text":"'+g+'", "im0":"'+a.images[0]+'", "im1":"'+a.images[1]+'", "im2":"'+a.images[2]+'" '+(a.acolor?', "aCol":"'+a.acolor+'" ':"")+(a.scolor?', "sCol":"'+a.scolor+'" ':"")+(1==
a.checkstate?', "checked":"1" ':2==a.checkstate?', "checked":"-1"':"")+(a.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==a.XMLload?', "child":"1" ':"")):c.push('{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(e==a.id?' "select":"1",':"")+' "text":"'+g+'"'+(this.XMLsource&&0==a.XMLload?', "child":"1" ':""));if(this._xuserData&&a._userdatalist){c.push(', "userdata":[');for(var e=a._userdatalist.split(","),g=[],h=0;h<e.length;h++)g.push('{ "name":"'+e[h]+'" , "content":"'+
a.userData["t_"+e[h]]+'" }');c.push(g.join(","));c.push("]")}if(a.childsCount){c.push(', "item":[');g=[];for(h=0;h<a.childsCount;h++)g.push(this._serializeItemJSON(a.childNodes[h]));c.push(g.join(","));c.push("]\n")}c.push("}\n");return c.join("")};
function dhtmlXTreeFromHTML(a){"object"!=typeof a&&(a=document.getElementById(a));for(var c,e=a.id,g="",h=0;h<a.childNodes.length;h++)if("1"==a.childNodes[h].nodeType){if("XMP"==a.childNodes[h].tagName)for(h=a.childNodes[h],c=0;c<h.childNodes.length;c++)g+=h.childNodes[c].data;else"ul"==a.childNodes[h].tagName.toLowerCase()&&(g=dhx_li2trees(a.childNodes[h],[],0));break}a.innerHTML="";h=new dhtmlXTreeObject(a,"100%","100%",0);c=[];for(b in h)c[b.toLowerCase()]=b;for(var l=a.attributes,m=0;m<l.length;m++)if(0==
l[m].name.indexOf("set")||0==l[m].name.indexOf("enable")){var n=l[m].name;h[n]||(n=c[l[m].name]);h[n].apply(h,l[m].value.split(","))}if("object"==typeof g){h.XMLloadingWarning=1;for(l=0;l<g.length;l++)c=h.insertNewItem(g[l][0],g[l][3],g[l][1]),g[l][2]&&h._setCheck(c,g[l][2]);h.XMLloadingWarning=0;h.lastLoadedXMLId=0;h._redrawFrom(h)}else h.parse("<tree id='0'>"+g+"</tree>");window[e]=h;(a=a.getAttribute("oninit"))&&eval(a);return h}
function dhx_init_trees(){for(var a=document.getElementsByTagName("div"),c=0;c<a.length;c++)"dhtmlxTree"==a[c].className&&dhtmlXTreeFromHTML(a[c])}
function dhx_li2trees(a,c,e){for(var g=0;g<a.childNodes.length;g++){var h=a.childNodes[g];if(1==h.nodeType&&"li"==h.tagName.toLowerCase()){for(var l="",m=null,n=h.getAttribute("checked"),r=0;r<h.childNodes.length;r++){var u=h.childNodes[r];3==u.nodeType?l+=u.data:"ul"!=u.tagName.toLowerCase()?l+=dhx_outer_html(u):m=u}c[c.length]=[e,l,n,h.id||c.length+1];m&&(c=dhx_li2trees(m,c,h.id||c.length))}}return c}
function dhx_outer_html(a){if(a.outerHTML)return a.outerHTML;var c=document.createElement("DIV");c.appendChild(a.cloneNode(!0));return c=c.innerHTML}window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees);
dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(a){if(this._enblkbrd=dhx4.s2b(a)){if(_isFF){var c=window.getComputedStyle(this.parentObject,null).position;"absolute"!=c&&"relative"!=c&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var e=this,c=document.createElement("INPUT");c.className="a_dhx_hidden_input";c.autocomplete="off";window._KHTMLrv&&(c.style.color="white");this.parentObject.appendChild(c);
this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(a){if(e.callEvent("onKeyPress",[(a||window.event).keyCode,a||window.event]))return e._onKeyDown(a||window.event)};this.parentObject.onclick=function(a){(_isFF||_isIE)&&c.select();(window._KHTMLrv||_isOpera)&&c.focus()}}else this.parentObject.onkeydown=null};
dhtmlXTreeObject.prototype._onKeyDown=function(a){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(var c=0;c<this._navKeys.length;c++)if(this._navKeys[c][1]==a.keyCode)return this["_onkey_"+this._navKeys[c][0]].apply(this,[this.getSelectedItemId()]),a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(a):!0};
dhtmlXTreeObject.prototype._onkey_up=function(a){if(a=this._globalIdStorageFind(a))a=this._getPrevVisibleNode(a),a.id!=this.rootId&&(this.focusItem(a.id),this.selectItem(a.id,!1))};dhtmlXTreeObject.prototype._onkey_down=function(a){if(a=this._globalIdStorageFind(a))a=this._getNextVisibleNode(a),a.id!=this.rootId&&(this.focusItem(a.id),this.selectItem(a.id,!1))};dhtmlXTreeObject.prototype._onkey_open=function(a){this.openItem(a)};dhtmlXTreeObject.prototype._onkey_close=function(a){this.closeItem(a)};
dhtmlXTreeObject.prototype._onkey_call=function(a){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(a,!0)):this.selectItem(this.getSelectedItemId(),!0)};dhtmlXTreeObject.prototype._onkey_edit=function(a){this.editItem&&this.editItem(a)};
dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,c){return!c&&0<this._getOpenState(a)?a.childNodes[0]:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:a.parentObject?this._getNextVisibleNode(a.parentObject,1):a};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastVisibleChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:a};
dhtmlXTreeObject.prototype._lastVisibleChild=function(a){return 0<this._getOpenState(a)?this._lastVisibleChild(a.childNodes[a.childsCount-1]):a};
dhtmlXTreeObject.prototype._searchItemByKey=function(a){if(8==a.keyCode)return this._textSearchString="",!0;var c=String.fromCharCode(a.keyCode).toUpperCase();return c.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=c,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1):!0};
dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a};dhtmlXTreeObject.prototype.enableKeySearch=function(a){if(this._textSearch=dhx4.s2b(a)){this._textSearchString="";var c=this;this._markItem2=this._markItem;this._markItem=function(a){c._textSearchInProgress||(c._textSearchString="");c._markItem2(a)}}};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};
function dhtmlxArray(a){return dhtmlx.extend(a||[],dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(a){for(var c=0;c<this.length;c++)if(a==this[c])return c;return-1},_dhx_insertAt:function(a,c){this[this.length]=null;for(var e=this.length-1;e>=a;e--)this[e]=this[e-1];this[a]=c},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,c){var e=this[a];this[a]=this[c];this[c]=e}};
function dhtmlXGridObject(a){dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch();if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}a?"object"==typeof a?(this.entBox=a,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(a):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid());this.entBox.innerHTML="";dhx4._eventable(this);var e=this;this._wcorr=0;this.fontWidth=7;this.row=this.cell=null;this.iconURL="";this.editor=
null;this._dclE=this._f2kE=!0;this.combos=[];this.defVal=[];this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=!0;this.xmlLoader=this.doLoadDetails;this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:
this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return!1};a=function(a){var c=document.createElement("TABLE");c.cellSpacing=c.cellPadding=
0;c.style.cssText="width:100%;table-layout:fixed;";c.className=a.substr(2);return c};this.obj=a("c_obj");this.hdr=a("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height=
"25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=[];this.sortImg=document.createElement("DIV");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];
this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20;this.imgURL=window.dhx_globalImgPath||"";this.isActive=!1;this.isEditable=!0;this.pagingOn=this.useImagesInHeader=!1;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{e.destructor&&
e.destructor()}catch(a){}});this.setSkin=function(a){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+a)+4;this.skin_name=a;this._imgURL&&this.setImagePath(this._imgURL);var c=this.entBox.className.split(" gridbox")[0];this.entBox.className=c+" gridbox gridbox_"+a+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+a,"odd_"+a,this.isTreeGrid());this._fixAlterCss();switch(a){case "dhx_terrace":this._srdh=33;this.forceDivInHeader=!0;break;case "dhx_skyblue":case "dhx_web":this.forceDivInHeader=
!0}_isIE&&this.hdr&&(a=this.hdr.parentNode,a.removeChild(this.hdr),a.appendChild(this.hdr));this.setSizes()};_isIE&&this.preventIECaching(!0);window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject);this._doOnScroll=function(a,c){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(a,c)};this.doOnScroll=function(a,c){this.hdrBox.scrollLeft=this.objBox.scrollLeft;this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft);!c&&this._srnd&&(this._dLoadTimer&&
window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){e._update_srnd_view&&e._update_srnd_view()},100))};this.attachToObject=function(a){a.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(a){this.isTreeGrid()&&!this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null});if(this._hstyles){this.skin_name||this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:
null)||window.dhx4.skinDetect("dhxgrid")||"dhx_skyblue");this.editStop();this.fldSorted=this.r_fldSorted=this.resized=this.lastClicked=null;this.cellWidthPX=[];this.cellWidthPC=[];if(0<this.hdr.rows.length){var c=this.xmlFileUrl;this.clearAll(!0);this.xmlFileUrl=c}for(var l=this.hdr.insertRow(0),c=0;c<this.hdrLabels.length;c++)l.appendChild(document.createElement("TH")),l.childNodes[c]._cellIndex=c,l.childNodes[c].style.height="0px";_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?
l.style.position="absolute":l.style.height="auto";l=this.hdr.insertRow(_isKHTML?2:1);l._childIndexes=[];for(var m=0,c=0;c<this.hdrLabels.length;c++)l._childIndexes[c]=c-m,this.hdrLabels[c]==this.splitSign&&0!=c?(_isKHTML&&l.insertCell(c-m),l.cells[c-m-1].colSpan=(l.cells[c-m-1].colSpan||1)+1,l.childNodes[c-m-1]._cellIndex++,m++,l._childIndexes[c]=c-m):(l.insertCell(c-m),l.childNodes[c-m]._cellIndex=c,l.childNodes[c-m]._cellIndexS=c,this.setColumnLabel(c,this.hdrLabels[c]));0==m&&(l._childIndexes=
null);this._cCount=this.hdrLabels.length;_isIE&&window.setTimeout(function(){e.setSizes&&e.setSizes()},1);this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));l=this.obj.firstChild;if(!l.firstChild)for(l.appendChild(document.createElement("TR")),l=l.firstChild,_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?l.style.position="absolute":l.style.height="auto",c=0;c<this.hdrLabels.length;c++)l.appendChild(document.createElement("TH")),l.childNodes[c].style.height=
"0px";this._c_order=null;1!=this.multiLine&&(this.obj.className+=" row20px");this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1;this._ivizcol&&this.setColHidden();this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();a&&this.parseXML();this.obj.scrollTop=0;this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this);this._initDrF&&
this._initD();dhx4.callEvent("onGridCreated",[this])}};this.setColumnSizes=function(a){for(var c=0,e=[],m=0,n=0;n<this._cCount;n++)if("*"!=this.initCellWidth[n]||this._hrrar[n]){if("%"==this.cellWidthType){"undefined"==typeof this.cellWidthPC[n]&&(this.cellWidthPC[n]=this.initCellWidth[n]);var r=a*this.cellWidthPC[n]/100||0;.5<m&&(r++,m--);var u=this.cellWidthPX[n]=Math.floor(r),m=m+r-u}else"undefined"==typeof this.cellWidthPX[n]&&(this.cellWidthPX[n]=this.initCellWidth[n]);this._hrrar[n]||(c+=1*
this.cellWidthPX[n])}else this._awdth=!1,e.push(n);if(e.length){m=Math.floor((a-c)/e.length);0>m&&(m=1);for(n=0;n<e.length;n++)r=Math.max(this._drsclmW?this._drsclmW[e[n]]||0:0,m),this.cellWidthPX[e[n]]=r,c+=r;a>c&&(e=e[e.length-1],this.cellWidthPX[e]+=a-c,c=a);this._setAutoResize()}this.obj.style.width=c+"px";this.hdr.style.width=c+"px";this.ftr&&(this.ftr.style.width=c+"px");this.chngCellWidth();return c};this.setSizes=function(){if(this.hdr.rows[0]){var a=this.quirks=_isIE&&"BackCompat"==document.compatMode,
c=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){var l=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var m=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(a?2*l:0)-this._fake.entBox.clientWidth)+"px";m!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=
this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(a?2*l:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*c+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);window.clearTimeout(this._sizeTime);
if(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var n=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||a?0:2,r=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||a?0:2;this._sizeFix&&(n-=this._sizeFix,r-=this._sizeFix);var l=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,m=dhtmlx.$customScroll?0:18,u=this.entBox.clientWidth-(this.skin_h_correction||0)*(a?0:1)-n,n=this.entBox.clientWidth-
(this.skin_h_correction||0)-n,v=this.entBox.clientHeight-r,w=this.setColumnSizes(n-(l?m:0)-(this._correction_x||0)),x=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,r=this.hdr.clientHeight,y=this.ftr?this.ftr.clientHeight:0,C=v-r-y;this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(x=0);this._ahgr&&(C=this._ahgrMA?this.entBox.parentNode.clientHeight-r-y:this.obj.offsetHeight+(x?m:0)+(this._correction_y||0),this._ahgrM&&(C=this._ahgrF?Math.min(this._ahgrM,
C+r+y)-r-y:Math.min(this._ahgrM,C)),l&&C>=this.obj.scrollHeight+(x?m:0)&&(l=!1,this.setColumnSizes(n-(this._correction_x||0))));this._awdth&&this._awdth[0]&&("%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(w+=this._fake.entBox.clientWidth),u=Math.min(Math.max(w+(l?m:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0),this.objBox.style.overflowX=!l&&this.objBox.scrollWidth<=u?"hidden":"auto",this._fake&&(u-=this._fake.entBox.clientWidth));C=Math.max(0,C);this._ff_size_delta=
.1==this._ff_size_delta?.2:.1;_isFF||(this._ff_size_delta=0);this.dontSetSizes||(this.entBox.style.width=Math.max(0,u+(a?2:0)*c+this._ff_size_delta)+"px",this.entBox.style.height=C+(a?2:0)*c+r+y+"px");this.objBox.style.height=C+(a&&!l?2:0)*c+"px";this.hdrBox.style.height=r+"px";C!=v&&this.doOnScroll(0,!this._srnd);(a=this["setSizes_"+this.skin_name])&&a.call(this);this.setSortImgPos();r!=this.hdr.clientHeight&&this._ahgr&&this.setSizes();this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){e.setSizes&&
e.setSizes()},250)}};this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var a=this._cCount,c=0;c<a;c++)this.hdr.rows[0].cells[c].style.width=this.cellWidthPX[c]+"px",this.obj.rows[0].childNodes[c].style.width=this.cellWidthPX[c]+"px",this.ftr&&(this.ftr.rows[0].cells[c].style.width=this.cellWidthPX[c]+"px")};this.setDelimiter=function(a){this.delim=a};this.setInitWidthsP=function(a,c){this.cellWidthType="%";this.initCellWidth=a.split(this.delim.replace(/px/gi,
""));c||this._setAutoResize()};this._setAutoResize=function(){if(!this._realfake){var a=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(a._resize_timer);a._setAutoResize&&(a._resize_timer=window.setTimeout(function(){a.setSizes&&a.setSizes();a._fake&&a._fake._correctSplit()},100))})}};this.setInitWidths=function(a){this.cellWidthType="px";this.initCellWidth=a.split(this.delim);if(_isFF)for(a=0;a<this.initCellWidth.length;a++)"*"!=this.initCellWidth[a]&&(this.initCellWidth[a]=parseInt(this.initCellWidth[a]))};
this.enableMultiline=function(a){this.multiLine=dhx4.s2b(a)};this.enableMultiselect=function(a){this.selMultiRows=dhx4.s2b(a)};this.setImagesPath=this.setImagePath=function(a){this._imgURL=a=a.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this.imgURL=a+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"};this.setIconsPath=this.setIconPath=function(a){this.iconURL=a};this.changeCursorState=function(a){var c=a.target||a.srcElement;"TD"!=c.tagName&&(c=this.getFirstParentOfType(c,
"TD"));if(c){if("TD"==c.tagName&&this._drsclmn&&!this._drsclmn[c._cellIndex])return c.style.cursor="default";var e=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:c.offsetLeft);c.offsetWidth-(a.offsetX||-1*(parseInt(this.getPosition(c,this.hdrBox))-e))<(_isOpera?20:10)?c.style.cursor="E-resize":c.style.cursor="default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}};this.startColResize=function(a){this.resized&&this.stopColResize();this.resized=null;var c=a.target||a.srcElement;"TD"!=
c.tagName&&(c=this.getFirstParentOfType(c,"TD"));var l=a.clientX,m=this.hdr.offsetWidth,n=parseInt(c.offsetWidth);"TD"!=c.tagName||"default"==c.style.cursor||this._drsclmn&&!this._drsclmn[c._cellIndex]||(e._old_d_mm=document.body.onmousemove,e._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(a){e&&e.doColResize(a||window.event,c,n,l,m)},document.body.onmouseup=function(){e&&e.stopColResize()})};this.stopColResize=function(){document.body.onmousemove=e._old_d_mm||"";document.body.onmouseup=
e._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(a,c,e,m,n){c.style.cursor="E-resize";this.resized=c;a=e+(a.clientX-m);if(this.callEvent("onResize",[c._cellIndex,a,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);e=!1;if(1<c.colSpan){m=[];for(n=0;n<c.colSpan;n++)m[n]=Math.round(a*this.hdr.rows[0].childNodes[c._cellIndexS+n].offsetWidth/c.offsetWidth);for(n=0;n<c.colSpan;n++)e=this._setColumnSizeR(c._cellIndexS+1*n,m[n])}else e=
this._setColumnSizeR(c._cellIndex,a);this.doOnScroll(0,1);this.setSizes();this._fake&&this._awdth&&this._fake._correctSplit();return e}};this._setColumnSizeR=function(a,c){if(c>(this._drsclmW&&!this._notresize?this._drsclmW[a]||10:10)){this.obj.rows[0].childNodes[a].style.width=c+"px";this.hdr.rows[0].childNodes[a].style.width=c+"px";this.ftr&&(this.ftr.rows[0].childNodes[a].style.width=c+"px");if("px"==this.cellWidthType)this.cellWidthPX[a]=c;else{var e=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>
this.objBox.offsetHeight&&(e-=17);e=Math.round(c/e*100);this.cellWidthPC[a]=e}"none"!=this.sortImg.style.display&&this.setSortImgPos()}else return!1};this.setSortImgState=function(a,c,e,m){e=(e||"asc").toLowerCase();if(dhx4.s2b(a)){this.sortImg.className="asc"==e?"dhxgrid_sort_asc":"dhxgrid_sort_desc";this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[c];var n=this.hdr.rows[m||1];if(n){for(var r=0;r<n.childNodes.length;r++)if(n.childNodes[r]._cellIndexS==c)return this.r_fldSorted=
n.childNodes[r],this.setSortImgPos();return this.setSortImgState(a,c,e,(m||1)+1)}}else this.sortImg.style.display="none",this.fldSorted=this.r_fldSorted=null};this.setSortImgPos=function(a,c,e,m){this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:a]||(m||(m=a?this.hdr.rows[e||0].cells[a]:this.r_fldSorted),null!=m&&(a=this.getPosition(m,this.hdrBox),this.sortImg.style.left=Number(a[0]+m.offsetWidth-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=
Number(a[1]+5)+"px",this.useImagesInHeader||c||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"))};this.setActive=function(a){0==arguments.length&&(a=!0);1==a?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))};this._doClick=function(a){var c=
0,e=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(e&&e.parentNode&&e.parentNode.idd){if(this.markedCells){c=0;if(a.shiftKey||a.metaKey)c=1;a.ctrlKey&&(c=2);this.doMark(e,c);return!0}0!=this.selMultiRows&&(a.shiftKey&&null!=this.row&&this.selectedRows.length&&(c=1),a.ctrlKey||a.metaKey)&&(c=2);return this.doClick(e,!0,c,!1)}};this._doContClick=function(a){var c=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(!c||"undefined"==typeof c.parentNode.idd)return this.callEvent("onEmptyClick",
[a]),!0;if(2==a.button||_isMacOS&&a.ctrlKey){if(!this.callEvent("onRightClick",[c.parentNode.idd,c._cellIndex,a]))return c=function(a){(a||event).cancelBubble=!0;return!1},(a.srcElement||a.target).oncontextmenu=c,c(a);if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[c.parentNode.idd,c._cellIndex,this]))return!0;_isIE&&(a.srcElement.oncontextmenu=function(){event.cancelBubble=!0;return!1});if(this._ctmndx.showContextMenu){var e=window.document.documentElement,m=window.document.body,m=[e.scrollLeft||
m.scrollLeft,e.scrollTop||m.scrollTop];_isIE?(e=a.clientX+m[0],m=a.clientY+m[1]):(e=a.pageX,m=a.pageY);this._ctmndx.showContextMenu(e-1,m-1);this.contextID=this._ctmndx.contextMenuZoneId=c.parentNode.idd+"_"+c._cellIndex;this._ctmndx._skip_hide=!0}else c.contextMenuId=c.parentNode.idd+"_"+c._cellIndex,c.contextMenu=this._ctmndx,c.a=this._ctmndx._contextStart,c.a(c,a),c.a=null;a.cancelBubble=!0;return!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());
return!0};this.doClick=function(a,c,l,m){this.selMultiRows||(l=0);var n=this.row?this.row.idd:0;this.setActive(!0);l||(l=0);null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""));if("TD"==a.tagName){if(this.checkEvent("onSelectStateChanged"))var r=this.getSelectedId();var u=this.row;if(1==l){var v=this.rowsCol._dhx_find(a.parentNode),w=this.rowsCol._dhx_find(this.lastClicked);if(v>w)var x=w;else x=v,v=w;for(w=0;w<this.rowsCol.length;w++)if(w>=x&&w<=v)if(this.rowsCol[w]&&
!this.rowsCol[w]._sRow)-1==this.rowsCol[w].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[w].idd,n,a._cellIndex])&&(this.rowsCol[w].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[w]);else return this.clearSelection(),this.doClick(a,c,0,m)}else if(2==l&&-1!=a.parentNode.className.indexOf("rowselected")){a.parentNode.className=a.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(a.parentNode));
var y=!0;m=!1}this.editStop();if("undefined"==typeof a.parentNode.idd)return!0;y||a.parentNode._sRow||(this.callEvent("onBeforeSelect",[a.parentNode.idd,n,a._cellIndex])?this.getSelectedRowId()!=a.parentNode.idd?(0==l&&this.clearSelection(),this.cell=a,u==a.parentNode&&this._chRRS&&(c=!1),this.row=a.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=a,this.row=a.parentNode):c=!1);this.cell&&-1!=
this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected");if(1!=l&&!this.row)return;this.lastClicked=a.parentNode;var C=this.row.idd,A=this.cell;c&&"undefined"!=typeof C&&A&&!y?e.onRowSelectTime=setTimeout(function(){e.callEvent&&e.callEvent("onRowSelect",[C,A._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[C]);this.checkEvent("onSelectStateChanged")&&(a=this.getSelectedId(),r!=a&&this.callEvent("onSelectStateChanged",
[a,r]));if(y)return!1}this.isActive=!0;!1!==m&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)};this.selectAll=function(){this.clearSelection();var a=this.rowsBuffer;this.pagingOn&&(a=this.rowsCol);for(var c=0;c<a.length;c++)this.render_row(c).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(a));this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]);this._fake&&!this._realfake&&this._fake.selectAll()};this.selectCell=function(a,c,
e,m,n,r){e||(e=!1);"object"!=typeof a&&(a=this.render_row(a));if(!a||-1==a)return null;(c=a._childIndexes?a.childNodes[a._childIndexes[c]]:a.childNodes[c])||(c=a.childNodes[0]);this.markedCells?this.doMark(c,m?2:0):m?this.doClick(c,e,3,r):this.doClick(c,e,0,r);n&&this.editCell()};this.moveToVisible=function(a,c){if(this.pagingOn){var e=Math.floor(this.getRowIndex(a.parentNode.idd)/this.rowsBufferOutSize)+1;e!=this.currentPage&&this.changePage(e)}try{if(a.offsetHeight){var m=a.offsetLeft+a.offsetWidth+
20,e=0;m>this.objBox.offsetWidth+this.objBox.scrollLeft?a.offsetLeft>this.objBox.scrollLeft&&(e=a.offsetLeft-(this.objBox.offsetWidth-a.offsetWidth)+5):a.offsetLeft<this.objBox.scrollLeft&&(m-=2*a.offsetWidth/3,m<this.objBox.scrollLeft&&(e=a.offsetLeft-5));e&&!c&&(this.objBox.scrollLeft=e)}m=a.offsetHeight?a.offsetTop:this.rowsBuffer._dhx_find(this._realfake?this._fake.rowsAr[a.parentNode.idd]:a.parentNode)*this._srdh;if(m+a.offsetHeight+38>this.objBox.offsetHeight+this.objBox.scrollTop)var n=m;else m<
this.objBox.scrollTop&&(n=m-5);n&&(this.objBox.scrollTop=n)}catch(r){}};this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){this.editStop();if(1!=this.isEditable||!this.cell)return!1;var a=this.cell;if(a.parentNode._locked)return!1;this.editor=this.cells4(a);if(null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),a.className+=" editable",
this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}};this.editStop=function(a){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor)if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),a)a=this.editor.val,this.editor.detach(),this.editor.setValue(a),this.editor=null,this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,a]);
else if(this.editor.detach()&&(this.cell.wasChanged=!0),a=this.editor,null!=a){this.editor=null;var c=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,a.getValue(),a.val]);if("string"==typeof c||"number"==typeof c)a[a.setImage?"setLabel":"setValue"](c);else if(!c)a[a.setImage?"setLabel":"setValue"](a.val);this._ahgr&&this.multiLine&&this.setSizes()}};this._nextRowCell=function(a,c,e){return(a=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(a),c))?a.childNodes[a._childIndexes?
a._childIndexes[e]:e]:null};this._getNextCell=function(a,c,e){a=a||this.cell;var m=a.parentNode;this._tabOrder?(e=this._tabOrder[a._cellIndex],"undefined"!=typeof e&&(a=0>e?this._nextRowCell(m,c,Math.abs(e)-1):m.childNodes[e])):(e=a._cellIndex+c,0<=e&&e<this._cCount?(m._childIndexes&&(e=m._childIndexes[a._cellIndex]+c),a=m.childNodes[e]):a=this._nextRowCell(m,c,1==c?0:this._cCount-1));return a?"none"==a.style.display||this.smartTabOrder&&this.cells(a.parentNode.idd,a._cellIndex).isDisabled()?this._getNextCell(a,
c):a:(1==c&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==c&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)};this._nextRow=function(a,c){var e=this.render_row(a+c);return e&&-1!=e?e&&"none"==e.style.display?this._nextRow(a+c,c):e:null};this.scrollPage=function(a){if(this.rowsBuffer.length){var c=this._realfake?this._fake:this,e=Math.floor((c._r_select||this.getRowIndex(this.row.idd)||0)+a*this.objBox.offsetHeight/(this._srdh||
20));0>e&&(e=0);e>=this.rowsBuffer.length&&(e=this.rowsBuffer.length-1);this._srnd&&!this.rowsBuffer[e]?(this.objBox.scrollTop+=Math.floor(a*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),c._r_select=e):(this.selectCell(e,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(e)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=
this.objBox.scrollTop)),c._r_select=null)}};this.doKey=function(a){if(!a)return!0;if((a.target||a.srcElement).value!==window.undefined){var c=a.target||a.srcElement;if("dhxcombo_input"!=c.className&&(!c.parentNode||-1==c.parentNode.className.indexOf("editable")))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a);if(0==this.isActive||this._htkebl)return!0;if(!this.callEvent("onKeyPress",[a.keyCode,a.ctrlKey,a.shiftKey,a]))return!1;
c="k"+a.keyCode+"_"+(a.ctrlKey?1:0)+"_"+(a.shiftKey?1:0);if(this.cell){if(this._key_events[c]){if(!1===this._key_events[c].call(this))return!0;a.preventDefault&&a.preventDefault();a.cancelBubble=!0;return!1}this._key_events.k_other&&this._key_events.k_other.call(this,a)}return!0};this.selectRow=function(a,c,e,m){"object"!=typeof a&&(a=this.render_row(a));this.selectCell(a,0,c,e,!1,m)};this.wasDblClicked=function(a){var c=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(c)return this.callEvent("onRowDblClicked",
[c.parentNode.idd,c._cellIndex,a])};this._onHeaderClick=function(a,c){var e=this.grid;c=c||e.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");if(null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[c._cellIndexS,a||window.event]))return!1;e.sortField(c._cellIndexS,!1,c)}this.grid.resized=null};this.deleteSelectedRows=function(){var a=this.selectedRows.length;if(0!=a){var c=this.selectedRows;this.selectedRows=dhtmlxArray();for(--a;0<=a;a--){var e=c[a];if(!this.deleteRow(e.idd,
e))this.selectedRows[this.selectedRows.length]=e;else if(e==this.row)var m=a}if(m)try{m+1>this.rowsCol.length&&m--,this.selectCell(m,0,!0)}catch(n){this.cell=this.row=null}}};this.getSelectedRowId=function(){for(var a=[],c={},e=0;e<this.selectedRows.length;e++){var m=this.selectedRows[e].idd;c[m]||(a[a.length]=m,c[m]=!0)}return 0==a.length?null:a.join(this.delim)};this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1};this.getColWidth=function(a){return parseInt(this.cellWidthPX[a])};
this.setColWidth=function(a,c){if("*"==c)this.initCellWidth[a]="*";else{if(this._hrrar[a])return;"px"==this.cellWidthType?this.cellWidthPX[a]=parseInt(c):this.cellWidthPC[a]=parseInt(c)}this.setSizes()};this.getRowIndex=function(a){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return c;return-1};this.getRowId=function(a){return this.rowsBuffer[a]?this.rowsBuffer[a].idd:this.undefined};this.setRowId=function(a,c){this.changeRowId(this.getRowId(a),c)};this.changeRowId=
function(a,c){if(a!=c){var e=this.rowsAr[a];e.idd=c;this.UserData[a]&&(this.UserData[c]=this.UserData[a],this.UserData[a]=null);this._h2&&this._h2.get[a]&&(this._h2.get[c]=this._h2.get[a],this._h2.get[c].id=c,delete this._h2.get[a]);this.rowsAr[a]=null;this.rowsAr[c]=e;for(var m=0;m<e.childNodes.length;m++)e.childNodes[m]._code&&(e.childNodes[m]._code=this._compileSCL(e.childNodes[m]._val,e.childNodes[m]));if(this._mat_links&&this._mat_links[a]){e=this._mat_links[a];delete this._mat_links[a];for(var n in e)for(m=
0;m<e[n].length;m++)this._compileSCL(e[n][m].original,e[n][m])}this.callEvent("onRowIdChange",[a,c])}};this.setColumnIds=function(a){this.columnIds=a.split(this.delim)};this.setColumnId=function(a,c){this.columnIds[a]=c};this.getColIndexById=function(a){for(var c=0;c<this.columnIds.length;c++)if(this.columnIds[c]==a)return c};this.getColumnId=function(a){return this.columnIds[a]};this.getColLabel=this.getColumnLabel=function(a,c,e){c=(e||this.hdr).rows[(c||0)+1];for(e=0;e<c.cells.length;e++)if(c.cells[e]._cellIndexS==
a)return _isIE?c.cells[e].innerText:c.cells[e].textContent;return""};this.getFooterLabel=function(a,c){return this.getColumnLabel(a,c,this.ftr)};this.setRowTextBold=function(a){if(a=this.getRowById(a))a.style.fontWeight="bold"};this.setRowTextStyle=function(a,c){var e=this.getRowById(a);if(e)for(var m=0;m<e.childNodes.length;m++){var n=e.childNodes[m]._attrs.style||"";this._hrrar&&this._hrrar[m]&&(n="display:none;");e.childNodes[m].style.cssText=n+"width:"+e.childNodes[m].style.width+";"+c}};this.setRowColor=
function(a,c){for(var e=this.getRowById(a),m=0;m<e.childNodes.length;m++)e.childNodes[m].bgColor=c};this.setCellTextStyle=function(a,c,e){if(a=this.getRowById(a))if(a=a.childNodes[a._childIndexes?a._childIndexes[c]:c]){var m="";this._hrrar&&this._hrrar[c]&&(m="display:none;");a.style.cssText=m+"width:"+a.style.width+";"+e}};this.setRowTextNormal=function(a){if(a=this.getRowById(a))a.style.fontWeight="normal"};this.doesRowExist=function(a){return null!=this.getRowById(a)?!0:!1};this.getColumnsNum=
function(){return this._cCount};this.moveRowUp=function(a){var c=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,-1);a=this.rowsCol._dhx_find(c);c.previousSibling&&0!=a&&(c.parentNode.insertBefore(c,c.previousSibling),this.rowsCol._dhx_swapItems(a,a-1),this.setSizes(),c=this.rowsBuffer._dhx_find(c),this.rowsBuffer._dhx_swapItems(c,c-1),this._cssEven&&this._fixAlterCss(a-1))};this.moveRowDown=function(a){var c=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,1);a=
this.rowsCol._dhx_find(c);c.nextSibling&&(this.rowsCol._dhx_swapItems(a,a+1),c.nextSibling.nextSibling?c.parentNode.insertBefore(c,c.nextSibling.nextSibling):c.parentNode.appendChild(c),this.setSizes(),c=this.rowsBuffer._dhx_find(c),this.rowsBuffer._dhx_swapItems(c,c+1),this._cssEven&&this._fixAlterCss(a))};this.getCombo=function(a){this.combos[a]||(this.combos[a]=new dhtmlXGridComboObject);return this.combos[a]};this.setUserData=function(a,c,e){a||(a="gridglobaluserdata");this.UserData[a]||(this.UserData[a]=
new Hashtable);this.UserData[a].put(c,e)};this.getUserData=function(a,c){a||(a="gridglobaluserdata");this.getRowById(a);var e=this.UserData[a];return e?e.get(c):""};this.setEditable=function(a){this.isEditable=dhx4.s2b(a)};this.selectRowById=function(a,c,e,m){m||(m=!1);this.selectCell(this.getRowById(a),0,m,c,!1,e)};this.clearSelection=function(){this.editStop();for(var a=0;a<this.selectedRows.length;a++){var c=this.rowsAr[this.selectedRows[a].idd];c&&(c.className=c.className.replace(/rowselected/g,
""))}this.selectedRows=dhtmlxArray();this.row=null;null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null);this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(a,c){var e=this.getRowById(a);if(this.isTreeGrid())this._copyTreeGridRowContent(e,a,c);else for(var m=0;m<e.cells.length;m++)this.cells(c,m).setValue(this.cells(a,m).getValue());_isIE||(this.getRowById(a).cells[0].height=e.cells[0].offsetHeight)};this.setFooterLabel=function(a,
c,e){return this.setColumnLabel(a,c,e,this.ftr)};this.setColumnLabel=function(a,c,e,m){e=(m||this.hdr).rows[e||1];a=e._childIndexes?e._childIndexes[a]:a;if(e.cells[a]){if(this.useImagesInHeader)e.cells[a].style.textAlign="left",e.cells[a].innerHTML="<img src='"+c+"'>",m=new Image,m.src=""+c.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=m,m=new Image,m.src=""+c.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=m;else{m="<div class='hdrcell'>";
if(-1!=c.indexOf("img:[")){var n=c.replace(/.*\[([^>]+)\].*/,"$1");c=c.substr(c.indexOf("]")+1,c.length);m+="<img width='18px' height='18px' align='absmiddle' src='"+n+"' hspace='2'>"}m=m+c+"</div>";e.cells[a].innerHTML=m;this._hstyles[a]&&(e.cells[a].style.cssText=this._hstyles[a])}if(-1!=(c||"").indexOf("#")&&(m=c.match(/(^|{)#([^}]+)(}|$)/))&&(n="_in_header_"+m[2],this[n]))this[n](this.forceDivInHeader?e.cells[a].firstChild:e.cells[a],a,c.split(m[0]))}};this.setColLabel=function(a,c,e,m){return this.setColumnLabel(a,
c,(e||0)+1,m)};this.clearAll=function(a){if(this.obj.rows[0]){this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2));this.limit=this._limitC=0;this.editStop(!0);this._dLoadTimer&&window.clearTimeout(this._dLoadTimer);this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);for(var c=this.rowsCol.length,c=this.obj.rows.length,c=c-1;0<c;c--){var e=this.obj.rows[c];e.parentNode.removeChild(e)}if(a){this._master_row=
null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(c=this.hdr.rows.length-1;0<=c;c--)e=this.hdr.rows[c],e.parentNode.removeChild(e);this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null);this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.cell=this.row=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=
dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd)this.xmlFileUrl="";this.pagingOn&&this.changePage(1);this._contextCallTimer&&window.clearTimeout(this._contextCallTimer);this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;this.setSortImgState(!1);this.setSizes();this.callEvent("onClearAll",[])}};this.sortField=function(a,c,e){if(0==this.getRowsNum())return!1;if((c=this.hdr.rows[0].cells[a])&&"TH"==c.tagName&&this.fldSort.length-1>=c._cellIndex&&
"na"!=this.fldSort[c._cellIndex]){var m=this.getSortingState(),m=m[0]==a&&"asc"==m[1]?"des":"asc";if(this.callEvent("onBeforeSorting",[a,this.fldSort[a],m])){this.sortImg.className="dhxgrid_sort_"+("asc"==m?"asc":"desc");if(this.useImagesInHeader){a=this.hdr.rows[1].cells[c._cellIndex].firstChild;if(null!=this.fldSorted){var n=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;n.src=n.src.replace(/(\.asc\.)|(\.des\.)/,".")}a.src=a.src.replace(/(\.[a-z]+)$/,"."+m+"$1")}this.sortRows(c._cellIndex,
this.fldSort[c._cellIndex],m);this.fldSorted=c;this.r_fldSorted=e;this.setSortImgPos(!1,!1,!1,e)}}};this.setCustomSorting=function(a,c){this._customSorts||(this._customSorts=[]);this._customSorts[c]="string"==typeof a?eval(a):a;this.fldSort[c]="cus"};this.enableHeaderImages=function(a){this.useImagesInHeader=a};this.setHeader=function(a,c,e){a="object"!=typeof a?this._eSplit(a):[].concat(a);for(var m=[],n=new dhtmlxArray(0),r=[],u=[],v=[],w=0;w<a.length;w++)m[m.length]=Math.round(100/a.length),n[n.length]=
"ed",r[r.length]="left",u[u.length]="middle",v[v.length]="na";this.splitSign=c||"#cspan";this.hdrLabels=a;this.cellWidth=m;this.initCellWidth.length||this.setInitWidthsP(m.join(this.delim),!0);this.cellType=n;this.cellAlign=r;this.cellVAlign=u;this.fldSort=v;this._hstyles=e||[]};this._eSplit=function(a){if(![].push)return a.split(this.delim);var c="r"+(new Date).valueOf(),e=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(a||"").replace(RegExp(e,"g"),c).replace(RegExp("\\\\"+c,"g"),this.delim).split(c)};
this.getColType=function(a){return this.cellType[a]};this.getColTypeById=function(a){return this.cellType[this.getColIndexById(a)]};this.setColTypes=function(a){this.cellType=dhtmlxArray(a.split(this.delim));this._strangeParams=[];for(a=0;a<this.cellType.length;a++){if(-1!=this.cellType[a].indexOf("[")){var c=this.cellType[a].split(/[\[\]]+/g);this.cellType[a]=c[0];this.defVal[a]=c[1];0==c[1].indexOf("=")&&(this.cellType[a]="math",this._strangeParams[a]=c[0])}window["eXcell_"+this.cellType[a]]||dhx4.callEvent("onConfigurationError",
["Incorrect cell type: "+this.cellType[a],this,this.cellType[a]])}};this.setColSorting=function(a){this.fldSort=a.split(this.delim);a={str:1,"int":1,date:1};for(var c=0;c<this.fldSort.length;c++)a[this.fldSort[c]]||"function"!=typeof window[this.fldSort[c]]||(this._customSorts||(this._customSorts=[]),this._customSorts[c]=window[this.fldSort[c]],this.fldSort[c]="cus")};this.setColAlign=function(a){this.cellAlign=a.split(this.delim);for(a=0;a<this.cellAlign.length;a++)this.cellAlign[a]=this.cellAlign[a]._dhx_trim()};
this.setColVAlign=function(a){this.cellVAlign=a.split(this.delim)};this.setNoHeader=function(a){this.noHeader=dhx4.s2b(a)};this.showRow=function(a){this.getRowById(a);this._h2&&this.openItem(this._h2.get[a].parent.id);for(a=this.getRowById(a).childNodes[0];a&&"none"==a.style.display;)a=a.nextSibling;a&&this.moveToVisible(a,!0)};this.setStyle=function(a,c,e,m){this.ssModifier=[a,c,e,e,m];for(a=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected",
"#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];!_isIE;)break;for(c=0;c<a.length;c++)this.ssModifier[c]&&(_isIE?document.styleSheets[0].addRule(a[c],this.ssModifier[c]):document.styleSheets[0].insertRule(a[c]+(" { "+this.ssModifier[c]+" }"),document.styleSheets[0].cssRules.length))};this.setColumnColor=function(a){this.columnColor=a.split(this.delim)};this.enableAlterCss=function(a,c,e,m){(a||c)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();
this._fake&&this._fake._fixAlterCss()});this._cssSP=e;this._cssSU=m;this._cssEven=a;this._cssUnEven=c};this._fixAlterCss=function(a){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(a);if(this._cssEven||this._cssUnEven)for(var c=a=a||0;a<this.rowsCol.length;a++)this.rowsCol[a]&&"none"!=this.rowsCol[a].style.display&&(this.rowsCol[a]._cntr?c=1:(-1!=this.rowsCol[a].className.indexOf("rowselected")?this.rowsCol[a].className=1==c%2?this._cssUnEven+" rowselected "+(this.rowsCol[a]._css||
""):this._cssEven+" rowselected "+(this.rowsCol[a]._css||""):this.rowsCol[a].className=1==c%2?this._cssUnEven+" "+(this.rowsCol[a]._css||""):this._cssEven+" "+(this.rowsCol[a]._css||""),c++))};this.clearChangedState=function(){for(var a=0;a<this.rowsCol.length;a++){var c=this.rowsCol[a];if(c&&c.childNodes)for(var e=c.childNodes.length,m=0;m<e;m++)c.childNodes[m].wasChanged=!1}};this.getChangedRows=function(a){var c=[];this.forEachRow(function(e){e=this.rowsAr[e];if("TR"==e.tagName){var m=e.childNodes.length;
if(a&&e._added)c[c.length]=e.idd;else for(var n=0;n<m;n++)if(e.childNodes[n].wasChanged){c[c.length]=e.idd;break}}});return c.join(this.delim)};this._sAll=this._sUDa=!1;this.setSerializationLevel=function(a,c,e,m,n,r){this._sUDa=a;this._sAll=c;this._sConfig=e;this._chAttr=m;this._onlChAttr=n;this._asCDATA=r};this.setSerializableColumns=function(a){if(a)for(this._srClmn=(a||"").split(","),a=0;a<this._srClmn.length;a++)this._srClmn[a]=dhx4.s2b(this._srClmn[a]);else this._srClmn=null};this._serialise=
function(a,c,e){this.editStop();var m=[],n="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(a){a=this._serializeRow(this.render_row_tree(-1,a.id));m.push(a);return a?!0:!1},this,function(){m.push(n)});else for(a=0;a<this.rowsBuffer.length;a++)!this.rowsBuffer[a]||this._chAttr&&this.rowsBuffer[a]._locator||(c=this._serializeRow(this.render_row(a)),m.push(c),c&&m.push(n));return[m.join("")]};this._serializeRow=function(a,c){var e=[],m=this.xml.row_attrs,n=this.xml.cell_attrs;
e.push("<"+this.xml.s_row);e.push(" id='"+a.idd+"'");this._sAll&&-1!=this.selectedRows._dhx_find(a)&&e.push(" selected='1'");this._h2&&"minus"==this._h2.get[a.idd].state&&e.push(" open='1'");if(m.length)for(c=0;c<m.length;c++)e.push(" "+m[c]+"='"+a._attrs[m[c]]+"'");e.push(">");if(this._sUDa&&this.UserData[a.idd])for(keysAr=this.UserData[a.idd].getKeys(),m=0;m<keysAr.length;m++)e.push("<userdata name='"+keysAr[m]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[a.idd].get(keysAr[m])+(this._asCDATA?
"]]\x3e":"")+"</userdata>");for(var m=!1,r=0;r<this._cCount;r++)if(!this._srClmn||this._srClmn[r]){var u=this.cells3(a,r);e.push("<cell");if(n.length)for(c=0;c<n.length;c++)e.push(" "+n[c]+"='"+u.cell._attrs[n[c]]+"'");zxVal=u[this._agetm]();this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]\x3e");this._ecspn&&u.cell.colSpan&&1<u.cell.colSpan&&e.push(' colspan="'+u.cell.colSpan+'" ');this._chAttr?u.wasChanged()&&(e.push(' changed="1"'),m=!0):this._onlChAttr&&u.wasChanged()&&(m=!0);this._sAll&&"tree"==this.cellType[r]?
e.push((this._h2?" image='"+this._h2.get[a.idd].image+"'":"")+">"+zxVal+"</cell>"):e.push(">"+zxVal+"</cell>");if(this._ecspn&&u.cell.colSpan)for(var v=0;v<u.cell.colSpan-1;v++)e.push("<cell/>"),r++}return!this._onlChAttr||m||a._added?e.join(""):""};this._serialiseConfig=function(){for(var a="<head>",c=0;c<this.hdr.rows[0].cells.length;c++)if(!this._srClmn||this._srClmn[c]){var e=this.fldSort[c];"cus"==e&&(e=this._customSorts[c].toString(),e=e.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));a+=
"<column width='"+this.getColWidth(c)+"' align='"+this.cellAlign[c]+"' type='"+this.cellType[c]+"' sort='"+(e||"na")+"' color='"+this.columnColor[c]+"'"+(this.columnIds[c]?" id='"+this.columnIds[c]+"'":"")+">";a=this._asCDATA?a+("<![CDATA["+this.getColumnLabel(c)+"]]\x3e"):a+this.getColumnLabel(c);if(e=this.getCombo(c))for(var m=0;m<e.keys.length;m++)a+="<option value='"+e.keys[m]+"'>"+e.values[m]+"</option>";a+="</column>"}return a+"</head>"};this.serialize=function(){var a='<?xml version="1.0"?><rows>';
this._agetm=this._mathSerialization?"getMathValue":"getValue";if(this._sUDa&&this.UserData.gridglobaluserdata)for(var c=this.UserData.gridglobaluserdata.getKeys(),e=0;e<c.length;e++)a+="<userdata name='"+c[e]+"'>"+this.UserData.gridglobaluserdata.get(c[e])+"</userdata>";this._sConfig&&(a+=this._serialiseConfig());a+=this._serialise();return a+"</rows>"};this.getPosition=function(a,c){if(!c){var e=dhx4.getOffset(a);return[e.left,e.top]}c=c||document.body;for(var e=a,m=0,n=0;e&&e!=c;)m+=e.offsetLeft-
e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;c==document.body&&(_isIE?(n+=document.body.offsetTop||document.documentElement.offsetTop,m+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(m+=document.body.offsetLeft,n+=document.body.offsetTop));return[m,n]};this.getFirstParentOfType=function(a,c){for(;a&&a.tagName!=c&&"BODY"!=a.tagName;)a=a.parentNode;return a};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.objBox.ontouchend=function(){this.hdrBox.scrollLeft=
this.objBox.scrollLeft};this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,1<Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)};if(!_isOpera||8.5<_OperaRv)this.hdr.onmousemove=function(a){this.grid.changeCursorState(a||window.event)},this.hdr.onmousedown=function(a){return this.grid.startColResize(a||window.event)};this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(a){(a||event).cancelBubble=
!0};this.obj.onclick=function(a){!1!==this.grid._doClick(a||window.event)&&(this.grid._sclE?this.grid.editCell(a||window.event):this.grid.editStop());(a||event).cancelBubble=!0};_isMacOS?this.entBox.oncontextmenu=function(a){a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;var c=this.grid;c._realfake&&(c=c._fake);return c._doContClick(a||window.event)}:(this.entBox.onmousedown=function(a){return this.grid._doContClick(a||window.event)},this.entBox.oncontextmenu=function(a){this.grid._ctmndx&&
((a||event).cancelBubble=!0);return!this.grid._ctmndx});this.obj.ondblclick=function(a){if(!this.grid.wasDblClicked(a||window.event))return!1;this.grid._dclE&&this.grid.getFirstParentOfType(_isIE?event.srcElement:a.target,"TR")==this.grid.row&&this.grid.editCell(a||window.event);(a||event).cancelBubble=!0;if(_isOpera)return!1};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){e._onHeaderClick.apply({grid:e},[null,e.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;document.body._dhtmlxgrid_onkeydown||
(dhtmlxEvent(document,"keydown",function(a){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a||window.event)}),document.body._dhtmlxgrid_onkeydown=!0);dhtmlxEvent(document.body,"click",function(){e.editStop&&e.editStop();e.isActive&&e.setActive(!1)});-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height);-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width);(this._delta_x||this._delta_y)&&this._setAutoResize();
this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=
this.enableAutoHeight;this.getUID=this.uid;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}
dhtmlXGridObject.prototype={getRowAttribute:function(a,c){return this.getRowById(a)._attrs[c]},setRowAttribute:function(a,c,e){this.getRowById(a)._attrs[c]=e},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(a,c){dhx4.s2b(c);var e=this.getRowById(a);if(e){""===e.expand&&this.collapseKids(e);if(c&&"none"!=e.style.display){e.style.display="none";var g=this.selectedRows._dhx_find(e);if(-1!=g){e.className=e.className.replace("rowselected","");for(var h=0;h<e.childNodes.length;h++)e.childNodes[h].className=
e.childNodes[h].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(g)}this.callEvent("onGridReconstructed",[])}c||"none"!=e.style.display||(e.style.display="",this.callEvent("onGridReconstructed",[]));this.callEvent("onRowHide",[a,c]);this.setSizes()}},setColumnHidden:function(a,c){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[a]=c;this.fldSorted&&this.fldSorted.cellIndex==a&&c&&(this.sortImg.style.display="none");if(dhx4.s2b(c)){if(!this._hrrar)this._hrrar=
[];else if(this._hrrar[a])return;this._hrrar[a]="display:none;";this._hideShowColumn(a,"none")}else{if(!this._hrrar||!this._hrrar[a])return;this._hrrar[a]="";this._hideShowColumn(a,"")}this.fldSorted&&this.fldSorted.cellIndex==a&&!c&&(this.sortImg.style.display="inline");this.setSortImgPos();this.callEvent("onColumnHidden",[a,c])},isColumnHidden:function(a){return this._hrrar&&this._hrrar[a]?!0:!1},setColumnsVisibility:function(a){a&&(this._ivizcol=a.split(this.delim));if(this.hdr.rows.length&&this._ivizcol)for(a=
0;a<this._ivizcol.length;a++)this.setColumnHidden(a,this._ivizcol[a])},_fixHiddenRowsAll:function(a,c,e,g,h){h=h||"_cellIndex";for(var l=a.rows.length,m=0;m<l;m++){var n=a.rows[m].childNodes;if(n.length!=this._cCount)for(var r=0;r<n.length;r++){if(n[r][h]==c){n[r].style[e]=g;break}}else n[c].style[e]=g}},_hideShowColumn:function(a,c){if("none"==c){this.hdr.rows[0].cells[a]._oldWidth=this.hdr.rows[0].cells[a].style.width||this.initCellWidth[a]+"px";this.hdr.rows[0].cells[a]._oldWidthP=this.cellWidthPC[a];
this.obj.rows[0].cells[a].style.width="0px";var e={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&e.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(e,a,"display","none");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"none");(_isOpera&&9>_OperaRv||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","none","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","none");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","nowrap",
"_cellIndexS");this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth));this.cellWidthPX[a]&&(this.cellWidthPX[a]=0);this.cellWidthPC[a]&&(this.cellWidthPC[a]=0)}else if(this.hdr.rows[0].cells[a]._oldWidth){var g=this.hdr.rows[0].cells[a];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","");e={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==
this.rowsAr[a].tagName&&e.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(e,a,"display","");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","normal","_cellIndexS");g._oldWidthP&&(this.cellWidthPC[a]=g._oldWidthP);g._oldWidth&&(this.cellWidthPX[a]=parseInt(g._oldWidth))}this.setSizes();_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(a){this._ecspn=dhx4.s2b(a)},enableRowsHover:function(a,c){this._unsetRowHover(!1,!0);this._hvrCss=
c;dhx4.s2b(a)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(a,c,e){this._sclE=dhx4.s2b(a);this._dclE=dhx4.s2b(c);this._f2kE=dhx4.s2b(e)},enableLightMouseNavigation:function(a){dhx4.s2b(a)?
this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(a){var e=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");e&&(this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(a||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,
this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(a,c){that=c?this:this.grid;if(that._lahRw&&that._lahRw!=c){for(var e=0;e<that._lahRw.childNodes.length;e++)that._lahRw.childNodes[e].className=that._lahRw.childNodes[e].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(a){var c=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(c&&c.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,c);c=c.parentNode;if(!c.idd||"__filler__"==
c.idd)return;for(var e=0;e<c.childNodes.length;e++)c.childNodes[e].className+=" "+this.grid._hvrCss;this.grid._lahRw=c}this._honmousemove(a)},_autoMoveSelect:function(a){if(!this.grid.editor){var c=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");c.parentNode.idd&&this.grid.doClick(c,!0,0)}this._onmousemove(a)},enableDistributedParsing:function(a,c,e){dhx4.s2b(a)?(this._ads_count=c||10,this._ads_time=e||250):this._ads_count=0},destructor:function(){this.editStop(!0);this._sizeTime&&
(this._sizeTime=window.clearTimeout(this._sizeTime));this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs)for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);for(var c,a=0;a<this.rowsCol.length;a++)this.rowsCol[a]&&(this.rowsCol[a].grid=null);for(a in this.rowsAr)this.rowsAr[a]&&(this.rowsAr[a]=null);this.rowsCol=new dhtmlxArray;this.rowsAr={};this.entBox.innerHTML="";a=function(){};this.setSizes=this._update_srnd_view=this.callEvent=
this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=a;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=a,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=
this.globalBox.onselectstart=a);for(c in this)this[c]&&this[c].m_obj&&(this[c].m_obj=null),this[c]=null;this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null);return null},getSortingState:function(){var a=[];this.fldSorted&&(a[0]=this.fldSorted._cellIndex,a[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc");return a},enableAutoHeight:function(a,c,e){this._ahgr=dhx4.s2b(a);this._ahgrF=dhx4.s2b(e);this._ahgrM=c||null;1==arguments.length&&(this.objBox.style.overflowY=a?"hidden":
"auto");"auto"==c&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(a){this._sst=dhx4.s2b(a);this.rowsCol.stablesort=function(a){for(var e=this.length-1,g=0;g<this.length-1;g++){for(var h=0;h<e;h++)if(0<a(this[h],this[h+1])){var l=this[h];this[h]=this[h+1];this[h+1]=l}e--}}},enableKeyboardSupport:function(a){this._htkebl=!dhx4.s2b(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){},enableTooltips:function(a){this._enbTts=
a.split(",");for(a=0;a<this._enbTts.length;a++)this._enbTts[a]=dhx4.s2b(this._enbTts[a])},enableResizing:function(a){this._drsclmn=a.split(",");for(a=0;a<this._drsclmn.length;a++)this._drsclmn[a]=dhx4.s2b(this._drsclmn[a])},setColumnMinWidth:function(a,c){2==arguments.length?(this._drsclmW||(this._drsclmW=[]),this._drsclmW[c]=a):this._drsclmW=a.split(",")},enableCellIds:function(a){this._enbCid=dhx4.s2b(a)},lockRow:function(a,c){var e=this.getRowById(a);e&&(e._locked=dhx4.s2b(c),this.cell&&this.cell.parentNode.idd==
a&&this.editStop())},_getRowArray:function(a){for(var c=[],e=0;e<a.childNodes.length;e++){var g=this.cells3(a,e);c[e]=g.getValue()}return c},setDateFormat:function(a,c){this._dtmask=a;this._dtmask_inc=c},setNumberFormat:function(a,c,e,g){var h=a.replace(/[^0\,\.]*/g,""),l=h.indexOf(".");-1<l&&(l=h.length-l-1);var m=h.indexOf(",");-1<m&&(m=h.length-l-2-m);"string"!=typeof e&&(e=this.i18n.decimal_separator);"string"!=typeof g&&(g=this.i18n.group_separator);var n=a.split(h)[0];a=a.split(h)[1];this._maskArr[c]=
[l,m,n,a,e,g]},_aplNFb:function(a,c){var e=this._maskArr[c];if(!e)return a;var g=parseFloat(a.toString().replace(/[^0-9]*/g,""));"-"==a.toString().substr(0,1)&&(g*=-1);0<e[0]&&(g/=Math.pow(10,e[0]));return g},_aplNF:function(a,c){var e=this._maskArr[c];if(!e)return a;var g=(0>parseFloat(a)?"-":"")+e[2];a=Math.abs(Math.round(parseFloat(a)*Math.pow(10,0<e[0]?e[0]:0))).toString();a=(a.length<e[0]?Math.pow(10,e[0]+1-a.length).toString().substr(1,e[0]+1)+a.toString():a).split("").reverse();a[e[0]]=(a[e[0]]||
"0")+e[4];if(0<e[1])for(var h=(0<e[0]?0:1)+e[0]+e[1];h<a.length;h+=e[1])a[h]+=e[5];return g+a.reverse().join("")+e[3]},_launchCommands:function(a){for(var c=0;c<a.length;c++){for(var e=[],g=0;g<a[c].childNodes.length;g++)1==a[c].childNodes[g].nodeType&&(e[e.length]=a[c].childNodes[g].firstChild.data);this[a[c].getAttribute("command")].apply(this,e)}},_parseHead:function(a){var c=dhx4.ajax.xpath("./head",a);if(c.length){var e=dhx4.ajax.xpath("./column",c[0]),g=dhx4.ajax.xpath("./settings",c[0]),h=
"setInitWidths",l=!1;if(g[0])for(var m=0;m<g[0].childNodes.length;m++)switch(g[0].childNodes[m].tagName){case "colwidth":g[0].childNodes[m].firstChild&&"%"==g[0].childNodes[m].firstChild.data&&(h="setInitWidthsP");break;case "splitat":l=g[0].childNodes[m].firstChild?g[0].childNodes[m].firstChild.data:!1}this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",c[0]));if(0<e.length){0<this.hdr.rows.length&&this.clearAll(!0);for(var g=[[],[],[],[],[],[],[],[],[]],n=" width type align sort color format hidden id".split(" "),
r=["",h,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],m=0;m<e.length;m++){for(h=1;h<n.length;h++)g[h].push(e[m].getAttribute(n[h]));g[0].push((e[m].firstChild?e[m].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(g[0]);for(m=0;m<r.length;m++)if(r[m])this[r[m]](g[m].join(this.delim));for(m=0;m<e.length;m++)if(0==this.cellType[m].indexOf("co")||"clist"==this.cellType[m]){if(n=dhx4.ajax.xpath("./option",e[m]),n.length)if(r=[],"clist"==this.cellType[m]){for(h=
0;h<n.length;h++)r[r.length]=n[h].firstChild?n[h].firstChild.data:"";this.registerCList(m,r)}else for(r=this.getCombo(m),h=0;h<n.length;h++)r.put(n[h].getAttribute("value"),n[h].firstChild?n[h].firstChild.data:"")}else g[6][m]&&(-1!=this.cellType[m].toLowerCase().indexOf("calendar")||"date"==this.fldSort[m]?this.setDateFormat(g[6][m]):this.setNumberFormat(g[6][m],m));this.init();e=g[7].join(this.delim);this.setColHidden&&""!=e.replace(/,/g,"")&&this.setColHidden(e);l&&this.splitAt&&this.splitAt(l)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",
c[0]))}a=dhx4.ajax.xpath("//rows/userdata",a);if(0<a.length)for(this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable),h=0;h<a.length;h++){c="";for(l=0;l<a[h].childNodes.length;l++)c+=a[h].childNodes[l].nodeValue;this.UserData.gridglobaluserdata.put(a[h].getAttribute("name"),c)}},getCheckedRows:function(a){var c=[];this.forEachRowA(function(e){var g=this.cells(e,a);g.changeState&&0!=g.getValue()&&c.push(e)},!0);return c.join(",")},checkAll:function(){for(var a=arguments.length?
arguments[0]:1,c=0;c<this.getColumnsNum();c++)"ch"==this.getColType(c)&&this.setCheckedRows(c,a)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(a,c){this.forEachRowA(function(e){this.cells(e,a).isCheckbox()&&this.cells(e,a).setValue(c)})},_drawTooltip:function(a){var c=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(!c||this.grid.editor&&this.grid.editor.cell==c)return!0;var e=c.parentNode;if(e.idd&&"__filler__"!=e.idd){var g=a?a.target:event.srcElement;if(e.idd==
window.unknown||!this.grid.callEvent("onMouseOver",[e.idd,c._cellIndex,a||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[c._cellIndex])return g.title&&(g.title=""),!0;if(!(c._cellIndex>=this.grid._cCount)&&(a=this.grid.cells3(e,c._cellIndex))&&a.cell&&a.cell._attrs)return g._title&&(a.cell.title=""),a.cell._attrs.title||(g._title=!0),a&&(g.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}},enableCellWidthCorrection:function(a){_isFF&&
(this._wcorr=parseInt(a))},getAllRowIds:function(a){for(var c=[],e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&c.push(this.rowsBuffer[e].idd);return c.join(a||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(a,c,e){if(this._ecspn){a=this.getRowById(a);if(a._childIndexes&&a.childNodes[a._childIndexes[c]]){var g=a._childIndexes[c],h=a.childNodes[g],l=h.colSpan;h.colSpan=1;if(l&&1!=l)for(var m=1;m<l;m++){var n=document.createElement("TD");h.nextSibling?a.insertBefore(n,
h.nextSibling):a.appendChild(n);a._childIndexes[c+m]=g+m;n._cellIndex=c+m;n.style.textAlign=this.cellAlign[m];n.style.verticalAlign=this.cellVAlign[m];h=n;this.cells3(a,c+m).setValue("")}for(h=1*c+1*l;h<a._childIndexes.length;h++)a._childIndexes[h]+=1*(l-1)}if(e&&1<e){if(a._childIndexes)g=a._childIndexes[c];else for(g=c,a._childIndexes=[],h=0;h<a.childNodes.length;h++)a._childIndexes[h]=h;a.childNodes[g].colSpan=e;for(h=1;h<e;h++)a._childIndexes[a.childNodes[g+1]._cellIndex]=g,a.removeChild(a.childNodes[g+
1]);for(h=1*a.childNodes[a._childIndexes[c]]._cellIndex+1*e;h<a._childIndexes.length;h++)a._childIndexes[h]-=e-1}}},preventIECaching:function(a){dhx4.ajax.cache=!a},enableColumnAutoSize:function(a){this._eCAS=dhx4.s2b(a)},_onHeaderDblClick:function(a){var c=this.grid;a=c.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");if(!c._eCAS)return!1;c.adjustColumnSize(a._cellIndexS)},adjustColumnSize:function(a,c){if(!this._hrrar||!this._hrrar[a]){this._notresize=!0;var e=0;this._setColumnSizeR(a,
20);for(var g=1;g<this.hdr.rows.length;g++){var h=this.hdr.rows[g];(h=h.childNodes[h._childIndexes?h._childIndexes[a]:a])&&(!h.colSpan||2>h.colSpan)&&h._cellIndex==a&&(h.childNodes[0]&&"hdrcell"==h.childNodes[0].className&&(h=h.childNodes[0]),e=Math.max(e,h.scrollWidth))}for(var g=this.obj.rows.length,h=0,l=this.cellType._dhx_find("tree"),m=1;m<g;m++){var n=this.obj.rows[m];!this.rowsAr[n.idd]||n._childIndexes&&n._childIndexes[a]!=a||!n.childNodes[a]||(h=(n.childNodes[a].innerText||n.childNodes[a].textContent||
"").length*this.fontWidth,this._h2&&a==l&&(h+=22*this._h2.get[n.idd].level),h>e&&(e=h))}this._setColumnSizeR(a,e+(20+(c||0)));this._notresize=!1;this.setSizes()}},detachHeader:function(a,c){c=c||this.hdr;var e=c.rows[a+1];e&&e.parentNode.removeChild(e);this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,c,e){"string"==typeof a&&(a=this._eSplit(a));"string"==typeof c&&(c=c.split(this.delim));e=e||"_aHead";if(this.hdr.rows.length)if(a)this._createHRow([a,
c],this["_aHead"==e?"hdr":"ftr"]);else{if(this[e])for(a=0;a<this[e].length;a++)this.attachHeader.apply(this,this[e][a])}else this[e]||(this[e]=[]),this[e][this[e].length]=[a,c,e]},_createHRow:function(a,c){if(!c){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var e=document.createElement("DIV");e.className="ftr";this.entBox.appendChild(e);var g=document.createElement("TABLE");g.cellPadding=g.cellSpacing=0;_isIE&&8!=_isIE||(g.width="100%",g.style.paddingRight="20px");
g.style.marginRight="20px";g.style.tableLayout="fixed";e.appendChild(g);g.appendChild(document.createElement("TBODY"));this.ftr=c=g;for(var e=g.insertRow(0),h=1>=this.hdrLabels.length?a[0].length:this.hdrLabels.length,l=0;l<h;l++)e.appendChild(document.createElement("TH")),e.childNodes[l]._cellIndex=l;_isIE&&8>_isIE?e.style.position="absolute":e.style.height="auto"}h=a[1];e=document.createElement("TR");c.rows[0].parentNode.appendChild(e);for(l=0;l<a[0].length;l++)if("#cspan"==a[0][l])g=e.cells[e.cells.length-
1],g.colSpan=(g.colSpan||1)+1;else if("#rspan"==a[0][l]&&1<c.rows.length){for(var m=c.rows.length-2,n=!1,g=null;!n;){for(var g=c.rows[m],r=0;r<g.cells.length;r++)if(g.cells[r]._cellIndex==l){n=r+1;break}m--}g=g.cells[n-1];g.rowSpan=(g.rowSpan||1)+1}else{m=document.createElement("TD");m._cellIndex=m._cellIndexS=l;this._hrrar&&this._hrrar[l]&&!_isIE&&(m.style.display="none");if("object"==typeof a[0][l])m.appendChild(a[0][l]);else if(m.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(a[0][l]||
"&nbsp;")+"</div>":a[0][l]||"&nbsp;",-1!=(a[0][l]||"").indexOf("#")&&(g=a[0][l].match(/(^|{)#([^}]+)(}|$)/)))if(n="_in_header_"+g[2],this[n])this[n](this.forceDivInHeader?m.firstChild:m,l,a[0][l].split(g[0]));h&&(m.style.cssText=h[l]);e.appendChild(m)}_isKHTML&&(c._kTimer&&window.clearTimeout(c._kTimer),c._kTimer=window.setTimeout(function(){c.rows[1].style.display="none";window.setTimeout(function(){c.rows[1].style.display=""},1)},500))},attachFooter:function(a,c){this.attachHeader(a,c,"_aFoot")},
setCellExcellType:function(a,c,e){this.changeCellType(this.getRowById(a),c,e)},changeCellType:function(a,c,e){e=e||this.cellType[c];var g=this.cells3(a,c),h=g.getValue();g.cell._cellType=e;g=this.cells3(a,c);g.setValue(h)},setRowExcellType:function(a,c){for(var e=this.rowsAr[a],g=0;g<e.childNodes.length;g++)this.changeCellType(e,g,c)},setColumnExcellType:function(a,c){for(var e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&"TR"==this.rowsBuffer[e].tagName&&this.changeCellType(this.rowsBuffer[e],
a,c);"math"==this.cellType[a]?this._strangeParams[e]=c:this.cellType[a]=c},forEachRow:function(a){for(var c in this.rowsAr)this.rowsAr[c]&&this.rowsAr[c].idd&&a.apply(this,[this.rowsAr[c].idd])},forEachRowA:function(a){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&a.call(this,this.render_row(c).idd)},forEachCell:function(a,c){var e=this.getRowById(a);if(e)for(var g=0;g<this._cCount;g++)c(this.cells3(e,g),g)},enableAutoWidth:function(a,c,e){this._awdth=[dhx4.s2b(a),parseInt(c||99999),
parseInt(e||0)];1==arguments.length&&(this.objBox.style.overflowX=a?"hidden":"auto")},updateFromXML:function(a,c,e,g){"undefined"==typeof c&&(c=!0);this._refresh_mode=[!0,c,e];this.load(a,g)},_refreshFromXML:function(a){this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});
var c=this.cellType._dhx_find("tree"),e=dhx4.ajax.xmltop("rows",a);a=e.getAttribute("parent")||0;var g={};this._refresh_mode[2]&&(-1!=c?this._h2.forEachChild(a,function(a){g[a.id]=!0},this):this.forEachRow(function(a){g[a]=!0}));c=dhx4.ajax.xpath("//row",e);for(e=0;e<c.length;e++){var h=c[e],l=h.getAttribute("id");g[l]=!1;a=h.parentNode.getAttribute("id")||a;if(this.rowsAr[l]&&"TR"!=this.rowsAr[l].tagName)this._h2?this._h2.get[l].buff.data=h:this.rowsBuffer[this.getRowIndex(l)].data=h,this.rowsAr[l]=
h;else if(this.rowsAr[l])this._process_xml_row(this.rowsAr[l],h,-1),this._postRowProcessing(this.rowsAr[l],!0),this._fake&&this._fake.rowsAr[l]&&this._fake._process_xml_row(this._fake.rowsAr[l],h,-1);else if(this._refresh_mode[1]){var m={idd:l,data:h,_parser:this._process_xml_row,_locator:this._get_xml_data},n=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(m),n=0):this.rowsBuffer.push(m);this._h2?(reset=!0,this._h2.add(l,h.parentNode.getAttribute("id")||h.parentNode.getAttribute("parent")).buff=
this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0);this.rowsAr[l]=h;h=this.render_row(n);this._insertRowAt(h,n?-1:0)}}if(this._refresh_mode[2])for(l in g)g[l]&&this.rowsAr[l]&&this.deleteRow(l);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&(this._h2?this._renderSort():this.render_dataset());this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(a,c){var e=this.cells(a,c).cell;e._combo||
(e._combo=new dhtmlXGridComboObject);return e._combo},setTabOrder:function(a){var c=a.split(this.delim);this._tabOrder=[];a=this._cCount||a.length;for(var e=0;e<a;e++)c[e]={c:parseInt(c[e]),ind:e};c.sort(function(a,c){return a.c>c.c?1:-1});for(e=0;e<a;e++)this._tabOrder[c[e].ind]=c[e+1]&&"undefined"!=typeof c[e].c?c[e+1].ind:-1*(c[0].ind+1)},i18n:{loading:"Загрузка",decimal_separator:".",group_separator:" "},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+
1],this.cell._cellIndex,!0)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},
k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!1;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?
this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(!this.editor&&this.isTreeGrid())this.collapseKids(this.row);else return!1},k39_0_0:function(){if(!this.editor&&this.isTreeGrid())this.expandKids(this.row);else return!1},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var c=Math.max(a._r_select||0,this.getRowIndex(this.row.idd)),e=this._nextRow(c,1);if(e)a._r_select=null,this.selectCell(e,
this.cell._cellIndex,!0),a.pagingOn&&a.showRow(e.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]);this.pagingOn&&this.rowsCol[c+1]&&this.selectCell(c+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var c=this.getRowIndex(this.row.idd)+1;-1==c||this.pagingOn&&1==c?this._key_events.k33_0_0.apply(this,[]):(c=this._nextRow(c-1,-1),
this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&c&&a.showRow(c.idd))}this._still_active=!0}},_build_master_row:function(){for(var a=document.createElement("DIV"),c=["<table><tr>"],e=0;e<this._cCount;e++)c.push("<td></td>");c.push("</tr></table>");a.innerHTML=c.join("");this._master_row=a.firstChild.rows[0]},_prepareRow:function(a){this._master_row||this._build_master_row();for(var c=this._master_row.cloneNode(!0),e=0;e<c.childNodes.length;e++)c.childNodes[e]._cellIndex=e,this._enbCid&&(c.childNodes[e].id=
"c_"+a+"_"+e),this.dragAndDropOff&&this.dragger.addDraggableItem(c.childNodes[e],this);c.idd=a;c.grid=this;return c},_process_jsarray_row:function(a,c){a._attrs={};for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};this._fillRow(a,this._c_order?this._swapColumns(c):c);return a},_get_jsarray_data:function(a,c){return a[c]},_process_json_row:function(a,c){c=this._c_order?this._swapColumns(c.data):c.data;return this._process_some_row(a,c)},_process_some_row:function(a,c){a._attrs={};for(var e=
0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};this._fillRow(a,c);return a},_get_json_data:function(a,c){return a.data[c]},_process_js_row:function(a,c){for(var e=[],g=0;g<this.columnIds.length;g++)e[g]=c[this.columnIds[g]],e[g]||0===e[g]||(e[g]="");this._process_some_row(a,e);a._attrs=c;return a},_get_js_data:function(a,c){return a[this.columnIds[c]]},_process_csv_row:function(a,c){a._attrs={};for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};this._fillRow(a,this._c_order?this._swapColumns(c.split(this.csv.cell)):
c.split(this.csv.cell));return a},_get_csv_data:function(a,c){return a.split(this.csv.cell)[c]},_process_store_row:function(a,c){for(var e=[],g=0;g<this.columnIds.length;g++)e[g]=c[this.columnIds[g]];for(g=0;g<a.childNodes.length;g++)a.childNodes[g]._attrs={};a._attrs=c;this._fillRow(a,e)},_process_xml_row:function(a,c){var e=dhx4.ajax.xpath(this.xml.cell,c),g=[];a._attrs=this._xml_attrs(c);if(this._ud_enabled)for(var h=dhx4.ajax.xpath("./userdata",c),l=h.length-1;0<=l;l--){for(var m="",n=0;n<h[l].childNodes.length;n++)m+=
h[l].childNodes[n].nodeValue;this.setUserData(a.idd,h[l].getAttribute("name"),m)}for(n=0;n<e.length;n++)if(h=e[this._c_order?this._c_order[n]:n])l=a._childIndexes?a._childIndexes[n]:n,m=h.getAttribute("type"),a.childNodes[l]&&(m&&(a.childNodes[l]._cellType=m),a.childNodes[l]._attrs=this._xml_attrs(h)),h.getAttribute("xmlcontent")||(h=h.firstChild?h.firstChild.data:""),g.push(h);for(n<e.length;n<a.childNodes.length;n++)a.childNodes[n]._attrs={};a.parentNode&&"row"==a.parentNode.tagName&&(a._attrs.parent=
a.parentNode.getAttribute("idd"));this._fillRow(a,g);return a},_get_xml_data:function(a,c){for(a=a.firstChild;;){if(!a)return"";"cell"==a.tagName&&c--;if(0>c)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},_fillRow:function(a,c){this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==a.idd&&this.editStop();for(var e=0;e<a.childNodes.length;e++)if(e<c.length||this.defVal[e]){var g=a.childNodes[e]._cellIndex,h=c[g],l=this.cells4(a.childNodes[e]);!this.defVal[g]||""!=h&&"undefined"!=
typeof h||(h=this.defVal[g]);l&&l.setValue(h)}else a.childNodes[e].innerHTML="&nbsp;",a.childNodes[e]._clearCell=!0;return a},_postRowProcessing:function(a,c){a._attrs["class"]&&(a._css=a.className=a._attrs["class"]);a._attrs.locked&&(a._locked=!0);a._attrs.bgColor&&(a.bgColor=a._attrs.bgColor);for(var e=0,g=0;g<a.childNodes.length;g++){var h=a.childNodes[g],l=h._cellIndex,m=h._attrs.style||a._attrs.style;m&&(h.style.cssText+=";"+m);h._attrs["class"]&&(h.className=h._attrs["class"]);if(m=h._attrs.align||
this.cellAlign[l])h.align=m;h.vAlign=h._attrs.valign||this.cellVAlign[l];if(m=h._attrs.bgColor||this.columnColor[l])h.bgColor=m;h._attrs.colspan&&!c&&(this.setColspan(a.idd,g+e,h._attrs.colspan),e+=h._attrs.colspan-1);this._hrrar&&this._hrrar[l]&&!c&&(h.style.display="none")}this.callEvent("onRowCreated",[a.idd,a,null])},load:function(a,c,e){this.callEvent("onXLS",[this]);2==arguments.length&&"function"!=typeof c&&(e=c,c=null);e=e||"xml";this.xmlFileUrl||(this.xmlFileUrl=a);this._data_type=e;this.xmlLoader=
this.doLoadDetails;var g=this;this.xmlLoader=function(a){g.callEvent&&(g["_process_"+e](a.xmlDoc),g._contextCallTimer||g.callEvent("onXLE",[g,0,0,a.xmlDoc]),c&&(c(),c=null))};dhx4.ajax.get(a,this.xmlLoader)},loadXMLString:function(a,c){this.parse({responseXML:dhx4.ajax.parse(a)},c,"xml")},loadXML:function(a,c){this.load(a,c,"xml")},parse:function(a,c,e){2==arguments.length&&"function"!=typeof c&&(e=c,c=null);this._data_type=e=e||"xml";"xml"==e&&"string"==typeof a&&(a={responseXML:dhx4.ajax.parse(a)});
this["_process_"+e](a);this._contextCallTimer||this.callEvent("onXLE",[this,0,0,a]);c&&c()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(a){var c={};if(a.attributes.length)for(var e=0;e<a.attributes.length;e++)c[a.attributes[e].name]=a.attributes[e].value;return c},_process_xml:function(a){if(this._refresh_mode)return this._refreshFromXML(a);this._parsing=!0;var c=dhx4.ajax.xmltop(this.xml.top,a);if(c.tagName==
this.xml.top){if(a=c.getAttribute("dhx_security"))dhtmlx.security_key=a;this._parseHead(c);a=dhx4.ajax.xpath(this.xml.row,c);var e=parseInt(c.getAttribute("pos")||0),g=parseInt(c.getAttribute("total_count")||0),g=Math.min(g,32E6/this._srdh),h=!1;g&&g!=this.rowsBuffer.length&&(this.rowsBuffer[g-1]||(this.rowsBuffer.length&&(h=!0),this.rowsBuffer[g-1]=null),g<this.rowsBuffer.length&&(this.rowsBuffer.splice(g,this.rowsBuffer.length-g),h=!0));if(this.isTreeGrid())return this._process_tree_xml(c);for(c=
0;c<a.length;c++)this.rowsBuffer[c+e]||(g=a[c].getAttribute("id")||c+e+1,this.rowsBuffer[c+e]={idd:g,data:a[c],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[g]=a[c]);this.callEvent("onDataReady",[]);h&&this._srnd?(a=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=a):this.render_dataset();this._parsing=!1}},_process_jsarray:function(a){this._parsing=!0;a=a.responseText||a;"string"==typeof a&&(eval("dhtmlx.temp="+a+";"),a=dhtmlx.temp);for(var c=0;c<a.length;c++){var e=
c+1;this.rowsBuffer.push({idd:e,data:a[c],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[e]=a[c]}this.render_dataset();this._parsing=!1},_process_csv:function(a){this._parsing=!0;a=a.responseText||a;a=a.replace(/\r/g,"");a=a.split(this.csv.row);if(this._csvHdr){this.clearAll();var c=a.splice(0,1)[0].split(this.csv.cell);this._csvAID||c.splice(0,1);this.setHeader(c.join(this.delim));this.init()}for(c=0;c<a.length;c++)if(a[c]||c!=a.length-1){if(this._csvAID){var e=c+
1;this.rowsBuffer.push({idd:e,data:a[c],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var g=a[c].split(this.csv.cell),e=g.splice(0,1)[0];this.rowsBuffer.push({idd:e,data:g,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[e]=a[c]}this.render_dataset();this._parsing=!1},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(a,c){this._parsing=!0;a=a.responseText||a;"string"==typeof a&&(eval("dhtmlx.temp="+a+";"),a=dhtmlx.temp);
if("js"==c){a.data&&(a=a.data);for(var e=0;e<a.length;e++){var g=a[e],h=g.id||e+1;this.rowsBuffer.push({idd:h,data:g,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[h]=a[e]}}else for(e=0;e<a.rows.length;e++)h=a.rows[e].id,this.rowsBuffer.push({idd:h,data:a.rows[e],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[h]=a.rows[e];a.dhx_security&&(dhtmlx.security_key=a.dhx_security);this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=!1},render_dataset:function(a,
c){if(this._srnd){if(this._fillers)return this._update_srnd_view();c=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(a=Math.max(a||0,(this.currentPage-1)*this.rowsBufferOutSize),c=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(a=a||0,c=c||this.rowsBuffer.length);for(var e=a;e<c;e++){var g=this.render_row(e);if(-1==g){this.xmlFileUrl&&this.callEvent("onDynXLS",[e,this._dpref?this._dpref:c-e])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+
"posStart="+e+"&count="+(this._dpref?this._dpref:c-e),this._data_type);c=e;break}if(!g.parentNode||!g.parentNode.tagName)if(this._insertRowAt(g,e),g._attrs.selected||g._attrs.select)this.selectRow(g,g._attrs.call?!0:!1,!0),g._attrs.selected=g._attrs.select=null;if(this._ads_count&&e-a==this._ads_count){var h=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){h._contextCallTimer=null;h.render_dataset(e,c);h._contextCallTimer||
(h._context_parsing?h.callEvent("onXLE",[]):h._fixAlterCss(),h.callEvent("onDistributedEnd",[]),h._context_parsing=!1)},this._ads_time)}}this._ads_count&&e==c&&this.callEvent("onDistributedEnd",[]);if(this._srnd&&!this._fillers)for(g=this.rowsBuffer.length-c,this._fillers=[],this._fake&&!this._realfake&&(this._fake._fillers=[]);0<g;){var l=_isIE||window._FFrv?Math.min(g,5E4):g,m=this._add_filler(c,l);m&&this._fillers.push(m);g-=l;c+=l}this.setSizes()},render_row:function(a){if(!this.rowsBuffer[a])return-1;
if(this.rowsBuffer[a]._parser){var c=this.rowsBuffer[a];if(this.rowsAr[c.idd]&&"TR"==this.rowsAr[c.idd].tagName)return this.rowsBuffer[a]=this.rowsAr[c.idd];var e=this._prepareRow(c.idd);this.rowsBuffer[a]=e;this.rowsAr[c.idd]=e;c._parser.call(this,e,c.data);this._postRowProcessing(e);return e}return this.rowsBuffer[a]},_get_cell_value:function(a,c,e){return a._locator?(this._c_order&&(c=this._c_order[c]),a._locator.call(this,a.data,c)):this.cells3(a,c)[e?e:"getValue"]()},sortRows:function(a,c,e){this.editStop();
e=(e||"asc").toLowerCase();c=c||this.fldSort[a];a=a||0;if(this.isTreeGrid())this.sortTreeRows(a,c,e);else{var g={},h=this.cellType[a],l="getValue";"link"==h&&(l="getContent");if("dhxCalendar"==h||"dhxCalendarA"==h)l="getDate";for(h=0;h<this.rowsBuffer.length;h++)g[this.rowsBuffer[h].idd]=this._get_cell_value(this.rowsBuffer[h],a,l);this._sortRows(a,c,e,g)}this.callEvent("onAfterSorting",[a,c,e])},_sortCore:function(a,c,e,g,h){var l="sort";this._sst&&(h.stablesort=this.rowsCol.stablesort,l="stablesort");
4<c.length&&(c=window[c]);if("cus"==c){var m=this._customSorts[a];h[l](function(a,c){return m(g[a.idd],g[c.idd],e,a.idd,c.idd)})}else if("function"==typeof c)h[l](function(a,h){return c(g[a.idd],g[h.idd],e,a.idd,h.idd)});else if("str"==c)h[l](function(a,c){return"asc"==e?g[a.idd]>g[c.idd]?1:g[a.idd]<g[c.idd]?-1:0:g[a.idd]<g[c.idd]?1:g[a.idd]>g[c.idd]?-1:0});else if("int"==c)h[l](function(a,c){var h=parseFloat(g[a.idd]),h=isNaN(h)?-99999999999999:h,l=parseFloat(g[c.idd]),l=isNaN(l)?-99999999999999:
l;return"asc"==e?h-l:l-h});else if("date"==c)h[l](function(a,c){var h=Date.parse(g[a.idd])||Date.parse("01/01/1900"),l=Date.parse(g[c.idd])||Date.parse("01/01/1900");return"asc"==e?h-l:l-h})},_sortRows:function(a,c,e,g){this._sortCore(a,c,e,g,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(a){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0);this.callEvent("onResetView",[]);var c=this.obj.rows[0].parentNode,e=c.removeChild(c.childNodes[0],
!0);if(_isKHTML)for(var g=c.parentNode.childNodes.length-1;0<=g;g--)"TR"==c.parentNode.childNodes[g].tagName&&c.parentNode.removeChild(c.parentNode.childNodes[g],!0);else if(_isIE)for(g=c.childNodes.length-1;0<=g;g--)c.childNodes[g].removeNode(!0);else c.innerHTML="";c.appendChild(e);this.rowsCol=dhtmlxArray();this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;a||this.render_dataset()}},deleteRow:function(a,c){c||(c=this.getRowById(a));if(c){this.editStop();if(!this._realfake&&0==
this.callEvent("onBeforeRowDeleted",[a]))return!1;var e=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){c.parentNode&&c.parentNode.removeChild(c);var g=this.rowsCol._dhx_find(c);-1!=g&&this.rowsCol._dhx_removeAt(g);for(var h=0;h<this.rowsBuffer.length;h++)if(this.rowsBuffer[h]&&this.rowsBuffer[h].idd==a){this.rowsBuffer._dhx_removeAt(h);g=h;break}}else e=this._h2.get[a].parent.id,this._removeTrGrRow(c);this.rowsAr[a]=null;for(h=0;h<this.selectedRows.length;h++)this.selectedRows[h].idd==
a&&this.selectedRows._dhx_removeAt(h);if(this._srnd){for(h=0;h<this._fillers.length;h++){var l=this._fillers[h];l&&(l[0]>=g?this._update_fillers(h,0,-1):l[0]+l[1]>g&&this._update_fillers(h,-1,0))}this._update_srnd_view()}this.pagingOn&&this.changePage();this._realfake||this.callEvent("onAfterRowDeleted",[a,e]);this.callEvent("onGridReconstructed",[]);this._ahgr&&this.setSizes();return!0}},_addRow:function(a,c,e){if(-1==e||"undefined"==typeof e)e=this.rowsBuffer.length;"string"==typeof c&&(c=c.split(this.delim));
a=this._prepareRow(a);a._attrs={};for(var g=0;g<a.childNodes.length;g++)a.childNodes[g]._attrs={};this.rowsAr[a.idd]=a;this._h2&&(this._h2.get[a.idd].buff=a);this._fillRow(a,c);this._postRowProcessing(a);if(this._skipInsert)return this._skipInsert=!1,this.rowsAr[a.idd]=a;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(e,a),this.rowsAr[a.idd]=a;if(this._fillers){this.rowsCol._dhx_insertAt(e,null);this.rowsBuffer._dhx_insertAt(e,a);this._fake&&this._fake.rowsCol._dhx_insertAt(e,null);this.rowsAr[a.idd]=
a;c=!1;for(g=0;g<this._fillers.length;g++){var h=this._fillers[g];if(h&&h[0]<=e&&h[0]+h[1]>=e){h[1]+=1;var l=h[2].firstChild.style.height=parseInt(h[2].firstChild.style.height)+this._srdh+"px";c=!0;this._fake&&(this._fake._fillers[g][1]++,this._fake._fillers[g][2].firstChild.style.height=l)}h&&h[0]>e&&(h[0]+=1,this._fake&&this._fake._fillers[g][0]++)}c||this._fillers.push(this._add_filler(e,1,0==e?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[e-1]));return a}this.rowsBuffer._dhx_insertAt(e,
a);return this._insertRowAt(a,e)},addRow:function(a,c,e){c=this._addRow(a,c,e);this.dragContext||this.callEvent("onRowAdded",[a]);this.pagingOn&&this.changePage(this.currentPage);this._srnd&&this._update_srnd_view();c._added=!0;this._ahgr&&this.setSizes();this.callEvent("onGridReconstructed",[]);return c},_insertRowAt:function(a,c,e){this.rowsAr[a.idd]=a;if(this._skipInsert)return this._skipInsert=!1,a;0>c||!c&&0!==parseInt(c)?c=this.rowsCol.length:c>this.rowsCol.length&&(c=this.rowsCol.length);if(this._cssEven){var g=
a.className.replace(this._cssUnEven,"");1==(this._cssSP?this.getLevel(a.idd):c)%2?a.className=g+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(a.idd):""):a.className=g+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(a.idd):"")}e||(c!=this.obj.rows.length-1&&this.rowsCol[c]?this.rowsCol[c].parentNode.insertBefore(a,this.rowsCol[c]):_isKHTML?this.obj.appendChild(a):this.obj.firstChild.appendChild(a));this.rowsCol._dhx_insertAt(c,a);this.callEvent("onRowInserted",
[a,c]);return a},getRowById:function(a){var c=this.rowsAr[a];if(c){if("TR"!=c.tagName){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==a)return this.render_row(e);if(this._h2)return this.render_row(null,c.idd)}return c}return null},cellById:function(a,c){return this.cells(a,c)},cells:function(a,c){if(0==arguments.length)return this.cells4(this.cell);var e=this.getRowById(a),g=e._childIndexes?e.childNodes[e._childIndexes[c]]:e.childNodes[c];!g&&e._childIndexes&&
(g=e.firstChild||{});return this.cells4(g)},cellByIndex:function(a,c){return this.cells2(a,c)},cells2:function(a,c){var e=this.render_row(a),g=e._childIndexes?e.childNodes[e._childIndexes[c]]:e.childNodes[c];!g&&e._childIndexes&&(g=e.firstChild||{});return this.cells4(g)},cells3:function(a,c){return this.cells4(a._childIndexes?a.childNodes[a._childIndexes[c]]:a.childNodes[c])},cells4:function(a){var c=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(c)return new c(a)},cells5:function(a,
c){c=c||a._cellType||this.cellType[a._cellIndex];this._ecache[c]||(this._ecache[c]=new (window["eXcell_"+c]?window["eXcell_"+c]:eXcell_ro)(a));this._ecache[c].cell=a;return this._ecache[c]},dma:function(a){this._ecache||(this._ecache={});a&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!a&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){this.smartTabOrder=0<arguments.length?dhx4.s2b(a):!0},setExternalTabOrder:function(a,
c){var e=this;this.tabStart="object"==typeof a?a:document.getElementById(a);var g=this.tabStart.onkeydown;this.tabStart.onkeydown=function(a){g&&g.call(this,a);a=a||window.event;if(9==a.keyCode&&!a.shiftKey)return a.cancelBubble=!0,e.selectCell(0,0,0,0,1),e.smartTabOrder&&e.cells2(0,0).isDisabled()&&e._key_events.k9_0_0.call(e),this.blur(),!1};_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown);this.tabEnd="object"==typeof c?c:document.getElementById(c);var h=this.tabEnd.onkeydown;this.tabEnd.onkeydown=
this.tabEnd.onkeypress=function(a){h&&h.call(this,a);a=a||window.event;if(9==a.keyCode&&a.shiftKey)return a.cancelBubble=!0,e.selectCell(e.getRowsNum()-1,e.getColumnCount()-1,0,0,1),e.smartTabOrder&&e.cells2(e.getRowsNum()-1,e.getColumnCount()-1).isDisabled()&&e._key_events.k9_0_1.call(e),this.blur(),!1};_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){this._ui_seed||(this._ui_seed=(new Date).valueOf());return this._ui_seed++},clearAndLoad:function(){var a=this._pgn_skin;this._pgn_skin=
null;this.clearAll();this._pgn_skin=a;this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var a=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,a,Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}};
(function(){function a(a,c){this[a]=c}function c(a,c){this[a].call(this,c)}function e(a,c){this[a].call(this,c.join(this.delim))}var g=[{name:"label",def:"&nbsp;",operation:"setHeader",type:function(a,c,e){function g(a,c,e){r[c]||(r[c]=[]);"object"==typeof e&&(e.toString=function(){return this.text});r[c][a]=e}var r=[];for(a=0;a<c.length;a++)if("object"==typeof c[a]&&c[a].length)for(e=0;e<c[a].length;e++)g(a,e,c[a][e]);else g(a,0,c[a]);for(a=0;a<r.length;a++)for(e=0;e<r[0].length;e++){c=r[a][e];r[a][e]=
(c||"").toString()||"&nbsp;";if(c&&c.colspan)for(var u=1;u<c.colspan;u++)g(e+u,a,"#cspan");if(c&&c.rowspan)for(u=1;u<c.rowspan;u++)g(e,a+u,"#rspan")}this.setHeader(r[0]);for(a=1;a<r.length;a++)this.attachHeader(r[a])}},{name:"id",def:"",operation:"columnIds",type:a},{name:"width",def:"*",operation:"setInitWidths",type:e},{name:"align",def:"left",operation:"cellAlign",type:a},{name:"valign",def:"middle",operation:"cellVAlign",type:a},{name:"sort",def:"na",operation:"fldSort",type:a},{name:"type",def:"ro",
operation:"setColTypes",type:e},{name:"options",def:"",operation:"",type:function(a,c){for(var e=0;e<c.length;e++)if("object"==typeof c[e]){var g=this.getCombo(e),r;for(r in c[e])g.put(r,c[e][r])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(a){return[a.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",
save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",
markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",
without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(a){for(var e=0;e<g.length;e++){for(var m=[],n=0;n<a.length;n++)m[n]=a[n][g[e].name]||g[e].def;(g[e].type||c).call(this,g[e].operation,m,a)}this.init()},rows:function(a){},headers:function(a){for(var c=0;c<a.length;c++)this.attachHeader(a[c])}})})();
dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,e){this.obj._h2?this.obj.addRow(e,g,null,parent):this.obj.addRow(e,[],0);var g=this.obj.getRowById(e);g&&(this.obj._process_xml_row(g,a.firstChild),this.obj._postRowProcessing(g))});a.attachEvent("updateCallback",function(a,e){var g=this.obj.getRowById(e);g&&(this.obj._process_xml_row(g,a.firstChild),this.obj._postRowProcessing(g))});a.attachEvent("deleteCallback",function(a,e){this.obj.setUserData(e,this.action_param,
"true_deleted");this.obj.deleteRow(e)});a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(c,e,g){if(a._columns&&!a._columns[g])return!0;g=this.cells(e,g);1==c?g.isCheckbox()&&a.setUpdated(e,!0):2==c&&g.wasChanged()&&a.setUpdated(e,!0);return!0});this.attachEvent("onRowPaste",function(c){a.setUpdated(c,!0)});this.attachEvent("onUndo",function(c){a.setUpdated(c,!0)});this.attachEvent("onRowIdChange",function(c,e){var g=a.findRow(c);g<
a.updatedRows.length&&(a.updatedRows[g]=e)});this.attachEvent("onSelectStateChanged",function(c){"row"==a.updateMode&&a.sendData();return!0});this.attachEvent("onEnter",function(c,e){"row"==a.updateMode&&a.sendData();return!0});this.attachEvent("onBeforeRowDeleted",function(c){if(!this.rowsAr[c])return!0;if(this.dragContext&&a.dnd)return window.setTimeout(function(){a.setUpdated(c,!0)},1),!0;var e=a.getState(c);this._h2&&this._h2.forEachChild(c,function(c){a.setUpdated(c.id,!1);a.markRow(c.id,!0,
"deleted")},this);if("inserted"==e)return a.set_invalid(c,!1),a.setUpdated(c,!1),!0;if("deleted"==e)return!1;if("true_deleted"==e)return a.setUpdated(c,!1),!0;a.setUpdated(c,!0,"deleted");return!1});this.attachEvent("onBindUpdate",function(c){"object"==typeof c&&(c=c.id);a.setUpdated(c,!0)});this.attachEvent("onRowAdded",function(c){if(this.dragContext&&a.dnd)return!0;a.setUpdated(c,!0,"inserted");return!0});a._getRowData=function(a,e){var g=[];g.gr_id=a;this.obj.isTreeGrid()&&(g.gr_pid=this.obj.getParentId(a));
for(var h=this.obj.getRowById(a),l=0;l<this.obj._cCount;l++){var m=this.obj._c_order?this.obj._c_order[l]:l,n=this.obj.cells(h.idd,l);if(!this._changed||n.wasChanged())this._endnm?g[this.obj.getColumnId(l)]=n.getValue():g["c"+m]=n.getValue()}if(h=this.obj.UserData[a])for(l=0;l<h.keys.length;l++)h.keys[l]&&0!=h.keys[l].indexOf("__")&&(g[h.keys[l]]=h.values[l]);if(h=this.obj.UserData.gridglobaluserdata)for(l=0;l<h.keys.length;l++)g[h.keys[l]]=h.values[l];return g};a._clearUpdateFlag=function(a){if(this.obj.getRowById(a))for(var e=
0;e<this.obj._cCount;e++)this.obj.cells(a,e).cell.wasChanged=!1};a.checkBeforeUpdate=function(a){for(var e=!0,g=[],h=0;h<this.obj._cCount;h++)if(this.mandatoryFields[h]){var l=this.mandatoryFields[h].call(this.obj,this.obj.cells(a,h).getValue(),a,h);"string"==typeof l?(this.messages.push(l),e=!1):(e&=l,g[h]=!l)}e||(this.set_invalid(a,"invalid",g),this.setUpdated(a,!1));return e}};
dhx4.attachEvent("onGridCreated",function(a){a._con_f_used=[].concat(a._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];var c=function(a){a=a.replace(/(\?|\&)connector[^\f]*/g,"");return a+(-1!=a.indexOf("?")?"&":"?")+"connector=true"+(0<this.hdr.rows.length?"&dhx_no_header=1":"")+(this._connector_sorting||"")+(this._connector_filter||"")},e=function(a,e,g){this._connector_sorting="&dhx_sort["+e+"]="+g;return c.call(this,a)},g=function(a,e,g){for(var n=[],r=0;r<e.length;r++)n[r]="dhx_filter["+
e[r]+"]="+encodeURIComponent(g[r]);this._connector_filter="&"+n.join("&");return c.call(this,a)};a.attachEvent("onCollectValues",function(a){return this._con_f_used[a]?"object"==typeof this._con_f_used[a]?this._con_f_used[a]:!1:!0});a.attachEvent("onDynXLS",function(){this.xmlFileUrl=c.call(this,this.xmlFileUrl);return!0});a.attachEvent("onBeforeSorting",function(a,c,g){if("connector"==c){var n=this;this.clearAndLoad(e.call(this,this.xmlFileUrl,a,g),function(){n.setSortImgState(!0,a,g)});return!1}return!0});
a.attachEvent("onFilterStart",function(a,c){var e=this.getSortingState();return this._con_f_used.length?(this.clearAndLoad(g.call(this,this.xmlFileUrl,a,c)),e.length&&this.setSortImgState(!0,e[0],e[1]),!1):!0})});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(a,c){this._con_f_used[c]||(this._con_f_used[c]=1);return this._in_header_text_filter(a,c)};
dhtmlXGridObject.prototype._in_header_connector_select_filter=function(a,c){this._con_f_used[c]||(this._con_f_used[c]=2);return this._in_header_select_filter(a,c)};dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load;
dhtmlXGridObject.prototype.load=function(a,c,e){if(!this._colls_loaded&&this.cellType){for(var g=[],h=0;h<this.cellType.length;h++)0!=this.cellType[h].indexOf("co")&&0!=this.cellType[h].indexOf("clist")&&2!=this._con_f_used[h]||g.push(h);g.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+g.join(","))}return this.load_connector.apply(this,arguments)};dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead;
dhtmlXGridObject.prototype._parseHead=function(a,c,e){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){for(var g=dhx4.ajax.xpath("./coll_options",arguments[0]),h=0;h<g.length;h++){var l=g[h].getAttribute("for"),m=[],n=null;"combo"==this.cellType[l]?n=this.getColumnCombo(l):0==this.cellType[l].indexOf("co")&&(n=this.getCombo(l));for(var r=dhx4.ajax.xpath("./item",g[h]),u=[],v=0;v<r.length;v++){var w=r[v].getAttribute("value");if(n){var x=r[v].getAttribute("label")||w;n.addOption?
u.push([w,x]):n.put(w,x);m[m.length]=x}else m[m.length]=w}u.length?n&&n.addOption(u):m.length&&!n&&this.registerCList&&this.registerCList(1*l,m);this._con_f_used[1*l]&&(this._con_f_used[1*l]=m)}this._colls_loaded=!0}};
function dhtmlXGridCellObject(a){this.destructor=function(){return this.base=this.grid=this.cell=this.cell.obj=null};this.cell=a;this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()};this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()};this.getFont=function(){arOut=Array(3);this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily);if("bold"==this.cell.style.fontWeight||
"bold"==this.cell.parentNode.style.fontWeight)arOut[1]="bold";if("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)arOut[1]+="italic";arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"";return arOut.join("-")};this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"};this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"};this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:
this.cell.style.textAlign?this.cell.style.textAlign:"left"};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(a){fntAr=a.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))};this.setTextColor=function(a){this.cell.style.color=
a};this.setBgColor=function(a){""==a&&(a=null);this.cell.style.background=a};this.setHorAlign=function(a){this.cell.style.textAlign=1==a.length?"c"==a?"center":"l"==a?"left":"right":a};this.wasChanged=function(){return this.cell.wasChanged?!0:!1};this.isCheckbox=function(){var a=this.cell.firstChild;return a&&"INPUT"==a.tagName?(type=a.type,"radio"==type||"checkbox"==type?!0:!1):!1};this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked};this.isDisabled=function(){return this.cell._disabled};
this.setChecked=function(a){this.isCheckbox()&&("true"!=a&&1!=a&&(a=!1),this.cell.firstChild.checked=a)};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);this.isCheckbox()&&(this.cell.firstChild.disabled=a,this.disabledF&&this.disabledF(a));this.cell._disabled=a}}
dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,c){this.cell._attrs[a]=c},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");a.length||(a=(this.obj||this.cell).getElementsByTagName("INPUT"));return a[0]}};
dhtmlXGridCellObject.prototype.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0);this.setCValue(a)};dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent};dhtmlXGridCellObject.prototype.setCValue=function(a,c){this.cell.innerHTML=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,1<arguments.length?c:a])};
dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(a));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a};dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()};
function eXcell(){this.val=this.obj=null;this.changeState=function(){return!1};this.edit=function(){this.val=this.getValue()};this.detach=function(){return!1};this.getPosition=function(a){for(var c=0,e=0;"BODY"!=a.tagName;)c+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return[c,e]}}eXcell.prototype=new dhtmlXGridCellObject;
function eXcell_ed(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=
function(a){(a||event).cancelBubble=!0};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0};_isIE&&(this.obj.focus(),this.obj.blur());this.obj.focus()};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);
return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)}}
eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;
eXcell_edn.prototype.setValue=function(a){if(a&&""!=a.toString()._dhx_trim())this.cell._clearCell=!1,this.cell._orig_value=a;else return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};
function eXcell_ch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(a){!0!==a||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&
window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=
this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;
eXcell_ch.prototype.setValue=function(a){this.cell.style.verticalAlign="middle";a&&(a=a.toString()._dhx_trim(),"false"==a||"0"==a)&&(a="");a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+a+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};
function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")};this.changeState=function(a){!1===a&&1==this.getValue()||!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",
[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.edit=null}eXcell_ra.prototype=new eXcell_ch;
eXcell_ra.prototype.setValue=function(a){this.cell.style.verticalAlign="middle";a&&(a=a.toString()._dhx_trim(),"false"==a||"0"==a)&&(a="");a?(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]&&(a=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]),a.setValue("0"),this.grid.rowsAr[a.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex])),this.grid._RaSeCol[this.cell._cellIndex]=this.cell,a="1",this.cell.chstate=
"1"):(a="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+a+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};
function eXcell_txt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(a){(a||event).cancelBubble=!0};var a=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);this.obj.onkeydown=function(a){a=a||event;if(9==a.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),
globalActiveDHTMLGridObject.doKey({keyCode:a.keyCode,shiftKey:a.shiftKey,srcElement:"0"}),!1};this.obj.style.left=a[0]+"px";this.obj.style.top=a[1]+"px";this.obj.style.width=(160>this.cell.offsetWidth?160:this.cell.offsetWidth)+"px";this.obj.focus()};this.detach=function(){var a="",a=this.obj.value;this.cell._clearCell=""==a;this.setValue(a);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?
"":"undefined"!=typeof this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}eXcell_txt.prototype=new eXcell;
function eXcell_txttxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){(this.cell._brval=a)&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)}}
eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){(this.cell._brval=a)&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0);!this.grid.multiLine||this.cell._clearCell?this.setCValue(a,this.cell._brval):this.setCValue(a.replace(/\n/g,"<br/>"),a)};
function eXcell_co(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0);this.shiftNext=function(){var a=this.list.options[this.list.selectedIndex+1];a&&(a.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text;return!0};this.shiftPrev=function(){if(0!=this.list.selectedIndex){var a=this.list.options[this.list.selectedIndex-1];a&&(a.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text}return!0};
this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var a=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=function(a){(a||event).cancelBubble=!0};this.obj.value=this.text;this.obj.onselectstart=function(a){a||
(a=event);return a.cancelBubble=!0};var e=this;this.obj.onkeyup=function(a){a=(a||event).keyCode;if(38!=a&&40!=a&&9!=a){a=this.readonly?String.fromCharCode(a):this.value;for(var c=e.list.options,g=0;g<c.length;g++)if(0==c[g].text.indexOf(a))return c[g].selected=!0}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=a[0]+"px";this.list.style.top=a[1]+this.cell.offsetHeight+"px";this.list.onclick=function(a){a=
a||window.event;e.editable=!1;e.grid.editStop();a.cancelBubble=!0};for(var a=this.combo.getKeys(),g=!1,h=0,l=0;l<a.length;l++){var m=this.combo.get(a[l]);this.list.options[this.list.options.length]=new Option(m,a[l]);a[l]==this.val&&(h=this.list.options.length-1,g=!0)}0==g&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),h=this.list.options.length-1);document.body.appendChild(this.list);this.list.size="6";this.cstate=1;this.editable?this.cell.innerHTML=
"":(this.obj.style.width="1px",this.obj.style.height="1px");this.cell.appendChild(this.obj);this.list.options[h].selected=!0;this.editable&&(this.obj.focus(),this.obj.focus());this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(a){a=a||window.event;e.grid.setActive(!0);if(30>a.keyCode)return e.grid.doKey({target:e.cell,keyCode:a.keyCode,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey})})};this.getValue=function(){return this.cell.combo_value==window.undefined?"":
this.cell.combo_value};this.detach=function(){this.val!=this.getValue()&&(this.cell.wasChanged=!0);if(null!=this.list.parentNode)if(this.editable){var a=this.list.options[this.list.selectedIndex];if(a&&a.text==this.obj.value)this.setValue(this.list.value);else{var a=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),e=a.values._dhx_find(this.obj.value);-1!=e?this.setValue(a.keys[e]):this.setValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);this.list.parentNode&&
this.list.parentNode.removeChild(this.list);this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};
eXcell_co.prototype.setValue=function(a){if("object"==typeof a){var c=dhx4.ajax.xpath("./option",a);c.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var e=0;e<c.length;e++)this.cell._combo.put(c[e].getAttribute("value"),c[e].firstChild?c[e].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null);this.cell.combo_value=a;null!==a?(c=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a),this.setCValue(null===c?a:c,a)):this.setCValue("&nbsp;",a)};
function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=!1}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent};
eXcell_cotxt.prototype.setValue=function(a){if("object"==typeof a){var c=dhx4.ajax.xpath("./option",a);c.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var e=0;e<c.length;e++)this.cell._combo.put(c[e].getAttribute("value"),c[e].firstChild?c[e].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null);null!==a?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a)||a,a):this.setCTxtValue(" ",a);this.cell.combo_value=a};
function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=!1}eXcell_corotxt.prototype=new eXcell_cotxt;
function eXcell_cp(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var a=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=a[0]+"px";this.obj.style.zIndex=1E3;this.obj.style.top=a[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(a){1==a.length&&(a="0"+
a);return a};this.colorPanel=function(a,c){var h=document.createElement("TABLE");c.appendChild(h);h.cellSpacing=0;h.editor_obj=this;h.style.cursor="default";h.onclick=function(a){a=a||window.event;a=a.target||a.srcElement;var c=a.parentNode.parentNode.parentNode.editor_obj;c.setValue(a._bg);c.grid.editStop()};for(var l=256/a,m=0;m<=256/l;m++)for(var n=h.insertRow(m),r=0;r<=256/l;r++)for(var u=0;u<=256/l;u++){R=new Number(l*m)-(0==m?0:1);G=new Number(l*r)-(0==r?0:1);B=new Number(l*u)-(0==u?0:1);var v=
this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16)),w=n.insertCell(r);w.width="10px";w.innerHTML="&nbsp;";w.title=v.toUpperCase();w.style.backgroundColor="#"+v;w._bg="#"+v;null!=this.val&&"#"+v.toUpperCase()==this.val.toUpperCase()&&(w.style.border="2px solid white")}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,
2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){null!=this.obj.offsetParent&&document.body.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a);this.cell.firstChild._bg=a};
function eXcell_img(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(c){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var a=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:""),a=a+("^"+this.cell.lnk);this.cell.trg&&(a+="^"+this.cell.trg);return a}};this.isDisabled=function(){return!0}}eXcell_img.prototype=new eXcell;
eXcell_img.prototype.getTitle=function(){return this.cell._brval};
eXcell_img.prototype.setValue=function(a){var c=a;if(-1!=(a||"").indexOf("^")){var e=a.split("^");a=e[0];c=this.cell._attrs.title||e[1];2<e.length&&(this.cell.lnk=e[2],e[3]&&(this.cell.trg=e[3]));this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(a||"")._dhx_trim()+"' border='0'>",a);this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>");this.cell._brval=c};
function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return 1<this.cell.childNodes.length?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(a){isNaN(parseFloat(a))&&(a=this.val||0);var c="green";0>a&&(c="red");this.setCValue("<span>$</span><span style='padding-right:2px;color:"+c+";'>"+a+"</span>",a)};
function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}eXcell_dyn.prototype=new eXcell_ed;
eXcell_dyn.prototype.setValue=function(a){a&&!isNaN(Number(a))||""===a||(a=0);if(0<a)var c="green",e="dyn_up.gif";else 0==a?(c="black",e="dyn_.gif"):(c="red",e="dyn_down.gif");this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+""+e+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+c+";'>"+a+"</span></div>",a)};
function eXcell_ro(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;
eXcell_hidden.prototype.setValue=function(a){this.cell.val=a};function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;
eXcell_ron.prototype.setValue=function(a){if(0!==a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._clearCell=!1;this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")};
function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.setValue=function(a){a?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)};this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}eXcell_rotxt.prototype=new eXcell;
function dhtmlXGridComboObject(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;this.put=function(a,c){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==a)return this.values[e]=c,!0;this.values[this.values.length]=c;this.keys[this.keys.length]=a};this.get=function(a){for(var c=0;c<this.keys.length;c++)if(this.keys[c]==a)return this.values[c];return null};this.clear=function(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray};this.remove=function(a){for(var c=0;c<this.keys.length;c++)if(this.keys[c]==
a)return this.keys._dhx_removeAt(c),this.values._dhx_removeAt(c),!0};this.size=function(){for(var a=0,c=0;c<this.keys.length;c++)null!=this.keys[c]&&a++;return a};this.getKeys=function(){for(var a=[],c=0;c<this.keys.length;c++)null!=this.keys[c]&&(a[a.length]=this.keys[c]);return a};this.save=function(){this._save=[];for(var a=0;a<this.keys.length;a++)this._save[a]=[this.keys[a],this.values[a]]};this.restore=function(){if(this._save){this.keys[a]=[];this.values[a]=[];for(var a=0;a<this._save.length;a++)this.keys[a]=
this._save[a][0],this.values[a]=this._save[a][1]}};return this}function Hashtable(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;return this}Hashtable.prototype=new dhtmlXGridComboObject;
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGrid=function(){var a=document.createElement("DIV");a.style.width="100%";a.style.height="100%";a.style.position="relative";a.style.overflow="hidden";this._attachObject(a);this.dataType="grid";this.dataObj=new dhtmlXGridObject(a);this.dataObj.setSkin(this.conf.skin);"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",
this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2);a=null;this.callEvent("_onContentAttach",[]);this.dataObj.objBox.ontouchend=function(){try{this.hdrBox.scrollLeft=this.objBox.scrollLeft}catch(a){}};return this.dataObj});
dhtmlXGridObject.prototype.enableDragAndDrop=function(a){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0;this.dragAndDropOff=dhx4.s2b(a);this._drag_validate=!0;a&&(this.objBox.ondragstart=function(a){(a||event).cancelBubble=!0;return!1})};
dhtmlXGridObject.prototype.setDragBehavior=function(a){this.dadmodec=this.dadmodefix=0;switch(a){case "child":this.dadmode=0;this._sbmod=!1;break;case "sibling":this.dadmode=1;this._sbmod=!1;break;case "sibling-next":this.dadmode=1;this._sbmod=!0;break;case "complex":this.dadmode=2;this._sbmod=!1;break;case "complex-next":this.dadmode=2,this._sbmod=!0}};dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=dhx4.s2b(a)};
dhtmlXGridObject.prototype._checkParent=function(a,c){var e=this._h2.get[a.idd].parent;if(e.parent){for(var g=0;g<c.length;g++)if(c[g]==e.id)return!0;return this._checkParent(this.rowsAr[e.id],c)}};
dhtmlXGridObject.prototype._createDragNode=function(a,c){this.editStop();if(window.dhtmlDragAndDrop.dragNode||!this.dADTempOff)return null;a.parentObject={};a.parentObject.treeNod=this;var e=this.callEvent("onBeforeDrag",[a.parentNode.idd,a._cellIndex,c]);if(!e)return null;for(var g=[],g=(g=this.getSelectedId())&&""!=g?g.split(this.delim):[],h=!1,l=0;l<g.length;l++)g[l]==a.parentNode.idd&&(h=!0);h||(this.selectRow(this.rowsAr[a.parentNode.idd],!1,c.ctrlKey,!1),c.ctrlKey||(g=[]),g[this.selMultiRows?
g.length:0]=a.parentNode.idd);if(this.isTreeGrid())for(l=g.length-1;0<=l;l--)this._checkParent(this.rowsAr[g[l]],g)&&g.splice(l,1);var m=this;g.length&&this._dndorder&&g.sort(function(a,c){return m.rowsAr[a].rowIndex>m.rowsAr[c].rowIndex?1:-1});if(h=this.getFirstParentOfType(_isIE?c.srcElement:c.target,"TD"))this._dndExtra=h._cellIndex;this._dragged=[];for(l=0;l<g.length;l++)this.rowsAr[g[l]]&&(this._dragged[this._dragged.length]=this.rowsAr[g[l]],this.rowsAr[g[l]].treeNod=this);a.parentObject.parentNode=
a.parentNode;g=document.createElement("div");g.innerHTML=!0!==e?e:this.rowToDragElement(a.parentNode.idd);g.style.position="absolute";g.className="dragSpanDiv";return g};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};
function dragContext(a,c,e,g,h,l,m,n,r,u){this.source=a||"grid";this.target=c||"grid";this.mode=e||"move";this.dropmode=g||"child";this.sid=h||0;this.tid=l;this.sobj=m||null;this.tobj=n||null;this.sExtra=r||null;this.tExtra=u||null;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var a=this.tid;a=this.tobj.getParentId(a);)if(this.sid==a)return!1;return!0};
dragContext.prototype.close=function(){this.tobj=this.sobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)};dragContext.prototype.set=function(a,c){this[a]=c;return this};dragContext.prototype.uid=function(a,c){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid+=(new Date).valueOf();return this};
dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)};dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs};dragContext.prototype.childs=function(){return"treeGrid"==this.source?this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null:null};
dragContext.prototype.pid=function(){if(!this.tid||!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var a=this.tobj.rowsAr[this.tid],c=this.tobj._h2.get[a.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&a.nextSibling){a=this.tobj._h2.get[a.nextSibling.idd].parent.id;if(a==this.tid)return this.tid;if(a!=c)return a}return c}};
dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var a=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var c=this.tobj.rowsAr[this.tid];if(c.nextSibling&&this._h2.get[c.nextSibling.idd].parent.id==this.tid)return a+1}return a+1+("treeGrid"==this.target&&
0<=a&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd,0):0)};dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null};dragContext.prototype.slist=function(){for(var a=[],c=0;c<this.sid.length;c++)a[a.length]=this.sid[c]["tree"==this.source?"id":"idd"];return a.join(",")};
dhtmlXGridObject.prototype._drag=function(a,c,e,g){if(this._realfake)return this._fake._drag();this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);c=e.parentNode;e=a.parentObject;c.idd||(c.grid=this,this.dadmodefix=0);a=new dragContext(0,0,0,1==c.grid.dadmode||c.grid.dadmodec?"sibling":"child");if(e&&e.childNodes)a.set("source","tree").set("sobj",e.treeNod).set("sid",a.sobj._dragged);else{if(!e)return!0;e.treeNod.isTreeGrid&&e.treeNod.isTreeGrid()&&a.set("source","treeGrid");a.set("sobj",
e.treeNod).set("sid",a.sobj._dragged)}c.grid.isTreeGrid()?a.set("target","treeGrid"):a.set("dropmode","sibling");a.set("tobj",c.grid).set("tid",c.idd);2==a.tobj.dadmode&&1==a.tobj.dadmodec&&0>a.tobj.dadmodefix&&(a.tid=a.tobj.obj.rows[1].idd!=a.tid?c.previousSibling.idd:0);(g=this.getFirstParentOfType(g,"TD"))&&a.set("tExtra",g._cellIndex);g&&a.set("sExtra",a.sobj._dndExtra);a.sobj.dpcpy&&a.set("mode","copy");a.tobj._realfake&&(a.tobj=a.tobj._fake);a.sobj._realfake&&(a.sobj=a.sobj._fake);a.tobj._clearMove();
if(e&&e.treeNod&&e.treeNod._nonTrivialRow)e.treeNod._nonTrivialRow(this,a.tid,a.dropmode,e);else{a.tobj.dragContext=a;if(!a.tobj.callEvent("onDrag",[a.slist(),a.tid,a.sobj,a.tobj,a.sExtra,a.tExtra]))return a.tobj.dragContext=null;g=[];if("object"==typeof a.sid){c=a.copy();for(e=0;e<a.sid.length;e++)c.set("alfa",!e).set("sid",a.sid[e]["tree"==a.source?"id":"idd"]).valid()&&(c.tobj._dragRoutine(c),"treeGrid"==c.target&&"child"==c.dropmode&&c.tobj.openItem(c.tid),g[g.length]=c.nid,c.set("dropmode","sibling").set("tid",
c.nid));c.close()}else a.tobj._dragRoutine(a);a.tobj.laterLink&&a.tobj.laterLink();a.tobj.callEvent("onDrop",[a.slist(),a.tid,g.join(","),a.sobj,a.tobj,a.sExtra,a.tExtra])}a.tobj.dragContext=null;a.close()};
dhtmlXGridObject.prototype._dragRoutine=function(a){if(a.sobj!=a.tobj||"grid"!=a.source||"move"!=a.mode||this._fake){var c;this._h2&&"undefined"!=typeof a.tid&&"sibling"==a.dropmode&&(this._sbmod||a.tid)?a.alfa&&this._sbmod&&this._h2.get[a.tid].childs.length?(this.openItem(a.tid),c=a.uid().tobj.addRowBefore(a.nid,a.data(),this._h2.get[a.tid].childs[0].id,a.img(),a.childs())):c=a.uid().tobj.addRowAfter(a.nid,a.data(),a.tid,a.img(),a.childs()):c=a.uid().tobj.addRow(a.nid,a.data(),a.ind(),a.pid(),a.img(),
a.childs());c._attrs=a.attrs();if("tree"==a.source){this.callEvent("onRowAdded",[a.nid]);var e=a.sobj._globalIdStorageFind(a.sid);if(e.childsCount){c=a.copy().set("tid",a.nid).set("dropmode","grid"==a.target?"sibling":"child");for(var g=0;g<e.childsCount;g++)a.tobj._dragRoutine(c.set("sid",e.childNodes[g].id)),"move"==a.mode&&g--;c.close()}}else if(a.tobj._copyUserData(a),this.callEvent("onRowAdded",[a.nid]),"treeGrid"==a.source&&(a.sobj==a.tobj&&(c._xml=a.sobj.rowsAr[a.sid]._xml),(e=a.sobj._h2.get[a.sid])&&
e.childs.length)){c=a.copy().set("tid",a.nid);"grid"==a.target?c.set("dropmode","sibling"):(c.tobj.kidsXmlFile||c.tobj.openItem(a.tid),c.set("dropmode","child"));var h=e.childs.length;if(!c.tobj.kidsXmlFile)for(g=0;g<h;g++)a.sobj.render_row_tree(null,e.childs[g].id),a.tobj._dragRoutine(c.set("sid",e.childs[g].id)),h!=e.childs.length&&(g--,h=e.childs.length);c.close()}"move"==a.mode&&(a.sobj["tree"==a.source?"deleteItem":"deleteRow"](a.sid),a.sobj!=a.tobj||a.tobj.rowsAr[a.sid]||(a.tobj.changeRowId(a.nid,
a.sid),a.nid=a.sid))}else a.sobj._dndProblematic||(c=a.sobj.rowsAr[a.sid],g=a.sobj.rowsCol._dhx_find(c),a.sobj.rowsCol._dhx_removeAt(a.sobj.rowsCol._dhx_find(c)),a.sobj.rowsBuffer._dhx_removeAt(a.sobj.rowsBuffer._dhx_find(c)),a.sobj.rowsBuffer._dhx_insertAt(a.ind(),c),a.tobj._fake&&(a.tobj._fake.rowsCol._dhx_removeAt(g),g=a.tobj._fake.rowsAr[a.sid],g.parentNode.removeChild(g)),a.sobj._insertRowAt(c,a.ind()),a.nid=a.sid,a.sobj.callEvent("onGridReconstructed",[]))};
dhtmlXGridObject.prototype.gridToGrid=function(a,c,e){e=[];for(var g=0;g<c.hdr.rows[0].cells.length;g++)e[g]=c.cells(a,g).getValue();return e};dhtmlXGridObject.prototype.checkParentLine=function(a,c){return this._h2&&c&&a?a.id==c?!0:this.checkParentLine(a.parent,c):!1};
dhtmlXGridObject.prototype._dragIn=function(a,c,e,g){if(!this.dADTempOff)return 0;var h=this.isTreeGrid(),l=c.parentNode.idd?c.parentNode:c.parentObject;if(this._drag_validate&&(a.parentNode==c.parentNode||h&&this==l.grid&&this.checkParentLine(this._h2.get[a.parentNode.idd],c.parentNode.idd)))return 0;if(!this.callEvent("onDragIn",[l.idd||l.id,a.parentNode.idd,l.grid||l.treeNod,a.grid||a.parentNode.grid]))return this._setMove(a,e,g,!0);this._setMove(a,e,g);if(h&&""!=a.parentNode.expand){var m=this;
this._autoOpenTimer=window.setTimeout(function(){m._autoOpenItem(null,m);m=null},1E3);this._autoOpenId=a.parentNode.idd}else this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return a};dhtmlXGridObject.prototype._autoOpenItem=function(a,c){c.openItem(c._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(a){this._clearMove();this.callEvent("onDragOut",[a.parentNode.parentObject?a.parentObject.id:a.parentNode.idd]);this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)};
dhtmlXGridObject.prototype._setMove=function(a,c,e,g){if(a.parentNode.idd){c=dhx4.absTop(a);var h=dhx4.absTop(this.objBox);c-h>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20);c-h+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20);if(g)return 0;2==this.dadmode?(e=e-c+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2,0<Math.abs(e)-a.offsetHeight/
6?(this.dadmodec=1,this.dadmodefix=0>e?-1:1):this.dadmodec=0):this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=c-h+parseInt(this.objBox.scrollTop)+(0<=this.dadmodefix?a.offsetHeight:0)+"px";else if(this._llSelD=a,"TR"==a.parentNode.tagName)for(g=0;g<a.parentNode.childNodes.length;g++)e=a.parentNode.childNodes[g],e._bgCol=e.style.backgroundColor,e.style.backgroundColor="#FFCCCC"}};
dhtmlXGridObject.prototype._clearMove=function(){this._sdrgc&&(this._sdrgc.style.display="none");if(this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var a=this._llSelD.parentNode.childNodes,c=0;c<a.length;c++)a[c].style.backgroundColor=a[c]._bgCol;this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(a){return this.cells(a,0).getValue()};
dhtmlXGridObject.prototype._copyUserData=function(a){if(!a.tobj.UserData[a.nid]||a.tobj!=a.sobj){a.tobj.UserData[a.nid]=new Hashtable;var c=a.sobj.UserData[a.sid];a=a.tobj.UserData[a.nid];c&&(a.keys=a.keys.concat(c.keys),a.values=a.values.concat(c.values))}};dhtmlXGridObject.prototype.moveRow=function(a,c,e,g){switch(c){case "row_sibling":this.moveRowTo(a,e,"move","sibling",this,g);break;case "up":this.moveRowUp(a);break;case "down":this.moveRowDown(a)}};
dhtmlXGridObject.prototype._nonTrivialNode=function(a,c,e,g,h){if(a.callEvent&&!h&&!a.callEvent("onDrag",[g.idd,c.id,e?e.id:null,this,a]))return!1;for(var l=g=g.idd;a._idpull[l];)l+=(new Date).getMilliseconds().toString();var m=this.isTreeGrid()?this.getItemImage(g):"";if(e){for(r=0;r<c.childsCount&&c.childNodes[r]!=e;r++);0!=r?e=c.childNodes[r-1]:(st="TOP",e="")}m=a._attachChildNode(c,l,this.gridToTreeElement(a,l,g),"",m,m,m,"","",e);if(this._h2){var n=this._h2.get[g];if(n.childs.length)for(var r=
0;r<n.childs.length;r++)this._nonTrivialNode(a,m,0,this.rowsAr[n.childs[r].id],1),this.dpcpy||r--}this.dpcpy||this.deleteRow(g);a.callEvent&&!h&&a.callEvent("onDrop",[l,c.id,e?e.id:null,this,a])};dhtmlXGridObject.prototype.gridToTreeElement=function(a,c,e){return this.cells(e,0).getValue()};
dhtmlXGridObject.prototype.treeToGridElement=function(a,c,e){e=[];var g=this.cellType._dhx_find("tree");-1==g&&(g=0);for(var h=0;h<this.getColumnCount();h++)e[e.length]=h!=g?a.getUserData(c,this.getColumnId(h))||"":a.getItemText(c);return e};dhtmlXGridObject.prototype.moveRowTo=function(a,c,e,g,h,l){a=new dragContext((h||this).isTreeGrid()?"treeGrid":"grid",(l||this).isTreeGrid()?"treeGrid":"grid",e,g||"sibling",a,c,h||this,l||this);a.tobj._dragRoutine(a);a.close();return a.nid};
dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};
dhtmlXGridObject.prototype.toPDF=function(a,c,e,g,h,l){function m(a,c){return(window.getComputedStyle?window.getComputedStyle(a,null)[c]:a.currentStyle?a.currentStyle[c]:null)||""}function n(a){if(!x.rowsBuffer[a])return"";a=x.render_row(a);if("none"==a.style.display)return"";for(var c="<row"+(x.isTreeGrid()?' level="'+x.getLevel(a.idd)+'"':"")+">",e=0;e<x._cCount;e++)if((!x._srClmn||x._srClmn[e])&&(!x._hrrar[e]||x._fake&&e<x._fake.hdrLabels.length)){var g=x.cells(a.idd,e);if(w){var h=m(g.cell,"color"),
l=m(g.cell,"backgroundColor"),n=m(g.cell,"font-weight")||m(g.cell,"fontWeight"),r=m(g.cell,"font-style")||m(g.cell,"fontStyle"),u=m(g.cell,"text-align")||m(g.cell,"textAlign"),v=m(g.cell,"font-family")||m(g.cell,"fontFamily");if("transparent"==l||"rgba(0, 0, 0, 0)"==l)l="rgb(255,255,255)";c+="<cell bgColor='"+l+"' textColor='"+h+"' bold='"+n+"' italic='"+r+"' align='"+u+"' font='"+v+"'>"}else c+="<cell>";c+="<![CDATA["+(g.getContent?g.getContent():g.getTitle())+"]]\x3e</cell>"}return c+"</row>"}var r=
{row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(null===r.row||-1===r.col)r=!1;else if(r.row)for(var u=0;u<r.row.length;u++){if(r.row[u]){var v=this.cells(r.row[u],r.col).cell;v.parentNode.className=v.parentNode.className.replace(" rowselected","");v.className=v.className.replace(" cellselected","");r.row[u]=v}}else r=!1;c=c||"color";var w="full_color"==c,x=this;x._asCDATA=!0;this.target="undefined"===typeof l?' target="_blank"':l;eXcell_ch.prototype.getContent=
function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};l=document.createElement("div");l.style.display="none";document.body.appendChild(l);u="form_"+x.uid();l.innerHTML='<form id="'+u+'" method="post" action="'+a+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>';document.getElementById(u).firstChild.value=encodeURIComponent(function(a){for(var c=[],h=1;h<
x.hdr.rows.length;h++){c[h]=[];for(var l=0;l<x._cCount;l++){var m=x.hdr.rows[h].childNodes[l];c[h][l]||(c[h][l]=[0,0]);m&&(c[h][m._cellIndexS]=[m.colSpan,m.rowSpan])}}a="<rows profile='"+a+"'";e&&(a+=" header='"+e+"'");g&&(a+=" footer='"+g+"'");a+="><head>"+x._serialiseExportConfig(c).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(h=2;h<x.hdr.rows.length;h++){for(var m=0,n=x.hdr.rows[h],r="",l=0;l<x._cCount;l++)if(x._srClmn&&!x._srClmn[l]||x._hrrar[l]&&(!x._fake||l>=x._fake.hdrLabels.length))m++;
else{var u=c[h][l],w=u[0]&&1<u[0]?' colspan="'+u[0]+'" ':"";u[1]&&1<u[1]&&(w+=' rowspan="'+u[1]+'" ',m=-1);var u="",v=n;x._fake&&l<x._fake._cCount&&(v=x._fake.hdr.rows[h]);for(var I=0;I<v.cells.length;I++)if(v.cells[I]._cellIndexS==l){u=v.cells[I].getElementsByTagName("SELECT").length?"":_isIE?v.cells[I].innerText:v.cells[I].textContent;u=u.replace(/[ \n\r\t\xA0]+/," ");break}u&&" "!=u||m++;r+="<column"+w+"><![CDATA["+u+"]]\x3e</column>"}m!=x._cCount&&(a+="\n<columns>"+r+"</columns>")}var c=a+"</head>\n",
M;h=["<foot>"];if(x.ftr){for(l=1;l<x.ftr.rows.length;l++){h.push("<columns>");a=x.ftr.rows[l];for(m=0;m<x._cCount;m++)if(!x._srClmn||x._srClmn[m])if(!x._hrrar[m]||x._fake&&!(m>=x._fake.hdrLabels.length)){for(n=0;n<a.cells.length;n++){var N=M="";if(a.cells[n]._cellIndexS==m){M=_isIE?a.cells[n].innerText:a.cells[n].textContent;M=M.replace(/[ \n\r\t\xA0]+/," ");a.cells[n].colSpan&&1!=a.cells[n].colSpan&&(N=" colspan='"+a.cells[n].colSpan+"' ");a.cells[n].rowSpan&&1!=a.cells[n].rowSpan&&(N=" rowspan='"+
a.cells[n].rowSpan+"' ");break}}h.push("<column"+N+"><![CDATA["+M+"]]\x3e</column>")}h.push("</columns>")}h.push("</foot>");M=h.join("\n")}else M="";return c+M}(c).replace("–","-")+function(){var a=[];if(h)for(var c=0;c<h.length;c++)a.push(n(x.getRowIndex(h[c])));else for(c=0;c<x.getRowsNum();c++)a.push(n(c));return a.join("\n")}()+"</rows>");document.getElementById(u).submit();l.parentNode.removeChild(l);x=null;if(r&&r.row.length)for(u=0;u<r.row.length;u++)r.row[u].parentNode.className+=" rowselected",
1==r.row.length&&(r.row[u].className+=" cellselected");r=null};
dhtmlXGridObject.prototype._serialiseExportConfig=function(a){for(var c="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if(!this._srClmn||this._srClmn[e])if(!this._hrrar[e]||this._fake&&!(e>=this._fake.hdrLabels.length)){var g=this.fldSort[e];"cus"==g&&(g=this._customSorts[e].toString(),g=g.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var h=a[1][e],c=c+("<column "+((h[1]&&1<h[1]?' rowspan="'+h[1]+'" ':"")+(h[0]&&1<h[0]?' colspan="'+h[0]+'" ':""))+" width='"+this.getColWidth(e)+"' align='"+
this.cellAlign[e]+"' type='"+this.cellType[e]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(e)?"true":"false")+"' sort='"+(g||"na")+"' color='"+(this.columnColor[e]||"")+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">"),c=this._asCDATA?c+("<![CDATA["+this.getColumnLabel(e)+"]]\x3e"):c+this.getColumnLabel(e);if(g=this.combos[e]?this.getCombo(e):null)for(h=0;h<g.keys.length;h++){var l;l=g.keys[h];"string"===typeof l&&(l=l.replace(/&/g,"&amp;"),l=l.replace(/"/g,"&quot;"),l=l.replace(/'/g,
"&apos;"),l=l.replace(/</g,"&lt;"),l=l.replace(/>/g,"&gt;"));c+="<option value='"+l+"'><![CDATA["+g.values[h]+"]]\x3e</option>"}c+="</column>"}return c+"</head>"};window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""});
dhtmlXGridObject.prototype.toExcel=function(a,c,e,g,h){if(!document.getElementById("ifr")){var l=document.createElement("iframe");l.style.display="none";l.setAttribute("name","dhx_export_iframe");l.setAttribute("src","");l.setAttribute("id","dhx_export_iframe");document.body.appendChild(l)}this.toPDF(a,c,e,g,h,' target="dhx_export_iframe"')};
dhtmlXGridObject.prototype.filterBy=function(a,c,e){if(this.isTreeGrid())return this.filterTreeBy(a,c,e);this._f_rowsBuffer?e||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer);if(this.rowsBuffer.length){this.dma(!0);if("object"==typeof a)for(e=0;e<c.length;e++)this._filterA(a[e],c[e]);else this._filterA(a,c);this.dma(!1);this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-
1&&this.changePage(0);this._reset_view();this.callEvent("onGridReconstructed",[])}};dhtmlXGridObject.prototype._filterA=function(a,c){if(""!=c){var e=!0;"function"==typeof c?e=!1:c=(c||"").toString().toLowerCase();if(this.rowsBuffer.length)for(var g=this.rowsBuffer.length-1;0<=g;g--)(e?-1!=this._get_cell_value(this.rowsBuffer[g],a).toString().toLowerCase().indexOf(c):c.call(this,this._get_cell_value(this.rowsBuffer[g],a),this.rowsBuffer[g].idd))||this.rowsBuffer.splice(g,1)}};
dhtmlXGridObject.prototype.getFilterElement=function(a){if(this.filters){for(var c=0;c<this.filters.length;c++)if(this.filters[c][1]==a)return this.filters[c][0].combo||this.filters[c][0];return null}};
dhtmlXGridObject.prototype.collectValues=function(a){var c=this.dhxevs.data.oncollectvalues;if(c){var e=!0,g;for(g in c){var h=c[g].call(this,a);!0!==h&&(e=h||e)}if(!0!==e)return e}if(this.isTreeGrid())return this.collectTreeValues(a);this.dma(!0);this._build_m_order();a=this._m_order?this._m_order[a]:a;c={};e=[];g=this._f_rowsBuffer||this.rowsBuffer;for(h=0;h<g.length;h++){var l=this._get_cell_value(g[h],a);!l||g[h]._childIndexes&&g[h]._childIndexes[a]==g[h]._childIndexes[a-1]||(c[l]=!0)}this.dma(!1);
a=this.combos[a]||(this._col_combos?this._col_combos[a]:!1);for(var m in c)!0===c[m]&&(a&&(a.get&&a.get(m)?m=a.get(m):a.getOption&&a.getOption(m)&&(m=a.getOption(m).text)),e.push(m));return e.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}};
dhtmlXGridObject.prototype.filterByAll=function(){var a=[],c=[];this._build_m_order();for(var e=0;e<this.filters.length;e++){var g=this._m_order?this._m_order[this.filters[e][1]]:this.filters[e][1];if(!(g>=this._cCount)){c.push(g);var h=this.filters[e][0].old_value=this.filters[e][0].value;this.filters[e][0]._filter&&(h=this.filters[e][0]._filter());var l;"function"!=typeof h&&(l=this.combos[g]||(this._col_combos?this._col_combos[g]:!1))&&(l.values?(g=l.values._dhx_find(h),h=-1==g?h:l.keys[g]):l.getOptionByLabel&&
(h=l.getOptionByLabel(h)?l.getOptionByLabel(h).value:h));a.push(h)}}this.callEvent("onFilterStart",[c,a])&&(this.filterBy(c,a),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))};
dhtmlXGridObject.prototype.makeFilter=function(a,c,e){this.filters||(this.filters=[]);"object"!=typeof a&&(a=document.getElementById(a));if(a){var g=this;a.style.width||(a.style.width="90%");if("SELECT"==a.tagName)this.filters.push([a,c]),this._loadSelectOptins(a,c),a.onchange=function(){g.filterByAll()},_isIE&&(a.style.marginTop="1px"),this.attachEvent("onEditCell",function(e,g,h){this._build_m_order();2==e&&this.filters&&(this._m_order?h==this._m_order[c]:h==c)&&this._loadSelectOptins(a,c);return!0});
else if("INPUT"==a.tagName)this.filters.push([a,c]),a.old_value=a.value="",a.onkeydown=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){a.value!=a.old_value&&(g.filterByAll(),a.old_value=a.value)},500)};else if("DIV"==a.tagName){this.filters.push([a,c]);a.style.padding="0px";a.style.margin="0px";window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var h=new dhtmlXCombo(a,"_filter","90%");h.filterSelfA=h.filterSelf;h.filterSelf=function(){0==
this.getSelectedIndex()&&this.setComboText("");this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(!1)};h.enableFilteringMode(!0);a.combo=h;a.value="";this._loadComboOptins(a,c);h.attachEvent("onChange",function(){a.value=h.getSelectedValue();null===a.value&&(a.value="");g.filterByAll()})}a.parentNode&&(a.parentNode.className+=" filter");this._filters_ready()}};
dhtmlXGridObject.prototype.findCell=function(a,c,e,g){g=g||function(a,c){return-1!=c.toString().toLowerCase().indexOf(a)};!0===g&&(g=function(a,c){return c.toString().toLowerCase()==a});var h=[];a=a.toString().toLowerCase();"number"!=typeof e&&(e=e?1:0);if(!this.rowsBuffer.length)return h;for(var l=c||0;l<this._cCount;l++){if(this._h2)this._h2.forEachChild(0,function(c){if(e&&h.length==e)return h;g(a,this._get_cell_value(c.buff,l))&&h.push([c.id,l])},this);else for(var m=0;m<this.rowsBuffer.length;m++)if(g(a,
this._get_cell_value(this.rowsBuffer[m],l))&&(h.push([this.rowsBuffer[m].idd,l]),e&&h.length==e))return h;if("undefined"!=typeof c)break}return h};
dhtmlXGridObject.prototype.makeSearch=function(a,c,e){"object"!=typeof a&&(a=document.getElementById(a));if(a){var g=this;"INPUT"==a.tagName&&(a.onkeypress=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){if(""!=a.value){var h=g.findCell(a.value,c,!0,e);h.length&&(g._h2&&g.openItem(h[0][0]),g.selectCell(g.getRowIndex(h[0][0]),c||0))}},500)});a.parentNode&&(a.parentNode.className+=" filter")}};
dhtmlXGridObject.prototype._loadSelectOptins=function(a,c){var e=this.collectValues(c),g=a.value;a.innerHTML="";a.options[0]=new Option("","");for(var h=this._filter_tr?this._filter_tr[c]:null,l=0;l<e.length;l++)a.options[a.options.length]=new Option(h?h(e[l]):e[l],e[l]);a.value=g};dhtmlXGridObject.prototype.setSelectFilterLabel=function(a,c){this._filter_tr||(this._filter_tr=[]);this._filter_tr[a]=c};
dhtmlXGridObject.prototype._loadComboOptins=function(a,c){if(a.combo){var e=this.collectValues(c);a.combo.clearAll();for(var g=[["",""]],h=0;h<e.length;h++)g.push([e[h],e[h]]);a.combo.addOption(g)}};dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var a=0;a<this.filters.length;a++)switch(this.filters[a][0].tagName.toLowerCase()){case "select":this._loadSelectOptins.apply(this,this.filters[a]);break;case "div":this._loadComboOptins.apply(this,this.filters[a])}};
dhtmlXGridObject.prototype._filters_ready=function(a,c){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onRowCreated",function(a,c){if(this._f_rowsBuffer)for(var h=0;h<this._f_rowsBuffer.length;h++)if(this._f_rowsBuffer[h].idd==a)return this._f_rowsBuffer[h]=c});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;this.hdr.rows.length||(this.filters=[])});this.attachEvent("onSetSizes",this._filters_resize_combo);this.attachEvent("onResize",this._filters_resize_combo);this._filters_ready=
function(){}};dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var a=0;a<this.filters.length;a++)null!=this.filters[a][0].combo&&this.filters[a][0].combo.setSize(Math.round(90*this.filters[a][0].offsetWidth/100));return!0}};
dhtmlXGridObject.prototype._in_header_text_filter=function(a,c){a.innerHTML="<input type='text'>";a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0};a.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(a.firstChild,c)};
dhtmlXGridObject.prototype._in_header_text_filter_inc=function(a,c){a.innerHTML="<input type='text'>";a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0};a.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(a.firstChild,c);a.firstChild._filter=function(){return""==a.firstChild.value?"":function(c){return 0==c.toString().toLowerCase().indexOf(a.firstChild.value.toLowerCase())}};this._filters_ready()};
dhtmlXGridObject.prototype._in_header_select_filter=function(a,c){a.innerHTML="<select></select>";a.onclick=function(a){(a||event).cancelBubble=!0;return!1};this.makeFilter(a.firstChild,c)};
dhtmlXGridObject.prototype._in_header_select_filter_strict=function(a,c){a.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";a.onclick=function(a){(a||event).cancelBubble=!0;return!1};this.makeFilter(a.firstChild,c);var e=this.combos;a.firstChild._filter=function(){var g=a.firstChild.value;if(!g)return"";e[c]&&(g=e[c].keys[e[c].values._dhx_find(g)]);g=g.toLowerCase();return function(a){return a.toString().toLowerCase()==g}};this._filters_ready()};
dhtmlXGridObject.prototype._in_header_combo_filter=function(a,c){a.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>";a.onselectstart=function(){return event.cancelBubble=!0};a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0};this.makeFilter(a.firstChild,c)};
dhtmlXGridObject.prototype._search_common=function(a,c){a.innerHTML="<input type='text' style='width:90%; '>";a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0};a.onselectstart=function(){return event.cancelBubble=!0}};dhtmlXGridObject.prototype._in_header_text_search=function(a,c,e){this._search_common(a,c);this.makeSearch(a.firstChild,c)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(a,c){this._search_common(a,c);this.makeSearch(a.firstChild,c,!0)};
dhtmlXGridObject.prototype._in_header_numeric_filter=function(a,c){this._in_header_text_filter.call(this,a,c);a.firstChild._filter=function(){var a=this.value,c,h="==",l=parseFloat(a.replace("=","")),m=null;if(a){if(-1!=a.indexOf(".."))return a=a.split(".."),l=parseFloat(a[0]),m=parseFloat(a[1]),function(a){return a>=l&&a<=m?!0:!1};if(c=a.match(/>=|<=|>|</))h=c[0],l=parseFloat(a.replace(h,""));return Function("v"," if (v "+h+" "+l+" ) return true; return false;")}return""}};
dhtmlXGridObject.prototype._in_header_master_checkbox=function(a,c,e){a.innerHTML=e[0]+"<input type='checkbox' />"+e[1];var g=this;a.getElementsByTagName("input")[0].onclick=function(a){g._build_m_order();var e=g._m_order?g._m_order[c]:c,m=this.checked?1:0;g.forEachRowA(function(a){var c=this.cells(a,e);c.isCheckbox()&&(c.setValue(m),c.cell.wasChanged=!0);this.callEvent("onEditCell",[1,a,e,m]);this.callEvent("onCheckbox",[a,e,m])});(a||event).cancelBubble=!0}};
dhtmlXGridObject.prototype._in_header_stat_total=function(a,c,e){this._stat_in_header(a,function(){var a=0;this._build_m_order();for(var e=this._m_order?this._m_order[c]:c,l=0;l<this.rowsBuffer.length;l++)var m=parseFloat(this._get_cell_value(this.rowsBuffer[l],e)),a=a+(isNaN(m)?0:m);return this._maskArr[e]?this._aplNF(a,e):Math.round(100*a)/100},c,e,e)};
dhtmlXGridObject.prototype._in_header_stat_multi_total=function(a,c,e){var g=e[1].split(":");e[1]="";for(var h=0;h<g.length;h++)g[h]=parseInt(g[h]);for(var h=[],l=0;l<g.length;l++)h[g[l]]=!0;this._stat_in_header(a,function(){for(var a=0,e=0;e<this.rowsBuffer.length;e++){for(var h=1,l=0;l<g.length;l++)h*=parseFloat(this._get_cell_value(this.rowsBuffer[e],g[l]));a+=isNaN(h)?0:h}return this._maskArr[c]?this._aplNF(a,c):Math.round(100*a)/100},h,e,e)};
dhtmlXGridObject.prototype._in_header_stat_max=function(a,c,e){this._stat_in_header(a,function(){this._build_m_order();var a=this._m_order?this._m_order[c]:c,e=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var l=0;l<this.rowsBuffer.length;l++)e=Math.max(e,parseFloat(this._get_cell_value(this.rowsBuffer[l],a)));return this._maskArr[c]?this._aplNF(e,c):e},c,e)};
dhtmlXGridObject.prototype._in_header_stat_min=function(a,c,e){this._stat_in_header(a,function(){this._build_m_order();var a=this._m_order?this._m_order[c]:c,e=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var l=0;l<this.rowsBuffer.length;l++)e=Math.min(e,parseFloat(this._get_cell_value(this.rowsBuffer[l],a)));return this._maskArr[c]?this._aplNF(e,c):e},c,e)};
dhtmlXGridObject.prototype._in_header_stat_average=function(a,c,e){this._stat_in_header(a,function(){this._build_m_order();var a=this._m_order?this._m_order[c]:c,e=0,l=0;if(0==this.getRowsNum())return"&nbsp;";for(var m=0;m<this.rowsBuffer.length;m++){var n=parseFloat(this._get_cell_value(this.rowsBuffer[m],a));isNaN(n)||(e+=n,l++)}return this._maskArr[c]?this._aplNF(e/l,c):Math.round(e/l*100)/100},c,e)};
dhtmlXGridObject.prototype._in_header_stat_count=function(a,c,e){this._stat_in_header(a,function(){return this.getRowsNum()},c,e)};
dhtmlXGridObject.prototype._stat_in_header=function(a,c,e,g){var h=function(){this.dma(!0);a.innerHTML=(g[0]?g[0]:"")+c.call(this)+(g[1]?g[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var c=0;4>c;c++)this.detachEvent(this._stat_events[a][c]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",h),this.attachEvent("onXLE",
h),this.attachEvent("onFilterEnd",h),this.attachEvent("onEditCell",function(a,c,g){2==a&&(g==e||e&&e[g])&&h.call(this);return!0})]);a.innerHTML=""};dhtmlXGridObject.prototype.loadCSVFile=function(a,c){this.load(a,c,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=dhx4.s2b(a)};dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=dhx4.s2b(a)};dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a};dhtmlXGridObject.prototype._csvAID=!0;
dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")};
dhtmlXGridObject.prototype.serializeToCSV=function(a){this.editStop();this._agetm=this._mathSerialization?"getMathValue":this._strictText||a?"getTitle":"getValue";a=[];if(this._csvHdr)for(var c=1;c<this.hdr.rows.length;c++){for(var e=[],g=0;g<this._cCount;g++)this._srClmn&&!this._srClmn[g]||e.push(this.getColumnLabel(g,c-1));a.push(this.csvParser.str(e,this.csv.cell,this.csv.row))}g=0;c=this.rowsBuffer.length;for(g;g<c;g++)e=this._serializeRowToCVS(null,g),""!=e&&a.push(e);return this.csvParser.block(a,
this.csv.row)};
dhtmlXGridObject.prototype._serializeRowToCVS=function(a,c,e,g){var h=[];a||(a=this.render_row(c),this._fake&&!this._fake.rowsAr[a.idd]&&this._fake.render_row(c));this._csvAID||(h[h.length]=a.idd);e=e||0;g=g||this._cCount;c=!1;for(var l=e;a.childNodes[e]._cellIndex>l&&e;)e--;for(;l<g&&a.childNodes[e];e++){var m=a.childNodes[e]._cellIndex;if(this._srClmn&&!this._srClmn[m]||this._serialize_visible&&this._hrrar[m])l++;else{for(var n=a.childNodes[e],r=this.cells(a.idd,m);l!=m&&!(l++,h.push(""),l>=g););
if(l>=g)break;l++;zxVal=r.cell?r[this._agetm]():"";this._chAttr&&r.wasChanged()&&(c=!0);h[h.length]=null===zxVal?"":zxVal;if(this._ecspn&&n.colSpan&&1<n.colSpan)for(n=n.colSpan-1,m=0;m<n;m++)h[h.length]="",l++}}return this._onlChAttr&&!c?"":this.csvParser.str(h,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(a){window.clipboardData?window.clipboardData.setData("Text",a):(new Clipboard).copy(a)};
dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()};dhtmlXGridObject.prototype.cellToClipboard=function(a,c){if(!a||!c&&0!==c){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd;c=this.cell._cellIndex}var e=this.cells(a,c);this.toClipBoard(((e.getLabel?e.getLabel():e.getValue())||"").toString())};
dhtmlXGridObject.prototype.updateCellFromClipboard=function(a,c){if(!a||!c){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd;c=this.cell._cellIndex}var e=this.cells(a,c);e[e.setImage?"setLabel":"setValue"](this.fromClipBoard())};
dhtmlXGridObject.prototype.rowToClipboard=function(a){var c="";this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";this._serialize_visible=!this._fake;if(a)c=this._serializeRowToCVS(this.getRowById(a));else{a=[];for(var e=0;e<this.selectedRows.length;e++)a[a.length]=this._serializeRowToCVS(this.selectedRows[e]),c=this.csvParser.block(a,this.csv.row)}this._serialize_visible=!1;this.toClipBoard(c)};
dhtmlXGridObject.prototype.updateRowFromClipboard=function(a){var c=this.fromClipBoard();if(c&&(a=a?this.getRowById(a):this.selectedRows[0])){c=this.csvParser.unblock(c,this.csv.cell,this.csv.row)[0];this._csvAID||c.splice(0,1);for(var e=0;e<c.length;e++){var g=this.cells3(a,e);g[g.setImage?"setLabel":"setValue"](c[e])}}};
dhtmlXGridObject.prototype.csvParser={block:function(a,c){return a.join(c)},unblock:function(a,c,e){a=(a||"").split(e);for(e=0;e<a.length;e++)a[e]=(a[e]||"").split(c);c=a.length-1;1==a[c].length&&""==a[c][0]&&a.splice(c,1);return a},str:function(a,c,e){return a.join(c)}};
dhtmlXGridObject.prototype.csvExtParser={_quote:/"/g,_quote_esc:/\\"/g,block:function(a,c){return a.join(c)},unblock:function(a,c,e){var g=[[]],h=0;if(!a)return g;var l=/^[ ]*"/,m=/"[ ]*$/,n=new RegExp(".*"+e+".*$");a=a.split(c);for(c=0;c<a.length;c++)if(a[c].match(l)){for(var r=a[c].replace(l,"");!a[c].match(m);)c++,r+=a[c];g[h].push(r.replace(m,"").replace(this._quote_esc,'"'))}else a[c].match(n)?(r=a[c].indexOf(e),g[h].push(a[c].substr(0,r)),h++,g[h]=[],a[c]=a[c].substr(r+1),c--):(a[c]||c!=a.length-
1)&&g[h].push(a[c]);e=g.length-1;0<e&&!g[e].length&&g.splice(e,1);return g},str:function(a,c,e){for(e=0;e<a.length;e++)a[e]='"'+a[e].replace(this._quote,'\\"')+'"';return a.join(c)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(a)for(var c=this.csvParser.unblock(a,this.csv.cell,this.csv.row),e=0;e<c.length;e++)c[e]&&(a=c[e],a.length&&(this._csvAID?this.addRow(this.getRowsNum()+2,a):(this.rowsAr[a[0]]&&(a[0]=this.uid()),this.addRow(a[0],a.slice(1)))))};
dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();a&&this.loadCSVString(a)};
dhtmlXGridObject.prototype.getXLS=function(a){this.xslform||(this.xslform=document.createElement("FORM"),this.xslform.action=(a||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform),a=document.createElement("INPUT"),a.type="hidden",a.name="csv",this.xslform.appendChild(a),a=document.createElement("INPUT"),a.type="hidden",a.name="csv_header",this.xslform.appendChild(a));a=this.serializeToCSV();this.xslform.childNodes[0].value=a;a=[];
for(var c=this._cCount,e=0;e<c;e++)a.push(this.getHeaderCol(e));a=a.join(",");this.xslform.childNodes[1].value=a;this.xslform.submit()};
dhtmlXGridObject.prototype.printView=function(a,c){var e="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",g=null;if(this._fake)for(var g=[].concat(this._hrrar),h=0;h<this._fake._cCount;h++)this._hrrar[h]=null;e+="<base  href='"+(document.location.protocol+"//"+document.location.hostname+document.location.pathname)+"'></base>";this.parentGrid||(e+=a||"");for(var e=e+'<table width="100%" border="2px" cellpadding="0" cellspacing="0">',
l=Math.max(this.rowsBuffer.length,this.rowsCol.length),m=this._cCount,n=this._printWidth(),e=e+'<tr class="header_row_1">',h=0;h<m;h++)if(!this._hrrar||!this._hrrar[h]){for(var r=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(h)]:h],u=r.colSpan||1,v=r.rowSpan||1,r=1;r<u;r++)n[h]+=n[r];e+='<td rowspan="'+v+'" width="'+n[h]+'%" style="background-color:lightgrey;" colspan="'+u+'">'+this.getHeaderCol(h)+"</td>";h+=u-1}e+="</tr>";for(h=2;h<this.hdr.rows.length;h++)if(_isIE){e+=
"<tr style='background-color:lightgrey' class='header_row_"+h+"'>";n=this.hdr.rows[h].childNodes;for(r=0;r<n.length;r++)this._hrrar&&this._hrrar[n[r]._cellIndex]||(e+=n[r].outerHTML);e+="</tr>"}else e+="<tr class='header_row_"+h+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[h].innerHTML:"")+this.hdr.rows[h].innerHTML+"</tr>";for(h=0;h<l;h++)if(e+="<tr>",this.rowsCol[h]&&this.rowsCol[h]._cntr)e+=this.rowsCol[h].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[h]||
"none"!=this.rowsCol[h].style.display){if(this.rowsCol[h])n=this.rowsCol[h].idd;else if(this.rowsBuffer[h])n=this.rowsBuffer[h].idd;else continue;for(r=0;r<m;r++)if(!this._hrrar||!this._hrrar[r]){if(this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName)var w=this.cells(n,r),u=w._setState?"":w.getContent?w.getContent():w.getImage||w.combo?w.cell.innerHTML:w.getValue();else u=this._get_cell_value(this.rowsBuffer[h],r);var v=this.columnColor[r]?"background-color:"+this.columnColor[r]+";":"",x=this.cellAlign[r]?
"text-align:"+this.cellAlign[r]+";":"",y=w.getAttribute("colspan"),e=e+('<td style="'+v+x+'" '+(y?'colSpan="'+y+'"':"")+">"+(""===u?"&nbsp;":u)+"</td>");y&&(r+=y-1)}e+="</tr>";this.rowsCol[h]&&this.rowsCol[h]._expanded&&(r=this.cells4(this.rowsCol[h]._expanded.ctrl),e=r.getSubGrid?e+('<tr><td colspan="'+m+'">'+r.getSubGrid().printView()+"</td></tr>"):e+('<tr><td colspan="'+m+'">'+this.rowsCol[h]._expanded.innerHTML+"</td></tr>"))}if(this.ftr)for(h=1;h<this.ftr.childNodes[0].rows.length;h++)e+="<tr style='background-color:lightgrey'>"+
(this._fake?this._fake.ftr.childNodes[0].rows[h].innerHTML:"")+this.ftr.childNodes[0].rows[h].innerHTML+"</tr>";e+="</table>";if(this.parentGrid)return e;e+=c||"";h=window.open("","_blank");h.document.write(e);h.document.write("<script>window.onerror=function(){return true;}\x3c/script>");h.document.close();this._fake&&(this._hrrar=g)};
dhtmlXGridObject.prototype._printWidth=function(){for(var a=[],c=0,e=0;e<this._cCount;e++){var g=this.getColWidth(e);a.push(g);c+=g}for(var g=[],h=0,e=0;e<a.length;e++){var l=Math.floor(a[e]/c*100),h=h+l;g.push(l)}g[g.length-1]+=100-h;return g};
dhtmlXGridObject.prototype.enableBlockSelection=function(a){if("undefined"==typeof this._bs_mode){var c=this;this.obj.onmousedown=function(a){c._bs_mode&&c._OnSelectionStart(a||event,this);return!0};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){c._HideSelection();return!0});this.attachEvent("onGridReconstructed",function(){c._HideSelection();return!0});this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===a)return this._bs_mode=!1,this._HideSelection();this._bs_mode=
!0;window.dhx4.isIPad||(a=this._clip_area=document.createElement("textarea"),a.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",a.onkeydown=function(a){a=a||event;86==a.keyCode&&(a.ctrlKey||a.metaKey)&&c.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!c.editor&&c._clip_area&&c._clip_area.select()}))};
dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=dhx4.s2b(a)};
dhtmlXGridObject.prototype._OnSelectionStart=function(a,c){var e=this;if(2!=a.button){var g=a.srcElement||a.target;if(this.editor){if(g.tagName&&("INPUT"==g.tagName||"TEXTAREA"==g.tagName))return;this.editStop()}e.setActive(!0);var h=this.getPosition(this.obj),l=a.clientX-h[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),h=a.clientY-h[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(l-
4,h-4);if(g==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;g&&(!g.tagName||"td"!=g.tagName.toLowerCase());)g=g.parentNode;this._startSelectionCell=g}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(a){e._blsTimer&&window.clearTimeout(e._blsTimer)};this.obj.onmmold=
this.obj.onmousemove;this._init_pos=[l,h];this._selectionObj.onmousemove=this.obj.onmousemove=function(c){c=c||a;c.preventDefault?c.preventDefault():c.returnValue=!1;e._OnSelectionMove(c)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(c){c=c||a;e._OnSelectionStop(c,this);return!0};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return!1}}};
dhtmlXGridObject.prototype._getCellByPos=function(a,c){this._fake&&(a+=this._fake.objBox.scrollWidth);for(var e=0,g=0;g<this.obj.rows.length;g++)if(c-=this.obj.rows[g].offsetHeight,0>=c){e=this.obj.rows[g];break}if(!e||!e.idd)return null;for(g=0;g<this._cCount;g++)if(a-=this.getColWidth(g),0>=a)for(;;)if(e._childIndexes&&e._childIndexes[g+1]==e._childIndexes[g])e=e.previousSibling;else return this.cells(e.idd,g).cell;return null};
dhtmlXGridObject.prototype._OnSelectionMove=function(a){var c=this;this._ShowSelection();var e=this.getPosition(this.obj),g=a.clientX-e[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),e=a.clientY-e[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(5>Math.abs(this._init_pos[0]-g)&&5>Math.abs(this._init_pos[1]-e))return this._HideSelection();var h=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=
this._startSelectionCell=this.getFirstParentOfType(a.srcElement||a.target,"TD");else if(a.srcElement||a.target)if("dhtmlxGrid_selection"==(a.srcElement||a.target).className)this._endSelectionCell=this._getCellByPos(g,e)||this._endSelectionCell;else{var l=this.getFirstParentOfType(a.srcElement||a.target,"TD");l.parentNode.idd&&(this._endSelectionCell=l)}this._endSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])&&(this._endSelectionCell=
h);var h=this.objBox.scrollLeft+this.objBox.clientWidth,l=this.objBox.scrollTop+this.objBox.clientHeight,m=this.objBox.scrollLeft,n=this.objBox.scrollTop,r=!1;this._blsTimer&&window.clearTimeout(this._blsTimer);g+20>=h?(this.objBox.scrollLeft+=20,r=!0):g-20<m&&(this.objBox.scrollLeft-=20,r=!0);e+20>=l&&!this._realfake?(this.objBox.scrollTop+=20,r=!0):e-20<n&&!this._realfake&&(this.objBox.scrollTop-=20,r=!0);this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);
if(r){var u=a.clientX,v=a.clientY;this._blsTimer=window.setTimeout(function(){c._OnSelectionMove({clientX:u,clientY:v})},100)}};
dhtmlXGridObject.prototype._OnSelectionStop=function(a){var c=this;this._blsTimer&&window.clearTimeout(this._blsTimer);this.obj.onmousedown=function(e){c._bs_mode&&c._OnSelectionStart(e||a,this);return!0};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(2>parseInt(this._selectionObj.style.width)&&2>parseInt(this._selectionObj.style.height))this._HideSelection();else{var e=this.getFirstParentOfType(a.srcElement||a.target,
"TD");e&&e.parentNode.idd||(e=this._endSelectionCell);for(;e&&(!e.tagName||"td"!=e.tagName.toLowerCase());)e=e.parentNode;if(!e)return this._HideSelection();this._stopSelectionCell=e;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};
dhtmlXGridObject.prototype._RedrawSelectionPos=function(a,c){if(a.parentNode.grid!=c.parentNode.grid)return this._selectionArea;var e={};e.LeftTopCol=a._cellIndex;e.LeftTopRow=this.getRowIndex(a.parentNode.idd);e.RightBottomCol=c._cellIndex;e.RightBottomRow=this.getRowIndex(c.parentNode.idd);var g=a.offsetWidth,h=a.offsetHeight;a=this.getPosition(a,this.obj);var l=c.offsetWidth,m=c.offsetHeight;c=this.getPosition(c,this.obj);if(a[0]<c[0])var n=a[0],g=c[0]+l;else l=e.RightBottomCol,e.RightBottomCol=
e.LeftTopCol,e.LeftTopCol=l,n=c[0],g=a[0]+g;a[1]<c[1]?(l=a[1],h=c[1]+m):(l=e.RightBottomRow,e.RightBottomRow=e.LeftTopRow,e.LeftTopRow=l,l=c[1],h=a[1]+h);this._selectionObj.style.left=n+"px";this._selectionObj.style.top=l+"px";this._selectionObj.style.width=g-n+"px";this._selectionObj.style.height=h-l+"px";return e};
dhtmlXGridObject.prototype._CreateSelection=function(a,c){if(null==this._selectionObj){var e=document.createElement("div");e.style.position="absolute";e.style.display="none";e.className="dhtmlxGrid_selection";this._selectionObj=e;this._selectionObj.onmousedown=function(a){a=a||event;if(2==a.button||_isMacOS&&a.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",a])};this._selectionObj.oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width=
"0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=a+"px";this._selectionObj.style.top=c+"px";this._selectionObj.startX=a;this._selectionObj.startY=c};dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")};dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none");this._selectionArea=null;this._clip_area&&(this._clip_area.value="",this._clip_area.blur())};
dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._clip_area&&null!=this._selectionArea){var a=[];this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";this._serialize_visible=!0;for(var c=this._selectionArea.LeftTopRow;c<=this._selectionArea.RightBottomRow;c++){var e=this._serializeRowToCVS(this.rowsBuffer[c],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);a[a.length]=this._csvAID?e:e.substr(e.indexOf(this.csv.cell)+1)}a=
a.join(this._CSVRowDelimiter);this._clip_area.value=a;this._clip_area.select();this._serialize_visible=!1}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard();a=null},1)}};
dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var a=this._clip_area.value;if(a){if(null!=this._selectionArea)var c=this._selectionArea.LeftTopRow,e=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;c=this.getRowIndex(this.cell.parentNode.idd);e=this.cell._cellIndex}var a=this.csvParser.unblock(a,this.csv.cell,this.csv.row),g=c+a.length,h=e+a[0].length;h>this._cCount&&(h=this._cCount);for(var l=0;c<g;c++){var m=this.render_row(c);if(-1!=m){for(var n=0,r=
e;r<h;r++)if(this._hrrar[r]&&!this._fake)h=Math.min(h+1,this._cCount);else{var u=this.cells3(m,r);if(u.isDisabled())n++;else{this._onEditUndoRedo&&this._onEditUndoRedo(2,m.idd,r,a[l][n],u.getValue());if(u.combo){for(var v=u.combo.values,w=0;w<v.length;w++)if(a[l][n]==v[w]){u.setValue(u.combo.keys[w]);v=null;break}null!=v&&u.editable?u.setValue(a[l][n++]):n++}else u[u.setImage?"setLabel":"setValue"](a[l][n++]);u.cell.wasChanged=!0}}this.callEvent("onRowPaste",[m.idd]);l++}}}};
dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null};
dhtmlXGridObject.prototype.enableSmartRendering=function(a,c,e){2<arguments.length&&(c&&!this.rowsBuffer[c-1]&&(this.rowsBuffer[c-1]=0),c=e);this._srnd=dhx4.s2b(a);this._srdh=this._srdh||20;this._dpref=c||0};dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)};
dhtmlXGridObject.prototype.forceFullLoading=function(a,c){for(var e=0;e<this.rowsBuffer.length;e++)if(!this.rowsBuffer[e]){var g=a||this.rowsBuffer.length-e;if(this.callEvent("onDynXLS",[e,g])){var h=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+e+"&count="+g,function(){window.setTimeout(function(){h.forceFullLoading(a,c)},100)},this._data_type)}return}c&&c.call(this)};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)};
dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};
dhtmlXGridObject.prototype._add_filler=function(a,c,e,g){if(!c)return null;var h=this._prepareRow("__filler__");h.firstChild.style.width="1px";h.firstChild.style.borderWidth=h.firstChild.style.padding=h.firstChild.style.margin="0px";for(var l=1;l<h.childNodes.length;l++)h.childNodes[l].style.display="none";h.firstChild.style.height=c*this._srdh+"px";(e=e||this.rowsCol[a])&&e.nextSibling?e.parentNode.insertBefore(h,e.nextSibling):_isKHTML?this.obj.appendChild(h):this.obj.rows[0].parentNode.appendChild(h);
this.callEvent("onAddFiller",[a,c,h,e,g]);return[a,c,h]};
dhtmlXGridObject.prototype._update_srnd_view=function(){var a=Math.floor(this.objBox.scrollTop/this._srdh),c=a+this._get_view_size();if(this.multiLine){c=this.objBox.scrollTop;for(a=0;0<c;)c-=this.rowsCol[a]?this.rowsCol[a].offsetHeight:this._srdh,a++;c=a+this._get_view_size();0<a&&a--}c+=this._srnd_pr||0;c>this.rowsBuffer.length&&(c=this.rowsBuffer.length);for(;a<c;a++)if(!this.rowsCol[a]){if(-1==this._add_from_buffer(a)){this.xmlFileUrl&&(this._dpref&&this.rowsBuffer[c-1]?(a=Math.max(0,Math.min(a,
c-this._dpref)),this._current_load=[a,c-a]):this._current_load=[a,this._dpref?this._dpref:c-a],this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type));return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[a].idd],this.rowsBuffer[a]),this._updateParentLine(this._h2.get[this.rowsBuffer[a].idd],this.rowsBuffer[a]));a&&a==(this._realfake?this._fake:this)._r_select&&
this.selectCell(a,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)};
dhtmlXGridObject.prototype._add_from_buffer=function(a){var c=this.render_row(a);if(-1==c)return-1;if(c._attrs.selected||c._attrs.select)this.selectRow(c,!1,!0),c._attrs.selected=c._attrs.select=null;if(!this._cssSP)this._cssEven&&0==a%2?c.className=this._cssEven+(-1!=c.className.indexOf("rowselected")?" rowselected ":" ")+(c._css||""):this._cssUnEven&&1==a%2&&(c.className=this._cssUnEven+(-1!=c.className.indexOf("rowselected")?" rowselected ":" ")+(c._css||""));else if(this._h2){var e=this._h2.get[c.idd];
c.className+=" "+(e.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+e.level+(this.rowsAr[e.id]._css||"")}for(e=0;e<this._fillers.length;e++){var g=this._fillers[e];if(g&&g[0]<=a&&g[0]+g[1]>a){var h=a-g[0];0==h?(this._insert_before(a,c,g[2]),this._update_fillers(e,-1,1)):h==g[1]-1?(this._insert_after(a,c,g[2]),this._update_fillers(e,-1,0)):(this._fillers.push(this._add_filler(a+1,g[1]-h-1,g[2],1)),this._insert_after(a,c,g[2]),this._update_fillers(e,-g[1]+h,0));break}}};
dhtmlXGridObject.prototype._update_fillers=function(a,c,e){var g=this._fillers[a];g[1]+=c;g[0]+=e;g[1]?(g[2].firstChild.style.height=parseFloat(g[2].firstChild.style.height)+c*this._srdh+"px",this.callEvent("onUpdateFiller",[g[2]])):(this.callEvent("onRemoveFiller",[g[2]]),g[2].parentNode.removeChild(g[2]),this._fillers.splice(a,1))};dhtmlXGridObject.prototype._insert_before=function(a,c,e){e.parentNode.insertBefore(c,e);this.rowsCol[a]=c;this.callEvent("onRowInserted",[c,null,e,"before"])};
dhtmlXGridObject.prototype._insert_after=function(a,c,e){e.nextSibling?e.parentNode.insertBefore(c,e.nextSibling):e.parentNode.appendChild(c);this.rowsCol[a]=c;this.callEvent("onRowInserted",[c,null,e,"after"])};
"undefined"!=typeof window.dhtmlxValidation&&(dhtmlxValidation.trackInput=function(a,c,e,g){dhtmlxEvent(a,"keyup",function(h){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null);dhtmlxValidation._timer=window.setTimeout(function(){if(dhtmlxValidation.checkInput(a,c))a.className=a.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),g&&g(a,a.value,c);else if(!e||e(a,a.value,c))a.className+=" dhtmlx_live_validation_error"},250)})},dhtmlxValidation.checkInput=
function(a,c){return dhtmlxValidation.checkValue(a.value,c)},dhtmlxValidation.checkValue=function(a,c){"string"==typeof c&&(c=c.split(","));for(var e=!0,g=0;g<c.length;g++)this["is"+c[g]]?e=e&&this["is"+c[g]](a):alert("Incorrect validation rule: "+c[g]);return e});dhtmlXGridObject.prototype.enableValidation=function(a,c){this._validators=(a=dhx4.s2b(a))?{data:[]}:!1;1<arguments.length&&(this._validators._live=c);this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))};
dhtmlXGridObject.prototype.setColValidators=function(a){this._validators||this.enableValidation(!0);"string"==typeof a&&(a=a.split(this.delim));this._validators.data=a};
dhtmlXGridObject.prototype.validationEvent=function(a,c,e,g,h){h=this._validators;if(!h)return!0;var l=h.data[e]||this.cells(c,e).getAttribute("validate")||"";if(1==a&&l){var m=this.editor||(this._fake||{}).editor;if(!m)return!0;m.cell.className=m.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(h._live){var n=this;dhtmlxValidation.trackInput(m.getInput(),l,function(a,g,h){return n.callEvent("onLiveValidationError",[c,e,g,a,h])},function(a,g,h){return n.callEvent("onLiveValidationCorrect",
[c,e,g,a,h])})}}2==a&&this.validateCell(c,e,l,g);return!0};
dhtmlXGridObject.prototype.validateCell=function(a,c,e,g){e=e||this._validators.data[c]||this.cells(a,c).getAttribute("validate");g=g||this.cells(a,c).getValue();if(e){var h=this.cells(a,c).cell,l=!0;"string"==typeof e&&(e=e.split(this.delim));for(var m=0;m<e.length;m++)dhtmlxValidation.checkValue(g,e[m])||(this.callEvent("onValidationError",[a,c,g,e[m]])&&(h.className+=" dhtmlx_validation_error"),l=!1);l&&(this.callEvent("onValidationCorrect",[a,c,g,e]),h.className=h.className.replace(/[ ]*dhtmlx_validation_error/g,
""));return l}};
function eXcell_stree(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees)return;this._sub=this.grid._sub_trees[a._cellIndex];if(!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(a){this.cell._val=a;a=this._sub.getItemText(this.cell._val);this.setCValue(a||"&nbsp;",a)};this.edit=function(){this._sub.parentObject.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=a[1]+
"px";this._sub.parentObject.style.left=a[0]+"px";this._sub.parentObject.style.position="absolute";a=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=a};this.detach=function(){this._sub.parentObject.style.display="none";if(null!=this.grid._sub_id){var a=this.cell._val;this.setValue(this._sub.getSelectedItemId());this.grid._sub_id=null;return this.cell._val!=a}}}eXcell_stree.prototype=new eXcell;
dhtmlXGridObject.prototype.setSubTree=function(a,c){this._sub_trees||(this._sub_trees=[]);this._sub_trees[c]=[a];a.parentObject.style.display="none";var e=this;a.parentObject.onclick=function(a){(a||window.event).cancelBubble=!0;return!1};a.ev_onDblClick=null;a.attachEvent("onDblClick",function(a){e._sub_id=a;e.editStop();return!0});a._chRRS=!0};
function eXcell_link(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return!0};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var a=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(a?"^"+a:"")}return""};this.setValue=function(a){if("number"!=typeof a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("&nbsp;",e),this.cell._clearCell=!0;var e=a.split("^");
1==e.length?e[1]="":1<e.length&&(e[1]="href='"+e[1]+"'",e[1]=3==e.length?e[1]+(" target='"+e[2]+"'"):e[1]+" target='_blank'");this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return a&&a.tagName?a.getAttribute("href"):""};eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""};
function eXcell_grid(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_grids)return;this._sub=this.grid._sub_grids[a._cellIndex];if(!this._sub)return;this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(a){this.cell.val=a;this._sub.getRowById(a)&&(a=(a=this._sub.cells(a,this._sindex))?a.getValue():"");this.setCValue(a||"&nbsp;",a)};this.edit=function(){this.val=this.cell.val;this._sub.entBox.style.display=
"block";var a=this.grid.getPosition(this.cell);this._sub.entBox.style.top=a[1]+"px";this._sub.entBox.style.left=a[0]+"px";this._sub.entBox.style.position="absolute";this._sub.setSizes();a=this.grid.editStop;this.grid.editStop=function(){};this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val);this._sub.setActive(!0);this.grid.editStop=a};this.detach=function(){var a=this.cell.val;this._sub.entBox.style.display="none";if(null===this._sub.getSelectedId())return!1;this.setValue(this._sub.getSelectedId());
this.grid.setActive(!0);return this.cell.val!=a}}eXcell_grid.prototype=new eXcell;dhtmlXGridObject.prototype.setSubGrid=function(a,c,e){this._sub_grids||(this._sub_grids=[]);this._sub_grids[c]=[a,e];a.entBox.style.display="none";var g=this;a.entBox.onclick=function(a){(a||window.event).cancelBubble=!0;return!1};a.attachEvent("onRowSelect",function(a){g.editStop();return!0});a._chRRS=!1};
function eXcell_dhxCalendar(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){a=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[a]);var c=this.grid;a.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){c.editStop()},1);return!0});dhtmlxEvent(a.base,"click",function(a){(a||event).cancelBubble=!0});a=null}}eXcell_dhxCalendar.prototype=new eXcell;
eXcell_dhxCalendar.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(a[0],a[1]+this.cell.offsetHeight);this.grid._grid_calendarA._last_operation_calendar=!1;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};
this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=a};eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};
eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c);this.setCValue(a,c);this.cell._clearCell=!a;a=this.val;this.val=this._val;return this.cell.val.valueOf()!=(a||"").valueOf()}return!1}};
eXcell_dhxCalendar.prototype.setValue=function(a){a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||
"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val))};
function eXcell_dhxCalendarA(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){a=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[a]);var c=this.grid;a.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){c.editStop()},1);return!0});dhtmlxEvent(a.base,"click",function(a){(a||event).cancelBubble=!0})}}eXcell_dhxCalendarA.prototype=new eXcell;
eXcell_dhxCalendarA.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(1*a[0]+this.cell.offsetWidth,1*a[1]);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=!1;this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=
function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=a;this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=
function(a){(a||event).cancelBubble=!0};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&18<=this.obj.offsetHeight&&40>this.obj.offsetHeight&&(this.obj.style.height="36px",this.obj.style.overflow="scroll"));this.obj.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0};this.obj.focus();this.obj.focus()};
eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};
eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),c=this.grid._grid_calendarA.getDate();this.cell.val=new Date(c);this.setCValue(a,c);this.cell._clearCell=!a;a=this.val;this.val=this._val;return this.cell.val.valueOf()!=
(a||"").valueOf()}this.setValue(this.obj.value);a=this.val;this.val=this._val;return this.cell.val.valueOf()!=(a||"").valueOf()}};
eXcell_dhxCalendarA.prototype.setValue=function(a){a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||
"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val))};
function eXcell_cntr(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0;this.grid._h2&&this.grid.attachEvent("onOpenEn",function(c){this.resetCounter(a._cellIndex)});var c=function(){var c=this;window.setTimeout(function(){c.resetCounter&&(c._fake&&!c._realfake&&a._cellIndex<c._fake._cCount?c._fake.resetCounter(a._cellIndex):c.resetCounter(a._cellIndex))},1);return!0};this.grid.attachEvent("onBeforeSorting",c);this.grid.attachEvent("onFilterEnd",
c)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(a){this.cell.style.paddingRight="2px";var c=this.cell;window.setTimeout(function(){if(c.parentNode){var a=c.parentNode.rowIndex;if(c.parentNode.grid.currentPage||0>a||c.parentNode.grid._srnd)a=c.parentNode.grid.rowsBuffer._dhx_find(c.parentNode)+1;0>=a||(c.innerHTML=a,c.parentNode.grid._fake&&c._cellIndex<c.parentNode.grid._fake._cCount&&c.parentNode.grid._fake.rowsAr[c.parentNode.idd]&&c.parentNode.grid._fake.cells(c.parentNode.idd,
c._cellIndex).setCValue(a),c=null)}},100)}}dhtmlXGridObject.prototype.resetCounter=function(a){this._fake&&!this._realfake&&a<this._fake._cCount&&this._fake.resetCounter(a,this.currentPage);for(var c=a||0,c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&"TR"==this.rowsBuffer[c].tagName&&this.rowsAr[this.rowsBuffer[c].idd]&&(this.rowsAr[this.rowsBuffer[c].idd].childNodes[a].innerHTML=c+1)};eXcell_cntr.prototype=new eXcell;
function eXcell_acheck(a){try{this.cell=a,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(c){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("<checkbox state='false'>"):this.setValue("<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,
this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){try{return this.cell.chstate.toString()}catch(a){return null}};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=
this.getValue()};this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}
eXcell_acheck.prototype=new eXcell;eXcell_acheck.prototype.setValue=function(a){a=(a||"").toString();-1!=a.indexOf("1")||-1!=a.indexOf("true")?this.cell.chstate="1":this.cell.chstate="0";this.setCValue(this.drawCurrentState(),this.cell.chstate)};
function eXcell_context(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_context)return;this._sub=this.grid._sub_context[a._cellIndex];if(!this._sub)return;this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){this.cell._val=a;var e=this._sub.itemPull[this._sub.idPrefix+this.cell._val];a=e?e.title:a;this.setCValue(a||"&nbsp;",a)};this.edit=function(){var a=this.grid.getPosition(this.cell);
this._sub.showContextMenu(a[0]+this.cell.offsetWidth,a[1]);a=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=a};this.detach=function(){if(null!=this.grid._sub_id){var a=this.cell._val;this.setValue(this.grid._sub_id);this.grid._sub_id=null;return this.cell._val!=a}this._sub.hideContextMenu()}}eXcell_context.prototype=new eXcell;
dhtmlXGridObject.prototype.setSubContext=function(a,c,e){var g=this;a.attachEvent("onClick",function(c,e){g._sub_id=c;g.editStop();a.hideContextMenu();return!0});this._sub_context||(this._sub_context=[]);this._sub_context[c]=[a,e];a.hideContextMenu()};
function dhtmlXGridFromTable(a,c){"object"!=typeof a&&(a=document.getElementById(a));var e=document.createElement("DIV");e.setAttribute("width",a.getAttribute("gridWidth")||(a.offsetWidth?a.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(a,null).width:a.currentStyle?a.currentStyle.width:0));e.setAttribute("height",a.getAttribute("gridHeight")||(a.offsetHeight?a.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(a,null).height:a.currentStyle?a.currentStyle.height:
0));e.className=a.className;a.className="";a.id&&(e.id=a.id);var g=a,h=a.getAttribute("dragAndDrop");g.parentNode.insertBefore(e,g);var l=g.getAttribute("name")||"name_"+(new Date).valueOf(),e=new dhtmlXGridObject(e);window[l]=e;var m=g.getAttribute("onbeforeinit"),l=g.getAttribute("oninit");m&&eval(m);e.setImagePath(e.imgURL||g.getAttribute("imgpath")||g.getAttribute("image_path")||"");(m=g.getAttribute("skin"))&&e.setSkin(m);c&&c(e);for(var m=g.rows[0],n="",r="",u="",v="",w="",x=0;x<m.cells.length;x++){var n=
n+((n?",":"")+m.cells[x].innerHTML),y=m.cells[x].getAttribute("width")||m.cells[x].offsetWidth||(window.getComputedStyle?window.getComputedStyle(m.cells[x],null).width:m.cells[x].currentStyle?m.cells[x].currentStyle.width:0),r=r+((r?",":"")+("*"==y?y:parseInt(y))),u=u+((u?",":"")+(m.cells[x].getAttribute("align")||"left")),v=v+((v?",":"")+(m.cells[x].getAttribute("type")||"ed")),w=w+((w?",":"")+(m.cells[x].getAttribute("sort")||"str"));if(y=m.cells[x].getAttribute("format"))-1!=m.cells[x].getAttribute("type").toLowerCase().indexOf("calendar")?
e._dtmask=y:e.setNumberFormat(y,x)}e.setHeader(n);e.setInitWidths(r);e.setColAlign(u);e.setColTypes(v);e.setColSorting(w);"auto"==a.getAttribute("gridHeight")&&e.enableAutoHeigth(!0);a.getAttribute("multiline")&&e.enableMultiline(!0);(m=g.getAttribute("lightnavigation"))&&e.enableLightMouseNavigation(m);m=g.getAttribute("evenrow");n=g.getAttribute("unevenrow");(m||n)&&e.enableAlterCss(m,n);h&&e.enableDragAndDrop(!0);e.init();a.getAttribute("split")&&e.splitAt(a.getAttribute("split"));e._process_inner_html(g,
1);l&&eval(l);a.parentNode&&a.parentNode.removeChild&&a.parentNode.removeChild(a);return e}dhtmlXGridObject.prototype._process_html=function(a){if(a.tagName&&"TABLE"==a.tagName)return this._process_inner_html(a,0);var c=document.createElement("DIV");c.innerHTML=a.xmlDoc.responseText;a=c.getElementsByTagName("TABLE")[0];this._process_inner_html(a,0)};
dhtmlXGridObject.prototype._process_inner_html=function(a,c){for(var e=a.rows.length,g=c;g<e;g++){var h=a.rows[g].getAttribute("id")||g;this.rowsBuffer.push({idd:h,data:a.rows[g],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};
dhtmlXGridObject.prototype._process_html_row=function(a,c){var e=c.getElementsByTagName("TD"),g=[];a._attrs=this._xml_attrs(c);for(var h=0;h<e.length;h++){var l=e[h],m=l.getAttribute("type");a.childNodes[h]&&(m&&(a.childNodes[h]._cellType=m),a.childNodes[h]._attrs=this._xml_attrs(e[h]));l.firstChild?g.push(l.innerHTML):g.push("");if(1<l.colSpan)for(a.childNodes[h]._attrs.colspan=l.colSpan,m=1;m<l.colSpan;m++)g.push("")}for(h<e.length;h<a.childNodes.length;h++)a.childNodes[h]._attrs={};this._fillRow(a,
this._c_order?this._swapColumns(g):g);return a};dhtmlXGridObject.prototype._get_html_data=function(a,c){for(a=a.firstChild;;){if(!a)return"";"TD"==a.tagName&&c--;if(0>c)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""};dhtmlxEvent(window,"load",function(){for(var a=document.getElementsByTagName("table"),c=0;c<a.length;c++)"dhtmlxGrid"==a[c].className&&dhtmlXGridFromTable(a[c])});
dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()};this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.pagingOn&&this.showRow(a.parentNode.idd),this.selectCell(a.parentNode,
a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!0;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},
k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,
0,!1,!1,!0);this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0);this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_0_1:function(){var a=this.getRowIndex(this.row.idd),a=this._nextRow(a,-1);if(!a||a._sRow||a._rLoad)return!1;
this.selectCell(a,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_0_1:function(){var a=this.getRowIndex(this.row.idd),a=this._nextRow(a,1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_1_1:function(){for(var a=this.getRowIndex(this.row.idd);0<=a;a--)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var a=this.getRowIndex(this.row.idd)+1;a<this.rowsCol.length;a++)this.selectCell(this.rowsCol[a],
this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[a])a=this._nextRow(a-1,1),this.pagingOn&&a&&this.showRow(a.idd),this._Opera_stop=0,this.selectCell(a,this.cell._cellIndex,!0,!1,!0);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},
k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0);this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0);this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+
1):this.scrollPage(1)},k38_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;-1!=a?(a=this._nextRow(a-1,-1),this._Opera_stop=0,this.pagingOn&&a&&this.showRow(a.idd),this.selectCell(a,this.cell._cellIndex,!0,!1,!0)):this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}};
dhtmlXGridObject.prototype.enableExcelKeyMap=function(){dhtmlXGridObject.prototype._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop();this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0;this._key_events.k40_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;if(!(this.cell&&this.cell._cellIndex+
1>=this._cCount)){var a=this._getNextCell(null,1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!0;if(!this.cell||0!=this.cell._cellIndex){var a=this._getNextCell(null,-1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||
!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0);this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},
k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this._nextRow(this.row.rowIndex-
1,-1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this._nextRow(this.row.rowIndex-1,1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!0)},k38_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var a=this.row.rowIndex-1;0<=a;a--)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!0)},k40_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;
for(var a=this.row.rowIndex;a<this.rowsCol.length;a++)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;var c=Math.max(a._r_select||0,this.getRowIndex(this.row.idd));if(c=this._nextRow(c,1))a._r_select=null,this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&a.showRow(c.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,
[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+
1):this.scrollPage(1)},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(this.row.idd){var c=this.getRowIndex(this.row.idd)+1;-1==c||this.pagingOn&&1==c?this._key_events.k33_0_0.apply(this,[]):(c=this._nextRow(c-1,-1),this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&c&&a.showRow(c.idd))}}},k_other:function(a){if(this.editor)return!1;if(!a.ctrlKey&&40<=a.keyCode&&(91>a.keyCode||95<a.keyCode&&111>a.keyCode||
187<a.keyCode)&&this.cell){a=this.cells4(this.cell);if(a.isDisabled())return!1;var c=a.getValue();!1!==a.editable&&a.setValue("");this.editCell();this.editor?(this.editor.val=c,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):a.setValue(c)}}}};
function eXcell_calck(a){function c(a,c,e,m){function n(a){a.target!=r.onReturnSub.cell&&-1==a.path.indexOf(r.topNod)&&(r.removeSelf(),r.onReturnSub.grid.editStop(!1))}this.top=c||0;this.left=a||0;this.onReturnSub=e||null;this.operandB=this.operandA=0;this.operatorA="";this.dotState=this.state=0;var r=this;e.grid._aplNFb||document.addEventListener("click",n,!1);this.calckGo=function(){return Math.round(1E3*eval((this.operandA||"0")+"*1"+this.operatorA+this.operandB+"*1"))/1E3};this.isNumeric=function(a){return-1==
a.search(/[^1234567890]/gi)?!0:!1};this.isOperation=function(a){return-1==a.search(/[^\+\*\-\/]/gi)?!0:!1};this.onCalcKey=function(a){var c=this.innerHTML,e=r.inputZone;0!=r.state&&2!=r.state||!r.isNumeric(c)?(a||event).preventDefault():(a||event)instanceof KeyboardEvent||((a||event).preventDefault(),e.value="0"!=e.value?e.selectionStart==e.selectionEnd?e.value+c:e.value.substr(0,e.selectionStart)+c+e.value.substr(e.selectionEnd):c);0!=r.state&&2!=r.state||"."!=c||0!=r.dotState||(r.dotState=1,e.value+=
c);"±"==c&&(e.value*=-1,r.state=0);0==r.state&&r.isOperation(c)&&(r.operatorA=c,r.operandA=e.value,r.state=1);2==r.state&&r.isOperation(c)&&(r.operandB=e.value,e.value=r.calckGo(),r.operatorA=c,r.operandA=e.value,r.state=1);2==r.state&&"="==c&&(r.operandB=e.value,e.value=r.calckGo(),r.operatorA=c,r.operandA=e.value,r.state=3);1==r.state&&r.isNumeric(c)&&(e.value=c,r.state=2,r.dotState=0);3==r.state&&r.isNumeric(c)&&(e.value=c,r.state=0);3==r.state&&r.isOperation(c)&&(r.operatorA=c,r.operandA=e.value,
r.state=1);"e"==c&&(e.value=Math.E,1==r.state&&(r.state=2),r.dotState=0);"p"==c&&(e.value=Math.PI,1==r.state&&(r.state=2),r.dotState=0);"Off"==c?(e.value=r.old_value,r.removeSelf()):e.focus();if(a||event)(a||event).cancelBubble=!0};this.sendResult=function(){if(2==r.state){var a=r.inputZone;r.operandB=a.value;a.value=r.calckGo();r.operatorA=c;r.operandA=a.value;r.state=3}var c=r.inputZone.value;r.onReturnSub.cell&&void 0!=r.onReturnSub.cell.value&&(r.onReturnSub.cell.value=c);r.removeSelf();r.onReturnSub.grid.editStop(!1)};
this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod);document.removeEventListener("click",n)};this.keyDown=function(){this.className="calcPressed"};this.keyUp=function(){this.className="calcButton"};this.init_table=function(){var a=this.topNod.childNodes[0];if(a&&"TABLE"==a.tagName){for(var c=a.childNodes[0].childNodes,a=1;a<c.length;a++)for(var e=0;e<c[a].childNodes.length;e++)c[a].childNodes[e].onclick=this.onCalcKey,c[a].childNodes[e].onmousedown=this.keyDown,
c[a].childNodes[e].onmouseout=this.keyUp,c[a].childNodes[e].onmouseup=this.keyUp;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0];this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=
this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML="";this.inputZone.onkeydown=function(a){function e(c){if(c)r.keyDown.call(c,a),r.onCalcKey.call(c,a),setTimeout(function(){r.keyUp.call(c,a)},60);else return c}var g=a.keyCode;a.cancelBubble=!0;if(13==g||9==g)return r.sendResult.call({calk:r}),e(!1);if(27==g)return u.value=r.old_value,r.removeSelf(),e(!1);if(188==g||190==g||191==g||110==g)return e(c[5].childNodes[1]);
if(109==g||189==g)return e(c[4].childNodes[3]);if(111==g)return e(c[1].childNodes[3]);if(106==g)return e(c[2].childNodes[3]);if(107==g||187==g)return e(c[3].childNodes[3]);if(96==g||48==g)return e(c[5].childNodes[0]);if(97==g||49==g)return e(c[4].childNodes[0]);if(98==g||50==g)return e(c[4].childNodes[1]);if(99==g||51==g)return e(c[4].childNodes[2]);if(100==g||52==g)return e(c[3].childNodes[0]);if(101==g||53==g)return e(c[3].childNodes[1]);if(102==g||54==g)return e(c[3].childNodes[2]);if(103==g||
55==g)return e(c[2].childNodes[0]);if(104==g||56==g)return e(c[2].childNodes[1]);if(105==g||57==g)return e(c[2].childNodes[2]);if(!(8==g||46==g||16<=g&&18>=g||35<=g&&40>=g||96<=g&&105>=g||112<=g&&123>=g))return e(!1)};r.inputZone.focus()}};this.drawSelf=function(){var a=document.createElement("div");a.className="calcTable";a.style.position="absolute";a.style.top=this.top+"px";a.style.left=this.left+"px";a.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4' style='padding: 0px;'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden; padding: 0px;'><input type='search' class='calcInput' value='0' align='right'></td><td class='calkSubmit'>Ok</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton' style='font-family: Arial, Helvetica; font-size: 12pt;'>±</td><td class='calcButton'>=</td></tr></table>";
a.onclick=function(a){(a||event).cancelBubble=!0};document.body.appendChild(a);this.topNod=a};this.drawSelf();this.init_table();if(m){var u=this.inputZone;u.value=1*m;this.operandA=1*m;u.select();this.state=0;this.dotState=this.operandA==Math.round(this.operandA)?0:1}return this}try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(e){}this.edit=function(){this.val=this.getValue();var a=this.grid.getPosition(this.cell);this.obj=new c(a[0],a[1],this,this.val);this.obj.old_value=this.val};this.getValue=
function(){return this.grid._aplNFb?this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex):this.cell.value};this.detach=function(){this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf());this.obj=null;return this.val!=this.getValue()}}window.eXcell||(window.eXcell=function(){});eXcell_calck.prototype=new eXcell;
eXcell_calck.prototype.setValue=function(a){a=a&&""!=a.toString()._dhx_trim()?parseFloat(a):"0";this.grid._aplNF&&this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};
dhtmlXGridObject.prototype.enablePaging=function(a,c,e,g,h,l){this._pgn_parentObj="string"==typeof g?document.getElementById(g):g;this._pgn_recInfoParentObj="string"==typeof l?document.getElementById(l):l;this.pagingOn=a;this.showRecInfo=h;this.rowsBufferOutSize=parseInt(c);this.currentPage=1;this.pagesInGroup=parseInt(e);this._init_pgn_events();this.setPagingSkin("default")};dhtmlXGridObject.prototype.setXMLAutoLoading=function(a,c){this.xmlFileUrl=a;this._dpref=c};
dhtmlXGridObject.prototype.changePageRelative=function(a){this.changePage(this.currentPage+a)};dhtmlXGridObject.prototype.changePage=function(a){0==arguments.length&&(a=this.currentPage||0);a=parseInt(a);a=Math.max(1,Math.min(a,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)));this.callEvent("onBeforePageChanged",[this.currentPage,a])&&(this.currentPage=parseInt(a),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))};
dhtmlXGridObject.prototype.setPagingSkin=function(a,c){this._pgn_skin=this["_pgn_"+a];"toolbar"==a&&(this._pgn_skin_tlb=c)};dhtmlXGridObject.prototype.setPagingTemplates=function(a,c){this._pgn_templateA=this._pgn_template_compile(a);this._pgn_templateB=this._pgn_template_compile(c);this._page_skin_update()};
dhtmlXGridObject.prototype._page_skin_update=function(a){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));if((a=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))&&a<this.currentPage)return this.changePage(a);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())};
dhtmlXGridObject.prototype._init_pgn_events=function(a){this.attachEvent("onXLE",this._page_skin_update);this.attachEvent("onClearAll",this._page_skin_update);this.attachEvent("onPageChanged",this._page_skin_update);this.attachEvent("onGridReconstructed",this._page_skin_update);this._init_pgn_events=function(){}};
dhtmlXGridObject.prototype._pgn_default=function(a,c,e){if(!this.pagingBlock){this.pagingBlock=document.createElement("DIV");this.pagingBlock.className="pagingBlock";this.recordInfoBlock=document.createElement("SPAN");this.recordInfoBlock.className="recordsInfoBlock";if(!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock);this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock);this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),
this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}a=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,a);this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,a);this._pgn_template_active(this.pagingBlock);this._pgn_template_active(this.recordInfoBlock);this.callEvent("onPaging",[])};
dhtmlXGridObject.prototype._pgn_block=function(a){for(var c=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,e=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),c+this.pagesInGroup),g=[],c=c+1;c<=e;c++)c==this.currentPage?g.push("<a class='dhx_not_active'><b>"+c+"</b></a>"):g.push("<a onclick='this.grid.changePage("+c+"); return false;'>"+c+"</a>");return g.join(a)};
dhtmlXGridObject.prototype._pgn_link=function(a,c,e){return"prevpages"==a||"prev"==a?1==this.currentPage?e:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==a?"1":"this.grid.pagesInGroup")+"); return false;'>"+c+"</a>":"nextpages"==a||"next"==a?this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage||1>=this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==a?1:this.pagesInGroup))?e:"<a onclick='this.grid.changePageRelative("+("next"==a?"1":"this.grid.pagesInGroup")+"); return false;'>"+
c+"</a>":"current"==a?(a=this.currentPage+(c?parseInt(c):0),1>a||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<a?e:"<a "+(a==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+a+"); return false;'>"+a+"</a>"):c};dhtmlXGridObject.prototype._pgn_template_active=function(a){if(a=a.getElementsByTagName("A"))for(var c=0;c<a.length;c++)a[c].grid=this};
dhtmlXGridObject.prototype._pgn_template_compile=function(a){a=a.replace(/\[([^\]]*)\]/g,function(a,e){e=e.split(":");switch(e[0]){case "from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case "total":return'"+arguments[3]+"';case "to":return'"+arguments[2]+"';case "current":case "prev":case "next":case "prevpages":case "nextpages":return"\"+this._pgn_link('"+e[0]+"','"+e[1]+"','"+e[2]+"')+\"";case "currentpages":return"\"+this._pgn_block('"+e[1]+"')+\""}});return new Function('return "'+a+'";')};
dhtmlXGridObject.prototype.i18n.paging={results:"Результаты",records:"Записи с ",to:" по ",page:"Страница ",perpage:"строк на страницу",first:"К первой строке",previous:"Предыдущая тсраница",found:"Найдено записей",next:"Следующая страница",last:"К последней странице",of:" из ",notfound:"Записей не найдено"};dhtmlXGridObject.prototype.setPagingWTMode=function(a,c,e,g){this._WTDef=[a,c,e,g]};
dhtmlXGridObject.prototype._pgn_bricks=function(a,c,e){var g=(this.skin_name||"").split("_")[1],h="";if("light"==g||"modern"==g||"skyblue"==g)h="_"+g;this.pagerElAr=[];this.pagerElAr.pagerCont=document.createElement("DIV");this.pagerElAr.pagerBord=document.createElement("DIV");this.pagerElAr.pagerLine=document.createElement("DIV");this.pagerElAr.pagerBox=document.createElement("DIV");this.pagerElAr.pagerInfo=document.createElement("DIV");this.pagerElAr.pagerInfoBox=document.createElement("DIV");this.pagerElAr.pagerCont.style.width=
(this.globalBox||this.objBox).clientWidth+"px";this.pagerElAr.pagerCont.style.overflow="hidden";this.pagerElAr.pagerCont.style.clear="both";this.pagerElAr.pagerBord.className="dhx_pbox"+h;this.pagerElAr.pagerLine.className="dhx_pline"+h;this.pagerElAr.pagerBox.style.clear="both";this.pagerElAr.pagerInfo.className="dhx_pager_info"+h;this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo);
this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox);this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox);this._pgn_parentObj.innerHTML="";this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont);if(0<this.rowsBuffer.length){g=20;if(a>this.pagesInGroup){var l=document.createElement("DIV"),m=document.createElement("DIV");l.className="dhx_page"+h;m.innerHTML="&larr;";l.appendChild(m);this.pagerElAr.pagerBox.appendChild(l);var n=this;l.pgnum=(Math.ceil(a/this.pagesInGroup)-1)*
this.pagesInGroup;l.onclick=function(){n.changePage(this.pgnum)};g+=22}for(var r=1;r<=this.pagesInGroup;r++){l=document.createElement("DIV");m=document.createElement("DIV");l.className="dhx_page"+h;pageNumber=(Math.ceil(a/this.pagesInGroup)-1)*this.pagesInGroup+r;if(pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;m.innerHTML=pageNumber;l.appendChild(m);a==pageNumber?(l.className+=" dhx_page_active"+h,m.className="dhx_page_active"+h):(n=this,l.pgnum=pageNumber,l.onclick=function(){n.changePage(this.pgnum)});
g+=parseInt(22/3)*pageNumber.toString().length+15;m.style.width=parseInt(22/3)*pageNumber.toString().length+8+"px";this.pagerElAr.pagerBox.appendChild(l)}Math.ceil(a/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)&&(l=document.createElement("DIV"),m=document.createElement("DIV"),l.className="dhx_page"+h,m.innerHTML="&rarr;",l.appendChild(m),this.pagerElAr.pagerBox.appendChild(l),n=this,l.pgnum=Math.ceil(a/this.pagesInGroup)*this.pagesInGroup+1,l.onclick=
function(){n.changePage(this.pgnum)},g+=22);this.pagerElAr.pagerLine.style.width=g+"px"}0<this.rowsBuffer.length&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(c+1)+this.i18n.paging.to+e+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound);this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML=
"&nbsp;";this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.callEvent("onPaging",[])};
dhtmlXGridObject.prototype._pgn_toolbar=function(a,c,e){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var g=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=g&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs")));
if(this._WTDef[2]){var h=this;this.aToolBar.forEachListOption("pages",function(a){h.aToolBar.removeListOption("pages",a)});for(var l={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],m=0;m<g;m++)this.aToolBar.addListOption("pages","pages_"+(m+1),NaN,"button","<span style='padding: 0px "+l+"px 0px 0px;'>"+this.i18n.paging.page+(m+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+a)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results",
"<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(c+1)+this.i18n.paging.to+e+this.i18n.paging.of+this.rowsBuffer.length+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound));this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage);this.callEvent("onPaging",[])};
dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL});this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var a=this;this.aToolBar.attachEvent("onClick",function(c){c=c.split("_");switch(c[0]){case "leftabs":a.changePage(1);break;case "left":a.changePage(a.currentPage-1);break;case "rightabs":a.changePage(99999);break;case "right":a.changePage(a.currentPage+1);break;case "perpagenum":if(c[1]===
this.undefined)break;a.rowsBufferOutSize=parseInt(c[1]);a.changePage();a.aToolBar.setItemText("perpagenum",c[1]+" "+a.i18n.paging.perpage);break;case "pages":if(c[1]===this.undefined)break;a.changePage(c[1]);a.aToolBar.setItemText("pages",a.i18n.paging.page+c[1])}});this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif"));this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),
this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results"));this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif"));this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0));var c;if(c=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&
this.aToolBar.addSeparator();this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0);"object"!=typeof c&&(c=[5,10,15,20,25,30]);for(var e={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],g=0;g<c.length;g++)this.aToolBar.addListOption("perpagenum","perpagenum_"+c[g],NaN,"button","<span style='padding: 0px "+e+"px 0px 0px;'>"+c[g]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar};
dhtmlXGridObject.prototype._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)};dhtmlXGridObject.prototype.doExpand=function(a){this.editStop();a=a.parentNode.parentNode.parentNode;var c=this._h2.get[a.idd];this.callEvent("onOpen",[a.idd,"plus"==c.state?-1:1])&&("plus"==c.state?this.expandKids(a):"minus"!=c.state||c._closeable||this.collapseKids(a))};
function dhtmlxHierarchy(){var a={id:0,childs:[],level:-1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};this.order=[a];this.get={0:a};this.swap=function(a,e){var g=a.parent,h=a.index;g.childs[h]=e;g.childs[e.index]=a;a.index=e.index;e.index=h};this.forEachChildF=function(a,e,g,h){a=this.get[a];for(var l=0;l<a.childs.length;l++)e.apply(g||this,[a.childs[l]])&&(a.childs[l].childs.length&&this.forEachChildF(a.childs[l].id,e,g,h),h&&h.call(g||this,a.childs[l]))};this.forEachChild=function(a,
e,g){a=this.get[a];for(var h=0;h<a.childs.length;h++)e.apply(g||this,[a.childs[h]]),a.childs[h].childs.length&&this.forEachChild(a.childs[h].id,e,g)};this.change=function(a,e,g){a=this.get[a];a[e]!=g&&(a[e]=g,a.update=!0)};this.add=function(a,e){return this.addAfter(a,e)};this.addAfter=function(a,e,g,h){var l=this.get[e||0];h=g?this.get[g].index+(h?0:1):l.childs.length;var m={id:a,childs:[],level:l.level+1,parent:l,index:h,state:dhtmlXGridObject._emptyLineImg};l.state==dhtmlXGridObject._emptyLineImg&&
this.change(e,"state",0==e?"minus":"plus");if(g){for(e=h;e<l.childs.length;e++)l.childs[e].index++;l.childs=l.childs.slice(0,h).concat([m]).concat(l.childs.slice(h,l.childs.length))}else l.childs.push(m);return this.get[a]=m};this.addBefore=function(a,e,g){return this.addAfter(a,e,g,!0)};this.remove=function(a){for(var e=this.get[a||0],g=0;g<e.childs.length;g++)this.deleteAll(e.childs[g].id);e.childs=[];e.parent.childs=e.parent.childs.slice(0,e.index).concat(e.parent.childs.slice(e.index+1));for(g=
e.index;g<e.parent.childs.length;g++)e.parent.childs[g].index--;delete this.get[a]};this.deleteAll=function(a){for(var e=this.get[a||0],g=0;g<e.childs.length;g++)this.deleteAll(e.childs[g].id);e.childs=[];delete this.get[a]};return this}dhtmlXGridObject.prototype._getOpenLenght=function(a,c){var e=this._h2.get[a].childs;c+=e.length;for(var g=0;g<e.length;g++)e[g].childs.length&&"minus"==e[g].state&&(c+=this._getOpenLenght(e[g].id,0));return c};
dhtmlXGridObject.prototype.collapseKids=function(a){var c=this._h2.get[a.idd];if("minus"==c.state&&this.callEvent("onOpenStart",[a.idd,1])){var e=a.rowIndex;0>e&&(e=this.rowsCol._dhx_find(a)+1);this._h2.change(c.id,"state","plus");this._updateTGRState(c);if(this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var c=this._getOpenLenght(this.rowsCol[e-1].idd,0),g=0;g<c;g++)this.rowsCol[e+g].parentNode.removeChild(this.rowsCol[e+g]);this.rowsCol.splice(e,c)}this.callEvent("onGridReconstructed",
[]);this.setSizes();this._h2_to_buff();this.callEvent("onOpenEnd",[a.idd,-1])}};
dhtmlXGridObject.prototype._massInsert=function(a,c,e,g){g=[];var h=_isKHTML?this.obj:this.obj.rows[0].parentNode;this._h2_to_buff();if(this._srnd||this.pagingOn)return this._renderSort();for(var l=this._getOpenLenght(a.id,0),m=0;m<l;m++){var n=this.render_row(e+m);c?c.parentNode.insertBefore(n,c):h.appendChild(n);g.push(n)}this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,e).concat(g).concat(this.rowsCol.slice(e)));return a.childs.length+g.length};
dhtmlXGridObject.prototype.expandKids=function(a,c){var e=this._h2.get[a.idd];if((e.childs.length||e._xml_await)&&"plus"==e.state&&(e._loading||c||this.callEvent("onOpenStart",[e.id,-1]))){var g=this.getRowIndex(e.id)+1;e.childs.length?(e._loading=!1,this._h2.change(e.id,"state","minus"),this._updateTGRState(e),this._massInsert(e,this.rowsCol[g],g),this.callEvent("onGridReconstructed",[])):e._xml_await&&(e._loading=!0,this.callEvent("onDynXLS",[e.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?
"&":"?")+"id="+encodeURIComponent(e.id),this._data_type));this.setSizes();e._loading||this.callEvent("onOpenEnd",[e.id,1]);this._fixAlterCss()}};dhtmlXGridObject.prototype.kidsXmlFile="";
dhtmlXGridObject.prototype.sortTreeRows=function(a,c,e){var g="getValue";this.cells5({parentNode:{grid:this}},this.getColType(a)).getDate&&(g="getDate",c="str");this.forEachRow(function(e){if(e=this._h2.get[e]){var h=this._get_cell_value(e.buff,a,g);"int"==c?(e._sort=parseFloat(h),e._sort=isNaN(e._sort)?-99999999999999:e._sort):e._sort=h}});var h=this,l=1,m=-1;"des"==e&&(l=-1,m=1);var n=null;"function"==typeof c?n=function(a,g){return c(a._sort,g._sort,e,a.id,g.id)}:("cus"==c&&(n=function(c,g){return h._customSorts[a](c._sort,
g._sort,e,c.id,g.id)}),"str"==c&&(n=function(a,c){return a._sort<c._sort?m:a._sort==c._sort?0:l}),"int"==c&&(n=function(a,c){return a._sort<c._sort?m:a._sort==c._sort?0:l}),"date"==c&&(n=function(a,c){return(Date.parse(new Date(a._sort||"01/01/1900"))-Date.parse(new Date(c._sort||"01/01/1900")))*l}));this._sortTreeRows(n,0);this._renderSort(0,!0);this.callEvent("onGridReconstructed",[])};
dhtmlXGridObject.prototype._sortTreeRows=function(a,c){var e=this._h2.get[c].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(e,a):e.sort(a);for(var g=0;g<e.length;g++)e[g].childs.length&&this._sortTreeRows(a,e[g].id),e[g].index=g};dhtmlXGridObject.prototype._renderSort=function(a,c){this._h2_to_buff();var e=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=e};
dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(a){if("TR"==a.buff.tagName){var c=(this._cssSP?a.level%2:a.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[a.id].className=c+(this._cssSU?" "+c+"_"+a.level:"")+" "+(this.rowsAr[a.id]._css||"")+(-1!=this.rowsAr[a.id].className.indexOf("rowselected")?" rowselected":"")}},this)};
dhtmlXGridObject.prototype.moveRowUDTG=function(a,c){var e=this._h2.get[a],g=e.parent.childs[e.index+c];if(g&&g.parent==e.parent){var h=[e.state,g.state];this.collapseKids(this.rowsAr[e.id]);this.collapseKids(this.rowsAr[g.id]);var l=this.rowsCol._dhx_find(this.rowsAr[a]),m=this.rowsBuffer._dhx_find(this.rowsAr[a]),n=this.obj.rows[0].parentNode.removeChild(this.rowsCol[l]),r=this.rowsCol[l+(1==c?2:c)];r?r.parentNode.insertBefore(n,r):this.obj.rows[0].parentNode.appendChild(n);this.rowsCol._dhx_swapItems(l,
l+c);this.rowsBuffer._dhx_swapItems(m,m+c);this._h2.swap(g,e);"minus"==h[0]&&this.expandKids(this.rowsAr[e.id]);"minus"==h[1]&&this.expandKids(this.rowsAr[g.id]);this._fixAlterCss(Math.min(l,l+c))}};
function eXcell_tree(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-
6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(a){a||(a=event);return a.cancelBubble=!0},this.er.className+=" editable",this.er.firstChild.onclick=function(a){(a||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-
2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())};this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace("editable","");var a=this.val!=this.er.innerHTML;this.obj=this.er=null;return a}};this.getValue=function(){return this.getLabel()};this.setImage=function(a){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+a;this.grid._h2.get[this.cell.parentNode.idd].image=a};this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image};
this.setLabel=function(a){this.setValueA(a)};this.getLabel=function(a){return this.cell.parentNode.valTag.innerHTML}}eXcell_tree.prototype=new eXcell;eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.valTag.innerHTML=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};
eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){var c={};c.spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>";c.imst="<img style='margin-top:-2px;' src='"+this.grid.iconTree;c.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree);c.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>";
c.plus=c.imst+"plus.gif"+c.imact;c.minus=c.imst+"minus.gif"+c.imact;c.blank=c.imst+"blank.gif"+c.imact;c.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>";c.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" ><span id='nodeval'>";c.close="</span></div>";this.grid._tgc=c}var c=this.grid._tgc,e=this.cell.parentNode.idd,g=
this.grid._h2.get[e];if(this.grid.kidsXmlFile||this.grid._slowParse)g.has_kids=g.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=g.state,g._xml_await=!!g.has_kids;g.image=g.image||this.cell._attrs.image||"leaf.gif";g.label=a;for(var h=[c.start],l=0;l<g.level;l++)h.push(c.spacer);g.has_kids?(h.push(c.plus),g.state="plus"):h.push(c.imst+g.state+".gif"+c.imact);h.push(c.imsti);h.push(g.image);h.push(c.itemim);h.push(g.label);h.push(c.close);this.cell.innerHTML=h.join("");this.cell._treeCell=
!0;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[g.level];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[g.level+2];_isKHTML&&(this.cell.vAlign="top");0!=g.parent.id&&"plus"==g.parent.state&&(this.grid._updateTGRState(g.parent,!1),this.cell.parentNode._skipInsert=!0);this.grid.callEvent("onCellChanged",[e,this.cell._cellIndex,a])};
dhtmlXGridObject.prototype._process_tree_xml=function(a,c){this._parsing=!0;var e=!1;c||(this.render_row=this.render_row_tree,e=!0,c=a.getAttribute("parent")||0,"0"==c&&(c=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2));var g=dhx4.ajax.xpath(this.xml.row,a);this._open=this._open||[];for(var h=0;h<g.length;h++){var l=g[h].getAttribute("id");l||(l=this.uid(),g[h].setAttribute("id",l));var m=this._h2.add(l,c);m.buff={idd:l,data:g[h],_parser:this._process_xml_row,_locator:this._get_xml_data};
g[h].getAttribute("open")&&(m.state="minus",this._open.push(l));this.rowsAr[l]=m.buff;this._process_tree_xml(g[h],l)}if(e){g.length?0==c||this._srnd||this._h2.change(c,"state","minus"):this._h2.change(c,"state",dhtmlXGridObject._emptyLineImg);for(h=0;h<this._open.length;h++)e=this._h2.get[this._open[h]],e.childs.length||(e.state=dhtmlXGridObject._emptyLineImg);this._updateTGRState(this._h2.get[c]);this._h2_to_buff();0!=c&&this._srnd?this.openItem(c):this.pagingOn?this._renderSort():this.render_dataset();
if(this.kidsXmlFile)for(h=0;h<this._open.length;h++)e=this._h2.get[this._open[h]],e._xml_await&&this.expandKids({idd:e.id});this._open=[];!1===this._slowParse&&this.forEachRow(function(a){this.render_row_tree(0,a)});this._parsing=!1;0==c||this._srnd||this.callEvent("onOpenEnd",[c,1])}};
dhtmlXGridObject.prototype._h2_to_buff=function(a){a||(a=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var c=0;c<a.childs.length;c++)this.rowsBuffer.push(a.childs[c].buff),"minus"==a.childs[c].state&&this._h2_to_buff(a.childs[c])};
dhtmlXGridObject.prototype.render_row_tree=function(a,c){if(c)var e=this._h2.get[c],e=e?e.buff:e;else e=this.rowsBuffer[a];if(!e)return-1;if(e._parser){if(this.rowsAr[e.idd]&&"TR"==this.rowsAr[e.idd].tagName)return this._h2.get[e.idd].buff=this.rowsBuffer[a]=this.rowsAr[e.idd];var g=this._prepareRow(e.idd);this.rowsAr[e.idd]=g;c||(this.rowsBuffer[a]=g);this._h2.get[e.idd].buff=g;e._parser.call(this,g,e.data);this._postRowProcessing(g);return g}return e};
dhtmlXGridObject.prototype._removeTrGrRow=function(a,c){if(c)this._h2.forEachChild(c.id,function(a){this._removeTrGrRow(null,a);delete this.rowsAr[a.id]},this);else{var e=this.getRowIndex(a.idd);c=this._h2.get[a.idd];if(-1!=e&&e!==this.undefined){var g=1;c&&"minus"==c.state&&(g+=this._getOpenLenght(c.id,0));for(var h=0;h<g;h++)this.rowsCol[h+e]&&this.rowsCol[h+e].parentNode.removeChild(this.rowsCol[h+e]);if(this._fake){for(h=0;h<g;h++)this._fake.rowsCol[h+e]&&this._fake.rowsCol[h+e].parentNode.removeChild(this._fake.rowsCol[h+
e]);1<g&&this._fake.rowsCol.splice(e+1,g-1)}this.rowsCol.splice(e,g);this.rowsBuffer.splice(e,g)}c&&(this._removeTrGrRow(null,c),delete this.rowsAr[c.id],1==c.parent.childs.length&&(this._h2.change(c.parent.id,"state",dhtmlXGridObject._emptyLineImg),this._updateTGRState(c.parent)),this._h2.remove(c.id))}};dhtmlXGridObject.prototype.openItem=function(a){var c=this._h2.get[a||0];if(a=this.getRowById(a||0))c.parent&&0!=c.parent.id&&this.openItem(c.parent.id),this.expandKids(a)};
dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow;
dhtmlXGridObject.prototype.addRow=function(a,c,e,g,h,l){if(!this._h2)return this._addRowClassic(a,c,e);g=g||0;this.cellType._dhx_find("tree");"string"==typeof c&&(c=c.split(this.delim));var m=this._h2.get[a];m||(0==g?e=this.rowsBuffer.length:(e=this.getRowIndex(g)+1,"minus"==this._h2.get[g].state?e+=this._getOpenLenght(g,0):this._skipInsert=!0));m=m||this._h2.add(a,g);m.image=h;m.has_kids=l;return m.buff=this._addRowClassic(a,c,e)};
dhtmlXGridObject.prototype.addRowBefore=function(a,c,e,g,h){if(this.rowsAr[e]){if(!this._h2)return this.addRow(a,c,this.getRowIndex(e));var l=this._h2.get[e].parent.id,m=this.getRowIndex(e);-1==m&&(this._skipInsert=!0);this._h2.addBefore(a,l,e);return this.addRow(a,c,m,this._h2.get[e].parent.id,g,h)}};
dhtmlXGridObject.prototype.addRowAfter=function(a,c,e,g,h){if(this.rowsAr[e]){if(!this._h2)return this.addRow(a,c,this.getRowIndex(e)+1);var l=this._h2.get[e].parent.id,m=this.getRowIndex(e);-1==m&&(this._skipInsert=!0);"minus"==this._h2.get[e].state?m+=this._getOpenLenght(e,0)+1:m++;this._h2.addAfter(a,l,e);return this.addRow(a,c,m,l,g,h)}};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this._slowParse=dhx4.s2b(a)};
dhtmlXGridObject.prototype._copyTreeGridRowContent=function(a,c,e){var g=this.cellType._dhx_find("tree");for(i=0;i<a.cells.length;i++)i!=g?this.cells(e,i).setValue(this.cells(c,i).getValue()):this.cells(e,i).setValueA(this.cells(c,i).getValue())};dhtmlXGridObject.prototype.closeItem=function(a){(a=this.getRowById(a))&&this.collapseKids(a)};dhtmlXGridObject.prototype.deleteChildItems=function(a){if(a=this._h2.get[a])for(;a.childs.length;)this.deleteRow(a.childs[0].id)};
dhtmlXGridObject.prototype.getAllSubItems=function(a){var c=[];if(a=this._h2.get[a||0])for(var e=0;e<a.childs.length;e++)c.push(a.childs[e].id),a.childs[e].childs.length&&(c=c.concat(this.getAllSubItems(a.childs[e].id).split(this.delim)));return c.join(this.delim)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(a,c){var e=this._h2.get[a||0];return e?e.childs[c]?e.childs[c].id:null:null};dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType._dhx_find("tree")).getLabel()};
dhtmlXGridObject.prototype.getOpenState=function(a){if(a=this._h2.get[a||0])return"minus"==a.state?!0:!1};dhtmlXGridObject.prototype.getParentId=function(a){return(a=this._h2.get[a||0])&&a.parent?a.parent.id:null};dhtmlXGridObject.prototype.getSubItems=function(a){var c=[];if(a=this._h2.get[a||0])for(var e=0;e<a.childs.length;e++)c.push(a.childs[e].id);return c.join(this.delim)};
dhtmlXGridObject.prototype.expandAll=function(a){this._renderAllExpand(a||0);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype._renderAllExpand=function(a){a=this._h2.get[a].childs;for(var c=0;c<a.length;c++)a[c].childs.length&&(this._h2.change(a[c].id,"state","minus"),this._updateTGRState(a[c]),this._renderAllExpand(a[c].id))};
dhtmlXGridObject.prototype.collapseAll=function(a){this._h2.forEachChild(a||0,function(a){a&&"minus"==a.state&&(a.state="plus",a.update=!0,this._updateTGRState(a))},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype.hasChildren=function(a){return(a=this._h2.get[a])&&a.childs.length?a.childs.length:a._xml_await?-1:0};
dhtmlXGridObject.prototype.setItemCloseable=function(a,c){var e=this._h2.get[a];e&&(e._closeable=!dhx4.s2b(c))};dhtmlXGridObject.prototype.setItemText=function(a,c){return this.cells(a,this.cellType._dhx_find("tree")).setLabel(c)};dhtmlXGridObject.prototype.setItemImage=function(a,c){this._h2.get[a].image=c;this.rowsAr[a].imgTag.nextSibling.src=(this.iconURL||"")+c};dhtmlXGridObject.prototype.getItemImage=function(a){this.getRowById(a);return this._h2.get[a].image};
dhtmlXGridObject.prototype.setImageSize=function(a,c){this._img_width=a;this._img_height=c};dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc=!dhx4.s2b(a)};
dhtmlXGridObject.prototype.getLevel=function(a){return(a=this._h2.get[a||0])?a.level:-1};dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(a,c){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[a].style.display=c)};dhtmlXGridObject._emptyLineImg="blank";
if(window.dhtmlxHierarchy){var eXcell_tree_property=function(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.isDisabled=function(){return!0};this.getValue=function(){return this.cell.parentNode.valTag.innerHTML}};window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachPropertyGrid=function(){var a=this.attachGrid();new dhtmlXPropertyGrid(a);return a});eXcell_tree_property.prototype=new eXcell_tree;eXcell_tree_property.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);
if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){var c={};c.imst="<img src='"+this.grid.iconTree;c.imsti="<img src='"+(this.grid.iconURL||this.grid.iconTree);c.imact="' align='absmiddle'  onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;' class='property_image'>";c.plus=c.imst+"plus.gif"+c.imact;c.minus=c.imst+"minus.gif"+c.imact;c.blank=c.imst+"blank.gif"+c.imact;c.start="<div style=' overflow:hidden; white-space : nowrap; height:"+
(_isIE?20:21)+"px;'>";c.itemim="<span id='nodeval'>";c.close="</span><div class='property_space'></div></div>";this.grid._tgc=c}var c=this.grid._tgc,e=this.cell.parentNode.idd,g=this.grid._h2.get[e];if(this.grid.kidsXmlFile||this.grid._slowParse)g.has_kids=g.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=g.state,g._xml_await=!!g.has_kids;g.image=g.image||this.cell._attrs.image||"leaf.gif";g.label=a;var h=[c.start];g.has_kids?(h.push(c.plus),g.state="plus"):h.push(c.imst+g.state+".gif"+c.imact+
c.itemim);h.push(g.label);h.push(c.close);this.cell.innerHTML=h.join("");this.cell.style.paddingLeft="0px";this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[0];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[1];g.childs.length&&(this.grid.getRowById(this.cell.parentNode.idd)._attrs["class"]=" dhx_parent_row ",this.cell.nextSibling.style.borderLeft="1px solid #D4D0C8");_isKHTML&&(this.cell.vAlign="top");0!=g.parent.id&&"plus"==g.parent.state&&(this.grid._updateTGRState(g.parent,
!1),this.cell.parentNode._skipInsert=!0);this.grid.callEvent("onCellChanged",[e,this.cell._cellIndex,a])}}
function eXcell_list(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.cell.innerHTML="<select style='width:100%;' ></select>";this.obj=this.cell.firstChild;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=function(a){(a||event).cancelBubble=!0};this.obj.onkeydown=function(a){a=a||event;if(9==a.keyCode||13==a.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:a.keyCode,shiftKey:a.shiftKey,
srcElement:"0"}),!1;a.cancelBubble=!0};var a=this;this.obj.onchange=function(){a.grid.editStop();a=null};for(var e=this.getAttribute("values").split(","),g=0;g<e.length;g++)this.obj.options[g]=new Option(e[g],e[g]);this.obj.value=this.cell._val;this.obj.focus()};this.getValue=function(){return this.cell._val};this.detach=function(){var a=this.obj.value,e=this.obj.selectedIndex;this.setValue(-1==e?"":this.obj.options[e].value);return a!=this.getValue()}}eXcell_list.prototype=new eXcell;
eXcell_list.prototype.setValue=function(a){(this.cell._val=a)&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.setCValue(this.grid._aplNF(a,this.cell._cellIndex))):(this.cell._clearCell=!0,this.setCValue("&nbsp",""))};
function dhtmlXPropertyGrid(a){a=a.objBox?a:new dhtmlXGridObject(a);a.setHeader("Name,Value");a.setColAlign("left,left");window.dhtmlxHierarchy?(a.setColTypes("tree_property,ro"),a.isTreeGrid=function(){return!0},a.enableSmartXMLParsing(!1)):a.setColTypes("ro,ro");a.setColSorting("na,na");a.setInitWidths("*,*");a.setNoHeader(!0);a.setSkin("dhx_skyblue");a.entBox.className+=" gridbox_property";a.i18n.validation_error="Value is incorrect";a.attachEvent("onRowSelect",function(a,e){this.editor||(this.selectCell(this.getRowIndex(a),
1),this.editCell())});a.attachEvent("onBeforeSelect",function(a){return this._block_selection?!1:!0});a.attachEvent("onRowCreated",function(a,e){this._h2&&this._h2.get[a].childs.length||(e.childNodes[1].style.backgroundColor="white")});a.attachEvent("onEditCell",function(a,e,g,h,l){1==a&&this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select();if(2==a&&l!=h){a=!0;switch(this.cells(e,1).getAttribute("validate")){case "int":a=parseFloat(h)==h}if(a)this._block_selection=!1,this.callEvent("onPropertyChanged",
[this.cells(e,0).getValue(),h,l]);else{alert(this.i18n.validation_error);this._block_selection=!0;var m=this;window.setTimeout(function(){m.selectCell(e,g);m.editCell()},1)}}return!0});a._key_events.k13_0_0=a._key_events.k9_0_0=a._key_events.k40_0_0;a.getProperties=function(){this.editStop(!0);var a={};this.forEachRow(function(e){a[this.cells(e,0).getValue()]=this.cells(e,1).getValue()});return a};a.setProperties=function(a){this.editStop();this.forEachRow(function(e){var g=this.cells(e,0).getValue();
"undefined"!=typeof a[g]&&this.cells(e,1).setValue(a[g])});this.callEvent("onPropertyChanged",[])};return a}
function dhtmlXForm(a,c,e){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",
center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var g=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize="dhx_terrace"==a?"13px":"12px";this._updateBlocks();this.forEachItem(function(c){var e=g.getItemType(c);"undefined"!=typeof g.items[e]&&"function"==typeof g.items[e].setSkin&&g.doWithItem(c,"setSkin",a)})};this.skin=e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||
"dhx_skyblue";this.separator=",";this.live_validate=!1;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont="object"==typeof a?a:document.getElementById(a);a._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(a){a=a||event;if(13==
a.keyCode){var c=a.target||a.srcElement;("undefined"==typeof c.tagName||"textarea"!=String(c.tagName).toLowerCase()||a.ctrlKey)&&g.callEvent("onEnter",[])}});this.b_index=null;this.base=[];this._prepare=function(a,c){null==this.b_index?this.b_index=0:this.b_index++;var e=null,g=null;if(null!=c){0>c&&(c=0);for(var h=0,v=0;v<this.cont.childNodes.length;v++)for(var w=0;w<this.cont.childNodes[v].childNodes.length;w++)null==g&&1!=this.cont.childNodes[v].childNodes[w]._isNestedForm&&(h==c&&(e=this.cont.childNodes[v].nextSibling,
g=this.cont.childNodes[v].childNodes[w]),h++)}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";"undefined"!=typeof a&&(this.base[this.b_index].style.cssText+=" margin-left:"+a+"px!important;");null!=e?this.cont.insertBefore(this.base[this.b_index],e):this.cont.appendChild(this.base[this.b_index]);if(null!=g)for(;null!=g;)e=g,g=g.nextSibling,this.base[this.b_index].appendChild(e)};this.setSizes=function(){};this._mergeSettings=function(a){var c=
-1,e={type:"settings"},g;for(g in this.idef)e[g]=this.idef[g];for(var h=0;h<a.length;h++)if("undefined"!=typeof a[h]&&"settings"==a[h].type){for(g in a[h])e[g]=a[h][g];c=h}a[0<=c?c:a.length]=e;return a};this._genStr=function(a){for(var c="dhxId_",e=0;e<a;e++)c+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return c};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=this._parentForm?this._genStr(12)+"_":a._rId;this.objPull={};this.itemPull=
{};this._ic=0;this._addItem=function(a,c,e,h,u,v,w){this.items[a]._index&&(this.getForm()._indexId.push(c),this.getForm()._idIndex[c]={ind:this.getForm()._indexId.length-1});a||(a=this._type);if("list"==a&&null!=u&&null!=this.itemPull[this.idPrefix+u]&&"function"==typeof this.itemPull[this.idPrefix+u]._addSubListNode)u=this.itemPull[this.idPrefix+u]._addSubListNode();else if("newcolumn"==a)u={};else{var x=this.base[this.b_index],y=null;if("undefined"!=typeof v&&!isNaN(v)&&"list"!=a)for(v=Math.max(parseInt(v),
0)+1,u=0;u<this.cont.childNodes.length;u++)for(var C=0;C<this.cont.childNodes[u].childNodes.length;C++)null==y&&1!=this.cont.childNodes[u].childNodes[C]._isNestedForm&&(v--,0==v&&(y=this.cont.childNodes[u].childNodes[C],x=this.cont.childNodes[u]));else if("list"==a)for(var A in this.itemPull)A==this.idPrefix+c&&(y=this.itemPull[A].nextSibling,null!=this.itemPull[A]._listBase&&0<this.itemPull[A]._listBase.length&&(y=this.itemPull[A]._listBase[this.itemPull[A]._listBase.length-1]));u=document.createElement("DIV");
1==w&&null!=y&&(y=y.nextSibling);null!=y?x.insertBefore(u,y):x.appendChild(u)}u._idd=c;u._rId=this._rId;"undefined"!=typeof u.style&&("undefined"==typeof e.offsetLeft&&0<this.idef.offsetLeft&&(e.offsetLeft=this.idef.offsetLeft),"undefined"==typeof e.offsetTop&&0<this.idef.offsetTop&&(e.offsetTop=this.idef.offsetTop),w="","undefined"!=typeof e.offsetLeft&&(w+=" padding-left:"+e.offsetLeft+"px!important;"),"undefined"!=typeof e.offsetTop&&(w+=" padding-top:"+e.offsetTop+"px!important;"),u.style.cssText+=
w);"block"==a&&isNaN(e.blockOffset)&&(e.blockOffset=this.idef.blockOffset);if("list"==a)return"undefined"==typeof u._ofsNested&&(u._ofsNested=this.idef_const.offsetNested),null!=h&&(u._sId=h),a=this.items[a].render(u,this.skin),this.itemPull[this.idPrefix+c]._listObj||(this.itemPull[this.idPrefix+c]._listObj=[]),this.itemPull[this.idPrefix+c]._list||(this.itemPull[this.idPrefix+c]._list=[]),this.itemPull[this.idPrefix+c]._listBase||(this.itemPull[this.idPrefix+c]._listBase=[]),this.itemPull[this.idPrefix+
c]._listObj.push(a[0]),this.itemPull[this.idPrefix+c]._list.push(a[1]),this.itemPull[this.idPrefix+c]._listBase.push(u),a[1].checkEvent=function(a){return g.checkEvent(a)},a[1].callEvent=function(a,c){return g.callEvent(a,c)},a[1].getForm=function(){return g.getForm()},a[1]._initObj(this._mergeSettings(e)),u._inBlcok&&(u.className+=" in_block"),a[1];if("newcolumn"==a)this._prepare(e.offset,v);else{"label"==a&&0==this._ic++&&(e._isTopmost=!0);e.position=this.apos_css[e.position&&this.apos_css[e.position]?
e.position:this.idef.position];u.className=e.position+("string"==typeof e.className?" "+e.className:"");e.labelWidth||(e.labelWidth=this.idef.labelWidth);e.labelHeight||(e.labelHeight=this.idef.labelHeight);"undefined"!=typeof e.wrap&&(e.wrap=window.dhx4.s2b(e.wrap));e.labelAlign=this.align_css[e.labelAlign]?this.align_css[e.labelAlign]:this.align_css[this.idef.labelAlign];e.inputWidth=e.width?e.width:e.inputWidth?e.inputWidth:this.idef.inputWidth;e.inputHeight||(e.inputHeight=this.idef.inputHeight);
"undefined"!=typeof e.note&&(null!=e.note.length&&null!=e.note[0]&&(e.note=e.note[0]),"undefined"==typeof e.note.width&&(e.note.width=this.idef.noteWidth),"auto"==e.note.width&&(e.note.width=e.inputWidth));u.checkEvent=function(a){return g.checkEvent(a)};u.callEvent=function(a,c){return g.callEvent(a,c)};u.getForm=function(){return g.getForm()};u._autoCheck=function(a){g._autoCheck(a)};"string"==typeof e.readonly&&(e.readonly=window.dhx4.s2b(e.readonly));"string"==typeof e.autoStart&&(e.autoStart=
window.dhx4.s2b(e.autoStart));"string"==typeof e.autoRemove&&(e.autoRemove=window.dhx4.s2b(e.autoRemove));"string"==typeof e.titleScreen&&(e.titleScreen=window.dhx4.s2b(e.titleScreen));"string"==typeof e.info&&(e.info=window.dhx4.s2b(e.info));"string"==typeof e.hidden&&(e.hidden=window.dhx4.s2b(e.hidden));"string"==typeof e.checked&&(e.checked=window.dhx4.s2b(e.checked));if("undefined"!=typeof e.userdata)for(A in e.userdata)this.getForm().setUserData(c,A,e.userdata[A]);e.validate&&(u._validate=!typeof("undefined"!=
e.validate)||"function"!=typeof e.validate&&"function"!=typeof window[e.validate]?String(e.validate).split(this.separator):[e.validate]);"undefined"!=typeof e.required&&("string"==typeof e.required&&(e.required=window.dhx4.s2b(e.required)),u._required=1==e.required);if(u._required){u._validate||(u._validate=[]);h=!1;for(C=0;C<u._validate.length;C++)h=h||"NotEmpty"==u._validate[C];h||u._validate.push("NotEmpty")}u._ll=e.position==this.apos_css["label-left"]||e.position==this.apos_css["label-top"];
this.objPull[this.idPrefix+c]=this.items[a].render(u,e);this.itemPull[this.idPrefix+c]=u}};this._initObj=function(a,c){if("undefined"!=typeof a.data){var e=null;"undefined"!=typeof c&&(e=c.match(/(\?|\&)id\=([a-z0-9_\-]*)/i),null!=e&&null!=e[0]&&(e=e[0].split("=")[1]));!0===this.callEvent("onBeforeDataLoad",[e,window.dhx4._copyObj(a.data)])&&(this.formId=e,this._last_load_data=a,this.setFormData(a.data),this.resetDataProcessor("updated"))}else{this._prepare();for(e=0;e<a.length;e++)if("undefined"!=
typeof a[e]&&"settings"==a[e].type)for(var g in a[e])this.idef[g]=a[e][g];for(e=0;e<a.length;e++)this._prepareItem(a[e]);this._autoCheck()}};this._prepareItem=function(a,c,e){var g=null!=a&&null!=a.type?a.type:"";if(this.items[g]){a.name||(a.name=this._genStr(12));var h=a.name;if(null!=this.objPull[this.idPrefix+h]||"radio"==g)h=this._genStr(12);a.label=a.label||"";a.value=a.value;a.checked=window.dhx4.s2b(a.checked);a.disabled=window.dhx4.s2b(a.disabled);a.name=a.name||this._genStr(12);a.options=
a.options||[];a.rows=a.rows||"none";a.uid=this._genStr(12);this._addItem(g,h,a,null,null,c,e);!1===this._parentEnabled&&this._disableItem(h);for(c=0;c<a.options.length;c++)null!=a.options[c].list&&(a.options[c].value||(a.options[c].value=this._genStr()),e=this._addItem("list",h,a.options[c].list,a.options[c].value,null),e._subSelect=!0,e._subSelectId=a.options[c].value);null!=a.list&&(a.listParent||(a.listParent=a.name),this._addItem("list",h,a.list,null,a.listParent))}};this._xmlSubItems={item:"list",
option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(a,c){"undefined"==typeof c&&(c=!0);if(c)var e=a.getElementsByTagName("items"),e=null!=e&&null!=e[0]?e[0]:null,g=a.getElementsByTagName("data"),g=null!=g&&null!=g[0]?g[0]:null;else e=a;var h=c?[]:{};if(null!=e)for(var v=0;v<e.childNodes.length;v++)if("undefined"!=typeof e.childNodes[v].tagName){var w=e.childNodes[v].tagName;if(null!=this._xmlSubItems[w]){w=this._xmlSubItems[w];"undefined"==typeof h[w]&&(h[w]=[]);for(var x=
e.childNodes[v],y={},C=0;C<x.attributes.length;C++)y[x.attributes[C].name]=x.attributes[C].value;"note"==w&&(y.text=x.firstChild.nodeValue);"_userdata"==w&&(y.value=null!=x.firstChild&&null!=x.firstChild.nodeValue?x.firstChild.nodeValue:"");var x=this._xmlToObject(x,!1),A;for(A in x)if("_userdata"==A)for(y.userdata||(y.userdata={}),C=0;C<x[A].length;C++)y.userdata[x[A][C].name]=x[A][C].value;else y[A]=x[A];c?h.push(y):h[w].push(y)}}if(null!=g)for(h={data:{}},v=0;v<g.childNodes.length;v++)"undefined"!=
typeof g.childNodes[v].tagName&&(h.data[g.childNodes[v].tagName]=null!=g.childNodes[v].firstChild?g.childNodes[v].firstChild.nodeValue:"");return h};this._autoCheck=function(a){!0===this._locked?a=!1:"undefined"==typeof a&&(a=!0);for(var c in this.itemPull){var e=a&&!0!==this.itemPull[c]._udis;this[e?"_enableItem":"_disableItem"](this.itemPull[c]._idd);null!=this.getForm()._idIndex[this.itemPull[c]._idd]&&(this.getForm()._idIndex[this.itemPull[c]._idd].enabled=e);e=e&&("boolean"==typeof this.itemPull[c]._checked?
this.itemPull[c]._checked:!0);if(this.itemPull[c]._list)for(var g=0;g<this.itemPull[c]._list.length;g++){var h=!0;if(1==this.itemPull[c]._list[g]._subSelect){var h=!1,v=this.getItemValue(this.itemPull[c]._idd);if("object"!=typeof v||"number"!=typeof v.length)v=[v];for(var w=0;w<v.length;w++)h=v[w]==this.itemPull[c]._list[g]._subSelectId||h;this.itemPull[c]._listObj[g][h?"show":"hide"](this.itemPull[c]._listBase[g])}this.itemPull[c]._list[g]._autoCheck(e&&h)}}};this.doWithItem=function(a,c,e,g,h,v){if("object"==
typeof a){var w=a[0],x=a[1],y=null,C;for(C in this.itemPull){if((this.itemPull[C]._value==x||null===x)&&this.itemPull[C]._group==w)return this.objPull[C][c](this.itemPull[C],e,g,h,v);if(null!=this.itemPull[C]._list&&!y)for(var A=0;A<this.itemPull[C]._list.length;A++)y=this.itemPull[C]._list[A].doWithItem(a,c,e,g,h)}if(null!=y)return y;if("getType"==c)return this.doWithItem(a[0],"getType")}else{if(this.itemPull[this.idPrefix+a])return this.objPull[this.idPrefix+a][c](this.itemPull[this.idPrefix+a],
e,g,h,v);y=null;for(C in this.itemPull)if(this.itemPull[C]._list&&!y)for(A=0;A<this.itemPull[C]._list.length;A++)null==y&&(y=this.itemPull[C]._list[A].doWithItem(a,c,e,g,h,v));return y}};this._removeItem=function(a,c){null!=c?a=this.doWithItem([a,c],"destruct"):this.doWithItem(a,"destruct");this._clearItemData(a)};this._clearItemData=function(a){if(this.itemPull[this.idPrefix+a]){a=this.idPrefix+a;try{this.objPull[a]=null,this.itemPull[a]=null,delete this.objPull[a],delete this.itemPull[a]}catch(c){}}else for(var e in this.itemPull)if(this.itemPull[e]._list)for(var g=
0;g<this.itemPull[e]._list.length;g++)this.itemPull[e]._list[g]._clearItemData(a)};this.isItem=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"isExist")};this.getItemType=function(a,c){a=[a,c||null];return this.doWithItem(a,"getType")};this.forEachItem=function(a){for(var c in this.objPull)if("radio"==this.objPull[c].t?a(this.itemPull[c]._group,this.itemPull[c]._value):a(String(c).replace(this.idPrefix,"")),this.itemPull[c]._list)for(var e=0;e<this.itemPull[c]._list.length;e++)this.itemPull[c]._list[e].forEachItem(a)};
this.setItemLabel=function(a,c,e){null!=e?a=[a,c]:e=c;this.doWithItem(a,"setText",e)};this.getItemLabel=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,"check");this._autoCheck()};this.uncheckItem=function(a,c){null!=c&&(a=[a,
c]);this.doWithItem(a,"unCheck");this._autoCheck()};this.isItemChecked=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(a,c){for(var e in this.itemPull){if(this.itemPull[e]._group==a&&(null==c||this.itemPull[e]._value==c))return this.itemPull[e]._idd;if(null!=this.itemPull[e]._list)for(var g=0;g<this.itemPull[e]._list.length;g++){var h=this.itemPull[e]._list[g]._getRGroup(a,
c);if(null!=h)return h}}return null};this.setItemValue=function(a,c){this.resetValidateCss(a,c);return"radio"==this.getItemType(a)?(null!=this._getRGroup(a,c)?this.checkItem(a,c):this.uncheckItem(a,this.getCheckedValue(a)),null):this.doWithItem(a,"setValue",c)};this.getItemValue=function(a,c){return"radio"==this.getItemType(a)?this.getCheckedValue(a):this.doWithItem(a,"getValue",c)};this.updateValues=function(){this._updateValues()};this.showItem=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,
"show")};this.hideItem=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,"hide")};this.isItemHidden=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(a,c){this.doWithItem(a,"setWidth",c)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(a,c){this.doWithItem(a,"setHeight",c)};this.setItemFocus=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,
"setFocus")};this._updateValues=function(){for(var a in this.itemPull)if(this.objPull[a]&&"function"==typeof this.objPull[a].updateValue&&this.objPull[a].updateValue(this.itemPull[a]),this.itemPull[a]._list)for(var c=0;c<this.itemPull[a]._list.length;c++)this.itemPull[a]._list[c]._updateValues()};this._getItemByName=function(a){for(var c in this.itemPull){if(this.itemPull[c]._idd==a)return this.itemPull[c];if(null!=this.itemPull[c]._list)for(var e=0;e<this.itemPull[c]._list.length;e++){var g=this.itemPull[c]._list[e]._getItemByName(a);
if(null!=g)return g}}return null};this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,c,e){if(a=this["radio"==this.getItemType(a)?"_getRGroup":"_getItemByName"](a))null!=a._vcss&&this._resetValidateCss(a),a._vcss="string"==typeof e?e:"validate_"+(!0===c?"ok":"error"),a.className+=" "+a._vcss};this.resetValidateCss=function(a){for(var c in this.itemPull)if(null!=this.itemPull[c]._vcss&&this._resetValidateCss(this.itemPull[c]),
null!=this.itemPull[c]._list)for(a=0;a<this.itemPull[c]._list.length;a++)this.itemPull[c]._list[a].resetValidateCss()};this.validate=function(a){if(0!=this.callEvent("onBeforeValidate",[])){var c=!0;this.forEachItem(function(a,e){"undefined"!=typeof e&&(a=[a,e]);var h=g.doWithItem(a,"_validate");"boolean"!=typeof h&&(h=!0);c=h&&c});this.callEvent("onAfterValidate",[c]);return c}};this.validateItem=function(a,c){"undefined"!=typeof c&&(a=[a,c]);return this.doWithItem(a,"_validate")};this.enableLiveValidation=
function(a){this.live_validate=1==a};this.setReadonly=function(a,c){this.doWithItem(a,"setReadonly",c)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(a){for(var c=0;c<this._indexId.length;c++){var e=!0;if(1==a){var g=this.getItemType(this._indexId[c]);dhtmlXForm.prototype.items[g].setFocus||(e=!1)}if(e&&this._idIndex[this._indexId[c]].enabled)return this._indexId[c]}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);
null!=a&&this.setItemFocus(a)};this.enableItem=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,"userEnable");this._autoCheck()};this.disableItem=function(a,c){null!=c&&(a=[a,c]);this.doWithItem(a,"userDisable");this._autoCheck()};this.isItemEnabled=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"isUserEnabled")};this.clear=function(){var a={};this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(var c in this.itemPull){var e=this.itemPull[c]._idd;"ch"==this.itemPull[c]._type&&
this.uncheckItem(e);this.itemPull[c]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(e,"");"combo"==this.itemPull[c]._type&&(this.itemPull[c]._apiChange=!0,this.getCombo(e).selectOption(0),this.itemPull[c]._apiChange=!1);if("se"==this.itemPull[c]._type){var g=this.getOptions(e);0<g.length&&(g[0].selected=!0)}"ra"==this.itemPull[c]._type&&(g=this.itemPull[c]._group,a[g]||(this.checkItem(g,this.doWithItem(e,"_getFirstValue")),a[g]=!0));if(this.itemPull[c]._list)for(g=0;g<this.itemPull[c]._list.length;g++)this.itemPull[c]._list[g].clear();
if(this["setFormData_"+this.itemPull[c]._type])this["setFormData_"+this.itemPull[c]._type](e,"")}this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm);this._formLS=null;for(var c=0;c<this.base.length;c++){for(;0<this.base[c].childNodes.length;)this.base[c].removeChild(this.base[c].childNodes[0]);
this.base[c].parentNode&&this.base[c].parentNode.removeChild(this.base[c]);this.base[c]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(a in this)this[a]=null;g=null};for(var h in this.items)this.items[h].t=h,"undefined"==typeof this.items[h]._index&&(this.items[h]._index=!0),this.items[h].show||(this.items[h].show=function(a){a.style.display="";if(a._listObj)for(var c=0;c<a._listObj.length;c++)a._listObj[c].show(a._listBase[c])}),this.items[h].hide||(this.items[h].hide=
function(a){a.style.display="none";if(a._listObj)for(var c=0;c<a._listObj.length;c++)a._listObj[c].hide(a._listBase[c])}),this.items[h].isHidden||(this.items[h].isHidden=function(a){return"none"==a.style.display}),this.items[h].userEnable||(this.items[h].userEnable=function(a){a._udis=!1}),this.items[h].userDisable||(this.items[h].userDisable=function(a){a._udis=!0}),this.items[h].isUserEnabled||(this.items[h].isUserEnabled=function(a){return!0!==a._udis}),this.items[h].getType||(this.items[h].getType=
function(){return this.t}),this.items[h].isExist||(this.items[h].isExist=function(){return!0}),this.items[h]._validate||(this.items[h]._validate=function(a){if(!a._validate||!a._enabled)return!0;for(var c="ch"==a._type?this.isChecked(a)?this.getValue(a):0:this.getValue(a),e=!0,g=0;g<a._validate.length;g++){var h="is"+a._validate[g];if(null!=c&&0!=c.length||"isNotEmpty"==h||"container"==a._type)h=dhtmlxValidation[h],"container"==a._type&&"function"==typeof h&&(h=function(){return!0}),"function"!=typeof h&&
"function"==typeof a._validate[g]&&(h=a._validate[g]),"function"!=typeof h&&"function"==typeof window[a._validate[g]]&&(h=window[a._validate[g]]),e=("function"==typeof h?h(c,a._idd):(new RegExp(a._validate[g])).test(c))&&e,h=null}!1!==a.callEvent("onValidate"+(e?"Success":"Error"),[a._idd,c,e])&&a.getForm().setValidateCss(a._idd,e);return e});this._locked=!1;this._doLock=function(a){a=!0===a?!0:!1;this._locked!=a&&(this._locked=a,this._autoCheck(!this._locked))};this.lock=function(){this._doLock(!0)};
this.unlock=function(){this._doLock(!1)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(a,c,e,g){return this.doWithItem(a,"setNumberFormat",c,e,g)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,c){this.callEvent("onButtonClick",[a,c])});this._updateBlocks=function(){this.forEachItem(function(a){"block"!=g.getItemType(a)&&"combo"!=g.getItemType(a)||g.doWithItem(a,
"_setCss",g.skin,g.cont.style.fontSize)})};this._isObj=function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length};this._copyObj=function(a){if(this._isObj(a)){var c={},e;for(e in a)c[e]="object"==typeof a[e]&&null!=a[e]?this._copyObj(a[e]):a[e]}else for(c=[],e=0;e<a.length;e++)c[e]="object"==typeof a[e]&&null!=a[e]?this._copyObj(a[e]):a[e];return c};null!=c&&"object"==typeof c&&this._initObj(this._copyObj(c));this._parentForm&&this._updateBlocks();this._ccActive=!1;this._ccTm=null;
return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};
dhtmlXForm.prototype.items.checkbox={render:function(a,c){a._type="ch";a._enabled=!0;a._checked=!1;a._value="undefined"==typeof c.value?null:String(c.value);a._ro=1==c.readonly;!1!==c._autoInputWidth&&(c.inputWidth=14);this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var e=document.createElement("DIV");e.className="dhxform_img chbx0";a.appendChild(e);isNaN(c.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(c.inputLeft)+
"px");isNaN(c.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+"px");a.childNodes[a._ll?1:0].appendChild(e);a.childNodes[a._ll?1:0].firstChild.value=String(c.value);a._updateImgNode=function(a,c){a.childNodes[a._ll?1:0].lastChild.className=(c?"dhxform_actv_c":"dhxform_img")+" "+(a._checked?"chbx1":"chbx0")};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(a,c){this.callEvent(a,
[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};1==c.checked&&this.check(a);1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(a,c){var e=document.createElement("DIV");e.className="dhxform_label "+c.labelAlign;1==c.wrap&&(e.style.whiteSpace="normal");a._ll?a.insertBefore(e,a.firstChild):a.appendChild(e);"undefined"!=
typeof c.tooltip&&(e.title=c.tooltip);e.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+
(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";isNaN(c.labelWidth)||(e.firstChild.style.width=parseInt(c.labelWidth)+"px");isNaN(c.labelHeight)||(e.firstChild.style.height=parseInt(c.labelHeight)+"px");isNaN(c.labelLeft)||(e.style.left=parseInt(c.labelLeft)+"px");isNaN(c.labelTop)||
(e.style.top=parseInt(c.labelTop)+"px")},doAddInput:function(a,c,e,g,h,l,m){var n=document.createElement("DIV");n.className="dhxform_control";a._ll?a.appendChild(n):a.insertBefore(n,a.firstChild);var r=document.createElement(e);r.className=m;r.name=a._idd;r._idd=a._idd;r.id=c.uid;"string"==typeof g&&(r.type=g);if("INPUT"==e||"TEXTAREA"==e)r.onkeyup=function(c){c=c||event;a.callEvent("onKeyUp",[this,c,this._idd])},r.onkeydown=function(c){c=c||event;a.callEvent("onKeyDown",[this,c,this._idd])};n.appendChild(r);
c.readonly&&this.setReadonly(a,!0);1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);h&&(isNaN(c.inputLeft)||(n.style.left=parseInt(c.inputLeft)+"px"),isNaN(c.inputTop)||(n.style.top=parseInt(c.inputTop)+"px"));g="";e=!1;l&&(isNaN(c.inputWidth)||(g+="width:"+parseInt(c.inputWidth)+"px;",e=!0),isNaN(c.inputHeight)||(g+="height:"+parseInt(c.inputHeight)+"px;"));"string"==typeof c.style&&(g+=c.style);r.style.cssText=g;c.maxLength&&r.setAttribute("maxLength",c.maxLength);c.connector&&r.setAttribute("connector",
c.connector);l=null!=dhtmlXForm.prototype.items[this.t]?1==dhtmlXForm.prototype.items[this.t]._dimFix:!1;e&&(1=={input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]||l)&&(null==dhtmlXForm.prototype.items[this.t]._dim&&(dhtmlXForm.prototype.items[this.t]._dim=a.getForm()._checkDim(n,r)),r.style.width=parseInt(r.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px");"object"==typeof c.note&&(l=document.createElement("DIV"),l.className="dhxform_note",l.style.width=(isNaN(c.note.width)?
r.offsetWidth:parseInt(c.note.width))+"px",l._w=c.note.width,l.innerHTML=c.note.text,n.appendChild(l),l=null)},doUnloadNestedLists:function(a){if(a._list){for(var c=0;c<a._list.length;c++)a._list[c].unload(),a._list[c]=null,a._listObj[c]=null,a._listBase[c].parentNode.removeChild(a._listBase[c]),a._listBase[c]=null;a._list=null;a._listObj=null;a._listBase=null}},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=
null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=
null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;for(a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},doAttachEvents:function(a){var c=this;a.childNodes[a._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&a.preventDefault();var g=a.target||a.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||"undefined"!=typeof g.className&&
"dhxform_note"==g.className)return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;c.doClick(this.parentNode)};a.childNodes[a._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&a.preventDefault();if(!this.parentNode.parentNode._enabled)return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;var g=a.target||a.srcElement;if("undefined"!=typeof g.className&&"dhxform_info"==g.className)return this.parentNode.parentNode.callEvent("onInfo",
[this.parentNode.parentNode._idd,a]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;c.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();!a._enabled||a._ro||a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])||(this.setChecked(a,!a._checked),a._autoCheck(),a.callEvent("onChange",[a._idd,a._value,a._checked]))},doCheckValue:function(a){a._checked&&a._enabled?(a.childNodes[a._ll?
1:0].firstChild.name=String(a._idd),a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)):(a.childNodes[a._ll?1:0].firstChild.name="",a.childNodes[a._ll?1:0].firstChild.value="")},setChecked:function(a,c){a._checked=!0===c?!0:!1;a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,!0)},unCheck:function(a){this.setChecked(a,!1)},isChecked:function(a){return a._checked},
enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;null!=a._updateImgNode&&a._updateImgNode(a,!1);a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled",
"true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,c){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,c){this.setChecked(a,!0===c||1==parseInt(c)||"true"==c||a._value===c)},getValue:function(a,c){return"realvalue"==c?a._value:"undefined"==
typeof a._value||null==a._value?a._checked?1:0:a._value},setReadonly:function(a,c){a._ro=!0===c},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};
dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(a,c,e){a._type="ra";a._enabled=!0;a._checked=!1;a._group=c.name;a._value=c.value;a._uid=e;a._ro=1==c.readonly;a._rName=a._rId+a._group;this.r[a._idd]=a;c.inputWidth=14;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";e=document.createElement("DIV");e.className="dhxform_img rdbt0";a.appendChild(e);isNaN(c.inputLeft)||(a.childNodes[a._ll?
1:0].style.left=parseInt(c.inputLeft)+"px");isNaN(c.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+"px");a.childNodes[a._ll?1:0].appendChild(e);a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value="";a._updateImgNode=function(a,c){a.childNodes[a._ll?1:0].lastChild.className=(c?"dhxform_actv_r":"dhxform_img")+" "+(a._checked?"rdbt1":"rdbt0")};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._group,a._value])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",
[a._group,a._value])};a._doOnKeyUpDown=function(a,c){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],c,this._group,this._value])};null==this.input[a._rName]&&(e=document.createElement("INPUT"),e.type="HIDDEN",e.name=c.name,e.firstValue=a._value,a.appendChild(e),this.input[a._rName]=e);this.firstValue[a._rName]||(this.firstValue[a._rName]=c.value);1==c.checked&&this.check(a);1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);this.doAttachEvents(a);return this},destruct:function(a,
c){if(a.lastChild==this.input[a._rName]){var e=!1,g;for(g in this.r)e||this.r[g]._group!=a._group||this.r[g]._idd==a._idd||(this.r[g].appendChild(this.input[a._rName]),e=!0);e||(this.input[a._rName].parentNode.removeChild(this.input[a._rName]),this.input[a._rName]=null,this.firstValue[a._rName]=null)}e=a._idd;a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a);return e},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(a._enabled&&!a._checked&&
!a._ro){var c=[a._group,a._value,!0];a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",c)||(this.setChecked(a,!0),a.getForm()._autoCheck(),a.callEvent("onChange",c))}},doCheckValue:function(a){var c=null,e;for(e in this.r)this.r[e]._checked&&this.r[e]._group==a._group&&this.r[e]._rId==a._rId&&(c=this.r[e]._value);null!=c&&this.r[e]._enabled?(this.input[a._rName].name=String(a._group),this.input[a._rName].value=c):(this.input[a._rName].name="",this.input[a._rName].value="");this.input[a._rName]._value=
c},setChecked:function(a,c){c=!0===c;for(var e in this.r)if(this.r[e]._group==a._group&&this.r[e]._rId==a._rId){var g=!1;this.r[e]._idd==a._idd?this.r[e]._checked!=c&&(this.r[e]._checked=c,g=!0):this.r[e]._checked&&(this.r[e]._checked=!1,g=!0);g&&(g=this.r[e].childNodes[this.r[e]._ll?1:0].childNodes[1],g.className=g.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[e]._checked?" rdbt1":" rdbt0"))}this.doCheckValue(a)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},
_getId:function(a){return a._idd},setValue:function(a,c){}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.select={render:function(a,c){a._type="se";a._enabled=!0;a._value=null;a._newValue=null;this.doAddLabel(a,c);this.doAddInput(a,c,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,c);null!=c.connector&&this.doLoadOptsConnector(a,c.connector);"undefined"!=typeof c.value&&null!=c.value&&this.setValue(a,c.value);return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=
null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;for(a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);
a.parentNode.removeChild(a)},doAddLabel:function(a,c){var e=document.createElement("DIV");e.className="dhxform_label "+c.labelAlign;e.innerHTML="<label for='"+c.uid+"'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";1==c.wrap&&(e.style.whiteSpace="normal");"undefined"!=typeof c.tooltip&&(e.title=c.tooltip);a.appendChild(e);if("undefined"==typeof c.label||null==c.label||0==c.label.length)e.style.display="none";
isNaN(c.labelWidth)||(e.style.width=parseInt(c.labelWidth)+"px");isNaN(c.labelHeight)||(e.style.height=parseInt(c.labelHeight)+"px");isNaN(c.labelLeft)||(e.style.left=parseInt(c.labelLeft)+"px");isNaN(c.labelTop)||(e.style.top=parseInt(c.labelTop)+"px");c.info&&(e.onclick=function(a){a=a||event;var c=a.target||a.srcElement;if("undefined"!=typeof c.className&&"dhxform_info"==c.className)return this.parentNode.callEvent("onInfo",[this.parentNode._idd,a]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():
a.returnValue=!1,!1})},doAttachEvents:function(a){var c=a.childNodes[a._ll?1:0].childNodes[0],e=this;c.onclick=function(){e.doOnChange(this)};c.onkeydown=function(a){a=a||event;e.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,a,this.parentNode.parentNode._idd])};c.onchange=function(){e.doOnChange(this)};c.onkeyup=function(a){a=a||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,a,this.parentNode.parentNode._idd])};c=null;this.doAttachChangeLS(a)},doAttachChangeLS:function(a){a=
a.childNodes[a._ll?1:0].childNodes[0];a.onfocus=function(){var a=this.parentNode.parentNode;a.getForm()._ccActivate(a._idd,this,a.getForm().getItemValue(a._idd,!0));a.getForm().callEvent("onFocus",[a._idd])};a.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);a.getForm().callEvent("onBlur",[a._idd])};a=null},doValidate:function(a){a.getForm().live_validate&&this._validate(a)},doLoadOpts:function(a,c,e){var g=a.childNodes[a._ll?1:0].childNodes[0];c=c.options;for(var h=
!1,l=0;l<c.length;l++){var m=c[l].text||c[l].label;m&&"undefined"!=typeof m||(m="");m=new Option(m,c[l].value);"string"==typeof c[l].img_src&&m.setAttribute("img_src",c[l].img_src);g.options.add(m);"undefined"!=typeof c[l].selected&&1==window.dhx4.s2b(c[l].selected)&&(m.selected=!0,a._value=c[l].value,h=!0);"undefined"!=typeof c[l].checked&&1==window.dhx4.s2b(c[l].checked)&&m.setAttribute("checked","1");"undefined"!=typeof c[l].img&&m.setAttribute("img",c[l].img);"undefined"!=typeof c[l].img_dis&&
m.setAttribute("img_dis",c[l].img_dis);"undefined"!=typeof c[l].css&&m.setAttribute("css",c[l].css)}!h&&0<=g.selectedIndex&&(a._value=g.options[g.selectedIndex].value);!0===e&&a.callEvent("onOptionsLoaded",[a._idd]);this._checkNoteWidth(a)},doLoadOptsConnector:function(a,c){var e=this;a._connector_working=!0;window.dhx4.ajax.get(c,function(c){c=c.xmlDoc.responseXML;if(null!=c&&(c=c.getElementsByTagName("data"),null!=c&&null!=c[0])){c=c[0];for(var h=[],l=0;l<c.childNodes.length;l++)if("undefined"!=
typeof c.childNodes[l].tagName&&"item"==String(c.childNodes[l].tagName).toLowerCase()){var m=c.childNodes[l];h.push({label:m.getAttribute("label"),value:m.getAttribute("value"),selected:null!=m.getAttribute("selected")})}e.doLoadOpts(a,{options:h},!0);a._connector_working=!1;null!=a._connector_value&&(e.setValue(a,a._connector_value),a._connector_value=null);e=a=null}})},doOnChange:function(a){var c=a.parentNode.parentNode;c._newValue=0<=a.selectedIndex?a.options[a.selectedIndex].value:null;if(c._newValue!=
c._value){if(c.checkEvent("onBeforeChange")&&!0!==c.callEvent("onBeforeChange",[c._idd,c._value,c._newValue])){for(var e=0;e<a.options.length;e++)a.options[e].value==c._value&&(a.options[e].selected=!0);return}c._value=c._newValue;c.callEvent("onChange",[c._idd,c._value]);"se"==c._type&&c.getForm().live_validate&&this._validate(c)}c._autoCheck()},setText:function(a,c){c||(c="");a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?
0:1].style.display=0==c.length||null==c?"none":""},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;a.childNodes[a._ll?
1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(a,c){if(a._connector_working)a._connector_value=c;else{for(var e=this.getOptions(a),g=0;g<e.length;g++)e[g].value==c&&(e[g].selected=!0,a._value=e[g].value);null!=a._list&&0<a._list.length&&a.getForm()._autoCheck();a.getForm()._ccReload(a._idd,a._value)}},getValue:function(a){var c=-1;a=this.getOptions(a);for(var e=0;e<a.length;e++)a[e].selected&&(c=a[e].value);
return c},setWidth:function(a,c){a.childNodes[a._ll?1:0].childNodes[0].style.width=c+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(a){var c;null!=a.childNodes[a._ll?1:0].childNodes[1]&&(c=a.childNodes[a._ll?1:0].childNodes[1],null!=c.className&&0<=c.className.search(/dhxform_note/gi)&&"auto"==c._w&&(c.style.width=a.childNodes[a._ll?1:0].childNodes[0].offsetWidth+"px"))}};
(function(){for(var a in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(a,c,e){var g=a.childNodes[a._ll?1:0].childNodes[0];g.multiple=!0;isNaN(c.size)||(g.size=Number(c.size));a._value=[];a._newValue=[];c=c.options;for(var h=0;h<c.length;h++){var l=new Option(c[h].text||c[h].label,c[h].value);g.options.add(l);if(1==c[h].selected||"true"==c[h].selected)l.selected=!0,a._value.push(c[h].value)}!0===e&&a.callEvent("onOptionsLoaded",[a._idd]);this._checkNoteWidth(a)},doAttachEvents:function(a){a=a.childNodes[a._ll?
1:0].childNodes[0];var c=this;a.onfocus=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd])};a.onblur=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onBlur",[a._idd])};a.onclick=function(){c.doOnChange(this);this.parentNode.parentNode._autoCheck()}},doOnChange:function(a){var c=a.parentNode.parentNode;c._newValue=[];for(var e=0;e<a.options.length;e++)a.options[e].selected&&c._newValue.push(a.options[e].value);
if(c._value.sort().toString()!=c._newValue.sort().toString()){if(c.checkEvent("onBeforeChange")&&!0!==c.callEvent("onBeforeChange",[c._idd,c._value,c._newValue])){for(var g={},e=0;e<c._value.length;e++)g[c._value[e]]=!0;for(e=0;e<a.options.length;e++)a.options[e].selected=1==g[a.options[e].value];return}c._value=[];for(e=0;e<c._newValue.length;e++)c._value.push(c._newValue[e]);c.callEvent("onChange",[c._idd,c._value])}c._autoCheck()},setValue:function(a,c){var e={};"string"==typeof c&&(c=c.split(","));
"object"!=typeof c&&(c=[c]);for(var g=0;g<c.length;g++)e[c[g]]=!0;for(var h=this.getOptions(a),g=0;g<h.length;g++)h[g].selected=1==e[h[g].value];a._autoCheck()},getValue:function(a){var c=[];a=this.getOptions(a);for(var e=0;e<a.length;e++)a[e].selected&&c.push(a[e].value);return c}};(function(){for(var a in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[a]||(dhtmlXForm.prototype.items.multiselect[a]=dhtmlXForm.prototype.items.select[a])})();
dhtmlXForm.prototype.items.input={render:function(a,c){var e=!isNaN(c.rows);a._type="ta";a._enabled=!0;this.doAddLabel(a,c);this.doAddInput(a,c,e?"TEXTAREA":"INPUT",e?null:"TEXT",!0,!0,"dhxform_textarea");this.doAttachEvents(a);e&&(a.childNodes[a._ll?1:0].childNodes[0].rows=Number(c.rows)+(window.dhx4.isIE6?1:0));if("undefined"!=typeof c.numberFormat){var g=null,h=null;"string"!=typeof c.numberFormat?(e=c.numberFormat[0],g=c.numberFormat[1]||null,h=c.numberFormat[2]||null):(e=c.numberFormat,"string"==
typeof c.groupSep&&(g=c.groupSep),"string"==typeof c.decSep&&(h=c.decSep));this.setNumberFormat(a,e,g,h,!1)}this.setValue(a,c.value);return this},doAttachEvents:function(a){var c=this;if("ta"==a._type||"se"==a._type||"pw"==a._type)a.childNodes[a._ll?1:0].childNodes[0].onfocus=function(){var a=this.parentNode.parentNode;null!=a._df&&(this.value=a._value||"");a.getForm()._ccActivate(a._idd,this,this.value);a.getForm().callEvent("onFocus",[a._idd])};a.childNodes[a._ll?1:0].childNodes[0].onblur=function(){var a=
this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);c.updateValue(a,!0);a.getForm().live_validate&&c._validate(a);a.getForm().callEvent("onBlur",[a._idd])}},updateValue:function(a,c){var e=a.childNodes[a._ll?1:0].childNodes[0].value,g=a.getForm();if(1==g._ccActive&&null!=g._formLS&&null!=g._formLS[a._idd]||null==a._df||e!=window.dhx4.template._getFmtValue(a._value,a._df))if(c||null==a._df||a._value!=e||e!=window.dhx4.template._getFmtValue(e,a._df))a._value!=e?a.checkEvent("onBeforeChange")&&
!0!==a.callEvent("onBeforeChange",[a._idd,a._value,e])?null!=a._df?this.setValue(a,a._value):a.childNodes[a._ll?1:0].childNodes[0].value=a._value:(null!=a._df&&c?this.setValue(a,e):a._value=e,a.callEvent("onChange",[a._idd,e])):null!=a._df&&c&&this.setValue(a,a._value)},setValue:function(a,c){a._value="undefined"!=typeof c&&null!=c?c:"";var e=String(a._value)||"",g=a.childNodes[a._ll?1:0].childNodes[0];null!=a._df&&(e=window.dhx4.template._getFmtValue(e,a._df));g.value!=e&&(g.value=e,a.getForm()._ccReload(a._idd,
e))},getValue:function(a){var c=a.getForm();c._formLS&&null!=c._formLS[a._idd]&&this.updateValue(a);return"undefined"!=typeof a._value&&null!=a._value?a._value:""},setReadonly:function(a,c){a._ro=!0===c;a._ro?a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true"):a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(a){a._ro||(a._ro=!1);return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(a,c,e,g,
h){"boolean"!=typeof h&&(h=!0);if(""==c)return a._df=null,h&&this.setValue(a,a._value),!0;if("string"==typeof c){c=window.dhx4.template._parseFmt(c,e,g);if(0==c)return!1;a._df=c;h&&this.setValue(a,a._value);return!0}}};(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[a]=dhtmlXForm.prototype.items.select[a]})();
dhtmlXForm.prototype.items.password={render:function(a,c){a._type="pw";a._enabled=!0;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","PASSWORD",!0,!0,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,c.value);return this}};
(function(){for(var a in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[a]=dhtmlXForm.prototype.items.input[a]})();
dhtmlXForm.prototype.items.file={render:function(a,c){a._type="fl";a._enabled=!0;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","FILE",!0,!1,"dhxform_textarea");var e=a.childNodes[a._ll?1:0].childNodes[0],g=this;e.onfocus=function(){var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd])};e.onblur=function(){var a=this.parentNode.parentNode;a.getForm().live_validate&&g._validate(a);a.getForm().callEvent("onBlur",[a._idd])};e=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=
function(){a.callEvent("onChange",[a._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[a]=dhtmlXForm.prototype.items.input[a]})();
dhtmlXForm.prototype.items.label={_index:!1,render:function(a,c){a._type="lb";a._enabled=!0;a._checked=!0;var e=document.createElement("DIV");e.className="dhxform_txt_label2"+(c._isTopmost?" topmost":"");e.innerHTML=c.label;a.appendChild(e);1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);isNaN(c.labelWidth)||(e.style.width=parseInt(c.labelWidth)+"px");isNaN(c.labelHeight)||(e.style.height=parseInt(c.labelHeight)+"px");isNaN(c.labelLeft)||(e.style.left=parseInt(c.labelLeft)+"px");isNaN(c.labelTop)||
(e.style.top=parseInt(c.labelTop)+"px");return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a)},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1},setText:function(a,
c){a.firstChild.innerHTML=c},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.button={render:function(a,c){a._type="bt";a._enabled=!0;a._name=c.name;a.className=String(a.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");a._doOnKeyUpDown=function(a,c){this.callEvent(a,[this.childNodes[0].childNodes[0],c,this._idd])};a.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+c.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(c.width)){var e=
Math.max(c.width,10);null==dhtmlXForm.prototype.items[this.t]._dim&&(a.firstChild.style.width=e+"px",dhtmlXForm.prototype.items[this.t]._dim=a.getForm()._checkDim(a,a.firstChild));a.firstChild.style.width=e-dhtmlXForm.prototype.items[this.t]._dim+"px";a.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}isNaN(c.inputLeft)||(a.childNodes[0].style.left=parseInt(c.inputLeft)+"px");isNaN(c.inputTop)||(a.childNodes[0].style.top=parseInt(c.inputTop)+"px");1==c.hidden&&this.hide(a);1==c.disabled&&
this.userDisable(a);"undefined"!=typeof c.tooltip&&(a.firstChild.title=c.tooltip);a.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.firstChild.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.firstChild.onkeypress=function(a){a=a||event;if((32==a.keyCode||32==a.charCode||13==a.keyCode||13==a.charCode)&&!this.parentNode._busy)return this.parentNode._busy=!0,
a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1};a.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};a.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};a.firstChild.onkeyup=function(a){this.parentNode._doOnKeyUpDown("onKeyUp",a||event)};a.firstChild.onkeydown=function(a){this.parentNode._doOnKeyUpDown("onKeyDown",a||
event)};a.firstChild.onmouseover=function(){this.parentNode._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over")};a.firstChild.onmouseout=function(){this.parentNode._enabled&&(this.className="dhxform_btn",this._isOver=this._pressed=this._allowClick=!1)};a.firstChild.ontouchstart=a.firstChild.onmousedown=function(a){a=a||event;"touchstart"==a.type&&a.preventDefault&&a.preventDefault();2<=a.button||this._pressed||!this.parentNode._enabled||(this.className="dhxform_btn dhxform_btn_pressed",
this._pressed=this._allowClick=!0)};a.firstChild.ontouchend=a.firstChild.onmouseup=function(a){a=a||event;2<=a.button||!this._pressed||(a=this.parentNode,a._enabled&&(a._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&a.callEvent("_onButtonClick",[a._name,a._cmd]),this._pressed=this._allowClick=!1))};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};return this},
destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;
a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;for(a.firstChild.onmouseup=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){0>String(a.className).search("disabled")&&
(a.className+=" disabled");a._enabled=!1;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.hidden={_index:!1,render:function(a,c){a.style.display="none";a._name=c.name;a._type="hd";a._enabled=!0;var e=document.createElement("INPUT");e.type="HIDDEN";e.name=c.name;e.value=c.value||"";a.appendChild(e);return this},destruct:function(a){for(this.doUnloadNestedLists(a);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a)},
enable:function(a){a._enabled=!0;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=!1;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(a,c){a.childNodes[0].value=c},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.list={_index:!1,render:function(a,c){a._type="list";a._enabled=!0;a._isNestedForm=!0;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,c)]},destruct:function(a){}};
dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(a,c){a._type="fs";parseInt(c.inputWidth);a._width=c.width;a._enabled=!0;a._checked=!0;a.className="fs_"+c.position+("string"==typeof c.className?" "+c.className:"");var e=document.createElement("FIELDSET");e.className="dhxform_fs";var g=String(c.labelAlign).replace("align_","");e.innerHTML="<legend class='fs_legend' align='"+g+"' style='text-align:"+g+"'>"+c.label+"</legend>";a.appendChild(e);isNaN(c.inputLeft)||(e.style.left=parseInt(c.inputLeft)+
"px");isNaN(c.inputTop)||(e.style.top=parseInt(c.inputTop)+"px");"auto"==c.inputWidth||isNaN(c.inputWidth)||(e.style.width=parseInt(c.inputWidth)+"px",g=parseInt(e.style.width),e.offsetWidth>g&&(e.style.width=g+(g-e.offsetWidth)+"px"));a._addSubListNode=function(){var a=document.createElement("DIV");a._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(a);return a};1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);return this},destruct:function(a){this.doUnloadNestedLists(a);
a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;for(a.getForm=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=!0;0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,
""))},disable:function(a){a._enabled=!1;0>String(a.className).search("disabled")&&(a.className+=" disabled")},setWidth:function(a,c){a.childNodes[0].style.width=c+"px";a._width=c},getWidth:function(a){return a._width}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.block={_index:!1,render:function(a,c){a._type="bl";a._width=c.width;a._enabled=!0;a._checked=!0;a.className="block_"+c.position+("string"==typeof c.className?" "+c.className:"");var e=document.createElement("DIV");e.className="dhxform_obj_"+a.getForm().skin+" dhxform_block";e.style.fontSize=a.getForm().cont.style.fontSize;c.style&&(e.style.cssText=c.style);"undefined"!=typeof c.id&&(e.id=c.id);a.appendChild(e);isNaN(c.inputLeft)||(e.style.left=parseInt(c.inputLeft)+"px");
isNaN(c.inputTop)||(e.style.top=parseInt(c.inputTop)+"px");"auto"==c.inputWidth||isNaN(c.inputWidth)||(e.style.width=parseInt(c.inputWidth)+"px");isNaN(c.blockOffset)||(a._ofsNested=c.blockOffset);a._addSubListNode=function(){var a=document.createElement("DIV");a._inBlcok=!0;"undefined"!=typeof this._ofsNested&&(a._ofsNested=this._ofsNested);this.childNodes[0].appendChild(a);return a};1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);return this},_setCss:function(a,c,e){a.firstChild.className=
"dhxform_obj_"+c+" dhxform_block";a.firstChild.style.fontSize=e}};(function(){for(var a in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[a]=dhtmlXForm.prototype.items.fieldset[a]})();dhtmlXForm.prototype.items.newcolumn={_index:!1};
dhtmlXForm.prototype.items.template={render:function(a,c){isNaN(c.rows);a._type="tp";a._enabled=!0;null!=c.format&&("function"==typeof c.format?a.format=c.format:"string"==typeof c.format&&"function"==typeof window[c.format]&&(a.format=window[c.format]));null==a.format&&(a.format=function(a,c){return c});this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,!0,!0,"dhxform_item_template");this.setValue(a,c.value||"");return this},destruct:function(a){a.format=null;this.d2(a)},setValue:function(a,c){a._value=
c;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1}};
(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[a]=dhtmlXForm.prototype.items.select[a]})();
dhtmlXForm.prototype._ulToObject=function(a,c){for(var e=[],g=0;g<a.childNodes.length;g++){if("li"==String(a.childNodes[g].tagName||"").toLowerCase()){for(var h={},l=a.childNodes[g],m=0;m<c.length;m++)null!=l.getAttribute(c[m])&&(h[String(c[m]).replace("ftype","type")]=l.getAttribute(c[m]));if(!h.label)try{h.label=l.firstChild.nodeValue}catch(n){}m=l.getElementsByTagName("UL");null!=m[0]&&(h["select"==h.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(m[0],c));for(m=0;m<l.childNodes.length;m++)"userdata"==
String(l.childNodes[m].tagName||"").toLowerCase()&&(h.userdata||(h.userdata={}),h.userdata[l.childNodes[m].getAttribute("name")]=l.childNodes[m].firstChild.nodeValue);e[e.length]=h}if("div"==String(a.childNodes[g].tagName||"").toLowerCase()){h={type:"label"};try{h.label=a.childNodes[g].firstChild.nodeValue}catch(r){}e[e.length]=h}}return e};
dhtmlXForm.prototype.setUserData=function(a,c,e,g){if("undefined"!=typeof g){var h=this.doWithItem([a,c],"_getId");null!=h&&(a=h,c=e,e=g)}this._userdata||(this._userdata={});this._userdata[a]=this._userdata[a]||{};this._userdata[a][c]=e};dhtmlXForm.prototype.getUserData=function(a,c,e){if("undefined"!=typeof e){var g=this.doWithItem([a,c],"_getId");null!=g&&(a=g,c=e)}return null!=this._userdata&&"undefined"!=typeof this._userdata[a]&&"undefined"!=typeof this._userdata[a][c]?this._userdata[a][c]:""};
dhtmlXForm.prototype.setRTL=function(a){(this._rtl=!0===a?!0:!1)?0>String(this.cont).search(/dhxform_rtl/gi)&&(this.cont.className+=" dhxform_rtl"):0<=String(this.cont).search(/dhxform_rtl/gi)&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))};
_dhxForm_doClick=function(a,c){if("object"==typeof c){var e=c[1];c=c[0]}if(document.createEvent){var g=document.createEvent("MouseEvents");g.initEvent(c,!0,!1);a.dispatchEvent(g)}else document.createEventObject&&(g=document.createEventObject(),g.button=1,a.fireEvent("on"+c,g));e&&window.setTimeout(function(){_dhxForm_doClick(a,e)},100)};
dhtmlXForm.prototype.setFormData=function(a){for(var c in a){var e=this.getItemType(c);switch(e){case "checkbox":this[1==a[c]||1==parseInt(a[c])||"true"==a[c]||a[c]==this.getItemValue(c,"realvalue")?"checkItem":"uncheckItem"](c);break;case "radio":this.checkItem(c,a[c]);break;case "input":case "textarea":case "password":case "select":case "multiselect":case "hidden":case "template":case "combo":case "calendar":case "colorpicker":case "editor":this.setItemValue(c,a[c]);break;default:if(this["setFormData_"+
e])this["setFormData_"+e](c,a[c]);else this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,c,a[c])}}};
dhtmlXForm.prototype.getFormData=function(a,c){var e={},g;for(g in this.itemPull){var h=this.itemPull[g]._idd,l=this.itemPull[g]._type;"ch"==l&&(e[h]=this.isItemChecked(h)?this.getItemValue(h):0);"ra"!=l||e[this.itemPull[g]._group]||(e[this.itemPull[g]._group]=this.getCheckedValue(this.itemPull[g]._group));l in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(e[h]=this.getItemValue(h,a));this["getFormData_"+l]&&(e[h]=this["getFormData_"+l](h));if("up"==l){var h=this.getItemValue(h),
m;for(m in h)e[m]=h[m]}if(this.itemPull[g]._list)for(h=0;h<this.itemPull[g]._list.length;h++){var l=this.itemPull[g]._list[h].getFormData(a,c),n;for(n in l)e[n]=l[n]}}if(!c&&this.hId&&this._userdata[this.hId])for(g in this._userdata[this.hId])e[g]||(e[g]=this._userdata[this.hId][g]);return e};
dhtmlXForm.prototype.adjustParentSize=function(){for(var a=0,c=-1,e=0;e<this.base.length;e++)a+=this.base[e].firstChild.offsetWidth,this.base[e].offsetHeight>c&&(c=this.base[e].offsetHeight);e=!1;try{if(e=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var g=this.cont.parentNode.parentNode.parentNode.parentNode}catch(h){}if(e&&"undefined"!=typeof g)0<a&&g.setWidth(a+10),0<c&&g.setHeight(c+g.firstChild.firstChild.offsetHeight+5);else{g=!1;try{if(g=1==this.cont.parentNode.parentNode.parentNode._isWindow){var l=
this.cont.parentNode.parentNode;"function"==typeof l.callEvent&&(this.cont.style.display="none",l.callEvent("_setCellSize",[a+15,c+15]),this.cont.style.display="")}}catch(m){}}};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};
dhtmlXForm.prototype.send=function(a,c,e,g){"function"==typeof c?(e=c,c="post"):c="get"==c?"get":"post";if(!0===g||this.validate()){var h=this.getFormData(!0);g=[];for(var l in h)g.push(l+"="+encodeURIComponent(h[l]));l=function(a){e&&e.call(this,a,a.xmlDoc.responseText)};"get"==c?window.dhx4.ajax.get(a+(-1==a.indexOf("?")?"?":"&")+g.join("&"),l):window.dhx4.ajax.post(a,g.join("&"),l)}};dhtmlXForm.prototype.save=function(a,c){};dhtmlXForm.prototype.dummy=function(){};
dhtmlXForm.prototype._changeFormId=function(a,c){this.formId=c};
dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(a,e){var g=this.obj.getFormData(!0);g[this.action_param]=this.obj.getUserData(a,this.action_param);return g};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(a,e,g,h){if("inserted"==e||"updated"==e)this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData(!0);this.obj.callEvent("onAfterSave",[this.obj.formId,h]);return!0});a.autoUpdate=
!1;a.setTransactionMode("POST",!0);this.dp=a;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,a))};
dhtmlXForm.prototype._ccActivate=function(a,c,e){this._formLS||(this._formLS={});this._formLS[a]||(this._formLS[a]={input:c,value:e});this._ccActive||(this._ccActive=!0,this._ccDo())};dhtmlXForm.prototype._ccDeactivate=function(a){this._ccTm&&window.clearTimeout(this._ccTm);this._ccActive=!1;null!=this._formLS&&null!=this._formLS[a]&&(this._formLS[a].input=null,this._formLS[a]=null,delete this._formLS[a])};
dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var a in this._formLS){var c=this._formLS[a].input;if("select"==String(c.tagName).toLowerCase()){var e="";0<=c.selectedIndex&&c.selectedIndex<c.options.length&&(e=c.options[c.selectedIndex].value)}else e=c.value;e!=this._formLS[a].value&&(this._formLS[a].value=e,this.callEvent("onInputChange",[c._idd,e,this]));c=null}if(this._ccActive){var g=this;this._ccTm=window.setTimeout(function(){g._ccDo();g=null},100)}};
dhtmlXForm.prototype._ccReload=function(a,c){this._formLS&&this._formLS[a]&&(this._formLS[a].value=c)};
dhtmlXForm.prototype._checkDim=function(a,c){var e=document.createElement("DIV");e.className="dhxform_obj_"+this.skin;e.style.cssText+=1==dhx4.isIE6?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;";document.body.appendChild(e);var g=a.parentNode,h=a.nextSibling;e.appendChild(a);var l=parseInt(c.style.width),l=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?c.offsetWidth:c.clientWidth)-l;null!=h?g.insertBefore(a,h):g.appendChild(a);e.parentNode.removeChild(e);return l};
dhtmlXForm.prototype._autoload=function(){for(var a="ftype name value label check checked disabled text rows select selected width style className labelWidth labelHeight labelLeft labelTop inputWidth inputHeight inputLeft inputTop position size".split(" "),c=document.getElementsByTagName("UL"),e=[],g=0;g<c.length;g++)if("dhtmlxForm"==c[g].className){var h=document.createElement("DIV");e[e.length]={nodeUL:c[g],nodeForm:h,data:dhtmlXForm.prototype._ulToObject(c[g],a),name:c[g].getAttribute("name")||
null}}for(g=0;g<e.length;g++)if(e[g].nodeUL.parentNode.insertBefore(e[g].nodeForm,e[g].nodeUL),a=new dhtmlXForm(e[g].nodeForm,e[g].data),null!==e[g].name&&(window[e[g].name]=a),a=e[g].nodeUL.getAttribute("oninit")||null,e[g].nodeUL.parentNode.removeChild(e[g].nodeUL),e[g].nodeUL=null,e[g].nodeForm=null,e[g].data=null,e[g]=null,a)if("function"==typeof a)a();else if("function"==typeof window[a])window[a]();"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,
!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)};"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload);
"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(c):c.style.overflow="auto";this._attachObject(c);this.dataType="form";this.dataObj=new dhtmlXForm(c,a);this.dataObj.setSkin(this.conf.skin);this.callEvent("_onContentAttach",[]);return this.dataObj});
dhtmlXForm.prototype.items.combo={render:function(a,c){a._type="combo";a._enabled=!0;a._value=null;a._newValue=null;this.doAddLabel(a,c);this.doAddInput(a,c,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,c);a.onselectstart=function(a){return!0};a.childNodes[a._ll?1:0].childNodes[0].setAttribute("mode",c.comboType||"");c.comboImagePath&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("imagePath",c.comboImagePath);c.comboDefaultImage&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImage",
c.comboDefaultImage);c.comboDefaultImageDis&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImageDis",c.comboDefaultImageDis);a._combo=new dhtmlXComboFromSelect(a.childNodes[a._ll?1:0].childNodes[0]);a._combo.setSkin(a.getForm().skin);a._combo._currentComboValue=a._combo.getSelectedValue();a._combo.getInput().id=c.uid;var e=this;a._combo.attachEvent("onChange",function(){e.doOnChange(this)});c.connector&&this.doLoadOptsConnector(a,c.connector);c.filtering?a._combo.enableFilteringMode(!0):
c.serverFiltering&&a._combo.enableFilteringMode(!0,c.serverFiltering,c.filterCache,c.filterSubLoad);1==c.readonly&&this.setReadonly(a,!0);c.style&&(a._combo.DOMelem_input.style.cssText+=c.style);a._combo.attachEvent("onFocus",function(){var a=this.cont.parentNode.parentNode,c=a.getForm();"dhx_terrace"==c.skin&&0>this.cont.className.search(/combo_in_focus/)&&(this.cont.className+=" combo_in_focus");c.callEvent("onFocus",[a._idd])});a._combo.attachEvent("onBlur",function(){var a=this.cont.parentNode.parentNode,
c=a.getForm();"dhx_terrace"==c.skin&&0<=this.cont.className.search(/combo_in_focus/)&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,""));c.callEvent("onBlur",[a._idd])});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a)},doAttachEvents:function(a){var c=this;a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){c.doOnChange(this);c.doValidate(this.DOMParent.parentNode.parentNode)}},
doValidate:function(a){a.getForm().hot_validate&&this._validate(a)},doOnChange:function(a){var c=a.base.parentNode.parentNode.parentNode;if(!c._apiChange){a._newComboValue=a.getSelectedValue();if(a._newComboValue!=a._currentComboValue){if(c.checkEvent("onBeforeChange")&&!0!==c.callEvent("onBeforeChange",[c._idd,a._currentComboValue,a._newComboValue]))return window.setTimeout(function(){a.setComboValue(a._currentComboValue)},1),!1;a._currentComboValue=a._newComboValue;c.callEvent("onChange",[c._idd,
a._currentComboValue])}c._autoCheck(c._enabled)}},doLoadOptsConnector:function(a,c){var e=this,g=a;a._connector_working=!0;a._apiChange=!0;a._combo.load(c,function(){g.callEvent("onOptionsLoaded",[g._idd]);g._connector_working=!1;null!=g._connector_value&&(e.setValue(g,g._connector_value),g._connector_value=null);g._apiChange=!1;e=g=null})},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a._combo.enable()},disable:function(a){0>
String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,c){a._connector_working?a._connector_value=c:(a._apiChange=!0,a._combo.setComboValue(c),a._combo._currentComboValue=a._combo.getActualValue(),a._apiChange=!1)},getValue:function(a){return a._combo.getActualValue()},setWidth:function(a,c){a.childNodes[a._ll?1:0].childNodes[0].style.width=c+"px"},setReadonly:function(a,c){a._combo&&(a._combo_ro=
c,a._combo.readonly(a._combo_ro))},isReadonly:function(a,c){return a._combo_ro||!1},setFocus:function(a){a._enabled&&a._combo.setFocus()},_setCss:function(a,c,e){a._combo.setFontSize(e,e)}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[a]=dhtmlXForm.prototype.items.select[a]})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;
dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};
dhtmlXForm.prototype.items.calendar={render:function(a,c){var e=this;a._type="calendar";a._enabled=!0;var g=navigator.userAgent,g=0<=g.indexOf("MSIE 6.0")||0<=g.indexOf("MSIE 7.0")||0<=g.indexOf("MSIE 8.0");this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar");this.doAttachChangeLS(a);g&&(a.childNodes[a._ll?1:0].childNodes[0].onfocus2=a.childNodes[a._ll?1:0].childNodes[0].onfocus,a.childNodes[a._ll?1:0].childNodes[0].onfocus=function(){1==this._skipOnFocus?this._skipOnFocus=
!1:this.onfocus2.apply(this,arguments)});a.childNodes[a._ll?1:0].childNodes[0]._idd=a._idd;a.childNodes[a._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;if(a._c.base._formMouseDown)return a._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,!0;var c=a.getForm();c._ccDeactivate(a._idd);e.checkEnteredValue(this.parentNode.parentNode);c.live_validate&&e._validate(a);c.callEvent("onBlur",[a._idd]);a._c.isVisible()||(a._tempValue=null)};a._f=c.dateFormat||
null;a._f0=c.serverDateFormat||a._f;var h=a.getForm();a._c=new dhtmlXCalendarObject(a.childNodes[a._ll?1:0].childNodes[0],c.skin||h.skin||"dhx_skyblue");a._c._nullInInput=!0;a._c.enableListener(a.childNodes[a._ll?1:0].childNodes[0]);null!=a._f&&a._c.setDateFormat(a._f);window.dhx4.s2b(c.enableTime)||a._c.hideTime();window.dhx4.s2b(c.showWeekNumbers)&&a._c.showWeekNumbers();isNaN(c.weekStart)||a._c.setWeekStartDay(c.weekStart);"undefined"!=typeof c.calendarPosition&&a._c.setPosition(c.calendarPosition);
null!=c.minutesInterval&&a._c.setMinutesInterval(c.minutesInterval);a._c._itemIdd=a._idd;a._c.attachEvent("onBeforeChange",function(c){if(a._value!=c){if(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,c]))return!1;a._tempValue=a._value=c;e.setValue(a,c,!1);a.callEvent("onChange",[this._itemIdd,a._value])}return!0});a._c.attachEvent("onClick",function(){a._tempValue=null});a._c.attachEvent("onHide",function(){a._tempValue=null});g&&(a._c.base.onmousedown=function(){this._formMouseDown=
!0;return!1});this.setValue(a,c.value);h=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,c){a._c.setSkin(c)},setValue:function(a,c,e){c&&null!=c&&"undefined"!=typeof c&&""!=c?(a._value=c instanceof Date?c:a._c._strToDate(c,a._f0||a._c._dateFormat),a.childNodes[a._ll?1:0].childNodes[0].value=a._c._dateToStr(a._value,a._f||a._c._dateFormat)):(a._value=null,a.childNodes[a._ll?1:0].childNodes[0].value="");!1!==e&&a._c.setDate(a._value)},getValue:function(a,c){var e=a._tempValue||
a._c.getDate();return!0===c&&null==e?"":!0===c?a._c._dateToStr(e,a._f0||a._c._dateFormat):e},setDateFormat:function(a,c,e){a._f=c;a._f0=e||a._f;a._c.setDateFormat(a._f);this.setValue(a,this.getValue(a))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(c){}a._f=null;try{delete a._f}catch(e){}a._f0=null;try{delete a._f0}catch(g){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=
null;this.d2(a)},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[a]=dhtmlXForm.prototype.items.input[a]})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;
dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(a,c,e){this.doWithItem(a,"setDateFormat",c,e)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,c){a._checked=!0===c?!0:!1;a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};
(function(){for(var a in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[a]||(dhtmlXForm.prototype.items.btn2state[a]=dhtmlXForm.prototype.items.checkbox[a])})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;
dhtmlXForm.prototype.items.btn2state.render=function(a,c){c._autoInputWidth=!1;this.render2(a,c);a._type="btn2state";a._cssName="undefined"==typeof c.cssName?"btn2state":c.cssName;a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(a,c,h){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};this.setChecked(a,a._checked);return this};
dhtmlXForm.prototype.setFormData_btn2state=function(a,c){this[1==c||1==parseInt(c)||"true"==c||c==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return this.isItemChecked(a)?this.getItemValue(a):0};
dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(a,c){var e=this;a._type="colorpicker";a._enabled=!0;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",!0,!0,"dhxform_textarea");a._value=c.value||"";a.childNodes[a._ll?1:0].childNodes[0].value=a._value;var g={input:a.childNodes[a._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(c.enableCustomColors),skin:a.getForm().skin};this.colorpicker[a._idd]=new dhtmlXColorPicker(g);this.colorpicker[a._idd]._nodes[0].valueColor=
null;this.colorpicker[a._idd].base.className+=" dhtmlxcp_in_form";"undefined"!=typeof c.customColors&&this.colorpicker[a._idd].setCustomColors(c.customColors);"string"==typeof c.cpPosition&&this.colorpicker[a._idd].setPosition(c.cpPosition);this.colorpicker[a._idd].attachEvent("onSelect",function(c){a._value!=c&&(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,c])?a.childNodes[a._ll?1:0].childNodes[0].value=a._value:(a._value=c,e.setValue(a,c),a.callEvent("onChange",
[a._idd,a._value])))});this.colorpicker[a._idd].attachEvent("onHide",function(c){c=a.childNodes[a._ll?1:0].childNodes[0];c.value!=a._value&&(c.value=a._value)});a.childNodes[a._ll?1:0].childNodes[0]._idd=a._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){this.colorpicker[a._idd].unload&&this.colorpicker[a._idd].unload();this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a)},
setSkin:function(a,c){this.colorpicker[a._idd].setSkin(c)}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[a]=dhtmlXForm.prototype.items.input[a]})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;
dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};
dhtmlXForm.prototype.items.container={render:function(a,c){a._type="container";a._enabled=!0;this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,!0,!0,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=!0;0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=!1;0>String(a.className).search("disabled")&&
(a.className+=" disabled");a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var a in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[a]||(dhtmlXForm.prototype.items.container[a]=dhtmlXForm.prototype.items.input[a])})();
dhtmlXForm.prototype.items.editor={editor:{},render:function(a,c){isNaN(c.rows);a._type="editor";a._enabled=!0;a._editor_id=a.getForm().idPrefix+a._idd;this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,!0,!0,"dhxform_item_template");a._value=c.value||"";var e=this;this.editor[a._editor_id]=new dhtmlXEditor({parent:a.childNodes[a._ll?1:0].childNodes[0],content:a._value,iconsPath:c.iconsPath,toolbar:c.toolbar});this.editor[a._editor_id].attachEvent("onAccess",function(c,h){a.callEvent("_onBeforeEditorAccess",
[]);_dhxForm_doClick(document.body,"click");if("blur"==c){if(e.doOnBlur(a,this),a.callEvent("onBlur",[a._idd]),"dhx_terrace"==a.getForm().skin){var l=a.childNodes[a._ll?1:0].className;0<=l.indexOf("dhxeditor_focus")&&(a.childNodes[a._ll?1:0].className=l.replace(/\s{0,}dhxeditor_focus/gi,""))}}else a.callEvent("onEditorAccess",[a._idd,c,h,this,a.getForm()]),a.callEvent("onFocus",[a._idd]),"dhx_terrace"==a.getForm().skin&&(l=a.childNodes[a._ll?1:0].className,-1==l.indexOf("dhxeditor_focus")&&(a.childNodes[a._ll?
1:0].className+=" dhxeditor_focus"))});this.editor[a._editor_id].attachEvent("onToolbarClick",function(c){a.callEvent("onEditorToolbarClick",[a._idd,c,this,a.getForm()])});c.readonly&&this.setReadonly(a,!0);a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("for");a.childNodes[a._ll?0:1].childNodes[0].onclick=function(){e.editor[a._editor_id]._focus()};return this},doOnBlur:function(a,c){var e=c.getContent();a._value!=e&&(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,
a._value,e])?c.setContent(a._value):(a._value=e,a.callEvent("onChange",[a._idd,e])))},setValue:function(a,c){a._value!=c&&(a._value=c,this.editor[a._editor_id].setContent(a._value))},getValue:function(a){a._value=this.editor[a._editor_id].getContent();return a._value},enable:function(a){1!=this.isEnabled(a)&&(this.editor[a._editor_id].setReadonly(!1),this.doEn(a))},disable:function(a){1==this.isEnabled(a)&&(this.editor[a._editor_id].setReadonly(!0),this.doDis(a))},setReadonly:function(a,c){this.editor[a._editor_id].setReadonly(c)},
getEditor:function(a){return this.editor[a._editor_id]||null},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._editor_id].unload();this.editor[a._editor_id]=null;this.d2(a)},setFocus:function(a){this.editor[a._editor_id]._focus()}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[a]=dhtmlXForm.prototype.items.template[a]})();
dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};
dhtmlXForm.prototype.items.image={_dimFix:!0,render:function(a,c){a._type="image";a._enabled=!0;a._fr_name="dhxform_image_"+window.dhx4.newId();a._url=c.url;"auto"==c.inputWidth&&(c.inputWidth=120);"auto"==c.inputHeight&&(c.inputHeight=c.inputWidth);this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,!0,!0,"dhxform_image");var e=a.childNodes[a._ll?1:0].childNodes[0];e.style.height=parseInt(e.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var g="undefined"!=typeof c.imageWidth?parseInt(c.imageWidth):
c.inputWidth,h="undefined"!=typeof c.imageHeight?parseInt(c.imageHeight):c.inputHeight;"auto"==h&&(h=g);a._dim={mw:c.inputWidth-this._dim,mh:c.inputHeight-this._dim,w:g,h:h};e.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+a._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+a._url+"' method='POST' enctype='multipart/form-data' target='"+
a._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+a._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(a);e.childNodes[2].firstChild.lastChild.onchange=function(){a._is_uploading=!0;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress"};var l=this;0<=window.navigator.userAgent.indexOf("MSIE")?e.childNodes[1].onreadystatechange=
function(){"complete"==this.readyState&&l.doOnUpload(a)}:e.childNodes[1].onload=function(){l.doOnUpload(a)};this._moreClear=function(){l=null};this.setValue(a,c.value||"");e=null;return this},destruct:function(a){var c=a.childNodes[a._ll?1:0].childNodes[0];c.childNodes[2].firstChild.lastChild.onchange=null;c.childNodes[1].onreadystatechange=null;c.childNodes[1].onload=null;this._moreClear();this.d2(a)},doAttachEvents:function(){},setValue:function(a,c){a._value=null==c?"":c;var e=a._url+(0<=a._url.indexOf("?")?
"&":"?")+"action=loadImage&itemId="+encodeURIComponent(a._idd)+"&itemValue="+encodeURIComponent(a._value)+(1!=window.dhx4.ajax.cache?"&dhxr"+(new Date).getTime()+"=1":""),g=a.childNodes[a._ll?1:0].childNodes[0].firstChild;if("img"==g.nextSibling.tagName.toLowerCase())g.nextSibling.src=e;else{var h=document.createElement("IMG");h.className="dhxform_image_img";h.style.visibility="hidden";h.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=
null};h.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};g.parentNode.insertBefore(h,g);h.src=e;h=null;this.adjustImage(a)}g=null},getValue:function(a){return a._value},doOnUpload:function(a){if(1==a._is_uploading){var c=a.childNodes[a._ll?1:0].childNodes[0].lastChild.previousSibling,c=dhx4.s2j(c.contentWindow.document.body.innerHTML);"object"==typeof c&&null!=c&&1==c.state&&c.itemId==a._idd?(this.setValue(a,c.itemValue,!0),a.getForm().callEvent("onImageUploadSuccess",
[c.itemId,c.itemVaule,c.extra])):a.getForm().callEvent("onImageUploadFail",[a._idd,c?c.extra:null]);c=c=null;window.setTimeout(function(){a.childNodes[a._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";a._is_uploading=!1},50)}},adjustImage:function(a){var c=a.childNodes[a._ll?1:0].childNodes[0].firstChild,e=Math.min(a._dim.mw,a._dim.w),g=Math.min(a._dim.mh,a._dim.h);c.style.width=e+"px";c.style.height=g+"px";c.style.marginLeft=Math.max(0,Math.round(a._dim.mw/2-e/2))+"px";c.style.marginTop=
Math.max(0,Math.round(a._dim.mh/2-g/2))+"px"}};(function(){for(var a in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.image[a]||(dhtmlXForm.prototype.items.image[a]=dhtmlXForm.prototype.items.input[a])})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(a,c){this.setItemValue(a,c)};dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)};
dhtmlXForm.prototype.items.upload={render:function(a,c){a._type="up";a._enabled=!0;a._checked=!0;a.className=c.position+("string"==typeof c.className?" "+c.className:"");var e=document.createElement("DIV");a.appendChild(e);isNaN(c.inputLeft)||(a.style.left=parseInt(c.inputLeft)+"px");isNaN(c.inputTop)||(a.style.top=parseInt(c.inputTop)+"px");"auto"==c.inputWidth||isNaN(c.inputWidth)||(e.style.width=parseInt(c.inputWidth)+"px");a._uploader=new dhtmlXFileUploader(e,c.swfPath||"",c.swfUrl||"",c.mode||
null,c.swfLogs,c.slXap||"",c.slUrl||"",c.slLogs||"",c.multiple);a._uploader.setURL(c.url||"");a._uploader.callEvent=a.callEvent;"undefined"!=typeof c.autoStart&&a._uploader.setAutoStart(c.autoStart);"undefined"!=typeof c.autoRemove&&a._uploader.setAutoRemove(c.autoRemove);"undefined"!=typeof c.titleScreen&&a._uploader.enableTitleScreen(c.titleScreen);"undefined"!=typeof c.titleText&&a._uploader.setTitleText(c.titleText);1==c.hidden&&this.hide(a);1==c.disabled&&this.userDisable(a);"auto"!=c.inputHeight&&
NaN!=parseInt(c.inputHeight)&&(a._uploader.p_files.style.height=parseInt(c.inputHeight)+"px");return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=function(){return!0};a._uploader.unload();a._uploader.callEvent=null;a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;for(a.getForm=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a);a=null},
setText:function(a,c){},getText:function(a){},enable:function(a){a._enabled=!0;0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._uploader.enable()},disable:function(a){a._enabled=!1;0>String(a.className).search("disabled")&&(a.className+=" disabled");a._uploader.disable()},setWidth:function(a,c){a.childNodes[0].style.width=c+"px";a._width=c},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},
getValue:function(a){var c=a._uploader.getData(),e={},g=0,h;for(h in c)e[a._idd+"_r_"+g]=c[h].realName,e[a._idd+"_s_"+g]=c[h].serverName,g++;e[a._idd+"_count"]=g;return e},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};
dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};
function dhtmlXFileUploader(a,c,e,g,h,l,m,n,r){var u=this;if("string"==typeof g&&"function"==typeof this[g])this.engine=g;else{this.engine="html4";g=null;"undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&(g=new XMLHttpRequest,"undefined"==typeof g.upload&&(g=null));if(null!=g)this.engine="html5";else if("undefined"!=typeof window.swfobject||!1===g)g=swfobject.getFlashPlayerVersion(),10<=g.major&&(this.engine="flash");else if(this._sl_v=this.getSLVersion())this.engine=
"sl";g=null}"string"==typeof a&&(a=document.getElementById(a));this._upload_mp="undefined"!=typeof r?1==r:!0;this._upload_dnd=!0;this._swf_file_url=c||"";this._swf_upolad_url=e||"";this._swf_logs=h;this._sl_xap=l;this._sl_upload_url=m;this._sl_logs=n;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";a.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");
this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoRemove=this._autoStart=!1;this._enabled=this._titleScreen=!0;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){u._enabled&&(u._uploading||u._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){u._enabled&&(u._uploadStop(),u._switchButton(!1))},tooltip:"Stop"},
clear:{onclick:function(){u._enabled&&u.clear()},tooltip:"Clear list"}};this.buttons={};for(var a in this.b_opts){var c=document.createElement("DIV");c.innerHTML="&nbsp;";c.className="dhx_file_uploader_button button_"+a;c.onclick=this.b_opts[a].onclick;this.b_opts[a].tooltip&&(c.title=this.b_opts[a].tooltip);this.p_controls.appendChild(c);this.buttons[a]=c;c=null}this.buttons.cancel.style.display="none"};this._readableSize=function(a){for(var c=!1,e="b Kb Mb Gb Tb Pb Eb".split(" "),g=0;g<e.length;g++)1024<
a?a/=1024:!1===c&&(c=g);!1===c&&(c=e.length-1);return Math.round(100*a)/100+" "+e[c]};this._beforeAddFileToList=function(a,c){return!0===this.callEvent("onBeforeFileAdd",[a,c])};this._addFileToList=function(a,c,e,g,h){this._checkTitleScreen();e=document.createElement("DIV");e._idd=a;e.className="dhx_file dhx_file_"+g;e.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+h+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";
this.p_files.appendChild(e);e.childNodes[0].style.width=e.offsetWidth-127+"px";this._items[a]=e;this._updateFileNameSize(a);e.childNodes[2].onclick=function(){u._enabled&&u._removeFileFromQueue(this.parentNode._idd)};this.callEvent("onFileAdd",[c])};this._removeFileFromList=function(a){this._items[a]&&(this._items[a].childNodes[2].onclick=null,this._items[a].parentNode.removeChild(this._items[a]),this._items[a]=null,delete this._items[a],this._data[a]&&(this._data[a]=null,delete this._data[a]),this._checkTitleScreen())};
this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(isNaN(this._files[a].size)?"&nbsp;":" ("+this._readableSize(this._files[a].size)+")");this._items[a].childNodes[0].title=this._files[a].name+(isNaN(this._files[a].size)?"":" ("+this._readableSize(this._files[a].size)+")")};this._updateFileInList=function(a,c,e){this._items[a]&&(this._items[a].className="dhx_file dhx_file_"+c,this._updateProgress(a,c,e),this._updateFileNameSize(a))};this._updateProgress=
function(a,c,e){"uploading"==c&&100>e&&"loader"==this._progress_type?(this._items[a].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[a].childNodes[1].innerHTML="&nbsp;"):(this._items[a].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[a].childNodes[1].innerHTML=e+"%");this._updateFileNameSize(a)};this._removeFilesByState=function(a){for(var c in this._files)!0!==a&&this._files[c].state!=a||this._removeFileFromQueue(c)};this._switchButton=function(a){1==
a?(this.buttons.upload.style.display="none",this.buttons.cancel.style.display=""):(a=this._uploaded_count,this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",this._uploaded_count=0,0<a&&this.callEvent("onUploadComplete",[a]))};this._uploadStart=function(){this._switchButton(!0);if(!this._uploading)for(var a in this._files)"fail"==this._files[a].state&&(this._files[a].state="added",this._updateFileInList(a,"added",0));this._uploading=!0;var c=!1;for(a in this._files)c||"added"!=
[this._files[a].state]||(c=!0,this._files[a].state="uploading",this._updateFileInList(a,"uploading",0),this._doUploadFile(a));c||(this._uploading=!1,this._switchButton(!1))};this._onUploadSuccess=function(a,c,e,g){if("undefined"!=typeof e&&"flash"==this.engine)if(e=dhx4.s2j(e.data),null!=e&&1==e.state&&null!=e.name)c=e.name,null!=e.extra&&(g=e.extra);else{this._onUploadFail(a,null!=e&&null!=e.extra?e.extra:null);return}this._uploaded_count++;this._data[a]={realName:this._files[a].name,serverName:c};
this._files[a].state="uploaded";this._updateFileInList(a,"uploaded",100);this.callEvent("onUploadFile",[this._files[a].name,c,g]);this._autoRemove&&this._removeFileFromQueue(a);this._uploading&&this._uploadStart()};this._onUploadFail=function(a,c){this._files[a].state="fail";this._updateFileInList(a,"fail",0);this.callEvent("onUploadFail",[this._files[a].name,c]);this._uploading&&this._uploadStart()};this._onUploadAbort=function(a){this._uploading=!1;this._files[a].state="added";this._updateFileInList(a,
"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var a=0,c;for(c in this._files)a++;0==a&&0>this.p.className.search("dhx_file_uploader_title")&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px");(0<a||!this._titleScreen)&&0<=this.p.className.search("dhx_file_uploader_title")&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,
""),this.buttons.info.innerHTML="")};this.callEvent=function(){};this.upload=function(){this._uploading||this._uploadStart()};this.setAutoStart=function(a){this._autoStart=1==a};this.setAutoRemove=function(a){this._autoRemove=1==a};this.enableTitleScreen=function(a){this._titleScreen=1==a;this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;0<=this.p.className.search("dhx_file_uploader_title")&&(this.buttons.info.innerHTML=this._titleText)};this.setURL=function(a){this._url=a};
this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=!0;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=!1;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var a=0,c;for(c in this._files){if("uploaded"!=this._files[c].state)return-1;a=1}return a};this.getData=function(){return this._data};
this.clear=function(){!0===this.callEvent("onBeforeClear",[])&&(this._uploading&&u._uploadStop(),u._switchButton(!1),u._removeFilesByState(!0),this.callEvent("onClear",[]))};this.unload=function(){this._removeFilesByState(!0);this._items=this._files=this._data=null;this._unloadEngine();for(var a in this.buttons)this.buttons[a].onclick=null,this.buttons[a].parentNode.removeChild(this.buttons[a]),this.buttons[a]=null,delete this.buttons[a];this.buttons=null;for(a in this.b_opts)this.b_opts[a].onclick=
null,this.b_opts[a]=null,delete this.b_opts[a];this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(a in this)this[a]=null;u=null};a=new this[this.engine];for(var v in a)this[v]=a[v],a[v]=null;v=a=a=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};
dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var a=this;this.buttons.browse.onclick=function(){a._enabled&&a.f.click()};this._progress_type="percentage";var c=window.navigator.userAgent;null!=c.match(/Windows/gi)&&null!=c.match(/AppleWebKit/gi)&&null!=c.match(/Safari/gi)&&(c.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),c.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),c.match(/Version\/5\.1\.1/gi)&&(this._upload_dnd=this._upload_mp=!1),c.match(/Version\/5\.1\.2/gi)&&
(this._upload_dnd=!1),c.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1));this._addFileInput();this._upload_dnd?(this.p.ondragenter=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondragover=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondrop=function(c){c.dataTransfer&&(c.stopPropagation(),c.preventDefault(),a._enabled&&a._parseFilesInInput(c.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):
this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var a=this;this.f=document.createElement("INPUT");this.f.type="file";this._upload_mp&&(this.f.multiple="1");this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);window.dhx4.isOpera?a._addFileInput():this.value=""}},_doUploadFile:function(a){var c=this;this._loader||
(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(a){"uploading"==c._files[this._idd].state&&c._updateFileInList(this._idd,"uploading",Math.round(100*a.loaded/a.total))},this._loader.onload=function(a){a=dhx4.s2j(this.responseText);"object"==typeof a&&null!=a&&"undefined"!=typeof a.state&&1==a.state?c._onUploadSuccess(this.upload._idd,a.name,null,a.extra):c._onUploadFail(this.upload._idd,null!=a&&null!=a.extra?a.extra:null)},this._loader.onerror=function(a){c._onUploadFail(this.upload._idd)},
this._loader.onabort=function(a){c._onUploadAbort(this.upload._idd)});this._loader.upload._idd=a;var e=new FormData;e.append("file",this._files[a].file);this._loader.open("POST",this._url+(0>String(this._url).indexOf("?")?"?":"&")+"mode=html5&dhxr"+(new Date).getTime(),!0);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(e)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(a){for(var c=0;c<a.length;c++)this._addFileToQueue(a[c])},
_addFileToQueue:function(a){if(this._beforeAddFileToList(a.name,a.size)){var c=a._idd||window.dhx4.newId();this._files[c]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(c,a.name,a.size,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(a){if(this._files[a]){var c=this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[c,e])){var g=!1;this._uploading&&
a==this._loader.upload._idd&&"uploading"==this._files[a].state&&(this._uploadStop(),g=!0);this._files[a].file=null;this._files[a].name=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];this._removeFileFromList(a);this.callEvent("onFileRemove",[c,e]);g&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=
null;this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader=this._loader.upload._idd=null);this._unloadEngine=this._removeFileFromQueue=this._addFileToQueue=this._parseFilesInInput=this._uploadStop=this._doUploadFile=this._initEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};
dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this,c=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',
this.fr=this.k.firstChild,0<=window.navigator.userAgent.indexOf("MSIE")?this.fr.onreadystatechange=function(){"complete"==this.readyState&&a._onLoad()}:this.fr.onload=function(){a._onLoad()});var e=document.createElement("DIV");e.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+c+"'><input type='file' name='file' class='dhx_file_input'></form>";
this.k.appendChild(e);e.firstChild.lastChild._idd=c;e.firstChild.lastChild.onchange=function(){a._beforeAddFileToList(this.value,null)&&(a._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",a._addForm())};e=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if("object"==typeof a&&null!=a&&"undefined"!=typeof a.state){if("cancelled"==a.state){this._onUploadAbort(this.fr._idd);return}if(1==a.state){"undefined"==
typeof a.size||isNaN(a.size)||(this._files[this.fr._idd].size=a.size);this._onUploadSuccess(this.fr._idd,a.name,null,a.extra);return}}this._onUploadFail(this.fr._idd,null!=a&&null!=a.extra?a.extra:null)}},_addFileToQueue:function(a){var c=a.value.match(/[^\\\/]*$/g),c=null!=c[0]?c[0]:a.value;this._files[a._idd]={name:c,form:a.parentNode,node:a.parentNode.parentNode,input:a,state:"added"};this._addFileToList(a._idd,a.value,!1,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){var c=
this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;!0===this.callEvent("onBeforeFileRemove",[c,e])&&(this._files[a].input.onchange=null,this._files[a].form.removeChild(this._files[a].input),this._files[a].node.removeChild(this._files[a].form),this._files[a].node.parentNode.removeChild(this._files[a].node),this._files[a].input=null,this._files[a].name=null,this._files[a].form=null,this._files[a].node=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=
null,delete this._files[a],this._removeFileFromList(a),this.callEvent("onFileRemove",[c,e]))},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(0>this._url.indexOf("?")?"?":"&")+"mode=html4&action=cancel&dhxr"+(new Date).getTime())},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),
this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null);this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._onLoad=this._addForm=this._initEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};
dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){window.dhtmlXFileUploaderSWFObjects||(window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(a,e,g){return window.dhtmlXFileUploaderSWFObjects.items[a].uploader[e].apply(window.dhtmlXFileUploaderSWFObjects.items[a].uploader,g)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(0<=this._swf_file_url.indexOf("?")?"&":"?")+"dhxr"+(new Date).getTime();this.buttons.browse.innerHTML=
"<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,
c){return!0===this.callEvent("onBeforeFileAdd",[a,c])},_addFileToQueue:function(a,c,e){if(window.dhx4.isIE){var g=document.createElement("INPUT");g.type="TEXT";g.style.position="absolute";g.style.left="0px";g.style.top=window.dhx4.absTop(this.buttons.browse)+"px";g.style.width="10px";document.body.appendChild(g);g.focus();document.body.removeChild(g)}this._files[a]={name:c,size:e,state:"added"};this._addFileToList(a,c,e,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){if(this._files[a]){var c=
this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[c,e])){var g=!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),g=!0);swfobject.getObjectById(this._swf_obj_id).removeFileById(a);this._files[a].name=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];this._removeFileFromList(a);this.callEvent("onFileRemove",[c,e]);g&&this._uploadStart()}}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,
this._swf_upolad_url)},_uploadStop:function(a){for(var c in this._files)"uploading"==this._files[c].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(c)},_unloadEngine:function(){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]&&(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]);
this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._swf_obj_id=null}};dhtmlXFileUploader.prototype.sl=function(){};
dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){"undefined"==typeof this._sl_v&&(this._sl_v=this.getSLVersion());window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(a,c,e){window.dhtmlXFileUploaderSLObjects.items[a].uploader[c].apply(window.dhtmlXFileUploaderSLObjects.items[a].uploader,e)}});this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();0!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+
this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):
(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title="");this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(a,c,e){this._files[a]={name:c,size:e,state:"added"};this._addFileToList(a,c,e,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){if(this._files[a]){var c=
!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),c=!0);document.getElementById([this._sl_obj_id]).Content.a.removeFileById(a);this._files[a].name=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];this._removeFileFromList(a);c&&this._uploadStart()}},_doUploadFile:function(a){var c=this._sl_upload_url.split("?"),c=null!=c[1]?"&"+c[1]:"";document.getElementById(this._sl_obj_id).Content.a.upload(a,this._sl_upload_url,c+"&mode=sl&dhxr"+
(new Date).getTime())},_uploadStop:function(a){this._uploading=!1;for(var c in this._files)"uploading"==this._files[c].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(c)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]);
this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._sl_obj_id=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};
dhtmlXFileUploader.prototype.getSLVersion=function(){var a=!1;if(window.dhx4.isIE)try{var c=new ActiveXObject("AgControl.AgControl");if(null!=c)for(var e=4,g=0;c.isVersionSupported([e,g].join("."));)a=[e,g],9<++g&&(e++,g=0)}catch(h){}else null!=navigator.plugins["Silverlight Plug-In"]&&(a=navigator.plugins["Silverlight Plug-In"].description.split("."));return a};
dhtmlXForm.prototype.saveBackup=function(){this._backup||(this._backup={},this._backupId=(new Date).getTime());this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){null!=this._backup&&null!=this._backup[a]&&this.setFormData(this._backup[a])};dhtmlXForm.prototype.clearBackup=function(a){null!=this._backup&&null!=this._backup[a]&&(this._backup[a]=null,delete this._backup[a])};
dhtmlXForm.prototype.addItem=function(a,c,e,g){var h=null;a instanceof Array&&(h=a[1],a=a[0]);var l=null;if(null!=a&&(l=this._getParentForm(a,h),null!=l)){null==l.item._list?(c.listParent||(c.listParent=l.item._idd),l.form._addItem("list",l.item._idd,[c],null,l.item._idd,e,g)):l.item._list[0].addItem(null,c,e,g);l.form=l.item=null;this._autoCheck();return}this._prepareItem(c,e,g);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(a,c){this._removeItem(a,c)};
dhtmlXForm.prototype.removeColumn=function(a,c,e,g){var h=null;a instanceof Array&&(h=a[1],a=a[0]);if(null!=a)a=this._getParentForm(a,h),null!=a&&(null!=a.item._list&&null!=a.item._list[0]&&a.item._list[0].removeColumn(null,c,e,g),a.form=a.item=null);else if(c=Math.min(Math.max(c,0),this.cont.childNodes.length-1),1==this.cont.childNodes.length)1==e&&this._removeItemsInColumn(this.cont.childNodes[c]);else{if(1==e)this._removeItemsInColumn(this.cont.childNodes[c]);else for(g?(e=c+1,e>this.cont.childNodes.length-
1&&(e=c-1)):(e=c-1,0>e&&(e=c+1));0<this.cont.childNodes[c].childNodes.length;)this.cont.childNodes[e].appendChild(this.cont.childNodes[c].childNodes[0]);e=[];for(g=0;g<this.base.length;g++)this.cont.childNodes[c]!=this.base[g]&&e.push(this.base[g]);this.base=e;this.cont.removeChild(this.cont.childNodes[c]);this.b_index--}};
dhtmlXForm.prototype.getColumnNode=function(a,c){var e=null,g=null;a instanceof Array&&(g=a[1],a=a[0]);return null!=a?(g=this._getParentForm(a,g),null!=g&&(null!=g.item._list&&null!=g.item._list[0]&&null==e&&(e=g.item._list[0].getColumnNode(null,c)),g.form=g.item=null),e):0>c||c>this.cont.childNodes.length-1?null:this.cont.childNodes[c]};
dhtmlXForm.prototype._removeItemsInColumn=function(a){for(var c=[],e=0;e<a.childNodes.length;e++){var g=a.childNodes[e];null!=g._idd&&null!=g._type&&c.push([g._idd,"ra"==g._type?g._value:null])}for(e=0;e<c.length;e++)this.removeItem(c[e][0],c[e][1])};
dhtmlXForm.prototype._getParentForm=function(a,c){if(null!=this.itemPull[this.idPrefix+a])return{form:this,item:this.itemPull[this.idPrefix+a]};for(var e in this.itemPull)if("ra"==this.itemPull[e]._type&&this.itemPull[e]._group==a&&this.itemPull[e]._value==c)return{form:this,item:this.itemPull[e]};var g=null;for(e in this.itemPull)if(!g&&null!=this.itemPull[e]._list)for(var h=0;h<this.itemPull[e]._list.length;h++)g||(g=this.itemPull[e]._list[h]._getParentForm(a,c));return g};
(function(){for(var a in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[a]._getItemNode||(dhtmlXForm.prototype.items[a]._getItemNode=function(a){return a})})();dhtmlXForm.prototype._getItemNode=function(a,c){null!=c&&(a=[a,c]);return this.doWithItem(a,"_getItemNode")};
dhtmlXForm.prototype.setRequired=function(a,c,e){"undefined"==typeof e?e=c:a=[a,c];if(a=this._getItemNode(a)){e=window.dhx4.s2b(e);a._required=1==e;if(a._required){a._validate||(a._validate=[]);e=!1;for(c=0;c<a._validate.length;c++)e="NotEmpty"==a._validate[c]||e;e||a._validate.push("NotEmpty");e=a.childNodes[a._ll?0:1].childNodes[0];e.lastChild&&e.lastChild.className&&0<=e.lastChild.className.search(/required/)||(c=document.createElement("SPAN"),c.className="dhxform_item_required",c.innerHTML="*",
e.appendChild(c))}else{if(null!=a._validate){e=a._validate;a._validate=[];for(c=0;c<e.length;c++)"NotEmpty"!=e[c]&&a._validate.push(e[c]);0==a._validate.length&&(a._validate=null)}e=a.childNodes[a._ll?0:1].childNodes[0];e.lastChild&&e.lastChild.className&&0<=e.lastChild.className.search(/required/)&&e.removeChild(e.lastChild)}this._resetValidateCss(a)}};
dhtmlXForm.prototype.setNote=function(a,c,e){"undefined"==typeof e?e=c:a=[a,c];if(a=this._getItemNode(a))c=this._getNoteNode(a),c||(e.width||(e.width=a.childNodes[a._ll?1:0].childNodes[0].offsetWidth),c=document.createElement("DIV"),c.className="dhxform_note",{ch:1,ra:1}[a._type]?a.childNodes[a._ll?1:0].insertBefore(c,a.childNodes[a._ll?1:0].lastChild):a.childNodes[a._ll?1:0].appendChild(c)),c.innerHTML=e.text,null!=e.width&&(c.style.width=e.width+"px",c._w=e.width)};
dhtmlXForm.prototype.clearNote=function(a,c){"undefined"!=typeof c&&(a=[a,c]);var e=this._getItemNode(a);e&&(e=this._getNoteNode(e),null!=e&&e.parentNode.removeChild(e))};dhtmlXForm.prototype._getNoteNode=function(a){for(var c=null,e=0;e<a.childNodes[a._ll?1:0].childNodes.length;e++)0<=String(a.childNodes[a._ll?1:0].childNodes[e].className).search(/dhxform_note/)&&(c=a.childNodes[a._ll?1:0].childNodes[e]);return c};
dhtmlXForm.prototype.setValidation=function(a,c,e){"undefined"==typeof note?e=c:a=[a,c];if(a=this._getItemNode(a)){if(null!=a._validate)for(c=0;c<a._validate.length;c++)a._validate[c]=null;a._validate=[];a._validate="function"==typeof e||"function"==typeof window[e]?[e]:String(e).split(this.separator);if(a._required){e=!1;for(c=0;c<a._validate.length;c++)e="NotEmpty"==a._validate[c]||e;e||a._validate.push("NotEmpty")}}};
dhtmlXForm.prototype.clearValidation=function(a,c){"undefined"!=typeof c&&(a=[a,c]);var e=this._getItemNode(a);if(e){if(null!=e._validate)for(var g=0;g<e._validate.length;g++)e._validate[g]=null;e._validate=e._required?["NotEmpty"]:null}};
dhtmlXForm.prototype.reloadOptions=function(a,c){var e=this.getItemType(a);if({select:1,multiselect:1,combo:1}[e]){if("select"==e||"multiselect"==e){for(var g=this.getOptions(a);0<g.length;)g.remove(0);g.length=0;"string"==typeof c?this.doWithItem(a,"doLoadOptsConnector",c):c instanceof Array&&this.doWithItem(a,"doLoadOpts",{options:c})}if("combo"==e)if(e=this.getCombo(a),e.clearAll(),e.setComboValue(""),"string"==typeof c)this.doWithItem(a,"doLoadOptsConnector",c);else if(c instanceof Array){for(var g=
null,h=0;h<c.length;h++)window.dhx4.s2b(c[h].selected)&&(g=c[h].value);e.addOption(c);null!=g&&this.setItemValue(a,g)}}};dhtmlXForm.prototype.setTooltip=function(a,c,e){"undefined"==typeof e?e=c:a=[a,c];if(a=this._getItemNode(a)){c=null;if(1==a.childNodes.length)c=a.childNodes[0];else for(var g=0;g<a.childNodes.length;g++)null!=a.childNodes[g].className&&0<=a.childNodes[g].className.search("dhxform_label")&&(c=a.childNodes[g]);null!=c&&(null==e||0==e.length?c.removeAttribute("title"):c.title=e)}};
dhtmlXForm.prototype.clearAll=function(){var a=[];this.forEachItem(function(c){a.push(c)});for(var c in a)this.removeItem(a[c])};
function dhtmlXAccordion(a,c){var e=this,g=window.dhx4.transDetect();this.conf={skin:c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"dhx_skyblue",css:"dhxacc",icons_path:"",multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,cont_w:null};this.conf.tr={prop:g.transProp,ev:g.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",
op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"};this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}}}};0<=navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");this.conf.tr.height_open=this.conf.tr.height_close;g=null;if("object"==typeof a&&!a.tagName){var g=
{},h;for(h in a)g[h]=a[h],a[h]=null;a=g.parent;g.parent=null}window.dhtmlXCellTop.apply(this,[a,a._ofs]);this._adjustCont();if(null!=this.base._ofs)for(var l in this.ofs.base)if(null!=this.base._ofs[l])for(h in this.base._ofs[l])this.ofs.base[l][h]=this.base._ofs[l][h];this._applyOffsets=function(){for(var a in this.ofs.def){var c=this.ofs.def[a],e=null!=this.ofs.skin[this.conf.skin]&&null!=this.ofs.skin[this.conf.skin][a]?this.ofs.skin[this.conf.skin][a]:null,g=null!=this.base._ofs?this.base._ofs[a]:
null,h;for(h in c)this.ofs[a][h]=null!=e&&null!=e[h]?e[h]:null!=g&&null!=g[h]?g[h]:c[h]}};this._applyOffsets();this.t={};this.addItem=function(a,c,g,h,l){for(null==a&&(a="a"+window.dhx4.newId());null!=this.t[a];)a="a"+window.dhx4.newId();var w=new dhtmlXAccordionCell(a,this);w.conf.skin=this.conf.skin;w.setText(c);null!=l&&w.setIcon(l);w.cell._accId=a;w.cell.childNodes[w.conf.idx.hdr].onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};w.cell.childNodes[w.conf.idx.hdr].onclick=
function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;if(null==e._dnd||1!=e._dnd.ofs){a=a.target||a.srcElement;for(var c=null;a._accId!=this&&null==c;)null!=a._accId?c=a._accId:a=a.parentNode;null!=c&&e._hdrClick(c)}};this.t[a]={cell:w};this.conf.total_count++;this.conf.multi_mode?("undefined"==typeof g&&(g=!0),this.cont.appendChild(w.cell),w.conf.opened=1==g,"undefined"==typeof h||null==h||"*"==h?("*"==h&&(w.conf.h_auto=!0),h=this.conf.def_height):h=Math.max(parseInt(h),30),
w._setSize(this.ofs.m.left,0,this.conf.cont_w||this._getAvailItemWidth(),w.conf.opened?h:w._getHdrHeight()),w.cell.style.marginTop=(w.cell==this.cont.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",1!=g&&(w.conf.size.h=h,w._adjustCell(),w.cell.className+=" dhx_cell_closed"),this._adjustOpened(),null!=this._dnd&&this._dndAttachEvent(a)):(g=null==this.conf.last_opened?!0:window.dhx4.s2b(g),c=this._updateCellsHeight(),null!=this.conf.last_opened&&(g?this._closeItem(this.conf.last_opened,!1):(h=
this.t[this.conf.last_opened].cell,h._setSize(h.conf.size.x,h.conf.size.y,h.conf.size.w,c),h=null)),this.cont.appendChild(w.cell),w.conf.opened=g,w.cell.style.marginTop=String(w.cell==this.cont.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",w._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),g?c:w._getHdrHeight()),g?this.conf.last_opened=a:(w.conf.size.h=c,w._adjustCell(),w.cell.className+=" dhx_cell_closed"));w=null;return this.t[a].cell};this.removeItem=function(a){this.t[a]&&
(this.conf.last_opened==a&&(this.conf.last_opened=null),this.conf.on_active_id==a&&(this.conf.on_active_id=null),null!=this._dnd&&this._dndClearCell(a),this.conf.total_count--,this.conf.multi_mode||this.t[a].cell.conf.visible||this.conf.hiden_count--,this.t[a].cell._unload(),this.t[a].cell=null,this.t[a]=null,delete this.t[a],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))};this.cells=function(a){return this.t[a].cell};this.enableMultiMode=function(a,c){this.conf.multi_mode=
!0;isNaN(c)||(this.conf.def_height=c);"auto"==a||"scroll"==a?(this.cont.style.overflowX="hidden",this.cont.style.overflowY=a):this.cont.style.overflow="visible"};this.forEachItem=function(a){for(var c in this.t)"function"==typeof a?a.apply(this,[this.t[c].cell]):"string"==typeof a&&"function"==typeof window[a]&&window[a].apply(this,[this.t[c].cell])};this._openItem=function(a,c){"undefined"==typeof c&&(c=!0);0==this.t[a].cell.conf.opened&&(this.conf.multi_mode?this.t[a].cell._open(c):(0==this.conf.tr.prop?
(null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(!1),this.t[a].cell._open(!1)):(this.conf.on_active_id=a,this.t[a].cell._open(c),null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(c)),this.conf.last_opened=a))};this._closeItem=function(a,c){"undefined"==typeof c&&(c=!0);1==this.t[a].cell.conf.opened&&(this.t[a].cell._close(c),this.conf.last_opened=null)};this._adjustOpened=function(){if(1==this.conf.multi_mode){if(null==this._openCache){var a=this._getDynData(),
c;for(c in a)this.t[c].cell.conf.size.h=a[c],this.t[c].cell.cell.style.height=a[c]+"px"}else{a=!1;for(c in this._openCache)a=a||this._openCache[c];if(1==a)return;this._openCache=this._openId=null}a=this._getAvailItemWidth();for(c in this.t){var e=!0;a!=this.t[c].cell.conf.size.w||"close"!=this._openMode&&0!=this.t[c].cell.conf.opened||(e=!1);e&&this.t[c].cell._setWidth(a)}this._openMode=null}else null!=this.conf.last_opened&&(c=this.conf.last_opened,this.t[c].cell._setSize(this.t[c].cell.conf.size.x,
this.t[c].cell.conf.size.y,this.t[c].cell.conf.size.w,this.t[c].cell.conf.size.h))};this._getDynData=function(a,c){if("undefined"==typeof a||null==a)a={};if("undefined"==typeof c||null==c)c={};for(var e={},g=0,h=0,l=0,x=0;x<this.cont.childNodes.length;x++){var y=this.cont.childNodes[x]._accId,C=this.t[y].cell;if(1==C.conf.visible){var A=this.ofs.m[0==l?"first":"between"];1==a[y]||1==c[y]||1==C.conf.opened&&1==C.conf.h_auto?1==c[y]?(C=C._getHdrHeight(),e[y]=C,h+=C+A):1==C.conf.h_auto?(e[y]=!0,h+=A,
g++):1==a[y]&&(e[y]=C.conf.size.h,h+=C.conf.size.h+A):h+=C.cell.offsetHeight+A;l++}}if(0<g){var l=this.cont.offsetHeight-h,h=Math.floor(l/g),D;for(D in e)1==e[D]&&(1<g?l-=h:h=l,e[D]=h,g--)}return e};this.setSizes=function(){this._adjustCont();if(1==this.conf.multi_mode)this._adjustOpened();else{this.conf.cont_w=null;var a=this._updateCellsHeight(),c;for(c in this.t)1==this.t[c].cell.conf.visible&&(this.t[c].cell._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),this.t[c].cell.conf.opened?
a:this.t[c].cell._getHdrHeight()),1!=this.t[c].cell.conf.opened&&(this.t[c].cell.conf.size.h=a,this.t[c].cell._adjustCell()));this.conf.size_changed=!0}this.callEvent("_onSetSizes",[])};this.setSkin=function(a){this._setBaseSkin(a);this.conf.skin=a;for(var c in this.t)this.t[c].cell.conf.cells_cont=null,this.t[c].cell.conf.skin=this.conf.skin;this._applyOffsets();this._updateCellsMargin();this.setSizes()};this.setIconsPath=function(a){this.conf.icons_path=a};this._getAvailItemWidth=function(){var a=
this.ofs[this.conf.multi_mode?"m":"s"],a=Math.max(this.cont.clientWidth-a.left-a.right,10);return this.conf.cont_w=a};this._updateCellsHeight=function(){if(1!=this.conf.multi_mode){var a=this.conf.total_count-this.conf.hiden_count,c=this.cont.offsetHeight-this.ofs.s.last;if(0==a)return c;for(var e=!1,g=0;g<this.cont.childNodes.length;g++)if(0==e){var h=this.cont.childNodes[g]._accId;this.t[h].cell.conf.visible&&(c-=this.t[h].cell._getHdrHeight()*(a-1),e=!0)}var c=c-((a-1)*this.ofs.s.between+this.ofs.s.first),
l;for(l in this.t)null!=this.t[l].cell.conf.size&&(this.t[l].cell.conf.size.h=c,this.t[l].cell._adjustCell());return c}};this._updateCellsMargin=function(){for(var a=0,c=0;c<this.cont.childNodes.length;c++){var e=this.cont.childNodes[c]._accId;this.t[e].cell.conf.visible&&(this.t[e].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][0==a++?"first":"between"])+"px")}};this._hdrClick=function(a){if(this.conf.multi_mode||!this.t[a].cell.conf.opened){var c=this.t[a].cell.conf.opened;
!0===this.callEvent("onBeforeActive",[a,c?!1:!0])&&(this.conf.on_active_click=!0,this[c?"_closeItem":"_openItem"](a),this.conf.multi_mode&&0==this.conf.tr.prop&&this._adjustOpened())}};this.unload=function(){this.conf.unloading=!0;for(var a in this.t)this.removeItem(a);this.t=null;"function"==typeof this._unloadDND&&this._unloadDND();this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null);this._unloadTop();window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");
this.ofs=this.conf=null;for(a in this)this[a]=null;e=null};this.setOffset=function(a){this.ofs.s.between=a;this.ofs.m.between=a;this._updateCellsMargin();this.setSizes()};this._initObj=function(a){null!=a.skin&&this.setSkin(a.skin);window.dhx4.s2b(a.multi_mode)&&this.enableMultiMode();null!=a.icons_path&&this.setIconsPath(a.icons_path);null!=a.icon_path&&this.setIconsPath(a.icon_path);if(null!=a.items)for(var c=0;c<a.items.length;c++)this.addItem(a.items[c].id,a.items[c].text,a.items[c].open,a.items[c].height,
a.items[c].icon||a.items[c].img);1==window.dhx4.s2b(a.dnd)&&"function"==typeof this.enableDND&&this.enableDND()};this._xmlToObj=function(a){var c={items:[]};a=a.getElementsByTagName("accordion")[0];null!=a.getAttribute("skin")&&(c.skin=a.getAttribute("skin"));"multi"==a.getAttribute("mode")&&(c.multi_mode=!0);null!=a.getAttribute("multiMode")&&(c.multi_mode=window.dhx4.s2b(a.getAttribute("multiMode")));null!=a.getAttribute("iconsPath")&&(c.icons_path=a.getAttribute("iconsPath"));for(var e=0;e<a.childNodes.length;e++){var g=
a.childNodes[e];if("undefined"!=typeof g.tagName&&"cell"==String(g.tagName).toLowerCase()){var h={};null!=g.getAttribute("id")&&(h.id=g.getAttribute("id"));null!=g.getAttribute("icon")&&(h.icon=g.getAttribute("icon"));null!=g.getAttribute("height")&&(h.height=g.getAttribute("height"));null!=g.getAttribute("open")&&(h.open=window.dhx4.s2b(g.getAttribute("open")));h.text=g.firstChild.nodeValue;c.items.push(h)}}return c};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0});
window.dhx4._eventable(this);this._callMainEvent=function(a,c){return this.callEvent(a,c)};this.attachEvent("onActive",function(a){null!=a&&null!=this.t[a]&&null!=this.t[a].cell.dataObj&&"editor"==this.t[a].cell.dataType&&this.t[a].cell.dataObj._prepareContent(!0);null!=a&&null!=this.t[a]&&1==this.t[a].cell.conf.opened&&this.t[a].cell._adjustProgress()});"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin));null!=g&&(this._initObj(g),g=null);
return this}dhtmlXAccordion.prototype=new dhtmlXCellTop;
function dhtmlXAccordionCell(a,c){dhtmlXCellObject.apply(this,[a,"_acc"]);this.acc=c;this.conf.visible=!0;this.conf.docked=!0;this.attachEvent("_onCellUnload",function(){this._trDetachEv();this._unloadDocking();this.acc=null;this.cell._accObj=null;this.cell.childNodes[this.conf.idx.hdr].onselectstart=null;this.moveOnTop=this.setHeight=this.isVisible=this.hide=this.show=this.clearIcon=this.setIcon=this.getText=this.setText=this._onActiveCall=this._trOnEnd=this._trDetachEv=this._trAttachEv=this._trInitEv=
this._isOpened=this._close=this._open=this._adjustCell=this._setWidth=this._getHdrHeight=this._initHeader=this.cell.childNodes[this.conf.idx.hdr].onclick=null});this.acc.attachEvent("onBeforeDrag",function(a){null!=this.t[a].cell.dataObj&&"editor"==this.t[a].cell.dataType&&(null==this.conf.editor_data&&(this.conf.editor_data={}),this.conf.editor_data[a]=this.t[a].cell.dataObj.getContent());for(var c in this.t)this.t[c].cell._showCellCover();return!0});this.acc.attachEvent("onDrop",function(a){null!=
this.t[a].cell.dataObj&&"editor"==this.t[a].cell.dataType&&(this.t[a].cell.dataObj._prepareContent(!0),null!=this.conf.editor_data&&null!=this.conf.editor_data[a]&&(this.t[a].cell.dataObj.setContent(this.conf.editor_data[a]),this.conf.editor_data[a]=null));for(var c in this.t)this.t[c].cell._hideCellCover()});this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(a){"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&
this._hideBorders()});this._initHeader();this.conf.tr={};for(var e in this.acc.conf.tr)this.conf.tr[e]=this.acc.conf.tr[e];0!=this.conf.tr.prop&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)});this.open=function(a){1==window.dhx4.s2b(a)&&(this.acc.conf.on_active_click=!0);this.acc._openItem(this._idd)};this.close=function(a){1==window.dhx4.s2b(a)&&(this.acc.conf.on_active_click=!0);this.acc._closeItem(this._idd)};this._setWidth=function(a){a!=
this.conf.size.w&&(this.conf.size.w=a,this.cell.style.width=a+"px");this._adjustCell()};this._adjustCell=function(){this._adjustCont();null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes()};this._initDocking();return this}dhtmlXAccordionCell.prototype=new dhtmlXCellObject;
dhtmlXAccordionCell.prototype._initHeader=function(){var a=document.createElement("DIV");a.className="dhx_cell_hdr";a.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>";this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx()};dhtmlXAccordionCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};
dhtmlXAccordionCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",this._adjustCont(this._idd))};dhtmlXAccordionCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._adjustCont(this._idd))};dhtmlXAccordionCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible};
dhtmlXAccordionCell.prototype.setText=function(a){this.conf.text=a;var c=this.cell.childNodes[this.conf.idx.hdr];c.childNodes["dhx_cell_hdr_icon"==c.firstChild.className?1:0].innerHTML="<span>"+a+"</span>"};dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text};
dhtmlXAccordionCell.prototype.setIcon=function(a){var c=this.cell.childNodes[this.conf.idx.hdr];if("dhx_cell_hdr_icon"!=c.firstChild.className){c.firstChild.className+=" dhx_cell_hdr_icon";var e=document.createElement("IMG");e.className="dhx_cell_hdr_icon";c.insertBefore(e,c.firstChild)}c.firstChild.src=this.acc.conf.icons_path+a};
dhtmlXAccordionCell.prototype.clearIcon=function(){var a=this.cell.childNodes[this.conf.idx.hdr];"dhx_cell_hdr_icon"==a.firstChild.className&&(a.removeChild(a.firstChild),a.firstChild.className=String(a.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,""))};
dhtmlXAccordionCell.prototype._open=function(a){var c={};this.acc.conf.multi_mode?(c={},c[this._idd]=!0,c=this.acc._getDynData(c),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"):c[this._idd]=this.conf.size.h;for(var e in c){null!=this.acc._openCache&&(this.acc._openCache[e]=!0);var g=this.acc.t[e].cell;g.cell.className=String(g.cell.className).replace(/\s{1,}dhx_cell_closed/gi,"");g.conf.opened=!0;g._trInitEv("open",a);g.conf.size.h=c[e];g.cell.style.height=g.conf.size.h+
"px"}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))};
dhtmlXAccordionCell.prototype._close=function(a){var c={};this.acc.conf.multi_mode?(c={},c[this._idd]=!0,c=this.acc._getDynData(null,c),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"):c[this._idd]=this._getHdrHeight();for(var e in c){var g=this.acc.t[e].cell;null!=this.acc._openCache&&(this.acc._openCache[e]=!0);e==this._idd?(g.cell.className+=" dhx_cell_closed",g.conf.opened=!1,g._trInitEv("close",a)):(g.conf.size.h=c[e],g._adjustCell(),g._trInitEv("open",a));g.cell.style.height=
c[e]+"px"}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))};dhtmlXAccordionCell.prototype.isOpened=function(){return 1==this.conf.opened};dhtmlXAccordionCell.prototype._trInitEv=function(a,c){0!=this.conf.tr.prop&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),c&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+a]),this._cellSetOpacity(a,c))};
dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)};dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)};
dhtmlXAccordionCell.prototype._trOnEnd=function(a){a.stopPropagation&&a.stopPropagation();"height"==a.propertyName&&null!=this._accObj&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(null!=this._accObj._openCache&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),1==this._accObj.conf.on_active_click&&(this._accObj.conf.multi_mode?this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]):(null!=this._accObj.conf.on_active_id&&
this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null),this._accObj.conf.on_active_click=!1),this._accObj=null)};dhtmlXAccordionCell.prototype._cellSetOpacity=function(a,c){for(var e in this.conf.idx)1!={hdr:!0,pr1:!0,pr2:!0,cover:!0}[e]&&(c&&(this.cell.childNodes[this.conf.idx[e]].style[this.conf.tr.prop]=this.conf.tr["op_"+a]),this.cell.childNodes[this.conf.idx[e]].style.opacity=this.conf.tr["op_v_"+a])};
dhtmlXAccordionCell.prototype._onActiveCall=function(a){0!=this.acc.conf.on_active_click&&(1==this.acc.conf.multi_mode?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):1==a&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))};
dhtmlXAccordionCell.prototype.show=function(){this.conf.visible||(0==this.conf.docked?this.dock():(this.cell.style.display="",this.conf.visible=!0,this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()))};
dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())};dhtmlXAccordionCell.prototype.isVisible=function(){return 1==this.conf.visible};
dhtmlXAccordionCell.prototype.setHeight=function(a){this.acc.conf.multi_mode&&("*"==a?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=a),this.conf.opened&&("*"!=a&&(this.cell.style.height=a+"px"),this.acc._adjustOpened()))};dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())};
dhtmlXAccordionCell.prototype._initDocking=function(){var a=this;this.dock=function(){if(null!=this.acc.dhxWins&&1!=this.conf.docked){var a=this.acc.dhxWins.window(this._idd);a.close();this._attachFromCell(a);this.conf.docked=!0;this.show();this.conf.dock_opened&&this.open();this.acc._callMainEvent("onDock",[this._idd])}};this.undock=function(a,e,g,h){null!=this.acc.dhxWins&&0!=this.conf.docked&&(this.conf.dock_opened=this.conf.opened,null!=this.acc.dhxWins.window(this._idd)?(a=this.acc.dhxWins.window(this._idd),
a.show()):(null==a&&(a=20),null==e&&(e=20),null==g&&(g=320),null==h&&(h=200),a=this.acc.dhxWins.createWindow(this._idd,a,e,g,h),a.button("close").hide(),a.addUserButton("dock",99,"Dock"),a.button("dock").show(),a.button("dock").attachEvent("onClick",this._doOnDockClick),a.setText(this.getText()),a.attachEvent("onClose",this._doOnDockWinClose)),this.conf.docked=!1,this.hide(),a._attachFromCell(this),this.acc._callMainEvent("onUnDock",[this._idd]))};this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=
function(a){a.hide();return!1};this._unloadDocking=function(){a=null}};
dhtmlXCellObject.prototype.attachAccordion=function(a){this.callEvent("_onBeforeContentAttach",["acc"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";this._attachObject(c);"undefined"==typeof a&&(a={});"undefined"==typeof a.skin&&(a.skin=this.conf.skin);a.parent=c;"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={s:{first:-1},m:{first:4}});"undefined"!=typeof window.dhtmlXTabBarCell&&this instanceof
window.dhtmlXTabBarCell&&"dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1});"undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(c._ofs={},1!=this.sidebar.conf.autohide&&(c._ofs.l=2),1==this.sidebar.conf.header&&(c._ofs.t=3)):(c._ofs={l:-1},"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=-1))));"undefined"!=typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&
this._hideBorders();this.dataType="acc";this.dataObj=new dhtmlXAccordion(a);a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj};
dhtmlXAccordion.prototype.enableDND=function(){if(0!=this.conf.multi_mode&&null==this._dnd){var a=this;this._dnd={tr_count:0,tr_items:{}};this._dndAttachEvent=function(a){a=this.t[a].cell;1!=a.conf.dnd_inited&&("function"==typeof window.addEventListener?a.cell.childNodes[a.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):a.cell.childNodes[a.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),a.conf.dnd_inited=!0)};this._dndDetachEvent=function(a){a=this.t[a].cell;1==a.conf.dnd_inited&&
("function"==typeof window.addEventListener?a.cell.childNodes[a.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):a.cell.childNodes[a.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),a.conf.dnd_inited=!1)};this._dndOnMouseDown=function(c){c=c||event;c.preventDefault&&c.preventDefault();for(var g=c.target||c.srcElement;null!=g&&g.parentNode!=a.cont;)g=g.parentNode;null!=g&&a._dndDragStart(c,g)};this._dndDragStart=function(a,c){if(1!=this._dnd.tr_waiting){for(var h=
-1,l=0;l<c.parentNode.childNodes.length;l++)c.parentNode.childNodes[l]==c&&(h=l);if(!0===this.callEvent("onBeforeDrag",[c._accId,h])){"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1));this._dnd.dragObj=c;this._dnd.dy=a.clientY;for(l=h=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]._ind=
l,this._dnd.dragObj.parentNode.childNodes[l]==this._dnd.dragObj?(this._dnd.dragObj._k0=h,0<l&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),h=0):h+=this._dnd.dragObj.parentNode.childNodes[l].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[l].style.marginTop);this._dnd.dragObj._k1=h;this._dnd.h=this._dnd.dragObj.offsetHeight;this._dnd.ofs=!1}}};this._dndDoDrag=function(a){if(this._dnd.dragObj&&1!=this._dnd.tr_waiting){var c=a.clientY-this._dnd.dy;0==this._dnd.ofs&&5<Math.abs(c)&&
(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0);0>c?c<-this._dnd.dragObj._k0&&(c=-this._dnd.dragObj._k0):c>this._dnd.dragObj._k1&&(c=this._dnd.dragObj._k1);this._dnd.dragObj.style.top=c+"px";for(var h=a.clientY-this._dnd.dy,l=0,c=0,m=this._dnd.dragObj._ind+1;m<=this._dnd.dragObj.parentNode.lastChild._ind;m++){var n=this._dnd.dragObj.parentNode.childNodes[m].offsetHeight;h>l+2*n/3&&c++;l+=n}h=this._dnd.dragObj.nextSibling;for(m=0;null!=h;)++m<=c&&null!=h?h._ontop||(h._tm&&window.clearTimeout(h._tm),
this._dndAnim(h,!1,parseInt(h.style.top||0),-this._dnd.h-this.ofs.m.between),h._ontop=!0):h._ontop&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!0,parseInt(h.style.top||0),0),h._ontop=!1),h=h.nextSibling;h=this._dnd.dy-a.clientY;c=l=0;for(m=this._dnd.dragObj._ind-1;m>=this._dnd.dragObj.parentNode.firstChild._ind;m--)n=this._dnd.dragObj.parentNode.childNodes[m].offsetHeight,h>l+2*n/3&&c++,l+=n;h=this._dnd.dragObj.previousSibling;for(m=0;null!=h;)++m<=c&&null!=h?h._onbottom||(h._tm&&window.clearTimeout(h._tm),
this._dndAnim(h,!0,parseInt(h.style.top||0),this._dnd.h+this.ofs.m.between),h._onbottom=!0):h._onbottom&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!1,parseInt(h.style.top),0),h._onbottom=!1),h=h.previousSibling}};this._dndDragStop=function(a,c){if(!c&&0<this._dnd.tr_count)this._dnd.tr_waiting=!0;else if(this._dnd.dragObj){this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,"");this._dnd.dragObj.style.top="0px";for(var h=!1,l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++){var m=
this._dnd.dragObj.parentNode.childNodes[l];m!=this._dnd.dragObj&&(m._tm&&window.clearTimeout(m._tm),m.style.top="0px",m._ontop&&(null!=m.nextSibling&&1!=m.nextSibling._ontop||!m.nextSibling)&&(h=m.nextSibling||null),m._onbottom&&(null!=m.previousSibling&&1!=m.previousSibling._onbottom||!m.previousSibling)&&(h=m))}for(l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]._ontop=null,this._dnd.dragObj.parentNode.childNodes[l]._onbottom=null;!1!==h&&(null==
h?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,h));for(var h=this._dnd.dragObj._accId,n=m=this._dnd.dragObj._ind,l=0;l<this._dnd.dragObj.parentNode.childNodes.length;l++)this._dnd.dragObj.parentNode.childNodes[l]==this._dnd.dragObj&&(n=l);this._dnd.dragObj=null;this._dnd.tr_waiting=!1;this._updateCellsMargin();m!=n&&(this.setSizes(),this.callEvent("onDrop",[h,m,n]));"function"==typeof window.addEventListener?(document.body.removeEventListener("mousemove",
this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1))}};this._dndAnim=function(c,g,h,l){if(0!=this.conf.tr.prop)c._dnd_ev||(c._dnd_ev=!0,c._dnd_tr_prop=this.conf.tr.prop,c.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1)),1!=this._dnd.tr_items[c._accId]&&(this._dnd.tr_items[c._accId]=!0,this._dnd.tr_count++),c.style[this.conf.tr.prop]=
this.conf.tr.dnd_top,c.style.top=l+"px";else{var m=!1;g?(h+=5,h>=l&&(h=l,m=!0)):(h-=5,h<=l&&(h=l,m=!0));c.style.top=h+"px";c._tm&&window.clearTimeout(c._tm);c._tm=m?null:window.setTimeout(function(){a._dndAnim(c,g,h,l)},5)}};this._dndOnTrEnd=function(c){c.stopPropagation&&c.stopPropagation();"top"==c.propertyName&&(1==a._dnd.tr_items[this._accId]&&(a._dnd.tr_count--,a._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",0==a._dnd.tr_count&&1==a._dnd.tr_waiting&&a._dndDragStop(null,!0))};
this._dndOnMouseMove=function(c){a._dndDoDrag(c||event)};this._dndOnMouseUp=function(c){a._dndDragStop(c||event)};this._dndClearCell=function(a){this.t[a].cell.cell._dnd_ev&&this.t[a].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1);this._dndDetachEvent(a)};this._unloadDND=function(){for(var c in this)0==String(c).indexOf("_dnd")&&"function"==typeof this[c]&&(this[c]=null);a=this._dnd=null};for(var c in this.t)this._dndAttachEvent(c)}};
function dhtmlXLayoutObject(a,c,e){var g=null;null!=a&&"object"==typeof a&&"undefined"==typeof a.tagName&&1!=a._isCell&&(g={},null!=a.autosize&&(g.autosize=a.autosize),null!=a.cells&&(g.cells=a.cells),null!=a.pattern&&(c=a.pattern),null!=a.skin&&(e=a.skin),null!=a.offsets&&(g.offsets=a.offsets),a=a.parent);this.cdata={};this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"dhx_skyblue",css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",
b:"a"},inited:!1,b_size:{w:-1,h:-1}};if("object"==typeof a&&1==a._isCell)return g="undefined"!=typeof g&&null!=g?g:{},null==g.pattern&&null!=c&&(g.pattern=c),null==g.skin&&null!=e&&(g.skin=e),a.attachLayout(g);window.dhtmlXCellTop.apply(this,[a,null==g?null:g.offsets]);this.conf.sw=this._detectSW();var h=this;this._getLayout=function(){return this};this.mainInst=null!=a._layoutMainInst?a._layoutMainInst:null;this._getMainInst=function(){return null!=this.mainInst?this.mainInst._getMainInst():this};
this._init=function(a){a="string"==typeof a?this.tplData[a]:a;this.conf.mode=a.mode;"c"==this.conf.mode?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this));for(var c in this.cdata)this.cont.appendChild(this.cdata[c].cell),this.cdata[c].conf.init={w:.5,h:.5};if("c"!=this.conf.mode){var e=this._getMainInst();null==e.conf.sep_idx?e.conf.sep_idx=1:e.conf.sep_idx++;this.sep=new dhtmlXLayoutSepObject(this.conf.mode,e.conf.sep_idx);
this.cont.appendChild(this.sep.sep);this.sep._getLayout=function(){return h._getLayout()};e=null}if(null!=a.cells)for(c in a.cells)null!=a.cells[c].width&&(this.cdata[c].conf.init.w=a.cells[c].width),null!=a.cells[c].height&&(this.cdata[c].conf.init.h=a.cells[c].height),null!=a.cells[c].name&&(this.cdata[c].conf.name=a.cells[c].name,this.cdata[c].setText(a.cells[c].name)),null!=a.cells[c].fsize&&(this.cdata[c].conf.fsize=a.cells[c].fsize);this.setSizes();for(c in this.cdata)this.cdata[c].conf.init=
{};if(null!=a.cells)for(c in a.cells)null!=a.cells[c].layout&&(this.cdata[c].dataNested=!0,this.cdata[c]._layoutMainInst=this,this.cdata[c].attachLayout({pattern:a.cells[c].layout}),this.cdata[c]._layoutMainInst=null)};this.setSizes=function(a,c,e,g){var h=1==this.conf.inited&&this._getMainInst()==this&&1==this.checkEvent("onResizeFinish")?{}:!1;this._adjustCont();var l=this.cont.offsetWidth,x=this.cont.offsetHeight;if("c"==this.conf.mode){var y,C,A;this.cdata.a._setSize(0,0,l,x,a,e,g)}else{if("undefined"==
typeof c)if(c=this.conf.autosize,this.cdata.a.conf.collapsed)c="b";else if(this.cdata.b.conf.collapsed)c="a";else if("a"==a||"b"==a)c=this.conf.nextCell[a];if("v"==this.conf.mode){if("a"==c){var D=null!=this.cdata.b.conf.init.w?Math.round(l*this.cdata.b.conf.init.w-this.conf.sw/2):this.cdata.b.conf.size.w,H=l-D,E=0,F=x;c=0;y=E;C=H-c-this.conf.sw;A=F}else y=c=0,C=null!=this.cdata.a.conf.init.w?Math.round(l*this.cdata.a.conf.init.w-this.conf.sw/2)-c:this.cdata.a.conf.size.w,A=x-y,H=c+C+this.conf.sw,
E=y,D=l-H,F=A;this.cdata.a._setSize(c,y,C,A,a,e,g);this.cdata.b._setSize(H,E,D,F,a,e,g);this.sep._setSize(c+C,y,this.conf.sw,A)}else"a"==c?(F=null!=this.cdata.b.conf.init.h?Math.round(x*this.cdata.b.conf.init.h-this.conf.sw/2):this.cdata.b.conf.size.h,H=0,E=x-F,D=l-H,c=H,y=0,C=D,A=E-y-this.conf.sw):(y=c=0,C=l-c,A=null!=this.cdata.a.conf.init.h?Math.round(x*this.cdata.a.conf.init.h-this.conf.sw/2):this.cdata.a.conf.size.h,H=c,E=y+A+this.conf.sw,D=C,F=x-E),this.cdata.a._setSize(c,y,C,A,a,e,g),this.cdata.b._setSize(H,
E,D,F,a,e,g),this.sep._setSize(c,y+A,C,this.conf.sw)}this.callEvent("_onSetSizes",[]);!h||this.conf.b_size.w==l&&this.conf.b_size.h==x||this._callMainEvent("onResizeFinish",[]);this.conf.b_size={w:l,h:x}};this._getAvailWidth=function(){for(var a=[],c=0;c<this.conf.as_cells.h.length;c++){var e=this.cells(this.conf.as_cells.h[c]),g=e.layout,h=g.conf.autosize;e.conf.collapsed&&(e=g.cdata[g.conf.nextCell[e._idd]],h=g.conf.nextCell[h]);a.push(Math.max(0,e.getWidth()-e._getMinWidth(h)))}a=0<a.length?Math.min.apply(window,
a):0;return this.cont.offsetWidth-a};this._getAvailHeight=function(){for(var a=[],c=0;c<this.conf.as_cells.v.length;c++){var e=this.cells(this.conf.as_cells.v[c]),g=e.layout,h=g.conf.autosize;e.conf.collapsed&&(e=g.cdata[g.conf.nextCell[e._idd]],h=g.conf.nextCell[h]);a.push(Math.max(0,e.getHeight()-e._getHdrHeight()-e._getMinHeight(h)))}a=Math.min.apply(window,a);return this.cont.offsetHeight-a};this.setSkin=function(a){this._setBaseSkin(a);this.conf.skin=a};this.unload=function(){this.conf.unloading=
!0;this.parentLayout=this.mainInst=null;if(null!=this.items){for(var a=0;a<this.items.length;a++)this.items[a]=null;this.items=null}null!=this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null);null!=this.sep&&(this.sep._unload(),this.sep=null);for(var c in this.cdata)this.cdata[c]._unload(),this.cdata[c]=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(c in this)this[c]=null;h=null};this._getWindowMinDimension=function(a){a=h._getAvailWidth()+7+7;var c=h._getAvailHeight()+7+31;return{w:Math.max(a,
200),h:Math.max(c,140)}};window.dhx4._eventable(this);this._callMainEvent=function(a,c){return this.callEvent(a,c)};this._init(c||"3E");a=this._availAutoSize[c];null!=a&&(this.conf.pattern=c,this.setAutoSize(a.h[a.h.length-1],a.v[a.v.length-1]));"function"==typeof window.dhtmlXWindows&&null==this.mainInst&&(this.dhxWins=new dhtmlXWindows({vp_overflow:1==this.conf.fs_mode?!1:"auto"}),this.dhxWins.setSkin(this.conf.skin));this.conf.inited=!0;if(this==this._getMainInst()){var l=0;this.items=[];this.forEachItem(function(a){h.items.push(a);
a.conf.index=l++})}if(this==this._getMainInst()&&null!=g&&(null!=g.autosize&&this.setAutoSize.apply(this,g.autosize),null!=g.cells))for(c=0;c<g.cells.length;c++)a=g.cells[c],e=this.cells(a.id),a.width&&e.setWidth(a.width),a.height&&e.setHeight(a.height),a.text&&e.setText(a.text),a.collapsed_text&&e.setCollapsedText(a.collapsed_text),a.collapse&&e.collapse(),a.fix_size&&e.fixSize(a.fix_size[0],a.fix_size[1]),"undefined"!=typeof a.header&&0==window.dhx4.s2b(a.header)&&e.hideHeader();g=null;return this}
dhtmlXLayoutObject.prototype=new dhtmlXCellTop;dhtmlXLayoutObject.prototype.cells=function(a){for(var c in this.cdata){if(this.cdata[c].conf.name==a)return this.cdata[c];if("layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj){var e=this.cdata[c].dataObj.cells(a);if(null!=e)return e}}return null};
dhtmlXLayoutObject.prototype.forEachItem=function(a,c){if("function"==typeof a){"undefined"==typeof c&&(c=this);for(var e in this.cdata)"undefined"!=typeof this.cdata[e].conf.name&&a.apply(c,[this.cdata[e]]),"layout"==this.cdata[e].dataType&&1==this.cdata[e].dataNested&&null!=this.cdata[e].dataObj&&this.cdata[e].dataObj.forEachItem(a,c)}};
dhtmlXLayoutObject.prototype._forEachSep=function(a,c){if("function"==typeof a){"undefined"==typeof c&&(c=this);null!=this.sep&&a.apply(c,[this.sep]);for(var e in this.cdata)"layout"==this.cdata[e].dataType&&1==this.cdata[e].dataNested&&null!=this.cdata[e].dataObj&&this.cdata[e].dataObj._forEachSep(a,c)}};
dhtmlXLayoutObject.prototype._detectSW=function(){null==this._confGlob.sw&&(this._confGlob.sw={});null==this._confGlob.sw[this.conf.skin]&&(this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin));return this._confGlob.sw[this.conf.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.listPatterns=function(){var a=[],c;for(c in this.tplData)a.push(c);return a};
dhtmlXLayoutObject.prototype.listAutoSizes=function(){var a=null!=this.conf.as_cells?this.conf.as_cells.h.join(";"):"",c=null!=this.conf.as_cells?this.conf.as_cells.v.join(";"):"";return[a,c,this._availAutoSize[this.conf.pattern].h,this._availAutoSize[this.conf.pattern].v]};
dhtmlXLayoutObject.prototype._getCellsNames=function(a){var c={};null!=this.cdata[a].conf.name&&(c[this.cdata[a].conf.name]=!0);if("layout"==this.cdata[a].dataType&&null!=this.cdata[a].dataObj&&this.cdata[a].dataObj.mainInst==this){var e=this.cdata[a].dataObj._getCellsNames("a");a=this.cdata[a].dataObj._getCellsNames("b");for(var g in e)c[g]=e[g];for(g in a)c[g]=a[g]}return c};
dhtmlXLayoutObject.prototype.setAutoSize=function(a,c,e){if(!0!==e){var g=this.listAutoSizes();if(g[0]==a&&g[1]==c)return;var h=!1,l=!1;for(e=0;e<g[2].length;e++)h=h||g[2][e]==a;for(e=0;e<g[3].length;e++)l=l||g[3][e]==c;if(!h||!l)return}this.conf.as_cells={h:a.split(";"),v:c.split(";")};var g="v"==this.conf.mode?"h":"v",m;for(m in this.cdata){h=this._getCellsNames(m);l=!1;for(e=0;e<this.conf.as_cells[g].length;e++)l=l||h[this.conf.as_cells[g][e]];l&&(this.conf.autosize=m);"layout"==this.cdata[m].dataType&&
null!=this.cdata[m].dataObj&&this.cdata[m].dataObj.setAutoSize(a,c,!0)}};
dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},
"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",
fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",
fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:.25,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,
2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},
"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},
b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},
b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",
fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:.2,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{v:[1,2]}},
b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:.2,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/
3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/
3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",
fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",
width:.25,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",
fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",
height:.25,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",
height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",
width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",
cells:{a:{name:"b",width:.2,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}};
dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],
v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e",
"d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:"a;d b;d c;d a;e b;e c;e".split(" ")},"5S":{h:["a;b","c;d;e"],v:"a;c a;d a;e b;c b;d b;e".split(" ")},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e",
"f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:"abcdef".split(""),v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}};
function dhtmlXLayoutSepObject(a,c){var e=this;this.conf={mode:a,idx:c,blocked:!1,locked:!1,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&"undefined"==typeof window.addEventListener?1:0};window.dhx4.isIE&&0<=navigator.userAgent.indexOf("MSIE 7.0")&&0<=navigator.userAgent.indexOf("Trident")&&(this.conf.btn_left=1);this.sep=document.createElement("DIV");this.sep.className="dhxlayout_sep";1==window.dhx4.isIE&&(this.sep.onselectstart=function(){return!1});this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+
this.conf.mode;this._setSize=function(a,c,e,m){this.sep.style.left=a+"px";this.sep.style.top=c+"px";this.sep.style.width=Math.max(e,0)+"px";this.sep.style.height=Math.max(m,0)+"px"};this._lockSep=function(a){this.conf.locked=1==a;this._blockSep()};this._setWH=function(a){var c=this._getLayout();c.conf.sw=null==a?c._detectSW():Math.max(parseInt(a)||-1,-1);c._getMainInst().setSizes()};this._blockSep=function(){var a=this._getLayout(),a=a.cdata.a.conf.collapsed||a.cdata.b.conf.collapsed||this.conf.locked;
this.conf.blocked!=a&&(this.sep.className="dhxlayout_sep"+(a?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=a)};this._beforeResize=function(a){if(!this.conf.blocked&&(null==this.conf.resize||1!=this.conf.resize.active)){if(a.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var c=a.pageX||a.touches[0].pageX,e=a.pageY||a.touches[0].pageY}else{if(a.button!==this.conf.btn_left)return;c=a.clientX;e=a.clientY}1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOff();
var m=this._getLayout();this.conf.resize={sx:c,sy:e,tx:a.layerX,ty:a.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:m.cdata.a._getAvailWidth("a"),min_wb:m.cdata.b._getAvailWidth("b"),min_ha:m.cdata.a._getAvailHeight("a"),min_hb:m.cdata.b._getAvailHeight("b")};this.conf.resize.nx=this.conf.resize.sep_x;this.conf.resize.ny=this.conf.resize.sep_y;"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._doOnMouseMove,!1),window.addEventListener("mouseup",
this._doOnMouseUp,!1),window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp))}};this._onResize=function(a){this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0);"v"==this.conf.mode?(a=this.conf.resize.sx-("mousemove"==a.type?a.clientX:a.pageX||a.touches[0].pageX),this.conf.resize.nx=
this.conf.resize.sep_x-a,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"):(a=this.conf.resize.sy-("mousemove"==a.type?a.clientY:a.pageY||a.touches[0].pageY),this.conf.resize.ny=this.conf.resize.sep_y-a,this.conf.resize.ny>this.conf.resize.sep_y+
this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px")};this._afterResize=function(a){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._doOnMouseMove,!1),window.removeEventListener("mouseup",this._doOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,
this._doOnMouseMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp));if(this.conf.resize.active){if(a.type==window.dhx4.dnd.evs.end)this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"");else if(a.button!==this.conf.btn_left)return;a=this._getLayout();var c=a._getMainInst(),e=1==c.checkEvent("onPanelResizeFinish")?{}:!1;
!1!==e&&c.forEachItem(function(a){e[a.conf.name]={w:a.conf.size.w,h:a.conf.size.h}});var m=this.conf.resize.nx-this.conf.resize.sep_x,n=this.conf.resize.ny-this.conf.resize.sep_y;a.cdata.a._setSize(a.cdata.a.conf.size.x,a.cdata.a.conf.size.y,a.cdata.a.conf.size.w+m,a.cdata.a.conf.size.h+n,"a");a.cdata.b._setSize(a.cdata.b.conf.size.x+m,a.cdata.b.conf.size.y+n,a.cdata.b.conf.size.w-m,a.cdata.b.conf.size.h-n,"b");this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),
parseInt(this.r_sep.style.height));if(window.dhx4.isIE){var r=this;window.setTimeout(function(){r._removeResizeArea();r=null},1)}else this._removeResizeArea();if(!1!==e){var u=[];c.forEachItem(function(a){var c=e[a.conf.name];c.w==a.conf.size.w&&c.h==a.conf.size.h||u.push(a.conf.name)});c._callMainEvent("onPanelResizeFinish",[u])}c=a=null;this.conf.resize.active=!1;this.conf.resize=null;1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOn()}else this.conf.resize=null};this._initResizeArea=function(){null==
this.r_sep&&(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1}));if(null==this.r_area){this.r_area=document.createElement("DIV");this.r_area.className="dhxlayout_resize_area";this.sep.parentNode.appendChild(this.r_area);
window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1});if("v"==this.conf.mode)var a=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,c=parseInt(this.r_sep.style.top),e=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),m=parseInt(this.r_sep.style.height);else a=parseInt(this.r_sep.style.left),c=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,e=parseInt(this.r_sep.style.width),m=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);
this.r_area.style.left=a+"px";this.r_area.style.top=c+"px";dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=e+"px",this.r_area.style.height=m+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight);this.r_area.style.width=e+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+
"px";this.r_area.style.height=m+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode};this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")};this._doOnMouseDown=function(a){a=
a||event;a.preventDefault?a.preventDefault():a.cancelBubble=!0;e._beforeResize(a)};this._doOnBodyMouseDown=function(a){a=a||event;if(null!=e.conf.resize&&1==e.conf.resize.active&&a.button!==e.conf.btn_left)return a.preventDefault&&a.preventDefault(),a.returnValue=!1,a.cancelBubble=!0,!1};this._doOnMouseMove=function(a){a=a||event;a.preventDefault?a.preventDefault():a.cancelBubble=!0;e._onResize(a)};this._doOnMouseUp=function(a){a=a||event;"mouseup"==a.type&&a.button!==e.conf.btn_left||e._afterResize(a)};
"function"==typeof window.addEventListener?(this.sep.addEventListener("mousedown",this._doOnMouseDown,!1),this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.addEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.attachEvent("onmousedown",this._doOnMouseDown),document.body.attachEvent("onmousedown",this._doOnBodyMouseDown),document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown));
this._unload=function(){"function"==typeof window.addEventListener?(this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1),this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.detachEvent("onmousedown",this._doOnMouseDown),document.body.detachEvent("onmousedown",this._doOnBodyMouseDown),document.body.detachEvent("oncontextmenu",
this._doOnBodyMouseDown));1==window.dhx4.isIE&&(this.sep.onselectstart=null);this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var a in this)this[a]=null;e=null};return this}
dhtmlXLayoutObject.prototype.setSeparatorSize=function(a,c){if("number"==typeof a){var e=this.setSeparatorSize({index:a,current:-1},c);null!=e.sep&&e.sep._setWH(c)}else{for(e in this.cdata){if("layout"==this.cdata[e].dataType&&1==this.cdata[e].dataNested&&null!=this.cdata[e].dataObj&&(a=this.cdata[e].dataObj.setSeparatorSize(a,c),null!=a.sep))break;if("a"==e&&null!=this.sep&&(a.current++,a.index==a.current))return{sep:this.sep}}return a}};
window.dhtmlXLayoutCell=function(a,c){dhtmlXCellObject.apply(this,[a,"_layout"]);var e=this;this.layout=c;this.conf.skin=this.layout.conf.skin;this.conf.mode=this.layout.conf.mode;this.conf.collapsed=!1;this.conf.fixed={w:!1,h:!1};this.conf.docked=!0;this.conf.min_width=26;this.conf.min_height=26;this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null;"c"!=this.conf.mode&&(this.cell.childNodes[this.conf.idx.hdr].lastChild.ondblclick=null);this._unloadDocking();
e=this.layout=null});this._hdrInit();this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){e.layout._getMainInst()._callMainEvent("onDblClick",[e.conf.name])};this.attachEvent("_onContentLoaded",function(){this.layout._getMainInst()._callMainEvent("onContentLoaded",[this.conf.name])});if("c"!=this.conf.mode){var g=document.createElement("DIV");g.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd;this.cell.childNodes[this.conf.idx.hdr].appendChild(g);g.onclick=function(a){e.conf.collapsed?
e.expand():e.collapse()};g=null}this.attachEvent("_onBeforeContentAttach",function(a){"tabbar"!=a&&"layout"!=a&&"acc"!=a||this._hideBorders();"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&(this._hideBorders(),this.showHeader())});this._initDocking();return this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject;dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name};
dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var a=this.layout._getMainInst();if(null!=a.dhxWins&&!this.conf.docked){var e=a.dhxWins.window(this.conf.name);e.close();this._attachFromCell(e);this.conf.docked=!0;this.conf.dock_collapsed||this.expand();a._callMainEvent("onDock",[this.conf.name])}};this.undock=function(a,e,g,h){var l=this.layout._getMainInst();null!=l.dhxWins&&0!=this.conf.docked&&((this.conf.dock_collapsed=this.conf.collapsed)||this.collapse(),null!=
l.dhxWins.window(this.conf.name)?(a=l.dhxWins.window(this.conf.name),a.show()):(null==a&&(a=20),null==e&&(e=20),null==g&&(g=320),null==h&&(h=200),a=l.dhxWins.createWindow(this.conf.name,a,e,g,h),a.button("close").hide(),a.addUserButton("dock",99,"Dock"),a.button("dock").show(),a.button("dock").attachEvent("onClick",this._doOnDockClick),a.setText(this.getText()),a.attachEvent("onClose",this._doOnDockWinClose)),this.conf.docked=!1,a._attachFromCell(this),l._callMainEvent("onUnDock",[this.conf.name]))};
this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=function(a){a.hide();return!1};this._unloadDocking=function(){a=null}};
dhtmlXLayoutCell.prototype._hdrInit=function(){var a="";if(window.dhx4.isIE)-1!=navigator.userAgent.indexOf("MSIE 9.0")?a=" dhx_cell_hdr_text_ie9":window.dhx4.isIE8?a=" dhx_cell_hdr_text_ie8":window.dhx4.isIE7?a=" dhx_cell_hdr_text_ie7":window.dhx4.isIE6&&(a=" dhx_cell_hdr_text_ie6");else if(window.dhx4.isChrome||window.dhx4.isKHTML)a=" dhx_cell_hdr_text_chrome";var c=document.createElement("DIV");c.className="dhx_cell_hdr";c.innerHTML="<div class='dhx_cell_hdr_text"+a+"'></div>";this.cell.insertBefore(c,
this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx();this.attachEvent("_onSetSize",this._hdrOnSetSize);this.attachEvent("_onBorderChange",this._hdrOnBorderChange);this.attachEvent("_onViewSave",this._hdrOnViewSave);this.attachEvent("_onViewRestore",this._hdrOnViewRestore)};
dhtmlXLayoutCell.prototype.showHeader=function(a){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",!0!==a&&this._adjustCont(this._idd))};
dhtmlXLayoutCell.prototype.hideHeader=function(a){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(this._idd),this.conf.hdr.h_saved=this._getMinHeight(this._idd),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),!0!==a&&this._adjustCont(this._idd))};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible};
dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return""==this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display};dhtmlXLayoutCell.prototype.setText=function(a){this.conf.hdr.text=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text};
dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.conf.hdr.text_collapsed=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text};dhtmlXLayoutCell.prototype._hdrUpdText=function(){this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+(1==this.conf.collapsed&&null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text)+"</span>"};
dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){1==this.conf.borders?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&"v"==this.conf.mode&&this._fitHdr()};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0);this._hdrUpdBorder()};
dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.conf.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){if(this.conf.hdr.visible!=this.views[a].hdr_vis)this[this.views[a].hdr_vis?"showHeader":"hideHeader"](!0);this.views[a].hdr_vis=null;delete this.views[a].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(a){return this.conf.collapsed&&"v"==this.conf.mode&&!0!==a?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight};
dhtmlXLayoutCell.prototype._fitHdr=function(){this.conf.collapsed?("undefined"==typeof dhtmlXLayoutObject.prototype._confGlob.hdrColH&&(this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(this.cell.childNodes[this.conf.idx.hdr].style.height)-this._getHdrHeight(!0)),this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH+"px"):this.cell.childNodes[this.conf.idx.hdr].style.height=
null};
dhtmlXLayoutCell.prototype.expand=function(a){if(!this.conf.collapsed)return!0;var c=this.layout;if("v"==this.conf.mode){var e=a?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinWidth(this._idd),g=c.cont.offsetWidth-c.conf.sw;if(e+this.conf.size.w_avl>g)return!1}else{var h=a?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinHeight(this._idd)+c.cdata[c.conf.nextCell[this._idd]]._getHdrHeight(),l=c.cont.offsetHeight-c.conf.sw;if(h+this.conf.size.h_avl>l)return!1}if(0==this.conf.docked)this.dock();else return this.cell.className=
String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,"v"==this.conf.mode?(this.conf.size.w=Math.min(g-e,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(l-h,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),"v"==this.conf.mode&&this._fitHdr(),c.setSizes(c.conf.nextCell[this._idd],c.conf.nextCell[this._idd],1==a,"expand"),c.sep._blockSep(),this._hdrUpdText(),this.layout._getMainInst()._callMainEvent("onExpand",
[this.conf.name]),!0};
dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed)return!1;var a=this.layout;if(0==a.cdata[a.conf.nextCell[this._idd]].expand(!0))return!1;"v"==this.conf.mode?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight());this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode;this.conf.collapsed=!0;"v"==this.conf.mode?this.conf.size.w=
a.conf.hh:this.conf.size.h=this._getHdrHeight();a.setSizes(a.conf.nextCell[this._idd],a.conf.nextCell[this._idd],!1,"collapse");a.sep._blockSep();this._hdrUpdText();this.layout._getMainInst()._callMainEvent("onCollapse",[this.conf.name]);return!0};dhtmlXLayoutCell.prototype.isCollapsed=function(){return 1==this.conf.collapsed};dhtmlXLayoutCell.prototype.setMinWidth=function(a){this.conf.min_width=parseInt(a)||0};
dhtmlXLayoutCell.prototype.setMinHeight=function(a){this.conf.min_height=parseInt(a)||0};
dhtmlXLayoutCell.prototype._getMinWidth=function(a){if("layout"==this.dataType&&null!=this.dataObj){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailWidth();if("1C"==this.dataObj.conf.pattern)return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(a));if("v"==this.dataObj.conf.mode){var c=a||this._idd;this.dataObj.cdata[c].conf.collapsed&&(c=this.dataObj.conf.nextCell[c]);return Math.max(this.conf.min_width,this.dataObj.cdata[c]._getMinWidth(a)+
this.dataObj.cdata[this.dataObj.conf.nextCell[c]]._getWidth()+this.dataObj.conf.sw)}return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(a),this.dataObj.cdata.b._getMinWidth(a))}return Math.max(this.conf.min_width,1)};
dhtmlXLayoutCell.prototype._getMinHeight=function(a){var c=0;null!=this.conf.idx.menu&&(c+=this.cell.childNodes[this.conf.idx.menu].offsetHeight);return"layout"==this.dataType&&null!=this.dataObj?this.layout._getMainInst()!=this.dataObj._getMainInst()?this.dataObj._getAvailHeight():"1C"==this.dataObj.conf.pattern?Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(a)):"h"==this.dataObj.conf.mode?(c=a,this.dataObj.cdata[c].conf.collapsed&&(c=this.dataObj.conf.nextCell[c]),Math.max(this.conf.min_height,
this.dataObj.cdata[c]._getMinHeight(a)+this.dataObj.cdata[c]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[c]]._getHeight()+this.dataObj.conf.sw)):Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(a)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(a)+this.dataObj.cdata.b._getHdrHeight()):Math.max(this.conf.min_height,c)};
dhtmlXLayoutCell.prototype._getAvailWidth=function(a){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailWidth(a);if("v"==this.dataObj.conf.mode){var c=1==this.dataObj.cdata.a.conf.collapsed,e=1==this.dataObj.cdata.b.conf.collapsed;return"a"==a?this.dataObj.cdata[e?"a":"b"]._getAvailWidth(a):this.dataObj.cdata[c?"b":"a"]._getAvailWidth(a)}return Math.min(this.dataObj.cdata.a._getAvailWidth(a),this.dataObj.cdata.b._getAvailWidth(a))}return this.cell.offsetWidth-
this._getMinWidth()};
dhtmlXLayoutCell.prototype._getAvailHeight=function(a){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailHeight(a);if("h"==this.dataObj.conf.mode){var c=1==this.dataObj.cdata.a.conf.collapsed,e=1==this.dataObj.cdata.b.conf.collapsed;return"a"==a?this.dataObj.cdata[e?"a":"b"]._getAvailHeight(a):this.dataObj.cdata[c?"b":"a"]._getAvailHeight(a)}return Math.min(this.dataObj.cdata.a._getAvailHeight(a),this.dataObj.cdata.b._getAvailHeight(a))}a=this._getHdrHeight();
"v"==this.conf.mode&&this.conf.collapsed&&(a=this.conf.hh);return this.cell.offsetHeight-a-this._getMinHeight()};
dhtmlXLayoutCell.prototype.setWidth=function(a){if("v"==this.conf.mode){if(!this.conf.collapsed){var c=this.layout,e=c.cdata[c.conf.nextCell[this._idd]];if(e.conf.collapsed)e._getWidth();else{var g=this._getMinWidth(this._idd),h=c.cont.offsetWidth-e._getMinWidth(this._idd)-c.conf.sw;a=Math.max(g,Math.min(a,h));this.conf.size.w=a;c.setSizes(e._idd,e._idd)}}}else if(null!=this.layout&&null!=this.layout.parentLayout)for(g in e=this.layout.parentLayout,c=this.layout,e.cdata)e.cdata[g].dataObj==c&&e.cdata[g].setWidth(a)};
dhtmlXLayoutCell.prototype.setHeight=function(a){if("h"==this.conf.mode){if(!this.conf.collapsed){var c=this.layout,e=c.cdata[c.conf.nextCell[this._idd]];if(e.conf.collapsed){if(a=a+c.conf.sw+e._getHeight(),e=null!=this.layout&&null!=this.layout.parentLayout?this.layout.parentLayout:null,null!=e)for(var g in e.cdata)e.cdata[g].dataObj==c&&e.cdata[g].setHeight(a)}else{g=this._getMinHeight(this._idd)+this._getHdrHeight();var h=c.cont.offsetHeight-e._getMinHeight(this._idd)-e._getHdrHeight()-c.conf.sw;
a=Math.max(g,Math.min(a,h));this.conf.size.h=a;c.setSizes(e._idd,e._idd)}}}else if(null!=this.layout&&null!=this.layout.parentLayout)for(g in e=this.layout.parentLayout,c=this.layout,e.cdata)e.cdata[g].dataObj==c&&e.cdata[g].setHeight(a)};dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h};
dhtmlXLayoutCell.prototype.fixSize=function(a,c){this.conf.fixed.w=window.dhx4.s2b(a);this.conf.fixed.h=window.dhx4.s2b(c);var e=this.layout._getMainInst(),g={};e.forEachItem(function(a){if(null!=a.conf.fsize){a.getId();var c={h:1==a.conf.fixed.w,v:1==a.conf.fixed.h},e;for(e in c)if(1==c[e]&&null!=a.conf.fsize[e]){a.conf.fsize[e]instanceof Array||(a.conf.fsize[e]=[a.conf.fsize[e]]);for(var n=0;n<a.conf.fsize[e].length;n++)g[a.conf.fsize[e][n]]=!0}}});e._forEachSep(function(a){a._lockSep(1==g[a.conf.idx])});
e=null};
dhtmlXCellObject.prototype.attachLayout=function(a){this.callEvent("_onBeforeContentAttach",["layout"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);"undefined"!=typeof this._layoutMainInst&&(c._layoutMainInst=this._layoutMainInst);"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&(c._isParentCell=!0);"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&
(c._ofs={t:-1,r:-1,l:-1,b:-1});"undefined"!=typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&"dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1});"undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(c._ofs={l:8},1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=9)):"dhx_terrace"==this.conf.skin?(c._ofs={l:11},1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&
(c._ofs.t=10)):c._ofs={l:-1});"undefined"!=typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders();"string"==typeof a&&(a={pattern:a});"undefined"==typeof a.skin&&(a.skin=this.conf.skin);a.parent=c;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(a);this instanceof dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout);c._layoutMainInst=null;a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj};
function dhtmlXTabBar(a,c){var e=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"dhx_skyblue",css:"dhxtabbar",lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==c?"bottom":"top",tabsContCss:"",contZone:!0,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:!1,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9]}};var g=navigator.userAgent;0<=g.indexOf("Safari")&&(0<=
g.indexOf("5.1.7")||null!=g.match(/7[\.\d]* mobile/gi)&&null!=g.match(/AppleWebKit/gi))&&(this.conf.tabsContCss=" safari_517_fix");null!=a&&"object"==typeof a&&"undefined"==typeof a.tagName?(g=a.parent,"undefined"!=typeof a.skin&&(this.conf.skin=a.skin),"undefined"!=typeof a.mode&&(this.conf.tabsMode="bottom"==a.mode?"bottom":"top"),"undefined"!=typeof a.align&&(this.conf.align="right"==a.align?"right":"left"),"undefined"!=typeof a.close_button&&(this.conf.closeButton=window.dhx4.s2b(a.close_button)),
"undefined"!=typeof a.content_zone&&(this.conf.contZone=window.dhx4.s2b(a.content_zone)),"undefined"!=typeof a.xml&&(this.conf.autoload.xml=a.xml),"undefined"!=typeof a.json&&(this.conf.autoload.xml=a.json),"undefined"!=typeof a.tabs&&(this.conf.autoload.tabs=a.tabs),"undefined"!=typeof a.onload&&(this.conf.autoload.tabs=a.tabs),"undefined"!=typeof a.arrows_mode&&(this.conf.autoload.arrows_mode=a.arrows_mode)):g=a;window.dhtmlXCellTop.apply(this,[g,a.offsets]);null!=this.base._ofs&&null!=this.base._ofs.t&&
(this.conf.tabsTop=this.base._ofs.t);this.tabsMode=document.createElement("DIV");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.cont.appendChild(this.tabsMode);this.tabsArea=document.createElement("DIV");this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+
"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>";this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto";this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.tabsArea.childNodes[0].onclick=function(){"left"==e.conf.align?e._moveTabs(1):e._moveTabs(-1)};this.tabsArea.childNodes[2].onclick=function(){"left"==e.conf.align?e._moveTabs(-1):
e._moveTabs(1)};this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])};this.tabsArea.onclick=function(a){a=a||event;for(a=a.target||a.srcElement;null!=a;){if("undefined"!=typeof a._tabCloseId){if(!0!==e._onTabsAreaClick(a._tabCloseId))break;e.t[a._tabCloseId].conf.remove=!0;e._hideTab(a._tabCloseId);a=null}else"undefined"!=typeof a._tabId&&(e._doOnClick(a._tabId),a=null);null!=a&&(a=a.parentNode,a==this&&(a=null))}};this.tabsArea.onselectstart=function(a){a=a||event;a.preventDefault?
a.preventDefault():a.returnValue=!1};this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]);this.t[a].conf.enabled&&this._setTabActive(a)};this.t={};this.addTab=function(a,c,e,g,r,u){"boolean"!=typeof u&&(u=1==this.conf.closeButton);r=window.dhx4.s2b(r);var v=document.createElement("DIV");v.className="dhxtabbar_tab";v.innerHTML="<div class='dhxtabbar_tab_text"+(u?" dhxtabbar_tab_text_close":"")+"'>"+c+"</div>"+(u?"<div class='dhxtabbar_tab_close'></div>":"");v._tabId=a;
u&&(v.childNodes[1]._tabCloseId=a);var w=this.tabsArea.childNodes[1].firstChild;null!=g&&0<g+1&&g+1<w.childNodes.length?w.insertBefore(v,w.childNodes[g+1]):w.appendChild(v);g=!1;"undefined"==typeof e||null==e||"*"==e?(e=this._getLabelWidth(c,u),g=!0):e=parseInt(e);v.style.width=e+"px";w=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(w.cell);this.t[a]={tab:v,cell:w,conf:{text:c,visible:!0,active:!1,enabled:!0,close:u,width:e,autowidth:g}};r?this._setTabActive(a):this._adjustCell(a);1!=this.conf.initSeq&&
"auto"==this.conf.arwMode&&this.setSizes()};this.setSizes=function(){this._adjustCont();null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.cont.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth);this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(!0);this.callEvent("_onSetSizes",[])};this._adjustCell=function(a){if(this.conf.contZone&&null!=a){var c=("top"==this.conf.tabsMode?
this.tabsArea.offsetHeight:0)+this.conf.tabsTop,e=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,g=this.t[a].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=g&&"tabbar"!=g&&"acc"!=g||("top"==this.conf.tabsMode&&--c,e+=1);a!=this.conf.lastActive&&(c=-5E3,this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.zIndex=0);this.t[a].cell._setSize(0,c,this.cont.offsetWidth,e)}};this.setTabsMode=function(a){this.conf.tabsMode="bottom"==a?"bottom":"top";this.tabsMode.className=
"dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto";this.setSizes()};this._tabCss=function(a,c){var e=this.t[a].conf.active,g=!this.t[a].conf.enabled;return"dhxtabbar_tab"+(this.t[a].conf.visible?e||g?" dhxtabbar_tab"+(e?"_actv":"")+(g?"_dis":""):"":" dhxtabbar_tab_hidden")};this._getLabelWidth=function(a,c){null==this.tabsTextTest&&(this.tabsTextTest=document.createElement("SPAN"),
this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=a;var e=this.tabsTextTest.offsetWidth;window.dhx4.isIE&&0==e&&(e=this.tabsTextTest.offsetWidth);e+=this.conf.tabsWidth[this.conf.skin][0];1==c&&(e+=this.conf.tabsWidth[this.conf.skin][1]);document.body.removeChild(this.tabsTextTest);return e};this._adjustTabs=function(a){if(1==this._checkArrows()||1==a)this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-
1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+1+"px";a=this.tabsArea.childNodes[1];if(!(5>a.offsetWidth)){for(var c=parseInt(a.childNodes[0].style[this.conf.align]),e=null,g=0;g<a.childNodes[0].childNodes.length;g++){var r=a.childNodes[0].childNodes[g]._tabId;if(null!=r&&this.t[r].conf.visible){var u=this.t[r].tab.offsetWidth-this.conf.tabsOfs;this.t[r].conf.active&&(0>c||a.offsetWidth<
u?e={d:1,id:r}:c+u>a.offsetWidth&&(e={d:-1,id:r}));c+=u}}null!=e?this._moveTabs(e.d,e.id):a.offsetWidth>c+1&&(a.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(a.childNodes[0].style[this.conf.align])+(a.offsetWidth-c))+"px")}};this._moveTabs=function(a,c){for(var e=this.tabsArea.childNodes[1].childNodes[0],g=0,r=[],u=null,v=0;v<e.childNodes.length;v++){var w=e.childNodes[v]._tabId;null!=w&&this.t[w].conf.visible&&(r.push({id:w,w:this.t[w].tab.offsetWidth-this.conf.tabsOfs,ind:g}),w==c&&(u=
g),g++)}for(var g=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),w=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs,x=null,y=null,v=0;v<r.length;v++)r[v].x=g,null==x&&0<=g&&0<g+r[v].w&&(x=r[v]),g<w&&g+r[v].w<=w&&(y=r[v]),g+=r[v].w;null!=u?u=r[u]:(u=null,0<a?null==x?0<r.length&&(u=r[r.length-1]):0<x.ind&&r.length>=x.ind&&(u=r[x.ind-1]):null==y?0<r.length&&(u=r[0]):r.length>y.ind&&(u=r[y.ind+1]));
null!=u&&(e.style[this.conf.align]=0<a?g<w?Math.min(0,parseInt(e.style[this.conf.align])+(w-g))+"px":parseInt(e.style[this.conf.align])-u.x+"px":parseInt(e.style[this.conf.align])-u.x+w-u.w+"px")};this._getNextVisible=function(a,c){return this._getNearVisible(a,c,"next")};this._getPrevVisible=function(a,c){return this._getNearVisible(a,c,"previous")};this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")};this._getNearVisible=function(a,c,e){if("first"==e)a=this.tabsArea.childNodes[1].childNodes[0].childNodes[1],
e="next";else{if(null==a||null==this.t[a])return c?this._getFirstVisible():null;a=this.t[a].tab[e+"Sibling"]}for(c=null;null!=a&&null==c;){var g=a._tabId;null!=g&&null==c&&this.t[g].conf.visible?c=g:a=a[e+"Sibling"]}return c};this._showTab=function(a,c){if(null!=this.t[a]){if(1==this.t[a].conf.transActv){if("show"==this.t[a].conf.transMode)return}else if(1==this.t[a].conf.visible)return;!1!==this.conf.transProp?(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="show",this.t[a].conf.transProp=
this.conf.transProp,this.t[a].conf.transActvId=c?a:null,this.t[a].conf.transEv||(this.t[a].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[a].conf.transEv=!0),this.t[a].conf.visible=!0,this.t[a].tab.className=this._tabCss(a),this.t[a].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[a].tab.style.width=this.t[a].conf.width+"px",this.t[a].tab.clientWidth>=this.t[a].conf.width&&(this.t[a].tab.style.visibility="visible")):(this.t[a].conf.visible=!0,this.t[a].tab.style.display=
"",c||this.t[a].conf.active?(this.t[a].conf.active=!1,this._setTabActive(a)):this._adjustTabs())}};this._hideTab=function(a,c){if(null!=this.t[a]){if(1==this.t[a].conf.transActv){if("hide"==this.t[a].conf.transMode)return}else if(1!=this.t[a].conf.visible)return;var g=!1;this.conf.lastActive==a&&(this.conf.lastActive=null,this.t[a].conf.active=!1,this.t[a].tab.className=this._tabCss(a),g=!0);var n=this._getPrevVisible(a),r=this._getNextVisible(a),g=g&&!1!==c?(1==c?null:c)||r||n:null;!1!==this.conf.transProp?
(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="hide",this.t[a].conf.transProp=this.conf.transProp,this.t[a].conf.transActvId=g,this.t[a].conf.visible=!1,this.t[a].conf.transEv||(this.t[a].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[a].conf.transEv=!0),this.t[a].tab.style.visibility="hidden",this.t[a].tab.className=e._tabCss(a),this.t[a].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[a].tab.style.width="0px"):(this.t[a].tab.style.display="none",this.t[a].conf.visible=
!1,this.conf.contZone&&(this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.top="-5000px"),null!=g&&this._setTabActive(g),this._adjustTabs(),this.t[a].conf.remove&&this._removeTab(a))}};this._isTabVisible=function(a){return 1==this.t[a].conf.visible};this._doOnTrEnd=function(){var a=this._tabId;if(null!=e.t[a]){var c=e.t[a],g=c.conf.transActvId;"hide"==c.conf.transMode?c.conf.remove?e._removeTab(a):(c.tab.style[c.conf.transProp]="",e.conf.contZone&&(c.cell.cell.style.visibility=
"hidden",c.cell.cell.style.top="-5000px"),c.conf.transActv=!1):"show"==c.conf.transMode&&(c.tab.style[c.conf.transProp]="",c.tab.style.visibility="visible",c.conf.transMode=null,c.conf.transActv=!1);null!=g?e._setTabActive(g):e._adjustTabs()}};this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)};this.unload=function(){this.conf.unloading=!0;this.clearAll();this.t=null;null!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),
this.tabsTextTest=null);window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var a in this)this[a]=null;e=null};this.enableContentZone=function(a){this.conf.contZone=
1==a};this.setSkin=function(a){this._setBaseSkin(a);this.conf.skin=a;null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);for(var c in this.t)this.t[c].cell._resetSizeState(),1==this.t[c].conf.autowidth&&(this.t[c].conf.width=this._getLabelWidth(this.t[c].conf.text,this.t[c].conf.close),this.t[c].conf.visible&&(this.t[c].tab.style.width=this.t[c].conf.width+"px"));this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(a){a=
"left"==a?"left":"right";a==this.conf.align?this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px":(!1!==this.conf.transProp&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=a,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",!1!==this.conf.transProp&&
(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos))};this._initObj=function(a){this.conf.initSeq=!0;this.clearAll();var c=!1;null!=a.settings&&(null!=a.settings.skin&&this.setSkin(a.settings.skin),null!=a.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(a.settings.closeButton)),null!=a.settings.align&&this.setAlign(a.settings.align),"ajax"==a.settings.hrefmode&&(c=!0),"ajax-html"==
a.settings.hrefmode&&(c=!0,this.conf.url_demand=!0));if(null!=a.tabs)for(var e=0;e<a.tabs.length;e++){var g=a.tabs[e];"undefined"==typeof g.id&&(g.id=window.dhx4.newId());isNaN(parseInt(g.width))?g.width=null:g.width=parseInt(g.width);this.addTab(g.id,g.text||g.label||"",g.width,g.index,window.dhx4.s2b(g.selected)||window.dhx4.s2b(g.active),g.close);null!=g.content?this.cells(g.id).attachHTMLString(g.content):null!=g.href&&(1==this.conf.url_demand?this.conf.urls[g.id]={href:g.href,ajax:c}:this.cells(g.id).attachURL(g.href,
c));"undefined"!=typeof g.enabled&&0==window.dhx4.s2b(g.enabled)?this.tabs(g.id).disable():"undefined"!=typeof g.disabled&&1==window.dhx4.s2b(g.disabled)&&this.tabs(g.id).disable()}this.conf.initSeq=!1;"auto"==this.conf.arwMode&&this.setSizes();1==this.conf.url_demand&&this._loadURLOnDemand(this.conf.lastActive)};this._xmlToObj=function(a){var c={settings:{},tabs:[]};a=a.getElementsByTagName("tabbar")[0];if(null!=a){for(var e in{skin:1,align:1,closeButton:1,hrefmode:1})null!=a.getAttribute(e)&&(c.settings[e]=
a.getAttribute(e));a=a.getElementsByTagName("tab");for(var g=0;g<a.length;g++){var r={text:a[g].firstChild.nodeValue||""};for(e in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=a[g].getAttribute(e)&&(r[e]=a[g].getAttribute(e));var u=a[g].getElementsByTagName("content")[0];if(null!=u){r.content="";for(var v=0;v<u.childNodes.length;v++)r.content+=u.childNodes[v].nodeValue||""}c.tabs.push(r)}}return c};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});
g=window.dhx4.transDetect();this.conf.transProp=g.transProp;this.conf.transEv=g.transEv;this.conf.transValueWidth="width "+this.conf.transSpeed;g=null;!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos);this._callMainEvent=function(a,c){return this.callEvent(a,c)};window.dhx4._eventable(this);null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):
null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs});null!=this.conf.autoload.arrows_mode&&this.setArrowsMode(this.conf.autoload.arrows_mode);this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype=new dhtmlXCellTop;dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs="dhx_web"==this.conf.skin?0:1};
dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){return this.t[a]?this.t[a].cell:null};dhtmlXTabBar.prototype.getAllTabs=function(){var a=[],c;for(c in this.t)a.push(c);return a};
dhtmlXTabBar.prototype._setTabActive=function(a,c){this.t[a]&&!this.t[a].conf.active&&("undefined"==typeof c&&(c=!0),1!=c||!0===this.callEvent("onSelect",[a,this.conf.lastActive]))&&(this.setTabInActive(),this.t[a].conf.active=!0,this.conf.contZone&&(this.t[a].cell.cell.style.visibility="visible",this.t[a].cell.cell.style.top="0px",this.t[a].cell.cell.style.zIndex=1),this.t[a].tab.className=this._tabCss(a),this.conf.lastActive=a,this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(a))};
dhtmlXTabBar.prototype.setTabInActive=function(){this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)};
dhtmlXTabBar.prototype._isTabActive=function(a){return a==this.conf.lastActive&&null!=this.conf.lastActive};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)};dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)};
dhtmlXTabBar.prototype._enableTab=function(a,c){this.t[a]&&!this.t[a].conf.enabled&&(this.t[a].conf.enabled=!0,this.t[a].tab.className=this._tabCss(a),1==c&&this._setTabActive(a))};dhtmlXTabBar.prototype._disableTab=function(a,c){this.t[a]&&this.t[a].conf.enabled&&(this.t[a].conf.enabled=!1,this.t[a].tab.className=this._tabCss(a),!1!==c&&this.conf.lastActive==a&&(1==c&&(c=this._getNextVisible(a)||this._getPrevVisible(a)),this._setTabActive(c)))};
dhtmlXTabBar.prototype._isTabEnabled=function(a){return null!=this.t[a]&&1==this.t[a].conf.enabled};dhtmlXTabBar.prototype._setTabText=function(a,c,e){if(this.t[a]){var g=!1;if("undefined"==typeof e||null==e)e=this._getLabelWidth(c,this.t[a].conf.close),g=!0;this.t[a].tab.style.width=e+"px";this.t[a].tab.childNodes[0].innerHTML=c;this.t[a].conf.text=c;this.t[a].conf.width=e;this.t[a].conf.autowidth=g}};dhtmlXTabBar.prototype._getTabText=function(a){return this.t[a]?this.t[a].conf.text:null};
dhtmlXTabBar.prototype._removeTab=function(a,c,e){if(this.t[a])if(1!=e&&1!=this.t[a].conf.remove)this.t[a].conf.remove=!0,this._hideTab(a,c);else{"undefined"==typeof c&&(c=!0);var g=this._getNextVisible(a),h=this._getPrevVisible(a);1==this.t[a].conf.transEv&&(this.t[a].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[a].conf.transEv=!1);for(var l in this.t[a].conf)this.t[a].conf[l]=null;this.t[a].conf=null;delete this.t[a].conf;this.t[a].cell._unload();this.t[a].cell=null;this.t[a].tab.parentNode.removeChild(this.t[a].tab);
this.t[a].tab=null;this.t[a]=null;delete this.t[a];this.conf.urls[a]=null;delete this.conf.urls[a];this.conf.lastActive==a?(this.conf.lastActive=null,0!=c&&(a=1==c?g||h||this._getFirstVisible():c,null!=a&&this._setTabActive(a))):1!=e&&this._adjustTabs()}};dhtmlXTabBar.prototype.clearAll=function(){for(var a in this.t)this._removeTab(a,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};
dhtmlXTabBar.prototype.moveTab=function(a,c){if(this.t[a]&&!(0>c)){c+=1;var e=this.tabsArea.childNodes[1].firstChild;e.childNodes[c]!=this.t[a].tab&&(e.removeChild(this.t[a].tab),c>=e.childNodes.length?e.appendChild(this.t[a].tab):e.insertBefore(this.t[a].tab,e.childNodes[c]))}};dhtmlXTabBar.prototype._getIndex=function(a){for(var c=-1,e=this.tabsArea.childNodes[1].firstChild,g=1;g<e.childNodes.length;g++)e.childNodes[g]._tabId==a&&(c=g-1);return c};
dhtmlXTabBar.prototype.getNumberOfTabs=function(a){var c=0,e;for(e in this.t)c+=1!=a?1:1==this.t[e].conf.visible?1:0;return c};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(a){for(var c in this.t)a.apply(window,[this.t[c].cell])};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};
dhtmlXTabBar.prototype.setArrowsMode=function(a){a={auto:"auto",always:"always"}[String(a)];null!=a&&a!=this.conf.mode&&(this.conf.arwMode=a,"always"==a&&(this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left",this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"),this.setSizes())};
dhtmlXTabBar.prototype._checkArrows=function(){var a=!1;if("auto"==this.conf.arwMode){var c=0,e;for(e in this.t)c+=this.t[e].tab.offsetWidth;e=this.tabsArea.childNodes[0];var g=this.tabsArea.childNodes[2];c>this.cont.offsetWidth?0<=e.className.search(/dhxtabbar_tabs_ar_hidden/)&&(e.className=e.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),g.className=g.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),a=!0):1>e.className.search(/dhxtabbar_tabs_ar_hidden/)&&(e.className+=" dhxtabbar_tabs_ar_hidden",
g.className+=" dhxtabbar_tabs_ar_hidden",a=!0)}return a};dhtmlXTabBar.prototype._loadURLOnDemand=function(a){null!=a&&null!=this.conf.urls[a]&&(this.cells(a).attachURL(this.conf.urls[a].href,this.conf.urls[a].ajax),this.conf.urls[a]=null)};
window.dhtmlXTabBarCell=function(a,c){dhtmlXCellObject.apply(this,[a,"_tabbar"]);this.tabbar=c;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(a){return function(){for(var c=[this._idd],e=0;e<arguments.length;e++)c.push(arguments[e]);
return this.tabbar[a].apply(this.tabbar,c)}};for(var e in this.conf.tabbar_funcs)"function"!=typeof this[e]&&(this[e]=this._tabbarCall(this.conf.tabbar_funcs[e]));this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var a in this.conf.tabbar_funcs)this[a]=null,this.conf.tabbar_funcs[a]=null;this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",
function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(a){"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject;
dhtmlXCellObject.prototype.attachTabbar=function(a){this.callEvent("_onBeforeContentAttach",["tabbar"]);if("string"==typeof a)a={mode:a};else if("object"!=typeof a||null==a)a={};var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:-1});"undefined"!=typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&
"dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1});"undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:-1},"dhx_web"==this.conf.skin&&1==this.sidebar.conf.autohide&&(c._ofs.l=0),"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(c._ofs.l=0),1==this.sidebar.conf.header&&(c._ofs.t=-1)));"undefined"!=typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders();this._attachObject(c);a.skin=this.conf.skin;
a.parent=c;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj};
function dhtmlXTabBarInitFromHTML(){for(var a=document.getElementsByTagName("div"),c=0;c<a.length;c++)if(-1!=a[c].className.indexOf("dhtmlxTabBar")){var e={settings:{},tabs:[]},g=a[c],h=g.id;g.className="";for(var l=[],m=0;m<g.childNodes.length;m++)g.childNodes[m].tagName&&"!"!=g.childNodes[m].tagName&&(l[l.length]=g.childNodes[m]);var n=g.getAttribute("skin");null!=n&&(e.settings.skin=n);n=new dhtmlXTabBar({parent:h,mode:g.getAttribute("mode")});window[h]=n;(acs=g.getAttribute("onbeforeinit"))&&
eval(acs);if(align=g.getAttribute("align"))e.settings.align=align;h={};for(m=0;m<l.length;m++){var r=l[m],u={id:r.id,text:r.getAttribute("name"),width:r.getAttribute("width"),selected:r.getAttribute("selected"),active:r.getAttribute("active"),close:r.getAttribute("close")},v=r.getAttribute("href");h[r.id]=v?{href:v}:{cont:r};e.tabs.push(u)}n.loadStruct(e);for(var w in h)h[w].href?(n.cells(w).attachURL(h[w].href),h[w].href=null):(n.cells(w).attachObject(h[w].cont),"none"==h[w].cont.style.display&&
(h[w].cont.style.display=""),h[w].cont=null),h[w]=null;e=g.getAttribute("select");null!=e?n.tabs(e).setActive():null==n.getActiveTab()&&(e=n._getFirstVisible(),null!=e&&n.cells(e).setActive());(acs=g.getAttribute("oninit"))&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}
"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML);
function dhtmlXSideBar(a){var c=this;this.conf={skin:a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxsidebar")||"dhx_skyblue",css:"dhxsidebar",width:a.width||200,scroll_size:12,scroll_mult:20,close_button:!1,icons_path:a.icons_path||"",selected:null,single_cell:"undefined"==typeof a.single_cell?!1:window.dhx4.s2b(a.single_cell),cell:null,header:window.dhx4.s2b(a.header),autohide:window.dhx4.s2b(a.autohide),animate_items:!0};this.setTemplate(a.template);
window.dhtmlXCellTop.apply(this,[a.parent,null==a?null:a.offsets]);window.dhx4._eventable(this);1==window.navigator.msPointerEnabled?(this.conf.touch_ms=!0,this.conf.touch_start="MSPointerDown",this.conf.touch_end="MSPointerUp"):(this.conf.touch_ms=!1,this.conf.touch_start="touchstart",this.conf.touch_end="touchend");this.side=document.createElement("DIV");this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name;this.side.innerHTML="<div class='dhxsidebar_side_items'></div>";this.cont.appendChild(this.side);
this.arw=document.createElement("DIV");this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden";this.arw.innerHTML="<div class='dhxsidebar_arrow dhxsidebar_arrow_left'><div class='dhxsidebar_arrow_image'></div></div><div class='dhxsidebar_arrow dhxsidebar_arrow_right'><div class='dhxsidebar_arrow_image'></div></div>";this.cont.appendChild(this.arw);1==this.conf.autohide&&(this.hideSide(),this.cont.className+=" dhxsidebar_autohide",this._doOnBodyClick=function(){1==c.conf.clear_click?c.conf.clear_click=
!1:c.hideSide()},this._doOnEscDown=function(a){a=a||event;27==a.keyCode&&(c.conf.clear_click=!1,c.hideSide())},"function"==typeof window.addEventListener?(window.addEventListener(this.conf.touch_start,this._doOnBodyClick,!1),window.addEventListener("click",this._doOnBodyClick,!1),window.addEventListener("keydown",this._doOnEscDown,!1)):(document.body.attachEvent("onclick",this._doOnBodyClick),document.body.attachEvent("onkeydown",this._doOnEscDown)));window.setTimeout(function(){null!=c&&null!=c.side&&
(c.side.firstChild.style.top="0px")},1);this._doOnArwClick=function(a){a=a||event;"click"!=a.type&&a.preventDefault&&a.preventDefault();a=a.target||a.srcElement;null!=a.className.match(/dhxsidebar_arrow_image/)&&(a=a.parentNode);null!=a.className.match(/dhxsidebar_arrow_left/)?c._scrollSide(-c.conf.scroll_size):null!=a.className.match(/dhxsidebar_arrow_right/)&&c._scrollSide(c.conf.scroll_size)};"function"==typeof window.addEventListener?(this.arw.addEventListener(this.conf.touch_start,this._doOnArwClick,
!1),this.arw.addEventListener("click",this._doOnArwClick,!1)):this.arw.attachEvent("onclick",this._doOnArwClick);this._doOnSideClick=function(a){a=a||event;var e=a.target||a.srcElement,l=null,m=!1;c.conf.clear_click=!0;if("touchstart"==a.type||"pointerdown"==a.type||"MSPointerDown"==a.type)a.preventDefault&&a.preventDefault(),null==this.className.match(/dhxsidebar_touch/gi)&&("touchstart"==a.type||"pointerdown"==a.type&&"touch"==a.pointerType)&&(this.className+=" dhxsidebar_touch");for(;null!=e&&
null==l&&"pointerdown"!=a.type&&"MSPointerDown"!=a.type;)"undefined"!=typeof e.className&&(null!=e.className.match(/^dhxsidebar_item/)&&"undefined"!=typeof e._idd?l=e._idd:null!=e.className.match(/^dhxsidebar_bubble/)&&(m=!0,l=e.parentNode._idd)),e=e.parentNode;null!=l&&(0==m||1==m&&1==c.callEvent("onBubbleClick",[l,c.t[l].conf.bubble]))&&c._setItemActive(l,!0)};"function"==typeof window.addEventListener?(this.side.addEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.addEventListener(this.conf.touch_end,
this._doOnSideClick,!1),this.side.addEventListener("mouseup",this._doOnSideClick,!1)):this.side.attachEvent("onclick",this._doOnSideClick);this.side.onmouseover=function(){this.className=this.className.replace(/\s*dhxsidebar_touch/gi,"")};this._doOnSideScroll=function(a){a=a||event;a="mousewheel"==a.type?-a.wheelDelta:a.deltaY;c._scrollSide(a/Math.abs(a)*3)};this._scrollSide=function(a){a=parseInt(this.side.firstChild.style.top||0)-a*this.conf.scroll_mult;a+this.side.firstChild.offsetHeight<this.side.clientHeight&&
(a=this.side.clientHeight-this.side.firstChild.offsetHeight);0<a&&(a=0);this.side.firstChild.style.top=a+"px"};"function"==typeof window.addEventListener?this.side.addEventListener("wheel",this._doOnSideScroll,!1):this.side.attachEvent("onmousewheel",this._doOnSideScroll);this.t={};this.s={};this._adjustCell=function(a,c){if(1==this.conf.single_cell||null!=a){var e=1==this.conf.autohide?0:this.conf.width,m=this.cont.offsetWidth-e,n=0,r=this.cont.offsetHeight;1==this.conf.single_cell?1==c&&this.conf.cell._setSize(e,
n,m,r):(a!=this.conf.selected&&(n=-5E3,this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.zIndex=0),this.t[a].cell._setSize(e,n,m,r))}};var e=window.dhx4.transDetect();this.conf.transProp=e.transProp;this.conf.transEv=e.transEv;this.conf.transValue="all 0.1s";this._doOnTrEnd=function(a){a=this._idd;if(null!=c.t[a]){var e=c.t[a],l=e.conf.transActvId;"hide"==e.conf.transMode?1==e.conf.remove?c._removeItem(a):(e.item.style[e.conf.transProp]="",1!=c.conf.single_cell&&(e.cell.cell.style.visibility=
"hidden",e.cell.cell.style.top="-5000px"),e.conf.transActv=!1):"show"==e.conf.transMode&&(e.item.style[e.conf.transProp]="",e.item.style.visibility="visible",e.conf.transMode=null,e.conf.transActv=!1);null!=l?c._setItemActive(l):c._checkHeight()}};this._initObj=function(a){this.clearAll();null!=a.items&&this.addItem(a.items)};this._xmlToObj=function(a){var c=[];a=a.getElementsByTagName("sidebar");if(null!=a&&null!=a[0]){a=a[0].getElementsByTagName("item");for(var e=0;e<a.length;e++){for(var m={},
n=0;n<a[e].attributes.length;n++)m[a[e].attributes[n].nodeName]=a[e].attributes[n].nodeValue;c.push(m)}}return{items:c}};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","sidebar",{struct:!0});this.unload=function(){this.conf.unloading=!0;"function"==typeof window.addEventListener?this.side.removeEventListener("wheel",this._doOnSideScroll,!1):this.side.detachEvent("onmousewheel",this._doOnSideScroll);1==this.conf.autohide&&("function"==typeof window.addEventListener?(window.removeEventListener("click",
this._doOnBodyClick,!1),window.removeEventListener("keydown",this._doOnEscDown,!1)):(document.body.detachEvent("onclick",this._doOnBodyClick),document.body.detachEvent("onkeydown",this._doOnEscDown)));"function"==typeof this._sideCoverDetach&&this._sideCoverDetach();this.clearAll();this.s=this.t=null;"function"==typeof window.addEventListener?(this.arw.removeEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.removeEventListener("click",this._doOnArwClick,!1)):this.arw.detachEvent("onclick",
this._doOnArwClick);this.arw.parentNode.removeChild(this.arw);this.arw=null;"function"==typeof window.addEventListener?(this.side.removeEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.removeEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.removeEventListener("click",this._doOnSideClick,!1)):this.side.detachEvent("onclick",this._doOnSideClick);this.side.onmouseover=null;this.side.parentNode.removeChild(this.side);this.side=null;this._unloadTop();1==this.conf.single_cell&&
(this.conf.cell._unload(),this.conf.cell=null);window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");for(var a in this)this[a]=null;c=null};1==this.conf.single_cell&&(this.conf.cell=new dhtmlXSideBarCell("master",this),this.cont.appendChild(this.conf.cell.cell),this._cells_native=this.cells,this.cells=function(a){this.conf.cell._idd=a;return this.conf.cell});this.setSizes();null!=a.items?this._initObj(a):null!=a.json?this.loadStruct(a.json,a.onload):null!=
a.xml&&this.loadStruct(a.xml,a.onload);return this}dhtmlXSideBar.prototype=new dhtmlXCellTop;
dhtmlXSideBar.prototype._addItem=function(a){var c="undefined"!=typeof a.id?a.id:window.dhx4.newId();if("separator"==a.type){var e=document.createElement("DIV");e.className="dhxsidebar_sep";this.side.firstChild.appendChild(e);this.s[c]={sep:e};e=null}else{a.icons_path=this.conf.icons_path;e=document.createElement("DIV");e.className="dhxsidebar_item";e.innerHTML=window.dhx4.template(this.conf.tpl_str,a);e._idd=c;this.side.firstChild.appendChild(e);e.ondragstart=function(){return!1};if(1==this.conf.single_cell)var g=
this.conf.cell;else g=new dhtmlXSideBarCell(c,this),this.cont.appendChild(g.cell);this.t[c]={item:e,cell:g,init:a,conf:{selected:!1,visible:!0,close:close}};"undefined"!=typeof a.bubble&&this._setItemBubble(c,a.bubble);1==this.conf.header&&g.setHeaderText(window.dhx4.template(this.tpl_header,a));g=e=null;1==window.dhx4.s2b(a.selected)?this._setItemActive(c):this._adjustCell(c);this._checkHeight()}};dhtmlXSideBar.prototype.addItem=function(a){a instanceof Array||(a=[a]);for(var c=0;c<a.length;c++)this._addItem(a[c])};
dhtmlXSideBar.prototype.items=dhtmlXSideBar.prototype.cells=function(a){return 1==this.conf.single_cell?this.conf.cell:null!=this.t[a]?this.t[a].cell:null};
dhtmlXSideBar.prototype.forEachCell=dhtmlXSideBar.prototype.forEachItem=function(a){if(1==this.conf.single_cell)"function"==typeof a?a.apply(window,[this.conf.cell]):"string"==typeof a&&"function"==typeof window[a]&&window[a].apply(window,[this.conf.cell]);else for(var c in this.t)"function"==typeof a?a.apply(window,[this.t[c].cell]):"string"==typeof a&&"function"==typeof window[a]&&window[a].apply(window,[this.t[c].cell])};
dhtmlXSideBar.prototype.getAllItems=function(){var a=[],c;for(c in this.t)a.push(c);return a};dhtmlXSideBar.prototype.getNumberOfItems=function(){return this.getAllItems().length};dhtmlXSideBar.prototype.clearAll=function(){for(var a in this.t)this._removeItem(a,!1,!0);for(a in this.s)this.removeSep(a)};dhtmlXSideBar.prototype.setSizes=function(){this._adjustCont();this._adjustSide();this._checkHeight();this._adjustCell(this.conf.selected,!0);this.callEvent("_onSetSizes",[])};
dhtmlXSideBar.prototype.setSideWidth=function(a){this.conf.width=a;this.setSizes()};
dhtmlXSideBar.prototype._adjustSide=function(){null==this.conf.side_ofs&&(this.conf.side_ofs={},this.side.style.width=this.conf.width+"px",this.side.style.height=this.side.parentNode.offsetHeight+"px",this.conf.side_ofs.w=this.side.offsetWidth-parseInt(this.side.style.width),this.conf.side_ofs.h=this.side.offsetHeight-parseInt(this.side.style.height));this.side.style.width=this.conf.width-this.conf.side_ofs.w+"px";this.side.style.height=this.side.parentNode.offsetHeight-this.arw.offsetHeight-this.conf.side_ofs.h+
"px";this.arw.style.width=this.side.style.width;this._scrollSide(0)};
dhtmlXSideBar.prototype._checkHeight=function(){var a=null!=this.arw.className.match(/dhxsidebar_arrows_hidden/);null==this.conf.side_hfix&&(this.conf.side_hfix=this.side.offsetHeight-this.side.clientHeight);this.side.firstChild.offsetHeight>this.side.parentNode.clientHeight-this.conf.side_hfix?1==a&&(this.arw.className="dhxsidebar_arrows",this._adjustSide()):0==a&&(this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.side.firstChild.style.top="0px",this._adjustSide())};
dhtmlXSideBar.prototype.removeSep=function(a){if(null!=this.s[a]){this.side.firstChild.removeChild(this.s[a].sep);this.s[a].sep=null;this.s[a]=null;try{delete this.s[a]}catch(c){}}};
dhtmlXSideBar.prototype.showSide=function(){if(1==this.conf.autohide){null==this.sideCover&&this._sideCoverAttach();if(1==this.conf.animate_items){var a=function(a,c,e){window.setTimeout(function(){a.style[e]="transform 0.3s";a.style.transform="translate(0px,0px)";a=null},c)};if(!1!==this.conf.transProp){var c=100,e;for(e in this.t)this.t[e].item.style[this.conf.transProp]="",this.t[e].item.style.transform="translate(-"+(this.conf.width+20)+"px,0px)",a(this.t[e].item,c+=50,this.conf.transProp)}}var g=
this;window.setTimeout(function(){g.arw.style.left=g.side.style.left="0px";g.sideCover.className="dhxsidebar_side_cover dhxsidebar_side_cover_actv";g=null},50)}};dhtmlXSideBar.prototype.hideSide=function(a){1==this.conf.autohide&&(this.arw.style.left=this.side.style.left=-this.conf.width-10+"px",null!=this.sideCover&&(!1!==this.conf.transProp?this.sideCover.className="dhxsidebar_side_cover":this._sideCoverDetach()))};
dhtmlXSideBar.prototype._sideCoverAttach=function(){var a=this;this.sideCover=document.createElement("DIV");this.sideCover.className="dhxsidebar_side_cover";null!=this.arw.nextSibling?this.cont.insertBefore(this.sideCover,this.arw.nextSibling):this.cont.appendChild(this.sideCover);this._sideCoverOnTrEnd=function(){null==this.className.match(/dhxsidebar_side_cover_actv/)&&a._sideCoverDetach()};this._sideCoverDetach=function(){null!=this.sideCover&&(!1!==this.conf.transProp&&this.sideCover.removeEventListener(this.conf.transEv,
this._sideCoverOnTrEnd,!1),this.sideCover.parentNode.removeChild(this.sideCover),a=this.sideCover=null)};!1!==this.conf.transProp&&this.sideCover.addEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1)};
dhtmlXSideBar.prototype._setItemActive=function(a,c){if(this.conf.selected==a)1==this.conf.autohide&&this.hideSide();else if("undefined"==typeof c&&(c=!1),1!=c||!0===this.callEvent("onBeforeSelect",[a,this.conf.selected])){var e=null;null!=this.conf.selected&&(e=this.conf.selected,this._setItemInactive(this.conf.selected));null!=this.t[a]?(this.conf.selected=a,this.t[a].selected=!0,this.t[a].item.className+=" dhxsidebar_item_selected",1!=this.conf.single_cell&&(this.t[a].cell.cell.style.visibility=
"visible",this.t[a].cell.cell.style.top="0px",this.t[a].cell.cell.style.zIndex=1)):this.conf.selected=null;this._adjustCell(a);1==c&&this.callEvent("onSelect",[a,e]);1==this.conf.autohide&&this.hideSide()}};
dhtmlXSideBar.prototype._setItemInactive=function(a){null!=this.t[a]&&(this.t[a].selected=!1,this.t[a].item.className=this.t[a].item.className.replace(/\s{0,}dhxsidebar_item_selected/gi,""),1!=this.conf.single_cell&&(this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.top="-5000px",this.t[a].cell.cell.style.zIndex=0))};dhtmlXSideBar.prototype._isItemActive=function(a){return this.conf.selected==a};
dhtmlXSideBar.prototype._getNextVisible=function(a,c){return this._getNearVisible(a,c,"next")};dhtmlXSideBar.prototype._getPrevVisible=function(a,c){return this._getNearVisible(a,c,"previous")};dhtmlXSideBar.prototype._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")};
dhtmlXSideBar.prototype._getNearVisible=function(a,c,e){if("first"==e)a=this.side.firstChild.firstChild,e="next";else{if(null==a||null==this.t[a])return c?this._getFirstVisible():null;a=this.t[a].item[e+"Sibling"]}for(c=null;null!=a&&null==c;){var g=a._idd;null!=g&&null==c&&this.t[g].conf.visible?c=g:a=a[e+"Sibling"]}return c};dhtmlXSideBar.prototype.goToNextItem=function(a){var c=this._getNextVisible(this.conf.selected,!0);null!=c&&this._setItemActive(c,a)};
dhtmlXSideBar.prototype.goToPrevItem=function(a){var c=this._getPrevVisible(this.conf.selected,!0);null!=c&&this._setItemActive(c,a)};dhtmlXSideBar.prototype.getActiveItem=function(){return this.conf.selected};
dhtmlXSideBar.prototype.setTemplate=function(a,c){this.conf.tpl_name=null!=a&&null!=this.templates[a]?a:"details";this.conf.tpl_str=this.templates[this.conf.tpl_name];null!=c&&(this.conf.icons_path=c);for(var e in this.t)this.t[e].init.icons_path=this.conf.icons_path,this.t[e].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[e].init);null!=this.side&&(this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name);null!=this._scrollSide&&(this._scrollSide(0),this._checkHeight())};
dhtmlXSideBar.prototype.templates={details:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",tiles:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",icons:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'>",icons_text:"<div class='dhxsidebar_item_icon'><img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'></div><div class='dhxsidebar_item_text'>#text#</div>",
text:"<div class='dhxsidebar_item_text'>#text#</div>"};dhtmlXSideBar.prototype.tpl_bubble="<div class='dhxsidebar_bubble'>#value#</div>";dhtmlXSideBar.prototype.tpl_header="#text#";
window.dhtmlXSideBarCell=function(a,c){dhtmlXCellObject.apply(this,[a,"_sidebar"]);var e=this;this.sidebar=c;this.conf.skin=this.sidebar.conf.skin;this.conf.sidebar_funcs={show:"_showItem",hide:"_hideItem",isVisible:"_isItemVisible",setActive:"_setItemActive",isActive:"_isItemActive",setText:"_setItemText",getText:"_getItemText",remove:"_removeItem",setBubble:"_setItemBubble",getBubble:"_getItemBubble",clearBubble:"_clearItemBubble"};this._sidebarCall=function(a){return function(){for(var c=[this._idd],
e=0;e<arguments.length;e++)c.push(arguments[e]);return this.sidebar[a].apply(this.sidebar,c)}};for(var g in this.conf.sidebar_funcs)"function"!=typeof this[g]&&(this[g]=this._sidebarCall(this.conf.sidebar_funcs[g]));1==this.sidebar.conf.header&&(this._initHeader(),this.cell.childNodes[this.conf.idx.hdr].onclick=function(a){a=a||event;null!=(a.target||a.srcElement).className.match(/dhx_cell_sidebar_hdr_icon/gi)&&(e.sidebar.conf.clear_click=!0,e.sidebar.showSide())});this.attachEvent("_onCellUnload",
function(){null!=this.conf.idx.hdr&&(this.cell.childNodes[this.conf.idx.hdr].onclick=null);this.sidebar=null;for(var a in this.conf.sidebar_funcs)this[a]=this.conf.sidebar_funcs[a]=null;e=this.conf.sidebar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.sidebar.callEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(a){"tabbar"!=a&&"layout"!=a&&"acc"!=a||this._hideBorders();"sidebar"==a&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders();"dhx_web"!=
this.conf.skin&&"dhx_terrace"!=this.conf.skin||"menu"!=a&&"toolbar"!=a&&"ribbon"!=a||null!=this.cell.className.match(/dhx_cell_cont_no_top/gi)||(this.cell.className+=" dhx_cell_cont_no_top")})};dhtmlXSideBarCell.prototype=new dhtmlXCellObject;
dhtmlXSideBar.prototype._setItemText=function(a,c){if(null!=this.t[a]){for(var e in c)this.t[a].init[e]=c[e];this.t[a].init.icons_path=this.conf.icons_path;this.t[a].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[a].init);null!=this.t[a].conf.bubble&&(this.t[a].item.innerHTML+=window.dhx4.template(this.tpl_bubble,{value:this.t[a].conf.bubble}));1==this.conf.header&&this.t[a].cell.setHeaderText(window.dhx4.template(this.tpl_header,this.t[a].init))}};
dhtmlXSideBar.prototype._getItemText=function(a){var c={};if(null!=this.t[a])for(var e in this.t[a].init)c[e]=this.t[a].init[e];return c};
dhtmlXSideBar.prototype._removeItem=function(a,c,e){if(null!=this.t[a])if(1!=e&&1!=this.t[a].conf.remove)this.t[a].conf.remove=!0,this._hideItem(a,c);else{"undefined"==typeof c&&(c=!0);var g=this._getNextVisible(a),h=this._getPrevVisible(a);1==this.t[a].conf.transEv&&(this.t[a].item.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!1);1!=this.conf.single_cell&&(this.t[a].cell._unload(),this.t[a].cell=null);this.t[a].item.ondragstart=null;this.t[a].item.parentNode.removeChild(this.t[a].item);
this.t[a].item=null;for(var l in this.t[a])this.t[a][l]=null;this.t[a]=null;try{delete this.t[a]}catch(m){}this.conf.selected==a&&0!=c?(this.conf.selected=null,c=1==c?g||h||this._getFirstVisible():c,null!=c&&this._setItemActive(c)):1!=e&&this._checkHeight()}};
dhtmlXSideBar.prototype._showItem=function(a,c){null!=this.t[a]&&1!=this.t[a].conf.visible&&1!=this.t[a].conf.transActv&&(!1!==this.conf.transProp?(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="show",this.t[a].conf.transProp=this.conf.transProp,this.t[a].conf.transActvId=c?a:null,1!=this.t[a].conf.transEv&&(this.t[a].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!0),this.t[a].conf.visible=!0,this.t[a].item.style[this.conf.transProp]=this.conf.transValue,this.t[a].item.className=
"dhxsidebar_item"):(this.t[a].conf.visible=!0,this.t[a].item.style.display="",1==c?this._setItemActive(a):this._checkHeight()))};
dhtmlXSideBar.prototype._hideItem=function(a,c){if(null!=this.t[a]&&1==this.t[a].conf.visible&&1!=this.t[a].conf.transActv){var e=!1;this.conf.selected==a&&(this.conf.selected=null,this.t[a].conf.active=!1,this.t[a].item.className="dhxsidebar_item",e=!0);var g=this._getPrevVisible(a),h=this._getNextVisible(a);c=e&&!1!==c?(1==c?null:c)||h||g:null;!1!==this.conf.transProp?(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="hide",this.t[a].conf.transProp=this.conf.transProp,this.t[a].conf.transActvId=
c,this.t[a].conf.visible=!1,1!=this.t[a].conf.transEv&&(this.t[a].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!0),this.t[a].item.style[this.conf.transProp]=this.conf.transValue,this.t[a].item.className="dhxsidebar_item dhxsidebar_item_hidden"):(this.t[a].item.style.display="none",this.t[a].conf.visible=!1,1!=this.conf.single_cell&&(this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.top="-5000px"),null!=c&&this._setItemActive(c),this._checkHeight(),
1==this.t[a].conf.remove&&this._removeItem(a))}};dhtmlXSideBar.prototype._isItemVisible=function(a){return 1==this.t[a].conf.visible};dhtmlXSideBar.prototype._setItemBubble=function(a,c){null!=this.t[a]&&(this.t[a].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[a].init)+window.dhx4.template(this.tpl_bubble,{value:String(c)}),this.t[a].conf.bubble=c)};dhtmlXSideBar.prototype._getItemBubble=function(a){return null==this.t[a]?null:"undefuned"==typeof this.t[a].conf.bubble?null:this.t[a].conf.bubble};
dhtmlXSideBar.prototype._clearItemBubble=function(a){null!=this.t[a]&&(this.t[a].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[a].init),this.t[a].conf.bubble=null)};
dhtmlXCellObject.prototype.attachSidebar=function(a){this.callEvent("_onBeforeContentAttach",["sidebar"]);null==a&&(a={});var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||("dhx_skyblue"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1}),"dhx_web"==this.conf.skin&&("undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&
(c._ofs={l:8}),"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(c._ofs={t:2}),"undefined"!=typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(c._ofs={t:8}),"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:2})),"dhx_terrace"==this.conf.skin&&("undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(c._ofs={l:-1}),"undefined"!=typeof window.dhtmlXLayoutCell&&
this instanceof window.dhtmlXLayoutCell&&(c._ofs={t:-1}),"undefined"!=typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(c._ofs={t:-1}),"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(c._ofs={t:-1,r:-1,b:-1,l:-1})));this._attachObject(c);a.skin=this.conf.skin;a.parent=c;this.dataType="sidebar";this.dataObj=new dhtmlXSideBar(a);a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj};
dhtmlXSideBarCell.prototype._initHeader=function(){var a=document.createElement("DIV");a.className="dhx_cell_sidebar_hdr";a.innerHTML=(1==this.sidebar.conf.autohide?"<div class='dhx_cell_sidebar_hdr_icon'></div>":"")+"<div class='dhx_cell_sidebar_hdr_text"+(1==this.sidebar.conf.autohide?" dhx_cell_sidebar_hdr_text_icon":"")+"'></div>";this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_sidebar_hdr";
this._updateIdx()};dhtmlXSideBarCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXSideBarCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr",this._adjustCont(this._idd))};
dhtmlXSideBarCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr dhx_cell_sidebar_hdr_hidden",this._adjustCont(this._idd))};dhtmlXSideBarCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible};
dhtmlXSideBarCell.prototype.setHeaderText=function(a){this.conf.text=a;var c=this.cell.childNodes[this.conf.idx.hdr];c.childNodes["dhx_cell_sidebar_hdr_icon"==c.firstChild.className?1:0].innerHTML="<span>"+a+"</span>"};dhtmlXSideBarCell.prototype.getHeaderText=function(){return this.conf.text};
function dhtmlXCarousel(a,c,e){if("string"==typeof a||"object"==typeof a&&"undefined"!=typeof a.tagName)a={parent:"string"==typeof a?document.getElementById(a):a,effect:c,skin:e,delete_conf:!0};else if("undefined"==typeof a||null==a)a={};this.conf={skin:a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcarousel")||"dhx_skyblue",css:"dhxcarousel",items_count:0,selected:-1,item_width:Number(a.item_width)||"auto",item_height:Number(a.item_height)||"auto",
ofs_item:Number(a.offset_item)||1,ofs_left:Number(a.offset_left)||0,ofs_top:Number(a.offset_top)||0,buttons:"undefined"==typeof a.buttons?!0:window.dhx4.s2b(a.buttons),drops:!1,keys:"undefined"==typeof a.keys?!0:window.dhx4.s2b(a.keys),key_data:{left:37,right:39},touch_scroll:"undefined"!=typeof a.touch_scroll?window.dhx4.s2b(a.touch_scroll):!0,arw:["&#9668;","&#9658;"]};this.conf.autowidth="auto"==this.conf.item_width;this.conf.autoheight="auto"==this.conf.item_height;c=window.dhx4.transDetect();
this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.anim_type=a.effect||"slide";if(1==this.ef[this.conf.anim_type]&&(c=this["_"+this.conf.anim_type+"_init"](),!1===c&&(this.conf.anim_type="slide",c=this["_"+this.conf.anim_type+"_init"]()),"object"==typeof c))for(var g in c)"undefined"==typeof this.conf[g]&&(this.conf[g]=c[g]);this.conf.anim_f=this["_"+this.conf.anim_type+"_f"]();var h=this;window.dhtmlXCellTop.apply(this,[a.parent,a.offsets]);this.area=document.createElement("DIV");
this.area.className="dhxcarousel_area";this.cont.appendChild(this.area);"function"==typeof window.addEventListener&&1==h.conf.touch_scroll&&(this._doOnTouchStart=function(a){1!=window.dhx4.dnd._mTouch(a)&&1!=h.conf.animating&&(a.preventDefault&&a.preventDefault(),h.area.className+=" dhxcarousel_area_dnd",h.conf.touch_conf={t:(new Date).getTime(),dx:null,dy:null},null!=a.type.match(/^touch/)?(h.conf.touch_conf.id=a.touches[0].identifier,h.conf.touch_conf.x=a.touches[0].clientX,h.conf.touch_conf.y=
a.touches[0].clientY):(h.area.style.touchAction=h.area.style.msTouchAction="none",h.conf.touch_conf.x=a.clientX,h.conf.touch_conf.y=a.clientY),window.addEventListener(window.dhx4.dnd.evs.move,h._doOnTouchMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,h._doOnTouchEnd,!1))},this._doOnTouchMove=function(a){},this._doOnTouchEnd=function(a){if(null!=a.type.match(/^touch/))for(var c=0,e=0;e<a.changedTouches.length;e++)a.changedTouches[e].identifier==h.conf.touch_conf.id&&(c=h.conf.touch_conf.x-
a.changedTouches[e].clientX);else c=h.conf.touch_conf.x-a.clientX;window.removeEventListener(window.dhx4.dnd.evs.move,h._doOnTouchMove,!1);window.removeEventListener(window.dhx4.dnd.evs.end,h._doOnTouchEnd,!1);h.area.className=h.area.className.replace(/\s*dhxcarousel_area_dnd$/,"");0==c||400<(new Date).getTime()-h.conf.touch_conf.t||(a=c/Math.abs(c),h._animateStart(a))},this.area.addEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1));this.cdata={};this.ind={};this.addCell=function(a,
c){this.conf.items_count++;-1==this.conf.selected&&(this.conf.selected=0);this.setSizes();this._checkControls();"undefined"==typeof c||null==c?c=this.conf.items_count-1:0>c?c=0:c>this.conf.items_count-1&&(c=this.conf.items_count-1);for(var e in this.cdata)this.cdata[e].index>=c&&(this.cdata[e].index++,this.ind[this.cdata[e].index]=e,this._adjustCell(e));for(null==a&&(a=String(window.dhx4.newId()));null!=this.cdata[a];)a=String(window.dhx4.newId());e=new dhtmlXCarouselCell(a,this);null!=this.area.childNodes[c]?
this.area.insertBefore(e.cell,this.area.childNodes[c]):this.area.appendChild(e.cell);this.cdata[a]={index:c,cell:e};this.ind[c]=a;this._adjustCell(a);this._addBar();this._setBarIndex(this.conf.selected);this[this.conf.anim_f.cell_added](a);return a};this._removeCell=function(a){var c=this.cdata[a].index;this.cdata[a].cell._unload();this.cdata[a].index=this.cdata[a].cell=null;this.cdata[a]=null;delete this.cdata[a];delete this.ind[c];this.conf.items_count--;if(1!=this.conf.unloading){this.ind={};for(var e in this.cdata)this.cdata[e].index>
c&&this.cdata[e].index--,this.ind[this.cdata[e].index]=e;a=!1;this.conf.selected>c?this.conf.selected--:this.conf.selected==c&&(this.conf.selected=Math.min(this.conf.selected,this.conf.items_count-1),a=!0);this._removeBar(!1);this._setBarIndex(this.conf.selected);if(1==a&&0<=this.conf.selected)this[this.conf.anim_f.update_selected](this.ind[this.conf.selected]);this.setSizes();this._checkControls()}};this.setSizes=function(){this._adjustCont();var a={};this.area.style.height=this.cont.offsetHeight-
this.controls.offsetHeight+"px";this.conf.width=this.conf.autowidth?this.cont.offsetWidth-2*this.conf.ofs_left:this.conf.item_width;this.conf.height=this.conf.autoheight?this.area.offsetHeight-2*this.conf.ofs_top:this.conf.item_height;this.conf.top=Math.max(0,this.conf.autoheight?this.conf.ofs_top:Math.floor((this.area.offsetHeight-this.conf.height)/2));this.area.style.width=this[this.conf.anim_f.detect_aw]()*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item+"px";this.area.style.left=Math.round(this.cont.offsetWidth/
2-this.conf.width/2-this.conf.ofs_item)+"px";for(var c in this.cdata){var e={},g;for(g in this.cdata[c].cell.conf.size)e[g]=this.cdata[c].cell.conf.size[g];1==this.conf.autowidth&&(e.w=this.conf.width,e.x=this[this.conf.anim_f.detect_x](c));1==this.conf.autoheight&&(e.h=this.conf.height);a[c]=e}this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)-(this.conf.width+this.conf.ofs_item)*this.conf.selected+"px";this._adjustControls();if(1!=this.conf.autoheight)for(c in this.conf.top=
Math.max(0,Math.floor(this.area.offsetHeight-this.conf.height)/2),a)a[c].y=this.conf.top;for(c in a)this.cdata[c].cell._setSize(a[c].x,a[c].y,a[c].w,a[c].h);this.callEvent("_onSetSizes",[])};this._adjustCell=function(a){this.cdata[a].cell._setSize(this[this.conf.anim_f.detect_x](a),this.conf.top,this.conf.width,this.conf.height)};this._animateStart=function(a,c){0>=this.conf.selected&&0>a||this.conf.selected>=this.conf.items_count-1&&0<a||1==this.conf.animating||(this.conf.animating=!0,this[this.conf.anim_f.prepare](a,
c))};this._animateTransEnd=function(a){h[h.conf.anim_f.end](a||event,this)};this._animateEnd=function(a){this.conf.selected+=a;this._checkControls();this._setBarIndex(this.conf.selected);this.callEvent("onSelect",[this.ind[this.conf.selected]]);this.conf.animating=!1};this._initControls();this.setCellSize=function(a,c){this.conf.item_width=null==a?"auto":a;this.conf.item_height=null==c?"auto":c;this.setSizes()};this.setOffset=function(a,c,e){null!=a&&(this.conf.ofs_left=a);null!=c&&(this.conf.ofs_top=
c);null!=e&&(this.conf.ofs_item=e);this.setSizes()};this.enableHotKeys=function(a){this.conf.keys=window.dhx4.s2b(a)};this.goFirst=function(){0!=this.conf.selected&&this._animateStart(-this.conf.selected)};this.goLast=function(){this.conf.selected!=this.conf.items_count-1&&this._animateStart(this.conf.items_count-1-this.conf.selected)};this.goNext=function(){this._animateStart(1)};this.goPrev=function(){this._animateStart(-1)};this.getActiveIndex=function(){return this.conf.selected};this.getActiveId=
function(){return this.ind[this.conf.selected]};this.getActiveCell=function(){var a=this.getActiveId();return null!=a?this.cdata[a].cell:null};this.unload=function(){this.conf.unloading=!0;"function"==typeof window.addEventListener?(window.removeEventListener("keydown",this._doOnWinKeyDown,!1),null!=this._doOnTouchStart&&this.area.removeEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)):document.body.detachEvent("onkeydown",this._doOnWinKeyDown);for(var a in this.cdata)this._removeCell(a);
this.cdata[a]=null;this.area.parentNode.removeChild(this.area);this.area=null;this._unloadControls();this._unloadTop();window.dhx4._eventable(this,"clear");for(a in this)this[a]=null;h=null};window.dhx4._eventable(this);this._callMainEvent=function(a,c){this.callEvent(a,c)};this.conf.ev_coverclick=this.attachEvent("_cellCoverClick",function(a){a-=this.conf.selected;1==Math.abs(a)&&this._animateStart(a)});this._doOnWinKeyDown=function(a){a=a||event;if(1==h.conf.keys&&1==a.ctrlKey&&1!=a.shiftKey&&1!=
a.altKey){var c=a.keyCode,e=h.conf.key_data;if(c==e.left||c==e.right)a.preventDefault?a.preventDefault():a.returnValue=!1,h._animateStart(c==e.left?-1:1)}};"function"==typeof window.addEventListener?window.addEventListener("keydown",this._doOnWinKeyDown,!1):document.body.attachEvent("onkeydown",this._doOnWinKeyDown);if(1==a.delete_conf){for(g in a)a[g]=null;a=null}return this}dhtmlXCarousel.prototype=new dhtmlXCellTop;dhtmlXCarousel.prototype.ef={};dhtmlXCarousel.prototype.cells=function(a){return this.cdata[a].cell};
dhtmlXCarousel.prototype.forEachCell=function(a){for(var c in this.cdata)"function"==typeof a?a.apply(window,[this.cdata[c].cell]):"string"==typeof a&&"function"==typeof window[a]&&window[a].apply(window,[this.cdata[c].cell])};
dhtmlXCarousel.prototype._initControls=function(){var a=this;this.controls=document.createElement("DIV");this.controls.className="dhx_carousel_controls";this.controls.innerHTML="<div class='dhx_carousel_bars'></div><div class='dhx_carousel_btn dhx_carousel_btn_prev'>"+this.conf.arw[0]+"</div><div class='dhx_carousel_btn dhx_carousel_btn_next'>"+this.conf.arw[1]+"</div>";this.cont.appendChild(this.controls);this._doOnControlClick=function(c){if(1==a.conf.clear_click)a.conf.clear_click=!1;else{c=c||
event;if(null!=window.dhx4.dnd.evs.start&&"click"!=c.type&&1!=a.conf.clear_click){if(1==window.dhx4.dnd._mTouch(c))return;a.conf.clear_click=!0}c=c.target||c.srcElement;var e=null;if(null!=c.className)if(null!=c.className.match(/btn_prev/))e=-1;else if(null!=c.className.match(/btn_next/))e=1;else if(null!=c.className.match(/dhx_carousel_onebar/)&&null==c.className.match(/dhx_carousel_baractv/))for(var g=0;g<c.parentNode.childNodes.length;g++)c.parentNode.childNodes[g]==c&&(e=g-a.conf.selected);null!=
e&&a._animateStart(e)}};if("function"==typeof window.addEventListener)this.controls.addEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.addEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1);else if(this.controls.attachEvent("onclick",this._doOnControlClick),window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)this.controls.onselectstart=function(a){a=a||event;a.preventDefault&&a.preventDefault();return a.returnValue=!1};this.showControls=
function(){this.controls.style.display="";this.setSizes()};this.hideControls=function(){this.controls.style.display="none";this.setSizes()};this._checkControls=function(){this.controls.childNodes[1].className="dhx_carousel_btn dhx_carousel_btn_prev"+(0>=this.conf.selected?"_dis":"");this.controls.childNodes[2].className="dhx_carousel_btn dhx_carousel_btn_next"+(this.conf.selected>=this.conf.items_count-1||0==this.conf.items_count?"_dis":"")};this._adjustControls=function(){this.controls.firstChild.style.left=
Math.round(this.cont.offsetWidth/2-this.controls.firstChild.offsetWidth/2)+"px"};this._addBar=function(){var a=document.createElement("DIV");a.className="dhx_carousel_onebar";a.innerHTML="<div class='dhx_carousel_barcore'>&nbsp;</div>";this.controls.firstChild.appendChild(a);this._adjustControls()};this._removeBar=function(a){var e=this.controls.firstChild.lastChild;null!=e&&(e.parentNode.removeChild(e),!1!==a&&this._adjustControls())};this._setBarIndex=function(a){for(var e=0;e<this.controls.firstChild.childNodes.length;e++)this.controls.firstChild.childNodes[e].className=
"dhx_carousel_onebar"+(e==a?" dhx_carousel_baractv":"")};this._unloadControls=function(){if("function"==typeof window.addEventListener)this.controls.removeEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.removeEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1);else if(this.controls.detachEvent("onclick",this._doOnControlClick),window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)this.controls.onselectstart=null;for(;0<this.controls.firstChild.childNodes.length;)this._removeBar(!1);
this.cont.removeChild(this.controls);a=this.controls=null};1!=this.conf.buttons&&this.hideControls();this._checkControls()};
window.dhtmlXCarouselCell=function(a,c){dhtmlXCellObject.apply(this,[a,"_carousel"]);var e=this;this.carousel=c;this.conf.skin=this.carousel.conf.skin;this.attachEvent("_onCellUnload",function(){e=this.carousel=null});this.attachEvent("_onContentLoaded",function(){this.carousel._callMainEvent("onContentLoaded",[this._idd])});this._showCover=function(){if(1!=this.conf.cover){this._showCellCover();var a=this.cell.childNodes[this.conf.idx.cover];a.onclick=function(){e.carousel._callMainEvent("_cellCoverClick",
[e._idd])};a=null}};this._hideCover=function(){1==this.conf.cover&&(this.cell.childNodes[this.conf.idx.cover].onclick=null,this._hideCellCover())};return this};dhtmlXCarouselCell.prototype=new dhtmlXCellObject;dhtmlXCarouselCell.prototype.getId=function(){return this._idd};dhtmlXCarouselCell.prototype.getIndex=function(){return this.carousel.cdata[this._idd].index};dhtmlXCarouselCell.prototype.setActive=function(){var a=this.getIndex()-this.carousel.conf.selected;0!=a&&this.carousel._animateStart(a)};
dhtmlXCarouselCell.prototype.remove=function(){this.carousel._removeCell(this._idd)};
dhtmlXCellObject.prototype.attachCarousel=function(a){this.callEvent("_onBeforeContentAttach",["carousel"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);"undefined"!=typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&"dhx_terrace"==this.conf.skin&&(c._ofs={t:-1,r:-1,b:-1,l:-1});if("undefined"==typeof a||null==a)a={};"undefined"==typeof a.skin&&(a.skin=this.conf.skin);
a.parent=c;this.dataType="carousel";this.dataObj=new dhtmlXCarousel(a);a.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCarousel.prototype.ef.slide=!0;dhtmlXCarousel.prototype.ef.slide_conf={anim_step:25,anim_timeout:10,anim_slide:"left 0.3s"};dhtmlXCarousel.prototype.ef.slide_f={prepare:"_slide_prepare",start:"_slide_start",end:"_slide_end",update_selected:"_slide_update_selected",detect_x:"_slide_detect_x",detect_aw:"_slide_detect_area_width",cell_added:"_slide_cell_added"};
dhtmlXCarousel.prototype._slide_init=function(){return this.ef.slide_conf};dhtmlXCarousel.prototype._slide_f=function(){return this.ef.slide_f};
dhtmlXCarousel.prototype._slide_prepare=function(a,c){var e=this.conf.anim_step,g=this.conf.width+this.conf.ofs_item;0==c&&(e=g+1);this.area._init=parseInt(this.area.style.left);this._slide_update_selected(this.ind[this.conf.selected+a]);!1!==this.conf.transProp&&0!=c?(1!=this.conf.transEvInit&&(this.area.addEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!0),this.conf.current_dir=a,this.area.style[this.conf.transProp]=this.conf.anim_slide,this.area.style.left=this.area._init+
g*-a+"px"):this._slide_start(e,0,g,a)};dhtmlXCarousel.prototype._slide_start=function(a,c,e,g){var h=!1;c+=a;c>=e&&(c=e,h=!0);this.area.style.left=this.area._init+c*-g+"px";if(1!=h){var l=this;window.setTimeout(function(){l._slide_start(a,c,e,g);l=null},this.conf.anim_timeout)}else this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(g)};
dhtmlXCarousel.prototype._slide_end=function(a,c){a.type==this.conf.transEv&&c==this.area&&(this.area.style[this.conf.transProp]="",1==this.conf.transEvInit&&(this.area.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!1),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir))};dhtmlXCarousel.prototype._slide_update_selected=function(a){this.cdata[a].cell._hideCover()};
dhtmlXCarousel.prototype._slide_detect_x=function(a){return this.cdata[a].index*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item};dhtmlXCarousel.prototype._slide_cell_added=function(a){this.conf.selected!=this.cdata[a].index&&this.cdata[a].cell._showCover();this.cdata[a].index<=this.conf.selected&&1<this.conf.items_count&&this._animateStart(1,!1)};dhtmlXCarousel.prototype._slide_detect_area_width=function(){return this.conf.items_count};dhtmlXCarousel.prototype.ef.flip=!0;
dhtmlXCarousel.prototype.ef.flip_conf={anim_flip:"transform 0.3s ease-out",anim_flip_ang:-87,anim_flip_trstyle:"transform"};dhtmlXCarousel.prototype.ef.flip_f={prepare:"_flip_prepare",start:"_flip_start",end:"_flip_end",update_selected:"_flip_update_selected",detect_x:"_flip_detect_x",detect_aw:"_flip_detect_area_width",cell_added:"_flip_cell_added"};
dhtmlXCarousel.prototype._flip_init=function(){var a=0==this.conf.transProp?!1:this.ef.flip_conf;!1!==a&&1==window.dhx4.isKHTML&&null==a.anim_flip.match("webkit")&&(a.anim_flip=a.anim_flip.replace(/transform/,"-webkit-transform"),a.anim_flip_trstyle="webkitTransform");return a};dhtmlXCarousel.prototype._flip_f=function(){return this.ef.flip_f};dhtmlXCarousel.prototype._flip_prepare=function(a){this.conf.flip_data={fromIndex:this.conf.selected,toIndex:this.conf.selected+a,mode:0,dir:a};this._flip_start()};
dhtmlXCarousel.prototype._flip_start=function(){var a=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;null==this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className+=" dhxcarousel_area_flip");1!=a.conf.tr_ev&&(a.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),a.conf.tr_ev=!0);0==this.conf.flip_data.mode?a.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(0<this.conf.flip_data.dir?this.conf.anim_flip_ang:
-this.conf.anim_flip_ang)+"deg)":(a.cell.style.visibility="visible",a.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)");a.cell.style[this.conf.transProp]=this.conf.anim_flip};
dhtmlXCarousel.prototype._flip_end=function(a,c){if(a.type==this.conf.transEv){var e=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;if(c==e.cell)if(e.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),e.conf.tr_ev=!1,0==this.conf.flip_data.mode)e.cell.style[this.conf.transProp]="",e.cell.style.visibility="hidden",this.conf.flip_data.mode=1,this._flip_start();else{for(var g=this.conf.flip_data.dir,h=Math.min(this.conf.flip_data.fromIndex,
this.conf.flip_data.toIndex)+1,l=Math.max(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)-1;h<=l;h++)this.cdata[this.ind[h]].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.anim_flip_ang*g/Math.abs(g))+"deg)";null!=this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className=String(this.area.className).replace(/\s{0,}dhxcarousel_area_flip/gi,""));this.conf.flip_data=null;e.cell.style[this.conf.transProp]="";this._animateEnd(g)}}};
dhtmlXCarousel.prototype._flip_update_selected=function(a){};dhtmlXCarousel.prototype._flip_detect_x=function(a){return 0*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item};
dhtmlXCarousel.prototype._flip_cell_added=function(a){this.conf.selected!=this.cdata[a].index?(this.cdata[a].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.cdata[a].index<this.conf.selected?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)",this.cdata[a].cell.cell.style.visibility="hidden"):this.cdata[a].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"};dhtmlXCarousel.prototype._flip_detect_area_width=function(){return 1};dhtmlXCarousel.prototype.ef.cards=!0;
dhtmlXCarousel.prototype.ef.cards_conf={anim_cards:"left 0.3s"};dhtmlXCarousel.prototype.ef.cards_f={prepare:"_cards_prepare",start:"_cards_start",end:"_cards_end",update_selected:"_cards_update_selected",detect_x:"_cards_detect_x",detect_aw:"_cards_detect_area_width",cell_added:"_cards_cell_added"};dhtmlXCarousel.prototype._cards_init=function(){return 0==this.conf.transProp?!1:this.ef.cards_conf};dhtmlXCarousel.prototype._cards_f=function(){return this.ef.cards_f};
dhtmlXCarousel.prototype._cards_prepare=function(a,c){if(0<a){var e=this.ind[this.conf.selected+a],g=this.cdata[e].cell;this._cards_update_selected(e);1!=g.conf.transEvInit&&(g.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),g.conf.transEvInit=!0);this.conf.current_id=e;this.conf.current_dir=a;g.cell.style[this.conf.transProp]=this.conf.anim_cards;g.cell.style.left=this._cards_detect_x(e,0)+"px"}else this._cards_adjust_middle(this.conf.selected+a+1,this.conf.selected-1,1),e=this.ind[this.conf.selected],
g=this.cdata[e].cell,g._hideCover(),1!=g.conf.transEvInit&&(g.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),g.conf.transEvInit=!0),this.conf.current_id=e,this.conf.current_dir=a,this.cdata[this.ind[this.conf.selected+a]].cell._hideCover(),g.cell.style[this.conf.transProp]=this.conf.anim_cards,g.cell.style.left=this._cards_detect_x(e,1)+"px"};dhtmlXCarousel.prototype._cards_start=function(a,c,e,g){};
dhtmlXCarousel.prototype._cards_end=function(a,c){if(a.type==this.conf.transEv&&null!=this.conf.current_id&&c==this.cdata[this.conf.current_id].cell.cell){var e=this.cdata[this.conf.current_id].cell;e.cell.style[this.conf.transProp]="";1!=e.conf.transEvInit&&(e.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),e.conf.transEvInit=!1);this.conf.current_id=null;0<this.conf.current_dir&&this._cards_adjust_middle(this.conf.selected+1,this.conf.selected+this.conf.current_dir-1,0);this.cdata[this.ind[this.conf.selected]].cell._showCover();
this._animateEnd(this.conf.current_dir)}};dhtmlXCarousel.prototype._cards_update_selected=function(a){this.cdata[a].cell._hideCover()};dhtmlXCarousel.prototype._cards_adjust_middle=function(a,c,e){for(;a<=c;a++){var g=this.ind[a],h=this.cdata[g].cell;h.conf.size.x=this._cards_detect_x(g,e);h.cell.style.left=h.conf.size.x+"px"}};
dhtmlXCarousel.prototype._cards_detect_x=function(a,c){if("undefined"==typeof c||null==c)c=this.cdata[a].index<=this.conf.selected?0:1;return c*(this.conf.width+this.conf.ofs_left+this.conf.ofs_item)+this.conf.ofs_item};dhtmlXCarousel.prototype._cards_cell_added=function(a){this.cdata[a].cell.conf.size.x=this._cards_detect_x(a);this.cdata[a].cell.cell.style.left=this.cdata[a].cell.conf.size.x+"px";this.conf.selected!=this.cdata[a].index&&this.cdata[a].cell._showCover()};
dhtmlXCarousel.prototype._cards_detect_area_width=function(){return 2};
function dhtmlXWindows(a){var c=this,e={};if("undefined"!=typeof a)for(var g in a)e[g]=a[g];a=null;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"dhx_skyblue",vp_pos_ofs:20,vp_custom:!1,vp_of_auto:"auto"==e.vp_overflow,vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:window.dhx4.isIE6||window.dhx4.isIE7||
window.dhx4.isIE8,fr_cover:0<=navigator.userAgent.indexOf("MSIE 6.0")};a=window.dhx4.transDetect();this.conf.tr={prop:a.transProp,ev:a.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};e.viewport?null!=e.viewport.object?this.attachViewportTo(e.viewport.object):null!=e.viewport.left&&null!=e.viewport.top&&null!=e.viewport.width&&null!=
e.viewport.height?this.setViewport(e.viewport.left,e.viewport.top,e.viewport.width,e.viewport.height,e.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body);this.w={};this.createWindow=function(a,c,e,g,r){var u={};if(1==arguments.length&&"object"==typeof a)u=a;else{u.id=a;u.left=c;u.top=e;u.width=g;u.height=r;if("undefined"==typeof u.id||null==u.id)u.id=window.dhx4.newId();for(;null!=this.w[u.id];)u.id=window.dhx4.newId()}null==u.left&&(u.left=0);null==u.top&&
(u.top=0);u.move=null!=u.move&&0==window.dhx4.s2b(u.move)?!1:null!=u.deny_move&&1==window.dhx4.s2b(u.deny_move)?!1:!0;u.park=null!=u.park&&0==window.dhx4.s2b(u.park)?!1:null!=u.deny_park&&1==window.dhx4.s2b(u.deny_park)?!1:!0;u.resize=null!=u.resize&&0==window.dhx4.s2b(u.resize)?!1:null!=u.deny_resize&&1==window.dhx4.s2b(u.deny_resize)?!1:!0;u.keep_in_viewport=null!=u.keep_in_viewport&&window.dhx4.s2b(u.keep_in_viewport);u.modal=null!=u.modal&&window.dhx4.s2b(u.modal);u.center=null!=u.center&&window.dhx4.s2b(u.center);
u.text=null!=u.text?u.text:null!=u.caption?u.caption:"dhtmlxWindow";u.header=!(null!=u.header&&0==window.dhx4.s2b(u.header));var v=document.createElement("DIV");v.className="dhxwin_active";this.vp.appendChild(v);v._isWindow=!0;v._idd=u.id;var w=document.createElement("DIV");w.className="dhxwin_hdr";w.style.zIndex=0;w.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+u.text+"</div></div><div class='dhxwin_btns'></div>";v.appendChild(w);w.onselectstart=
function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};w.oncontextmenu=function(a){a=a||event;a.cancelBubble=!0;return!1};w._isWinHdr=!0;w.firstChild._isWinIcon=!0;var x=document.createElement("DIV");x.className="dhxwin_brd";v.appendChild(x);var y=document.createElement("DIV");y.className="dhxwin_fr_cover";y.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>";v.appendChild(y);this.w[u.id]={win:v,
hdr:w,brd:x,fr_cover:y,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:u.text,keep_in_vp:u.keep_in_viewport,allow_move:u.move,allow_park:u.park,allow_resize:u.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var v={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}},C;for(C in v)x=new dhtmlXWindowsButton(this,u.id,C,v[C].title,
!1),0==v[C].visible&&x.hide(),w.lastChild.appendChild(x.button),this.w[u.id].b[C]=x,x=null;this._winAdjustTitle(u.id);this.w[u.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[u.id].conf.z_id);w=new dhtmlXWindowsCell(u.id,this);this.w[u.id].win.insertBefore(w.cell,y);this.w[u.id].cell=w;"function"==typeof window.addEventListener?(this.w[u.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[u.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[u.id].win.addEventListener("dblclick",
this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(this.w[u.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(this.w[u.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),this.w[u.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(this.w[u.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[u.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&
this.w[u.id].win.attachEvent("ondblclick",this._winOnMouseDown));this._winInitFRM(u.id);this._winSetPosition(u.id,u.left,u.top);this._winSetSize(u.id,u.width,u.height);this._winMakeActive(u.id);1==u.center&&this.w[u.id].cell.center();1==u.modal&&this.w[u.id].cell.setModal(!0);0==u.header&&this.w[u.id].cell.hideHeader();f=v=w=x=y=w=null;return this.w[u.id].cell};this._winOnMouseDown=function(a){a=a||event;var e=a.target||a.srcElement,g={press_type:a.type};if("MSPointerDown"==a.type||"pointerdown"==
a.type)c.conf.ev_skip=!0;else if(1==c.conf.ev_skip){c.conf.ev_skip=!1;return}for(;null!=e&&1!=e._isWindow;)"undefined"!=typeof e.className&&null==g.mode&&("undefined"!=typeof e._buttonName?(g.mode="button",g.button_name=e._buttonName):1==e._isWinHdr?g.mode="hdr":1==e._isWinIcon&&(g.mode="icon")),e=e.parentNode;null==g.mode&&(g.mode="win");g.id=null!=e&&1==e._isWindow?e._idd:null;null!=g.id&&null!=c.w[g.id]&&c.callEvent("_winMouseDown",[a,g])};this._winOnParkTrans=function(a){a.stopPropagation&&a.stopPropagation();
var e=c.w[this._idd];"opacity"==a.propertyName&&c._winCellClearOpacity(this._idd);"height"==a.propertyName&&"park"==e.conf.tr_mode&&"park"==e.conf.tr_mode&&(e.win.style[c.conf.tr.prop]="",e.conf.parked?(e.hdr.style.zIndex=3,c._callMainEvent("onParkUp",this._idd)):(c._winAdjustCell(this._idd),c._callMainEvent("onParkDown",this._idd),e.conf.keep_in_vp&&c._winAdjustPosition(this._idd,e.conf.x,e.conf.y)))};this.unload=function(){this.conf.unloading=!0;this._dndInitModule&&this._dndUnloadModule();for(var a in this.w)this._winClose(a);
this.w=null;null!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu();window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(a in this.conf)this.conf[a]=null,delete this.conf[a];for(a in this)this[a]=null;c=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);this._dndInitModule&&this._dndInitModule();if(null!=e.wins)for(a=0;a<e.wins.length;a++)this.createWindow(e.wins[a]);e=null;return this}
dhtmlXWindows.prototype.forEachWindow=function(a){for(var c in this.w)a.apply(window,[this.w[c].cell])};dhtmlXWindows.prototype.window=function(a){return null!=this.w[a]?this.w[a].cell:null};dhtmlXWindows.prototype.isWindow=function(a){return null!=this.w[a]};dhtmlXWindows.prototype.findByText=function(a){var c=[],e;for(e in this.w)0<=this.w[e].cell.getText().indexOf(String(a))&&c.push(this.w[e]);return c};
dhtmlXWindows.prototype.setSkin=function(a){if(a!=this.conf.skin){null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+a));for(var c in this.w)this.w[c].cell._resetSizeState(),this._winAdjustCell(c),this._winAdjustTitle(c);this.conf.skin=a}};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)};
dhtmlXWindows.prototype._getTopBottomWin=function(a){var c=null,e;for(e in this.w)if(this.w[e].conf.visible){var g=!1;null!=c&&(g=c.z>this.w[e].win.style.zIndex,a&&(g=!g));if(null==c||g)c={win:this.w[e].cell,z:this.w[e].win.style.zIndex}}return c?c.win:null};
dhtmlXWindows.prototype._winMakeActive=function(a,c){if(null==a||!0===c||1!=this.w[a].conf.actv){for(var e=[],g={},h=0;h<this._zOrder.length;h++){var l=this._zOrder[h].name,m=this._zOrder[h].value,n=[],r;for(r in this.w){var u=this.w[r];null==g[r]&&u.conf[l]===m&&1==u.conf.visible&&a!=r&&(window.dhx4.zim.clear(u.conf.z_id),n.push([r,Number(u.win.style.zIndex)]),g[r]=!0);u=null}n.sort(function(a,c){return a[1]<c[1]?1:-1});null!=a&&this.w[a].conf[l]===m&&null==g[a]&&(window.dhx4.zim.clear(this.w[a].conf.z_id),
n=[[a,Number(this.w[a].win.style.zIndex)]].concat(n),g[a]=!0);e=e.concat(n)}for(h=e.length-1;0<=h;h--){r=e[h][0];u=this.w[r];u.win.style.zIndex=window.dhx4.zim.reserve(u.conf.z_id);if(u.conf.modal&&null!=this.mcover)for(var v in this.mcover)this.mcover[v].style.zIndex=u.win.style.zIndex;this._winAdjustFRMZIndex(r);null==a&&0==h&&(a=r);u.conf.actv=a==r;u.win.className=u.conf.actv?"dhxwin_active":"dhxwin_inactive";u=null}null!=a&&this.conf.last_active!=a&&this._callMainEvent("onFocus",a);this.conf.last_active=
a}};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){if(null!=this.vp){var a=null,c;for(c in this._vpPull)this._vpPull[c].vp==this.vp&&(this._vpPull[c].count++,a=c);null==a&&(this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1});this.vp==document.body&&1==this.conf.vp_of_auto&&this._vpOfInit();this._vpOfUpd()}};
dhtmlXWindows.prototype._vpPullRemove=function(){if(null==this.vp)return 0;var a=0,c;for(c in this._vpPull)this._vpPull[c].vp==this.vp&&(a=--this._vpPull[c].count,0==a&&(this._vpPull[c].vp=null,this._vpPull[c].count=null,delete this._vpPull[c]));this._vpOfClear();return a};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=!0};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=!1;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};
dhtmlXWindows.prototype._vpOfUpd=function(){var a=!1,c;for(c in this._vpOf)a=a||this._vpOf[c];1==a?null==document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className+=" dhxwins_vp_auto"):null!=document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,""))};
dhtmlXWindows.prototype.attachViewportTo=function(a){var c=this._vpPullRemove();if(this.conf.vp_custom){for(;0<this.vp.childNodes.length;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp);this.vp=null}else null!=this.vp&&0==c&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==a)this.vp=null;else{this.vp="string"==typeof a?document.getElementById(a):a;a="dhxwins_vp_"+this.conf.skin;0>this.vp.className.indexOf(a)&&
(this.vp.className+=" "+a);for(var e in this.w)this.vp.appendChild(this.w[e].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static");this._vpPullAdd()};
dhtmlXWindows.prototype.setViewport=function(a,c,e,g,h){var l=document.createElement("DIV");l.style.position="absolute";l.style.left=a+"px";l.style.top=c+"px";l.style.width=e+"px";l.style.height=g+"px";"undefined"==typeof h||null==h?h=document.body:"string"==typeof h&&(h=document.getElementById(h));h.appendChild(l);this.attachViewportTo(l);this.conf.vp_custom=!0};
dhtmlXWindows.prototype._winSetPosition=function(a,c,e){var g=this.w[a];g.conf.maxed&&(g.conf.lastMX+=c-g.conf.x,g.conf.lastMY+=e-g.conf.y);g.conf.x=c;g.conf.y=e;g.win.style.left=g.conf.x+"px";g.win.style.top=g.conf.y+"px";this._winAdjustFRMPosition(a)};
dhtmlXWindows.prototype._winAdjustPosition=function(a,c,e){var g=this.w[a];"undefined"==typeof c&&(c=g.conf.x);"undefined"==typeof e&&(e=g.conf.y);var h=g.conf.keep_in_vp?0:-g.conf.w+this.conf.vp_pos_ofs,l=g.conf.keep_in_vp?this.vp.clientWidth-g.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;c<h?c=h:c>l&&(c=l);h=g.conf.keep_in_vp?this.vp.clientHeight-g.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;0>e?e=0:e>h&&(e=h);c==g.conf.x&&e==g.conf.y||this._winSetPosition(a,c,e)};
dhtmlXWindows.prototype._winSetSize=function(a,c,e,g,h){var l=this.w[a];c=null!=c?c:l.conf.w;e=null!=e?e:l.conf.h;null==this.conf.ofs_w&&(l.win.style.width=c+"px",l.win.style.height=e+"px",this.conf.ofs_w=l.win.offsetWidth-c,this.conf.ofs_h=l.win.offsetHeight-e);null!=l.conf.min_w&&c<l.conf.min_w&&(c=l.conf.min_w);null!=l.conf.max_w&&c>l.conf.max_w&&(c=l.conf.max_w);!l.conf.parked&&null!=l.conf.min_h&&e<l.conf.min_h&&(e=l.conf.min_h);null!=l.conf.max_h&&e>l.conf.max_h&&(e=l.conf.max_h);l.conf.keep_in_vp&&
(c>this.vp.clientWidth&&(c=this.vp.clientWidth),e>this.vp.clientHeight&&(e=this.vp.clientHeight));l.win.style.width=c-this.conf.ofs_w+"px";l.win.style.height=e-this.conf.ofs_h+"px";l.conf.w=c;l.conf.h=e;this._winAdjustFRMSize(a);h&&this._winAdjustPosition(a,l.conf.x,l.conf.y);l.conf.parked||1==g||this._winAdjustCell(a)};
dhtmlXWindows.prototype._winMinmax=function(a,c){if(("undefined"==typeof c||this.w[a].conf.maxed!=c)&&0!=this.w[a].conf.allow_resize){var e=this.w[a];e.conf.parked&&this._winPark(a,!1);if(e.conf.maxed)this._winSetSize(a,e.conf.lastMW,e.conf.lastMH),this._winAdjustPosition(a,e.conf.lastMX,e.conf.lastMY),e.conf.maxed=!1;else{var g=0,h=0;null!=e.conf.max_w&&(g=e.conf.x+Math.round(e.conf.w-e.conf.max_w)/2);null!=e.conf.max_h&&(h=Math.max(e.conf.y+Math.round(e.conf.h-e.conf.max_h)/2,0));e.conf.lastMX=
e.conf.x;e.conf.lastMY=e.conf.y;e.conf.lastMW=e.conf.w;e.conf.lastMH=e.conf.h;this._winSetSize(a,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(a,g,h);e.conf.maxed=!0}e.b.minmax.setCss(e.conf.maxed?"minmaxed":"minmax");e.conf.maxed?this._callMainEvent("onMaximize",a):this._callMainEvent("onMinimize",a)}};
dhtmlXWindows.prototype._winShow=function(a,c){1!=this.w[a].conf.visible&&(this.w[a].win.style.display="",this.w[a].conf.visible=!0,1!=c&&null!=this.conf.last_active||this._winMakeActive(a,!0),this._callMainEvent("onShow",a))};
dhtmlXWindows.prototype._winHide=function(a,c){0!=this.w[a].conf.visible&&(this.w[a].win.style.display="none",this.w[a].conf.visible=!1,this.w[a].conf.actv&&(this.w[a].conf.actv=!1,this.w[a].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",a))};
dhtmlXWindows.prototype._winPark=function(a,c){if(0!=this.w[a].conf.allow_park&&0!=this.w[a].conf.header){var e=this.w[a];1==c&&!1!==this.conf.tr.prop&&(e.win.style[this.conf.tr.prop]=this.conf.tr[e.conf.parked?"height_open":"height_close"],e.conf.tr_ev||(e.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),e.conf.tr_ev=!0));if(e.conf.parked){e.hdr.className=String(e.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");e.hdr.style.zIndex=0;e.conf.parked=!1;e.conf.tr_mode="park";this._winCellSetOpacity(a,
"open",c);this._winSetSize(a,e.conf.w,e.conf.lastPH,1==c&&!1!==this.conf.tr.prop);if(1!=c||!1===this.conf.tr.prop)this._callMainEvent("onParkDown",a),e.conf.keep_in_vp&&this._winAdjustPosition(a,e.conf.x,e.conf.y);1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null!=e.cell.cell.className.match(/dhxwin_parked/)&&(e.cell.cell.className=e.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,""))}else{e.conf.lastPH=e.conf.h;e.hdr.className+=" dhxwin_hdr_parked";if(0==c||0==this.conf.tr.prop)e.hdr.style.zIndex=
3;e.conf.parked=!0;e.conf.tr_mode="park";this._winCellSetOpacity(a,"close",c);this._winSetSize(a,e.conf.w,e.hdr.offsetHeight+this.conf.ofs_h,1==c&&!1!==this.conf.tr.prop);1==c&&!1!==this.conf.tr.prop||this._callMainEvent("onParkUp",a);1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null==e.cell.cell.className.match(/dhxwin_parked/)&&(e.cell.cell.className+=" dhxwin_parked")}}};
dhtmlXWindows.prototype._winCellSetOpacity=function(a,c,e,g){a=this.w[a].cell;for(var h in a.conf.idx)1!={pr1:!0,pr2:!0}[h]&&(1==e&&0!=this.conf.tr.prop&&(a.cell.childNodes[a.conf.idx[h]].style[this.conf.tr.prop]=this.conf.tr["op_"+c]),a.cell.childNodes[a.conf.idx[h]].style.opacity=this.conf.tr["op_v_"+c])};
dhtmlXWindows.prototype._winCellClearOpacity=function(a){a=this.w[a].cell;for(var c in a.conf.idx)1!={pr1:!0,pr2:!0}[c]&&0!=this.conf.tr.prop&&(a.cell.childNodes[a.conf.idx[c]].style[this.conf.tr.prop]="")};
dhtmlXWindows.prototype._winStick=function(a,c){if("undefined"==typeof c||this.w[a].conf.sticked!=c)this.w[a].conf.sticked=!this.w[a].conf.sticked,this.w[a].b.stick.setCss(this.w[a].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[a].conf.sticked?this._callMainEvent("onStick",a):this._callMainEvent("onUnStick",a)};
dhtmlXWindows.prototype._winClose=function(a){if(!0===this._callMainEvent("onClose",a)||1==this.conf.unloading){var c=this.w[a];c.conf.fs_mode&&c.cell.setToFullScreen(!1);c.conf.modal&&this._winSetModal(a,!1);window.dhx4.zim.clear(c.conf.z_id);null!=this.cm&&null!=this.cm.icon[a]&&this._detachContextMenu("icon",a,null);"function"==typeof window.addEventListener?(c.win.removeEventListener("mousedown",this._winOnMouseDown,!1),c.win.removeEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&
c.win.removeEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),c.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(c.win.detachEvent("onmousedown",this._winOnMouseDown),c.win.detachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&
c.win.attachEvent("ondblclick",this._winOnMouseDown));for(var e in c.b)this._winRemoveButton(a,e,!0);c.b=null;c.cell._unload();c.cell=null;c.brd.parentNode.removeChild(c.brd);c.brd=null;null!=c.fr_cover&&(c.fr_cover.parentNode.removeChild(c.fr_cover),c.fr_cover=null);null!=c.fr_m_cover&&(c.fr_m_cover.parentNode.removeChild(c.fr_m_cover),c.fr_m_cover=null);c.hdr._isWinHdr=!0;c.hdr.firstChild._isWinIcon=!0;c.hdr.onselectstart=null;c.hdr.parentNode.removeChild(c.hdr);c.hdr=null;for(e in c.conf)c.conf[e]=
null,delete c.conf[e];c.conf=null;c.win._idd=null;c.win._isWindow=null;c.win.parentNode.removeChild(c.win);c.win=null;this.w[a]=null;delete this.w[a];this.conf.unloading||this._winMakeActive(null,!0)}};
dhtmlXWindows.prototype._winSetModal=function(a,c,e){if(this.w[a].conf.modal!=c){"undefined"==typeof e&&(e=!0);var g=this.w[a];if(1==c&&0==g.conf.modal)null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover?(c=document.createElement("DIV"),c.className="dhxwins_mcover",this.vp.insertBefore(c,g.fr_m_cover||g.win),this.mcover={d:c},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=
0,this.vp.insertBefore(this.mcover.f,c))):this.mcover.d.nextSibling!=(g.fr_m_cover||g.win)&&(this.vp.insertBefore(this.mcover.d,g.fr_m_cover||g.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d)),g.conf.modal=!0,this.conf.last_modal=a,this._winMakeActive(a,!0);else if(0==c&&1==g.conf.modal&&(g.conf.modal=!1,this.conf.last_modal=null,e&&null!=this.mcover)){for(var h in this.mcover)this.vp.removeChild(this.mcover[h]),this.mcover[h]=null;this.mcover=null}}};
dhtmlXWindows.prototype._winMouseDownHandler=function(a,c){var e=a.target||a.srcElement;if(!(2<=a.button)){if("button"==c.mode)if("mousedown"==c.press_type)this.conf.button_last=c.button_name;else if("mouseup"==c.press_type&&c.button_name==this.conf.button_last||"MSPointerDown"==c.press_type||"pointerdown"==c.press_type)if(this.conf.button_last=null,!0!==this._winButtonClick(c.id,c.button_name,a))return;if(("pointerdown"==c.press_type||"mousedown"==c.press_type||"dblclick"==c.press_type)&&"hdr"==
c.mode&&(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev?"dblclick"==c.press_type&&(this.conf.dblclick_active=!0):null==this.conf.dblclick_last?(this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=c.id):(e=(new Date).getTime(),this.conf.dblclick_last+this.conf.dblclick_tm>e&&this.dblclick_id==c.id?(this.conf.dblclick_active=!0,this.dblclick_id=this.conf.dblclick_last=null):(this.conf.dblclick_last=e,this.dblclick_id=c.id)),this.conf.dblclick_active)){this._winDoHeaderDblClick(c.id);
return}"mousedown"!=c.press_type&&c.press_type!=window.dhx4.dnd.evs.start||this._winMakeActive(c.id)}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){"minmax"==this.conf.dblclick_mode?this._winMinmax(a):"park"==this.conf.dblclick_mode?this._winPark(a,!0):"function"==typeof this.conf.dblclick_mode?this.conf.dblclick_mode.apply(window,[a]):"function"==typeof window[this.conf.dblclick_mode]&&window[this.conf.dblclick_mode].apply(window,[a])};
dhtmlXWindows.prototype._winAdjustCell=function(a){a=this.w[a];var c=a.conf.header?a.hdr.offsetHeight:1,e=a.win.clientWidth-2,g=a.win.clientHeight-c-1;a.brd.style.left="1px";a.brd.style.top=c+"px";null==a.conf.brd&&(a.brd.style.width=e+"px",a.brd.style.height=g+"px",a.conf.brd={w:e-a.brd.offsetWidth,h:g-a.brd.offsetHeight});a.brd.style.width=e+a.conf.brd.w+"px";a.brd.style.height=g+a.conf.brd.h+"px";c=a.conf.header?c:c+5;e=a.brd.clientWidth;g=a.brd.clientHeight;a.cell._setSize(6,c,e,g);a.fr_cover.style.left=
"6px";a.fr_cover.style.top=c+"px";a.fr_cover.style.width=e+"px";a.fr_cover.style.height=g+"px"};dhtmlXWindows.prototype._winAdjustTitle=function(a){var c=this.w[a].hdr.childNodes[1],e=this.w[a].hdr.childNodes[2];c.style.paddingLeft=this.w[a].hdr.childNodes[0].offsetWidth+12+"px";c.style.paddingRight=e.offsetWidth+10+"px"};dhtmlXWindows.prototype._callMainEvent=function(a,c){var e=this.w[c];return e.cell.checkEvent(a)?e.cell._callMainEvent(a,[e.cell]):this.callEvent(a,[e.cell])};
dhtmlXWindows.prototype._winInitFRM=function(a){if(1==this.conf.fr_cover){a=this.w[a];var c=document.createElement("IFRAME");c.className="dhxwin_main_fr_cover";c.border=0;c.frameBorder=0;c.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(c,a.win);a.fr_m_cover=c}};dhtmlXWindows.prototype._winAdjustFRMSize=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.width=a.conf.w+"px",a.fr_m_cover.style.height=a.conf.h+"px")};
dhtmlXWindows.prototype._winAdjustFRMPosition=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.left=a.win.style.left,a.fr_m_cover.style.top=a.win.style.top)};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.zIndex=a.win.style.zIndex)};
function dhtmlXWindowsCell(a,c){dhtmlXCellObject.apply(this,[a,"_wins"]);this.wins=c;this.cell._winId=a;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize();window.dhx4._eventable(this.cell,"clear");g=this.removeUserButton=this.addUserButton=this.button=this._adjustByCont=this.close=this.isModal=this.setModal=this.hideHeader=this.showHeader=this.isOnBottom=this.isOnTop=this.bringToBottom=this.bringToTop=this.centerOnScreen=this.center=
this.keepInViewport=this.getMaxDimension=this.setMaxDimension=this.getMinDimension=this.setMinDimension=this.getDimension=this.setDimension=this.isSticked=this.unstick=this.stick=this.isHidden=this.hide=this.show=this.isParkable=this.denyPark=this.allowPark=this.isParked=this.park=this.adjustPosition=this.getPosition=this.setPosition=this.isMaximized=this.minimize=this.maximize=this.isResizable=this.denyResize=this.allowResize=this.isMovable=this.denyMove=this.allowMove=this.getText=this.setText=
this.wins=this.cell._winId=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(a,c){this.wins.callEvent("_winMouseDown",[c,{id:a,mode:"win"}])});this._callMainEvent=function(a,c){return this.callEvent(a,c)};this.conf.tr={};for(var e in this.wins.conf.tr)this.conf.tr[e]=this.wins.conf.tr[e];this._initResize&&this._initResize();window.dhx4._eventable(this.cell);var g=this;this.cell.attachEvent("_setCellSize",
function(a,c){g.setDimension(a+(g.wins.w[this._winId].conf.w-g.conf.size.w),c+(g.wins.w[this._winId].conf.h-g.conf.size.h))});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject;dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};
dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1};dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0;this.wins.w[this._idd].b.minmax.enable()};
dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)};dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed};
dhtmlXWindowsCell.prototype.setPosition=function(a,c){this.wins._winSetPosition(this._idd,a,c)};dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd];return[a.conf.x,a.conf.y]};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)};dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked};
dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};
dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)};dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked};
dhtmlXWindowsCell.prototype.setDimension=function(a,c){var e=this.wins.w[this._idd];e.conf.parked&&this.wins._winPark(this._idd,!1);e.conf.maxed?(null!=a&&(e.conf.lastMW=a),null!=c&&(e.conf.lastMH=c),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,a,c,!1,!0)};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];return[a.conf.w,a.conf.h]};
dhtmlXWindowsCell.prototype.setMinDimension=function(a,c){var e=this.wins.w[this._idd];e.conf.min_w=a;e.conf.min_h=c;this.wins._winSetSize(this._idd,e.conf.w,e.conf.h)};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];return[a.conf.min_w,a.conf.min_h]};dhtmlXWindowsCell.prototype.setMaxDimension=function(a,c){var e=this.wins.w[this._idd];e.conf.max_w=a;e.conf.max_h=c;this.wins._winSetSize(this._idd,e.conf.w,e.conf.h)};
dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];return[a.conf.max_w,a.conf.max_h]};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var a=this.wins.vp,c=this.wins.w[this._idd],e=Math.round((a.clientWidth-c.conf.w)/2),a=Math.round((a.clientHeight-c.conf.h)/2);this.wins._winSetPosition(this._idd,e,a)};
dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var a=this.wins.w[this._idd],c=window.dhx4.screenDim(),e=window.dhx4.absLeft(this.wins.vp),g=window.dhx4.absTop(this.wins.vp),h=this.wins.vp.parentNode;null!=h;)h.scrollLeft&&(e-=h.scrollLeft),h.scrollTop&&(g-=h.scrollTop),h=h.parentNode;h=Math.round((c.right-c.left-a.conf.w)/2);a=Math.round((c.bottom-c.top-a.conf.h)/2);this.wins._winAdjustPosition(this._idd,h-e,a-g);d=null};
dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,!0)};dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv};
dhtmlXWindowsCell.prototype.isOnBottom=function(){var a=null,c=Infinity,e;for(e in this.wins.w)this.wins.w[e].conf.visible&&this.wins.w[e].win.style.zIndex<c&&(a=e,c=this.wins.w[e].win.style.zIndex);return a==this._idd};
dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];0==a.conf.header&&(a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!0,this.wins._winAdjustCell(this._idd))};
dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];1==a.conf.header&&(a.conf.parked&&this.wins._winPark(this._idd,!1),a.hdr.className+=" dhxwin_hdr_hidden",a.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!1,this.wins._winAdjustCell(this._idd))};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal};
dhtmlXWindowsCell.prototype._adjustByCont=function(a,c){a+=this.wins.w[this._idd].conf.w-this.conf.size.w;c+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,a,c)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a;this.wins._winAdjustTitle(this._idd)};
dhtmlXWindowsCell.prototype.setToFullScreen=function(a){a=window.dhx4.s2b(a);var c=this.wins.w[this._idd];c.conf.fs_mode!=a&&(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),a?(this.wins.fsn.appendChild(c.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(c.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),
this.wins.fsn=null)),c.conf.fs_mode=a)};dhtmlXWindowsCell.prototype.button=function(a){if("minmax1"==a||"minmax2"==a)a="minmax";return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(a,c,e){e=new dhtmlXWindowsButton(this.wins,this._idd,a,e,!0);var g=null,h=this.wins.w[this._idd].hdr.lastChild;isNaN(c)?c=0:0>c&&(c=0);null!=h.childNodes[c]&&(g=h.childNodes[c]);null!=g?h.insertBefore(e.button,g):h.appendChild(e.button);this.wins.w[this._idd].b[a]=e;this.wins._winAdjustTitle(this._idd)};
dhtmlXWindowsCell.prototype.removeUserButton=function(a){null!=this.wins.w[this._idd].b[a]&&1==this.wins.w[this._idd].b[a].conf.custom&&this.wins._winRemoveButton(this._idd,a)};
window.dhtmlXWindowsButton=function(a,c,e,g,h){this.conf={wins:a,winId:c,name:e,enabled:!0,visible:!0,custom:!0};this.button=document.createElement("DIV");this.button._buttonName=e;this.button.title=g;this.enable=function(){this.conf.enabled=!0;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=!1;this.setCss(this.conf.css)};this.isEnabled=function(){return 1==this.conf.enabled};this.show=function(){this.button.style.display="";this.conf.visible=!0;this.conf.wins._winAdjustTitle(this.conf.winId)};
this.hide=function(){this.button.style.display="none";this.conf.visible=!1;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return 0==this.conf.visible};this.setCss=function(a){this.conf.css=a;a=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+a+" dhxwin_button_"+this.conf.css+a};this._doOnClick=function(a){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(a){dhx4._eventable(this,"clear");this.button._buttonName=
null;this.button.parentNode.removeChild(this.button);null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name);this.unload=this.setCss=this.isHidden=this.hide=this.show=this.isEnabled=this.disable=this.enable=this.button=null;1!=a&&this.conf.wins._winAdjustTitle(this.conf.winId);this.conf.wins=null;this.conf=this.conf.winId=null};this.setCss(e);
dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(a,c,e){if(!this.w[a].b[c].isEnabled())return!0;if(!0===this.w[a].b[c]._doOnClick())return"help"==c&&this._callMainEvent("onHelp",a),"park"==c&&this._winPark(a,!0),"minmax"==c&&this._winMinmax(a),"stick"==c?(this._winStick(a),!1):"close"==c?(this._winClose(a),!1):!0};dhtmlXWindows.prototype._winRemoveButton=function(a,c,e){this.w[a].b[c].unload(e);this.w[a].b[c]=null;delete this.w[a].b[c]};
dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_enabled=!0;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(c,e){if(!a.conf.dblclick_active&&(c.preventDefault?c.preventDefault():c.returnValue=!1,!0===a._callMainEvent("onBeforeMoveStart",e))){a.conf.dnd={id:e,x:a._dndPos(c,"X"),y:a._dndPos(c,"Y"),ready:!0,css:!1,css_touch:!1,css_vp:!1,tr:null,mode:"def",moved:!1,prevent:!1};a.w[e].conf.keep_in_vp?(a.conf.dnd.minX=0,a.conf.dnd.maxX=a.vp.clientWidth-
a.w[e].conf.w,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.w[e].conf.h):(a.conf.dnd.minX=-a.w[e].conf.w+a.conf.vp_pos_ofs,a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs);for(var g=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],h=0;h<g.length;h++)null!=document.documentElement.style[g[h]]&&null==a.conf.dnd.tr&&(a.conf.dnd.tr=g[h],a.conf.dnd.mode="tr");"tr"==a.conf.dnd.mode&&(a.w[e].win.style[a.conf.dnd.tr]=
"translate(0px,0px)",null!=a.w[e].fr_m_cover&&(a.w[e].fr_m_cover.style[a.conf.dnd.tr]=a.w[e].win.style[a.conf.dnd.tr]));0==window.dhx4.dnd._mTouch(c)&&c.type==window.dhx4.dnd.evs.start?(0==a.conf.dnd.css_touch&&(a.w[e].win.className+=" dhxwin_dnd_touch",a.conf.dnd.css_touch=!0),0==a.conf.dnd.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",a.conf.dnd.css_vp=!0)):a._dndInitEvents()}};this._dndOnMouseMove=function(c){c=c||event;var e=a.conf.dnd,g=a._dndPos(c,"X")-e.x,h=a._dndPos(c,"Y")-e.y;if(c.type==window.dhx4.dnd.evs.move&&
1!=e.moved&&(20<Math.abs(g)||20<Math.abs(h)))null!=a.conf.dnd_tm&&(window.clearTimeout(a.conf.dnd_tm),a.conf.dnd_tm=null),window.removeEventListener(window.dhx4.dnd.evs.start,a._dndOnMouseMove,!1);else if(1==e.ready){var l=a.w[e.id];c.preventDefault?c.preventDefault():c.returnValue=!1;1!=e.css&&(0==e.css_touch&&(l.win.className+=" dhxwin_dnd"),l.fr_cover.className+=" dhxwin_fr_cover_dnd",e.css=!0);1!=e.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",e.css_vp=!0);e.newX=l.conf.x+g;e.newY=l.conf.y+h;"tr"==
e.mode?(e.newX=Math.min(Math.max(e.newX,e.minX),e.maxX),g=e.newX-l.conf.x,e.newY=Math.min(Math.max(e.newY,e.minY),e.maxY),h=e.newY-l.conf.y,l.win.style[e.tr]="translate("+g+"px,"+h+"px)",null!=l.fr_m_cover&&(l.fr_m_cover.style[e.tr]=l.win.style[e.tr])):(e.newX<e.minX||e.newX>e.maxX?e.newX=Math.min(Math.max(e.newX,e.minX),e.maxX):e.x=a._dndPos(c,"X"),e.newY<e.minY||e.newY>e.maxY?e.newY=Math.min(Math.max(e.newY,e.minY),e.maxY):e.y=a._dndPos(c,"Y"),a._winSetPosition(e.id,e.newX,e.newY));e.moved=!0}};
this._dndOnMouseUp=function(c){c=c||event;if(null!=a.conf.dnd){var e=a.conf.dnd,g=a.w[e.id];null!=e.newX&&"tr"==e.mode&&(a._winSetPosition(e.id,e.newX,e.newY),g.win.style[e.tr]="translate(0px,0px)",null!=g.fr_m_cover&&(g.fr_m_cover.style[e.tr]=g.win.style[e.tr]));1==e.css&&(0==e.css_touch&&(g.win.className=String(g.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")),g.fr_cover.className=String(g.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,""));1==e.css_touch&&(g.win.className=String(g.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,
""));1==e.css_vp&&(a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,""));a._dndUnloadEvents();1==e.moved?a._callMainEvent("onMoveFinish",e.id):a._callMainEvent("onMoveCancel",e.id);a.conf.dnd=null}1==window.dhx4.dnd.p_en&&c.type==window.dhx4.dnd.evs.end&&(window.dhx4.dnd._touchOn(),window.removeEventListener(window.dhx4.dnd.evs.end,a._dndOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,a._dndOnMouseMove,!1),null!=a.conf.dnd_tm&&window.clearTimeout(a.conf.dnd_tm),
a.conf.dnd_tm=null)};this._dndOnSelectStart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),
document.body.attachEvent("onselectstart",this._dndOnSelectStart))};this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",
this._dndOnSelectStart))};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);a=this._dndUnloadModule=this._dndInitModule=this._dndUnloadEvents=this._dndInitEvents=this._dndOnSelectStart=this._dndOnMouseUp=this._dndOnMouseMove=this._dndOnMouseDown=this.conf.dnd_evid=null};this._dndPos=function(a,e){var g=a[this.conf.dnd_ev_prefix+e];null!=g&&0!=g||null==a.touches||(g=a.touches[0][this.conf.dnd_ev_prefix+e]);return g};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(c,
e){if(null!=this.w[e.id]&&1==this.w[e.id].conf.allow_move&&!("undefined"!=typeof c.button&&2<=c.button)){if(c.type==window.dhx4.dnd.evs.start){if("hdr"==e.mode){if(this.w[e.id].conf.maxed&&null==this.w[e.id].conf.max_w&&null==this.w[e.id].conf.max_h)return;this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(c,"X"),y:this._dndPos(c,"Y")};1>this.conf.dnd_time?this._dndOnMouseDown(c,e.id):(null!=this.conf.dnd_tm&&window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(c,
e.id)},this.conf.dnd_time));1==window.dhx4.dnd.p_en&&(window.dhx4.dnd._touchOff(),window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,!1));window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1)}return!1}if(c.type==window.dhx4.dnd.evs.end)return null!=this.conf.dnd_tm&&(window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=null),this._dndOnMouseUp(c),window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1),!1;this.conf.dnd_ev_prefix="client";if("hdr"==
e.mode&&"mousedown"==c.type&&(!this.w[e.id].conf.maxed||null!=this.w[e.id].conf.max_w||null!=this.w[e.id].conf.max_h))return c.preventDefault?c.preventDefault():c.returnValue=!1,this._dndOnMouseDown(c,e.id),!1}})};
dhtmlXWindowsCell.prototype._initResize=function(){var a=this,c=navigator.userAgent;this.conf.resize={b_width:6,c_type:0<c.indexOf("MSIE 10.0")||0<c.indexOf("MSIE 9.0")||0<c.indexOf("MSIE 8.0")||0<c.indexOf("MSIE 7.0")||0<c.indexOf("MSIE 6.0"),btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&"undefined"==typeof window.addEventListener?1:0};this._rOnCellMouseMove=function(c){if(1==a.wins.conf.resize_actv||0==a.wins.w[a._idd].conf.allow_resize||1==a.conf.progress||1==a.wins.w[a._idd].conf.maxed||
1==a.wins.w[a._idd].conf.fs_mode){var g=a.wins.w[a._idd].brd;"default"!=g.style.cursor&&(g.style.cursor="default")}else{c=c||event;var g=a.wins.w[a._idd].brd,h=a.conf.resize,l=0==a.wins.w[a._idd].conf.header,m=c.clientX;c=c.clientY;var n=window.dhx4.absLeft(g),r=window.dhx4.absTop(g),u="";m<=n+h.b_width?u="w":m>=n+g.offsetWidth-h.b_width&&(u="e");c>=r+g.offsetHeight-h.b_width?u="s"+u:l&&c<=r+h.b_width&&(u="n"+u);""==u&&(u=!1);h.mode!=u&&(h.mode=u,g.style.cursor=0==u?"default":u+"-resize")}};this._rOnCellMouseDown=
function(c){c=c||event;if(("undefined"==typeof c.button||c.button==a.conf.resize.btn_left)&&0!=a.conf.resize.mode&&1!=a.conf.progress&&0!=a.wins.w[a._idd].conf.allow_resize&&1!=a.wins.w[a._idd].conf.fs_mode&&(c.preventDefault?c.preventDefault():c.returnValue=!1,!0===a.wins._callMainEvent("onBeforeResizeStart",a._idd))){var g=a.wins.w[a._idd],h=a.conf.resize;a.wins.conf.resize_actv=!0;h.min_w=g.conf.min_w;h.min_h=g.conf.min_h;h.max_w=g.conf.max_w||Infinity;h.max_h=g.conf.max_h||Infinity;"layout"==
g.cell.dataType&&null!=g.cell.dataObj&&"function"==typeof g.cell.dataObj._getWindowMinDimension&&(g=g.cell.dataObj._getWindowMinDimension(g.cell),h.min_w=Math.max(g.w,h.min_w),h.min_h=Math.max(g.h,h.min_h));h.vp_l=a.wins.conf.vp_pos_ofs;h.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs;h.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs;h.x=c.clientX;h.y=c.clientY;"function"==typeof window.addEventListener?(window.addEventListener("mousemove",a._rOnWinMouseMove,!1),window.addEventListener("mouseup",
a._rOnWinMouseUp,!1),window.addEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",a._rOnWinMouseMove),document.body.attachEvent("onmouseup",a._rOnWinMouseUp),document.body.attachEvent("onselectstart",a._rOnSelectStart));h.resized=!1;h.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=h.mode+"-resize"}};this._rOnCellContextMenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._rOnWinMouseMove=function(c){c=c||
event;var g=a.wins.w[a._idd],h=a.conf.resize;h.resized||(g.fr_cover.className+=" dhxwin_fr_cover_resize",h.resized=!0);var l=c.clientX-h.x;c=c.clientY-h.y;0<=h.mode.indexOf("e")?(h.rw=Math.min(Math.max(g.conf.w+l,h.min_w),h.max_w),h.rx=null,g.conf.x+h.rw<h.vp_l?h.rw=h.vp_l-g.conf.x:g.conf.x+h.rw>a.wins.vp.clientWidth&&(h.rw=a.wins.vp.clientWidth-g.conf.x)):0<=h.mode.indexOf("w")&&(h.rw=Math.min(Math.max(g.conf.w-l,h.min_w),h.max_w),h.rx=g.conf.x+g.conf.w-h.rw,0>h.rx?(h.rw+=h.rx,h.rx=0):h.rx>h.vp_r&&
(h.rw-=h.vp_r,h.rx=h.vp_r));0<=h.mode.indexOf("s")?(h.rh=Math.min(Math.max(g.conf.h+c,h.min_h),h.max_h),h.ry=null,g.conf.y+h.rh>a.wins.vp.clientHeight&&(h.rh=a.wins.vp.clientHeight-g.conf.y)):0<=h.mode.indexOf("n")&&(h.rh=Math.min(Math.max(g.conf.h-c,h.min_h),h.max_h),h.ry=g.conf.y+g.conf.h-h.rh,0>h.ry?(h.rh+=h.ry,h.ry=0):h.ry>h.vp_b&&(h.rh-=h.vp_b,h.ry=h.vp_b));a._rAdjustSizer()};this._rOnWinMouseUp=function(){var c=a.conf.resize,g=a.wins.w[a._idd];a.wins.conf.resize_actv=!1;a.wins.vp.style.cursor=
c.vp_cursor;g.fr_cover.className=String(g.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");c.resized&&(a.wins._winSetSize(a._idd,c.rw,c.rh),null==c.rx&&(c.rx=g.conf.x),null==c.ry&&(c.ry=g.conf.y),c.rx==g.conf.x&&c.ry==g.conf.y||a.wins._winSetPosition(a._idd,c.rx,c.ry));null!=c.obj&&(c.obj.parentNode.removeChild(c.obj),c.obj=null);null!=c.objFR&&(c.objFR.parentNode.removeChild(c.objFR),c.objFR=null);"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",
a._rOnWinMouseMove,!1),window.removeEventListener("mouseup",a._rOnWinMouseUp,!1),window.removeEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",a._rOnWinMouseMove),document.body.detachEvent("onmouseup",a._rOnWinMouseUp),document.body.detachEvent("onselectstart",a._rOnSelectStart));1==c.resized?("layout"==a.dataType&&null!=a.dataObj&&a.dataObj.callEvent("onResize",[]),a.wins._callMainEvent("onResizeFinish",a._idd)):a.wins._callMainEvent("onResizeCancel",a._idd);
c.mode=""};this._rOnSelectStart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._rInitSizer=function(){var c=a.conf.resize,g=a.wins.w[a._idd];c.obj=document.createElement("DIV");c.obj.className="dhxwin_resize";c.obj.style.zIndex=g.win.style.zIndex;c.obj.style.cursor=c.mode+"-resize";a.wins.vp.appendChild(c.obj);1==a.wins.conf.fr_cover&&(c.objFR=document.createElement("IFRAME"),c.objFR.className="dhxwin_resize_fr_cover",c.objFR.style.zIndex=c.obj.style.zIndex,
a.wins.vp.insertBefore(c.objFR,c.obj));c.rx=g.conf.x;c.ry=g.conf.y;c.rw=g.conf.w;c.rh=g.conf.h};this._rAdjustSizer=function(){var c=a.conf.resize;c.obj||this._rInitSizer();c.obj.style.width=c.rw+"px";c.obj.style.height=c.rh+"px";null!=c.rx&&(c.obj.style.left=c.rx+"px");null!=c.ry&&(c.obj.style.top=c.ry+"px");null!=c.objFR&&(c.objFR.style.width=c.obj.style.width,c.objFR.style.height=c.obj.style.height,null!=c.rx&&(c.objFR.style.left=c.obj.style.left),null!=c.ry&&(c.objFR.style.top=c.obj.style.top))};
"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.attachEvent("oncontextmenu",
this._rOnCellContextMenu));this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown),
this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu));this._unloadResize=this._rAdjustSizer=this._rInitSizer=this._rOnSelectStart=this._rOnWinMouseUp=this._rOnWinMouseMove=this._rOnCellMouseDown=this._rOnCellMouseMove=this._initResize=null;a=this.conf.resize=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)};
dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null};
dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)};
dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};
dhtmlXWindows.prototype._renderContextMenu=function(a,c,e,g){var h=this,l=!1;null==this.cm&&(this.cm={global:null,icon:{},button:{}},l=!0);if(null==c){if(null!=this.cm.global)return}else if("icon"==a){if(null!=this.cm.icon[c])return}else if("button"==a&&null!=this.cm.button[c]&&null!=this.cm.button[c][e])return;null==g&&(g={});g.parent=null;g.context=!0;g=new dhtmlXMenuObject(g);g.setAutoHideMode(!1);g.attachEvent("onShow",function(){this.conf.wins_menu_open=!0});g.attachEvent("onHide",function(){this.conf.wins_menu_open=
!1;h.conf.opened_menu=null});null==c?this.cm.global=g:"icon"==a?this.cm.icon[c]=g:"button"==a&&(null==this.cm.button[c]&&(this.cm.button[c]={}),this.cm.button[c][e]=g);l&&(this._showContextMenu=function(a,c){if(!(2<=a.button)){if("icon"==c.mode&&null!=c.id&&"mousedown"==c.press_type){var e=this.cm.icon[c.id]||this.cm.global;if(null==e)return;a.cancelBubble=!0;var g=this.w[c.id].hdr.firstChild;e.conf.wins_menu_open&&this.conf.opened_menu==c.id?e.hideContextMenu():(this._hideContextMenu(),e.showContextMenu(window.dhx4.absLeft(g),
window.dhx4.absTop(g)+g.offsetHeight),this.conf.opened_menu=c.id)}"button"==c.mode&&null!=c.id&&"mousedown"==c.press_type&&null!=this.cm.button[c.id]&&null!=this.cm.button[c.id][c.button_name]&&(a.cancelBubble=!0,this.conf.button_last=null,e=this.cm.button[c.id][c.button_name],g=this.w[c.id].b[c.button_name].button,e.conf.wins_menu_open&&this.conf.opened_menu==c.id?e.hideContextMenu():(this._hideContextMenu(),e.showContextMenu(window.dhx4.absLeft(g),window.dhx4.absTop(g)+g.offsetHeight),this.conf.opened_menu=
c.id))}},this._hideContextMenu=function(a){if(null!=a){a=a||event;if("keydown"==a.type&&27!=a.keyCode)return;for(var c=a.target||a.srcElement,e=!0;null!=c&&1==e;)null!=c.className&&0<=c.className.search(/SubLevelArea_Polygon/)?e=!1:c=c.parentNode}if(e||null==a){null!=h.cm.global&&h.cm.global.hideContextMenu();for(var g in h.cm.icon)null!=h.cm.icon[g]&&h.cm.icon[g].hideContextMenu();for(g in h.cm.button)for(var l in h.cm.button[g])null!=h.cm.button[g][l]&&h.cm.button[g][l].hideContextMenu()}},this._detachContextMenu=
function(a,c,e){null!=this.cm&&(null==c?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==a?null!=this.cm.icon[c]&&(this.cm.icon[c].unload(),this.cm.icon[c]=null):"button"==a&&null!=this.cm.button[c]&&null!=this.cm.button[c][e]&&(this.cm.button[c][e].unload(),this.cm.button[c][e]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",
this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",
this._hideContextMenu));h=null});return g};window.dhtmlx||(window.dhtmlx={});
(function(){function a(a,c){var g=a.callback;e(!1);a.box.parentNode.removeChild(a.box);u=a.box=null;g&&g(c)}function c(c){if(u){c=c||event;var e=c.which||event.keyCode;dhtmlx.message.keyboard&&(13!=e&&32!=e||a(u,!0),27==e&&a(u,!1));c.preventDefault&&c.preventDefault();return!(c.cancelBubble=!0)}}function e(a){e.cover||(e.cover=document.createElement("DIV"),e.cover.onkeydown=c,e.cover.className="dhx_modal_cover",document.body.appendChild(e.cover));e.cover.style.display=a?"inline-block":"none"}function g(a,
c){return"<div class='dhtmlx_popup_button' result='"+c+"' ><div>"+a+"</div></div>"}function h(a){v.area||(v.area=document.createElement("DIV"),v.area.className="dhtmlx_message_area",v.area.style[v.position]="5px",document.body.appendChild(v.area));v.hide(a.id);var c=document.createElement("DIV");c.innerHTML="<div>"+a.text+"</div>";c.className="dhtmlx-info dhtmlx-"+a.type;c.onclick=function(){a&&v.hide(a.id);a=null};"bottom"==v.position&&v.area.firstChild?v.area.insertBefore(c,v.area.firstChild):v.area.appendChild(c);
0<a.expire&&(v.timers[a.id]=window.setTimeout(function(){v.hide(a.id)},a.expire));v.pull[a.id]=c;c=null;return a.id}function l(c,e,h){var l=document.createElement("DIV");l.className=" dhtmlx_modal_box dhtmlx-"+c.type;l.setAttribute("dhxbox",1);var m="";c.width&&(l.style.width=c.width);c.height&&(l.style.height=c.height);c.title&&(m+='<div class="dhtmlx_popup_title">'+c.title+"</div>");m+='<div class="dhtmlx_popup_text"><span>'+(c.content?"":c.text)+'</span></div><div  class="dhtmlx_popup_controls">';
e&&(m+=g(c.ok||"OK",!0));h&&(m+=g(c.cancel||"Cancel",!1));if(c.buttons)for(var n=0;n<c.buttons.length;n++)m+=g(c.buttons[n],n);l.innerHTML=m+"</div>";c.content&&(m=c.content,"string"==typeof m&&(m=document.getElementById(m)),"none"==m.style.display&&(m.style.display=""),l.childNodes[c.title?1:0].appendChild(m));l.onclick=function(e){e=e||event;e=e.target||e.srcElement;e.className||(e=e.parentNode);"dhtmlx_popup_button"==e.className&&(e=e.getAttribute("result"),a(c,"true"==e||("false"==e?!1:e)))};
c.box=l;if(e||h)u=c;return l}function m(a,g,h){g=a.tagName?a:l(a,g,h);a.hidden||e(!0);document.body.appendChild(g);h=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2));var m=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));g.style.top="top"==a.position?"-3px":m+"px";g.style.left=h+"px";g.onkeydown=c;g.focus();a.hidden&&dhtmlx.modalbox.hide(g);return g}function n(a,c,e){"object"!=typeof a&&
("function"==typeof c&&(e=c,c=""),a={text:a,type:c,callback:e});return a}function r(a,c,e,g){"object"!=typeof a&&(a={text:a,type:c,expire:e,id:g});a.id=a.id||v.uid();a.expire=a.expire||v.expire;return a}var u=null;document.attachEvent?document.attachEvent("onkeydown",c):document.addEventListener("keydown",c,!0);dhtmlx.alert=function(){var a=n.apply(this,arguments);a.type=a.type||"confirm";return m(a,!0,!1)};dhtmlx.confirm=function(){var a=n.apply(this,arguments);a.type=a.type||"alert";return m(a,
!0,!0)};dhtmlx.modalbox=function(){var a=n.apply(this,arguments);a.type=a.type||"alert";return m(a)};dhtmlx.modalbox.hide=function(a){for(;a&&a.getAttribute&&!a.getAttribute("dhxbox");)a=a.parentNode;a&&(a.parentNode.removeChild(a),e(!1),u=null)};var v=dhtmlx.message=function(a,c,e,g){a=r.apply(this,arguments);a.type=a.type||"info";switch(a.type.split("-")[0]){case "alert":return m(a,!0,!1);case "confirm":return m(a,!0,!0);case "modalbox":return m(a);default:return h(a)}};v.seed=(new Date).valueOf();
v.uid=function(){return v.seed++};v.expire=4E3;v.keyboard=!0;v.position="top";v.pull={};v.timers={};v.hideAll=function(){for(var a in v.pull)v.hide(a)};v.hide=function(a){var c=v.pull[a];c&&c.parentNode&&(window.setTimeout(function(){c.parentNode.removeChild(c);c=null},2E3),c.className+=" hidden",v.timers[a]&&window.clearTimeout(v.timers[a]),delete v.pull[a])}})();window.dhx||(dhx={});dhx.assert=function(a,c){a||dhx.assert_error(c)};
dhx.assert_error=function(a){dhx.log("error",a);dhx.message&&"string"==typeof a&&dhx.message({type:"debug",text:a,expire:-1});!1!==dhx.debug&&eval("debugger;")};dhx.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()};dhx.codebase="./";dhx.name="Core";dhx.clone=function(a){var c=dhx.clone._function;c.prototype=a;return new c};dhx.clone._function=function(){};
dhx.extend=function(a,c,e){dhx.assert(a,"Invalid mixing target");dhx.assert(c,"Invalid mixing source");if(a._dhx_proto_wait)return dhx.PowerArray.insertAt.call(a._dhx_proto_wait,c,1),a;for(var g in c)if(!a[g]||e)a[g]=c[g];c.defaults&&dhx.extend(a.defaults,c.defaults);c.$init&&c.$init.call(a);return a};
dhx.copy=function(a){dhx.assert(a,"Invalid mixing target");if(1<arguments.length){var c=arguments[0];a=arguments[1]}else c=dhx.isArray(a)?[]:{};for(var e in a)a[e]&&"object"==typeof a[e]&&!dhx.isDate(a[e])?(c[e]=dhx.isArray(a[e])?[]:{},dhx.copy(c[e],a[e])):c[e]=a[e];return c};dhx.single=function(a){var c=null;return function(e){c||(c=new a({}));c._reinit&&c._reinit.apply(c,arguments);return c}};
dhx.protoUI=function(){dhx.debug_proto&&dhx.log("UI registered: "+arguments[0].name);var a=arguments[0].name,c=function(e){if(!c)return dhx.ui[a].prototype;var g=c._dhx_proto_wait;if(g){for(var h=[g[0]],l=1;l<g.length;l++)h[l]=g[l],h[l]._dhx_proto_wait&&(h[l]=h[l].call(dhx,h[l].name)),h[l].prototype&&h[l].prototype.name&&(dhx.ui[h[l].prototype.name]=h[l]);dhx.ui[a]=dhx.proto.apply(dhx,h);if(c._dhx_type_wait)for(l=0;l<c._dhx_type_wait.length;l++)dhx.Type(dhx.ui[a],c._dhx_type_wait[l]);c=null}return this!=
dhx?new dhx.ui[a](e):dhx.ui[a]};c._dhx_proto_wait=Array.prototype.slice.call(arguments,0);return dhx.ui[a]=c};
dhx.proto=function(){dhx.debug_proto&&dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var a=arguments,c=a[0],e=!!c.$init,g=[];dhx.assert(c,"Invalid mixing target");for(var h=a.length-1;0<h;h--){dhx.assert(a[h],"Invalid mixing source");"function"==typeof a[h]&&(a[h]=a[h].prototype);a[h].$init&&g.push(a[h].$init);if(a[h].defaults){var l=a[h].defaults;c.defaults||(c.defaults={});for(var m in l)dhx.isUndefined(c.defaults[m])&&(c.defaults[m]=l[m])}if(a[h].type&&c.type)for(m in a[h].type)c.type[m]||
(c.type[m]=a[h].type[m]);for(var n in a[h])c[n]||(c[n]=a[h][n])}e&&g.push(c.$init);c.$init=function(){for(var a=0;a<g.length;a++)g[a].apply(this,arguments)};e=function(a){this.$ready=[];dhx.assert(this.$init,"object without init method");this.$init(a);this._parseSettings&&this._parseSettings(a,this.defaults);for(a=0;a<this.$ready.length;a++)this.$ready[a].call(this)};e.prototype=c;c=a=null;return e};dhx.bind=function(a,c){return function(){return a.apply(c,arguments)}};
dhx.require=function(a,c,e,g,h){if("string"!=typeof a){var l=a.length||0,m=c;if(l)c=function(){if(l)l--,dhx.require(a[a.length-l-1],c,e);else return m.apply(this,arguments)},c();else{for(var n in a)l++;c=function(){l--;0===l&&m.apply(this,arguments)};for(n in a)dhx.require(n,c,e)}}else!0!==dhx._modules[a]&&(".css"==a.substr(-4)?(g=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+a}),document.head.appendChild(g),c&&c.call(e||window)):c?dhx._modules[a]?dhx._modules[a].push([c,
e]):(dhx._modules[a]=[[c,e]],dhx.ajax(dhx.codebase+a,function(c){dhx.exec(c);c=dhx._modules[a];dhx._modules[a]=!0;for(var e=0;e<c.length;e++)c[e][0].call(c[e][1]||window,!e)})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+a).responseText),dhx._modules[a]=!0))};dhx._modules={};dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhx.wrap=function(a,c){return a?function(){var e=a.apply(this,arguments);c.apply(this,arguments);return e}:c};
dhx.isUndefined=function(a){return"undefined"==typeof a};dhx.delay=function(a,c,e,g){return window.setTimeout(function(){var g=a.apply(c,e||[]);a=c=e=null;return g},g||1)};dhx.uid=function(){this._seed||(this._seed=(new Date).valueOf());this._seed++;return this._seed};dhx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a};dhx.toArray=function(a){return dhx.extend(a||[],dhx.PowerArray,!0)};dhx.toFunctor=function(a){return"string"==typeof a?eval(a):a};
dhx.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};dhx.isDate=function(a){return a instanceof Date};dhx._events={};dhx.event=function(a,c,e,g){a=dhx.toNode(a);var h=dhx.uid();g&&(e=dhx.bind(e,g));dhx._events[h]=[a,c,e];a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e);return h};
dhx.eventRemove=function(a){if(a){dhx.assert(this._events[a],"Removing non-existing event");var c=dhx._events[a];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]);delete this._events[a]}};dhx.log=function(a,c,e){1==arguments.length&&(c=a,a="log");if(window.console&&console.log){a=a.toLowerCase();if(window.console[a])window.console[a](c||"unknown error");else window.console.log(a+": "+c);e&&window.console.log(e)}};
dhx.log_full_time=function(a){dhx._start_time_log=new Date;dhx.log("Timing start ["+a+"]");window.setTimeout(function(){dhx.log("Timing end ["+a+"]:"+((new Date).valueOf()-dhx._start_time_log.valueOf())/1E3+"s")},1)};dhx.log_time=function(a){var c="_start_time_log"+a;dhx[c]?(dhx.log("Info","Timing end ["+a+"]:"+((new Date).valueOf()-dhx[c].valueOf())/1E3+"s"),dhx[c]=null):(dhx[c]=new Date,dhx.log("Info","Timing start ["+a+"]"))};dhx.debug_code=function(a){a.call(dhx)};
dhx.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(a){dhx.extend(this._evs_map,a,!0)},on_setter:function(a){if(a)for(var c in a)"function"==typeof a[c]&&this.attachEvent(c,a[c])},callEvent:function(a,c){if(this._evs_events._block)return!0;a=a.toLowerCase();var e=this._evs_events[a.toLowerCase()],g=!0;dhx.debug&&dhx.log("info",
"["+this.name+"] event:"+a,c);if(e)for(var h=0;h<e.length;h++)!1===e[h].apply(this,c||[])&&(g=!1);this._evs_map[a]&&!this._evs_map[a].callEvent(a,c)&&(g=!1);return g},attachEvent:function(a,c,e){dhx.assert(c,"Invalid event handler for "+a);a=a.toLowerCase();e=e||dhx.uid();c=dhx.toFunctor(c);var g=this._evs_events[a]||dhx.toArray();g.push(c);this._evs_events[a]=g;this._evs_handlers[e]={f:c,t:a};return e},detachEvent:function(a){this._evs_handlers[a]&&(this._evs_events[this._evs_handlers[a].t].remove(this._evs_handlers[a].f),
delete this._evs_handlers[a])},hasEvent:function(a){a=a.toLowerCase();return this._evs_events[a]?!0:!1}};dhx.extend(dhx,dhx.EventSystem);
dhx.PowerArray={removeAt:function(a,c){0<=a&&this.splice(a,c||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,c){if(c||0===c){var e=this.splice(c,this.length-c);this[c]=a;this.push.apply(this,e)}else this.push(a)},find:function(a){for(var c=0;c<this.length;c++)if(a==this[c])return c;return-1},each:function(a,c){for(var e=0;e<this.length;e++)a.call(c||this,this[e])},map:function(a,c){for(var e=0;e<this.length;e++)this[e]=a.call(c||this,this[e]);return this},filter:function(a,
c){for(var e=0;e<this.length;e++)a.call(c||this,this[e])||(this.splice(e,1),e--);return this}};dhx.env={};
(function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0);if(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))dhx.env.touch=!0;-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac"));-1!=navigator.userAgent.toLowerCase().indexOf("android")&&
(dhx.env.isAndroid=!0);dhx.env.transform=!1;dhx.env.transition=!1;for(var a={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","OTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","OTransition","msTransition"]},c=document.createElement("DIV"),e=0;e<a.names.length;e++)for(var g=a[a.names[e]],h=0;h<g.length;h++)if("undefined"!=typeof c.style[g[h]]){dhx.env[a.names[e]]=g[h];break}c.style[dhx.env.transform]="translate3d(0,0,0)";
dhx.env.translate=c.style[dhx.env.transform]?"translate3d":"translate";a="";c=!1;dhx.env.isOpera&&(a="-o-",c="O");dhx.env.isFF&&(a="-Moz-");dhx.env.isWebKit&&(a="-webkit-");dhx.env.isIE&&(a="-ms-");dhx.env.transformCSSPrefix=a;dhx.env.transformPrefix=c||dhx.env.transformCSSPrefix.replace(/-/gi,"");dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"})();
dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();
dhx.html={_native_on_selectstart:0,denySelect:function(){dhx._native_on_selectstart||(dhx._native_on_selectstart=document.onselectstart);document.onselectstart=dhx.html.stopEvent},allowSelect:function(){0!==dhx._native_on_selectstart&&(document.onselectstart=dhx._native_on_selectstart||null);dhx._native_on_selectstart=0},index:function(a){for(var c=0;a=a.previousSibling;)c++;return c},_style_cache:{},createCss:function(a){var c="",e;for(e in a)c+=e+":"+a[e]+";";a=this._style_cache[c];a||(a="s"+dhx.uid(),
this.addStyle("."+a+"{"+c+"}"),this._style_cache[c]=a);return a},addStyle:function(a){var c=document.createElement("style");c.setAttribute("type","text/css");c.setAttribute("media","screen");c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(c)},create:function(a,c,e){c=c||{};a=document.createElement(a);for(var g in c)a.setAttribute(g,c[g]);c.style&&(a.style.cssText=c.style);c["class"]&&(a.className=c["class"]);e&&(a.innerHTML=
e);return a},getValue:function(a){return(a=dhx.toNode(a))?dhx.isUndefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var c=0;c<a.length;c++)this.remove(a[c]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,c,e){a&&(c&&c.parentNode?c.parentNode.insertBefore(a,c):e.appendChild(a))},locate:function(a,c){if(a.tagName)var e=a;else a=a||event,e=a.target||a.srcElement;for(;e;){if(e.getAttribute){var g=e.getAttribute(c);if(g)return g}e=e.parentNode}return null},
offset:function(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var c=document.body,e=document.documentElement,g=a.top+(window.pageYOffset||e.scrollTop||c.scrollTop)-(e.clientTop||c.clientTop||0),c=a.left+(window.pageXOffset||e.scrollLeft||c.scrollLeft)-(e.clientLeft||c.clientLeft||0);return{y:Math.round(g),x:Math.round(c)}}for(c=g=0;a;)g+=parseInt(a.offsetTop,10),c+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:g,x:c}},posRelative:function(a){a=a||event;return dhx.isUndefined(a.offsetX)?
{x:a.layerX,y:a.layerY}:{x:a.offsetX,y:a.offsetY}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var c=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();return dhx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=!0;return!1},addCss:function(a,c){a.className+=" "+c},removeCss:function(a,
c){a.className=a.className.replace(RegExp(" "+c,"g"),"")}};dhx.ready=function(a){this._ready?a.call():this._ready_code.push(a)};dhx._ready_code=[];
(function(){var a=document.getElementsByTagName("SCRIPT");dhx.assert(a.length,"Can't locate codebase");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhx.codebase=a.slice(0,a.length).join("/")+"/");dhx.event(window,"load",function(){dhx4.callEvent("onReady",[]);dhx.delay(function(){dhx._ready=!0;for(var a=0;a<dhx._ready_code.length;a++)dhx._ready_code[a].call();dhx._ready_code=[]})})})();dhx.locale=dhx.locale||{};dhx.assert_core_ready();
dhx.ready(function(){dhx.event(document.body,"click",function(a){dhx4.callEvent("onClick",[a||event])})});
(function(){var a={},c=/(\r\n|\n)/g,e=/(\")/g;dhx.Template=function(g){if("function"==typeof g)return g;if(a[g])return a[g];g=(g||"").toString();if(-1!=g.indexOf("->"))switch(g=g.split("->"),g[0]){case "html":g=dhx.html.getValue(g[1]);break;case "http":g=(new dhx.ajax).sync().get(g[1],{uid:dhx.uid()}).responseText}g=(g||"").toString();g=g.replace(c,"\\n");g=g.replace(e,'\\"');g=g.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');g=g.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");
g=g.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');g=g.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');g=g.replace("{obj}",'"+obj+"');g=g.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{a[g]=Function("obj","common",'return "'+g+'";')}catch(h){dhx.assert_error("Invalid template:"+g)}return a[g]};dhx.Template.empty=function(){return""};dhx.Template.bind=function(a){return dhx.bind(dhx.Template(a),this)};dhx.Type=function(a,c){if(a._dhx_proto_wait)a._dhx_type_wait||
(a._dhx_type_wait=[]),a._dhx_type_wait.push(c);else{"function"==typeof a&&(a=a.prototype);a.types||(a.types={"default":a.type},a.type.name="default");var e=c.name,m=a.type;e&&(m=a.types[e]=dhx.clone(c.baseType?a.types[c.baseType]:a.type));for(var n in c)0===n.indexOf("template")?m[n]=dhx.Template(c[n]):m[n]=c[n];return e}}})();
dhx.Settings={$init:function(){this._settings=this.config={}},define:function(a,c){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,c)},_define:function(a,c){var e=this[a+"_setter"];return this._settings[a]=e?e.call(this,c,a):c},_parseSeetingColl:function(a){if(a)for(var c in a)this._define(c,a[c])},_parseSettings:function(a,c){var e={};c&&(e=dhx.extend(e,c));"object"!=typeof a||a.tagName||dhx.extend(e,a,!0);this._parseSeetingColl(e)},_mergeSettings:function(a,c){for(var e in c)switch(typeof a[e]){case "object":a[e]=
this._mergeSettings(a[e]||{},c[e]);break;case "undefined":a[e]=c[e]}return a},debug_freid_c_id:!0,debug_freid_a_name:!0};dhx.ajax=function(a,c,e){if(0!==arguments.length){var g=new dhx.ajax;e&&(g.master=e);return g.get(a,null,c)}return this.getXHR?this:new dhx.ajax};dhx.ajax.count=0;
dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,c,e){var g=this.getXHR();dhx.isArray(e)||(e=[e]);if("object"==typeof c){var h=[],l;for(l in c){var m=c[l];if(null===m||m===dhx.undefined)m="";h.push(l+"="+encodeURIComponent(m))}c=h.join("&")}c&&"GET"===this.request&&(a=a+(-1!=a.indexOf("?")?"&":"?")+c,c=null);g.open(this.request,a,!this._sync);"POST"===this.request&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var n=this;g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){dhx.debug_time&&dhx.log_full_time("data_loading");dhx.ajax.count++;if(e&&n)for(var a=0;a<e.length;a++)if(e[a]){var c=e[a].success||e[a];if(400<=g.status||!g.status&&!g.responseText)c=e[a].error;c&&c.call(n.master||n,g.responseText,g.responseXML,g)}n&&(n.master=null);e=n=null}};g.send(c||null);return g},get:function(a,c,e){2==arguments.length&&(e=c,c=null);this.request="GET";return this.send(a,c,e)},post:function(a,c,e){this.request=
"POST";return this.send(a,c,e)},put:function(a,c,e){this.request="PUT";return this.send(a,c,e)},del:function(a,c,e){this.request="DELETE";return this.send(a,c,e)},sync:function(){this._sync=!0;return this},bind:function(a){this.master=a;return this}};
dhx.send=function(a,c,e,g){a=dhx.html.create("FORM",{target:g||"_self",action:a,method:e||"POST"},"");for(var h in c)e=dhx.html.create("INPUT",{type:"hidden",name:h,value:c[h]},""),a.appendChild(e);a.style.display="none";document.body.appendChild(a);a.submit();document.body.removeChild(a)};
dhx.AtomDataLoader={$init:function(a){this.data={};a&&(this._settings.datatype=a.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){if(!this._ready_for_data)return a;this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data)return a;this.parse(a,this._settings.datatype);
return!0},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(a,c,e){if(a.$proxy)a.load(this,"string"==typeof c?c:"json");else return this.callEvent("onXLS",[]),"string"==typeof c?(this.data.driver=dhx.DataDriver[c],c=e):this.data.driver||(this.data.driver=dhx.DataDriver.json),e=[{success:this._onLoad,error:this._onLoadError}],c&&(dhx.isArray(c)?e.push.apply(e,c):e.push(c)),dhx.ajax(a,e,this)},parse:function(a,c){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[c||"json"];
this._onLoad(a,null)},_onLoad:function(a,c,e,g){g=this.data.driver;var h=g.toObject(a,c);h?(c=g.getRecords(h)[0],this.data=g?g.getDetails(c):a):this._onLoadError(a,c,e);this.callEvent("onXLE",[])},_onLoadError:function(a,c,e){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx4.callEvent("onLoadError",[a,c,e,this])},_check_data_feed:function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var c=this._settings.dataFeed;if("function"==typeof c)return c.call(this,a.id||
a,a);c=c+(-1==c.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.callEvent("onXLS",[]);dhx.ajax(c,function(a,c,h){this._ignore_feed=!0;var l=dhx.DataDriver.toObject(a,c);l?this.setValues(l.getDetails(l.getRecords()[0])):this._onLoadError(a,c,h);this._ignore_feed=!1;this.callEvent("onXLE",[])},this);return!1}};dhx.DataDriver={};
dhx.DataDriver.json={toObject:function(a){a||(a="[]");if("string"==typeof a){try{eval("dhx.temp="+a)}catch(c){return dhx.assert_error(c),null}a=dhx.temp}if(a.data){var e=a.data.config={},g;for(g in a)"data"!=g&&(e[g]=a[g]);a=a.data}return a},getRecords:function(a){return a&&!dhx.isArray(a)?[a]:a},getDetails:function(a){return"string"==typeof a?{id:dhx.uid(),value:a}:a},getInfo:function(a){return(a=a.config)?{_size:a.total_count||0,_from:a.pos||0,_parent:a.parent||0,_config:a.config,_key:a.dhx_security}:
{}},child:"data"};dhx.DataDriver.html={toObject:function(a){if("string"==typeof a){var c=null;-1==a.indexOf("<")&&(c=dhx.toNode(a));c||(c=document.createElement("DIV"),c.innerHTML=a);return c.getElementsByTagName(this.tag)}return a},getRecords:function(a){for(var c=[],e=0;e<a.childNodes.length;e++){var g=a.childNodes[e];1==g.nodeType&&c.push(g)}return c},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};
dhx.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?(eval("dhx.temp="+a),dhx.temp):a},getRecords:function(a){return a},getDetails:function(a){for(var c={},e=0;e<a.length;e++)c["data"+e]=a[e];return c},getInfo:function(a){return{_size:0,_from:0}}};
dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var c={},e=0;e<a.length;e++)c["data"+e]=a[e];return c},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var c=0;c<a.length;c++)a[c]=a[c].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};
dhx.DataDriver.xml={_isValidXML:function(a){return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length?a:null},toObject:function(a,c){if(this._isValidXML(e))return e;var e="string"==typeof a?this.fromString(a.replace(/^[\s]+/,"")):a;return this._isValidXML(e)?e:null},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){var c=this.xpath(a,this.config),c=c.length?
this.assignTypes(this.tagToObject(c[0],{})):null;return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_parent:a.documentElement.getAttribute("parent")||0,_config:c,_key:a.documentElement.getAttribute("dhx_security")||null}},xpath:function(a,c){if(window.XPathResult){var e=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var g=[],e=a.evaluate(c,e,null,XPathResult.ANY_TYPE,null),h=e.iterateNext();h;)g.push(h),h=e.iterateNext();return g}g=
!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(l){}if(g)return a.selectNodes(c);g=c.split("/").pop();return a.getElementsByTagName(g)},assignTypes:function(a){for(var c in a){var e=a[c];"object"==typeof e?this.assignTypes(e):"string"==typeof e&&""!==e&&("true"==e?a[c]=!0:"false"==e?a[c]=!1:e==1*e&&(a[c]*=1))}return a},tagToObject:function(a,c){c=c||{};var e=!1,g=a.attributes;if(g&&g.length){for(var h=0;h<g.length;h++)c[g[h].name]=g[h].value;e=!0}g=a.childNodes;for(h=0;h<g.length;h++)1==g[h].nodeType&&
(e=g[h].tagName,"undefined"!=typeof c[e]?(dhx.isArray(c[e])||(c[e]=[c[e]]),c[e].push(this.tagToObject(g[h],{}))):c[g[h].tagName]=this.tagToObject(g[h],{}),e=!0);if(!e)return this.nodeValue(a);c.value=c.value||this.nodeValue(a);return c},nodeValue:function(a){return a.firstChild?a.firstChild.data:""},fromString:function(a){try{if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var c=new ActiveXObject("Microsoft.xmlDOM");c.loadXML(a);return c}}catch(e){return dhx.assert_error(e),
null}dhx.assert_error("Load from xml string is not supported")}};
dhx.DataLoader=dhx.proto({$init:function(a){this._ajax_queue=dhx.toArray();this.data=new dhx.DataStore;this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(a,c,e){if(this._load_count)return this._load_count=[a,c,e];this._load_count=!0;this._feed_last=[a,c];this._feed_common.call(this,a,c,e)},_feed_common:function(a,c,e){var g=this.data.url;0>a&&(a=0);this.load(g+
(-1==g.indexOf("?")?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+a+"&count="+c,[this._feed_callback,e])},_feed_callback:function(){var a=this._load_count,c=this._feed_last;this._load_count=!1;"object"!=typeof a||a[0]==c[0]&&a[1]==c[1]||this.data.feed.apply(this,a)},load:function(a,c){var e=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(e);this.data.url||(this.data.url=a)},loadNext:function(a,c,e,g,h){this._settings.datathrottle&&!h?(this._throttle_request&&window.clearTimeout(this._throttle_request),
this._throttle_request=dhx.delay(function(){this.loadNext(a,c,e,g,!0)},this,0,this._settings.datathrottle)):(c||0===c||(c=this.dataCount()),this.data.url=this.data.url||g,this.callEvent("onDataRequest",[c,a,e,g])&&this.data.url&&this.data.feed.call(this,c,a,e))},_maybe_loading_already:function(a,c){var e=this._feed_last;return this._load_count&&e&&e[0]<=c&&e[1]+e[0]>=a+c?!0:!1},_onLoad:function(a,c,e){this._ajax_queue.remove(e);var g=this.data.driver.toObject(a,c);if(g)this.data._parse(g);else return this._onLoadError(a,
c,e);this._call_onready();this.callEvent("onXLE",[])},removeMissed_setter:function(a){return this.data._removeMissed=a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhx.bind(function(a,e){if(this._settings.dataFeed){var g={};if(a||e){if("function"==typeof a){if(!e)return;a(e,g)}else g={text:e};this.clearAll();var h=this._settings.dataFeed,l=[];if("function"==typeof h)return h.call(this,e,g);for(var m in g)l.push("dhx_filter["+m+
"]="+encodeURIComponent(g[m]));this.load(h+(0>h.indexOf("?")?"?":"&")+l.join("&"),this._settings.datatype);return!1}}},this));return a},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var a=dhx.toFunctor(this._settings.ready);a&&dhx.delay(a,this,arguments);this._ready_was_used=!0}},_call_onclearall:function(){for(var a=0;a<this._ajax_queue.length;a++)this._ajax_queue[a].abort();this._ajax_queue=dhx.toArray()},_call_on_config:function(a){this._parseSeetingColl(a)}},
dhx.AtomDataLoader);dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("json");this.pull={};this.order=dhx.toArray();this._marks={}};
dhx.DataStore.prototype={setDriver:function(a){dhx.assert(dhx.DataDriver[a],"incorrect DataDriver");this.driver=dhx.DataDriver[a]},_parse:function(a,c){this.callEvent("onParse",[this.driver,a]);this._filter_order&&this.filter();var e=this.driver.getInfo(a);e._key&&(dhx.securityKey=e._key);e._config&&this.callEvent("onServerConfig",[e._config]);var g=this.driver.getRecords(a);this._inner_parse(e,g);this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group);this._scheme_sort&&
(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent());this.callEvent("onStoreLoad",[this.driver,a]);this.refresh()},_inner_parse:function(a,c){var e=1*(a._from||0),g=!0,h=!1;if(0===e&&this.order[0]){if(this._removeMissed)for(var h={},l=0;l<this.order.length;l++)h[this.order[l]]=!0;g=!1;e=this.order.length}for(var m=0,l=0;l<c.length;l++){var n=this.driver.getDetails(c[l]),r=this.id(n);this.pull[r]?g&&this.order[m+e]&&m++:(this.order[m+e]=r,m++);this.pull[r]?(dhx.extend(this.pull[r],
n,!0),this._scheme_update&&this._scheme_update(this.pull[r]),h&&delete h[r]):(this.pull[r]=n,this._scheme_init&&this._scheme_init(n))}if(h){this.blockEvent();for(var u in h)this.remove(u);this.unblockEvent()}this.order[a._size-1]||(this.order[a._size-1]=dhx.undefined)},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(a,c){this.pull[a]&&(this.pull[c]=this.pull[a]);this.pull[c].id=c;this.order[this.order.find(a)]=c;this._filter_order&&(this._filter_order[this._filter_order.find(a)]=c);
this._marks[a]&&(this._marks[c]=this._marks[a],delete this._marks[a]);this.callEvent("onIdChange",[a,c]);this._render_change_id&&this._render_change_id(a,c);delete this.pull[a]},item:function(a){return this.pull[a]},update:function(a,c){dhx.isUndefined(c)&&(c=this.item(a));this._scheme_update&&this._scheme_update(c);if(!1===this.callEvent("onBeforeUpdate",[a,c]))return!1;this.pull[a]=c;this.callEvent("onStoreUpdated",[a,c,"update"])},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",
[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,c){this._skip_refresh=!0;a.call(c||this);this._skip_refresh=!1},getRange:function(a,c){a=a?this.indexById(a):this.$min||this.startOffset||0;c?c=this.indexById(c):(c=Math.min(this.$max||this.endOffset||Infinity,this.dataCount()-1),0>c&&(c=0));if(a>c){var e=c;c=a;a=e}return this.getIndexRange(a,c)},getIndexRange:function(a,c){c=Math.min(c||Infinity,this.dataCount()-1);for(var e=dhx.toArray(),g=a||0;g<=c;g++)e.push(this.item(this.order[g]));
return e},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,c){dhx.assert(0<=a&&0<=c,"DataStore::move","Incorrect indexes");var e=this.idByIndex(a),g=this.item(e);this.order.removeAt(a);this.order.insertAt(e,Math.min(this.order.length,c));this.callEvent("onStoreUpdated",[e,g,"move"])},scheme:function(a){this._scheme={};this._scheme_init=a.$init;this._scheme_update=a.$update;this._scheme_serialize=a.$serialize;this._scheme_group=a.$group;this._scheme_sort=
a.$sort;for(var c in a)"$"!=c.substr(0,1)&&(this._scheme[c]=a[c])},sync:function(a,c,e){"string"==typeof a&&(a=$$("source"));"function"!=typeof c&&(e=c,c=null);dhx.debug_bind&&(this.debug_sync_master=a,dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));this._backbone_source=!1;"DataStore"!=a.name&&(a.data&&"DataStore"==a.data.name?a=a.data:this._backbone_source=!0);var g=dhx.bind(function(g,
l,m){if(this._backbone_source){if(!g)return;if(0===g.indexOf("change")){"change"==g&&(this.pull[l.id]=l.attributes,this.refresh(l.id));return}"reset"==g&&(m=l);this.order=[];this.pull={};this._filter_order=null;for(g=0;g<m.models.length;g++)l=m.models[g].id,this.order.push(l),this.pull[l]=m.models[g].attributes}else this._filter_order=null,this.order=dhx.toArray([].concat(a.order)),this.pull=a.pull;c&&this.silent(c);this._on_sync&&this._on_sync();dhx.debug_bind&&dhx.log("[sync:request] "+this.debug_sync_master.name+
"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);this.callEvent("onSyncApply",[]);e?e=!1:this.refresh()},this);this._backbone_source?a.bind("all",g):this._sync_events=[a.attachEvent("onStoreUpdated",g),a.attachEvent("onIdChange",dhx.bind(function(a,c){this.changeId(a,c)},this))];g()},add:function(a,c,e){if(this._scheme)for(var g in this._scheme)dhx.isUndefined(a[g])&&(a[g]=this._scheme[g]);this._scheme_init&&this._scheme_init(a);g=
this.id(a);e=e||this.order;var h=e.length;if(dhx.isUndefined(c)||0>c)c=h;c>h&&(dhx.log("Warning","DataStore:add","Index of out of bounds"),c=Math.min(e.length,c));if(!1===this.callEvent("onBeforeAdd",[g,a,c]))return!1;dhx.assert(!this.exists(g),"Not unique ID");this.pull[g]=a;e.insertAt(g,c);this._filter_order&&(e=this._filter_order.length,!c&&this.order.length&&(e=0),this._filter_order.insertAt(g,e));this.callEvent("onAfterAdd",[g,c]);this.callEvent("onStoreUpdated",[g,a,"add"]);return g},remove:function(a){if(dhx.isArray(a))for(var c=
0;c<a.length;c++)this.remove(a[c]);else{if(!1===this.callEvent("onBeforeDelete",[a]))return!1;dhx.assert(this.exists(a),"Not existing ID in remove command"+a);c=this.item(a);this.order.remove(a);this._filter_order&&this._filter_order.remove(a);delete this.pull[a];this._marks[a]&&delete this._marks[a];this.callEvent("onAfterDelete",[a]);this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={};this.order=dhx.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",
[]);this.refresh()},idByIndex:function(a){(a>=this.order.length||0>a)&&dhx.log("Warning","DataStore::idByIndex Incorrect index");return this.order[a]},indexById:function(a){var c=this.order.find(a);this.pull[a]||dhx.log("Warning","DataStore::indexById Non-existing ID: "+a);return c},next:function(a,c){return this.order[this.indexById(a)+(c||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,c){return this.order[this.indexById(a)-
(c||1)]},sort:function(a,c,e){var g=a;"function"==typeof a?g={as:a,dir:c}:"string"==typeof a&&(g={by:a.replace(/#/g,""),dir:c,as:e});a=[g.by,g.dir,g.as];this.callEvent("onBeforeSort",a)&&(this._sort_core(g),this.refresh(),this.callEvent("onAfterSort",a))},_sort_core:function(a){if(this.order.length){a=this._sort._create(a);var c=this.getRange(this.first(),this.last());c.sort(a);this.order=c.map(function(a){dhx.assert(a,"Client sorting can't be used with dynamic loading");return this.id(a)},this)}},
_filter_reset:function(a){this._filter_order&&!a&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(a,c,e){for(var g=dhx.toArray(),h=0;h<this.order.length;h++){var l=this.order[h];a(this.item(l),c)&&g.push(l)}e&&this._filter_order||(this._filter_order=this.order);this.order=g},filter:function(a,c,e){if(this.callEvent("onBeforeFilter",[a,c])&&(this._filter_reset(e),this.order.length)){if(a){var g=a;c=c||"";"string"==typeof a&&(a=a.replace(/#/g,""),"function"==typeof c?
g=function(e){return c(e[a])}:(c=c.toString().toLowerCase(),g=function(c,e){dhx.assert(c,"Client side filtering can't be used with dynamic loading");return-1!=(c[a]||"").toString().toLowerCase().indexOf(e)}));this._filter_core(g,c,e,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(a,c){for(var e=0;e<this.order.length;e++)a.call(c||this,this.item(this.order[e]))},_methodPush:function(a,c){return function(){return a[c].apply(a,arguments)}},addMark:function(a,c,e,g){var h=
this._marks[a]||{};this._marks[a]=h;h[c]||(h[c]=g||!0,e&&(this.item(a).$css=(this.item(a).$css||"")+" "+c,this.refresh(a)));return h[c]},removeMark:function(a,c,e){var g=this._marks[a];g&&g[c]&&delete g[c];e&&(e=this.item(a).$css)&&(this.item(a).$css=e.replace(c,""),this.refresh(a))},hasMark:function(a,c){var e=this._marks[a];return e&&e[c]},provideApi:function(a,c){this.debug_bind_master=a;c&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,
onbeforeupdate:a});for(var e="sort add remove exists idByIndex indexById item update refresh dataCount filter next previous clearAll first last serialize sync addMark removeMark hasMark".split(" "),g=0;g<e.length;g++)a[e[g]]=this._methodPush(this,e[g])},serialize:function(){for(var a=this.order,c=[],e=0;e<a.length;e++){var g=this.pull[a[e]];if(this._scheme_serialize&&(g=this._scheme_serialize(g),!1===g))continue;c.push(g)}return c},_sort:{_create:function(a){return this._dir(a.dir,this._by(a.by,a.as))},
_as:{date:function(a,c){a-=0;c-=0;return a>c?1:a<c?-1:0},"int":function(a,c){a*=1;c*=1;return a>c?1:a<c?-1:0},string_strict:function(a,c){a=a.toString();c=c.toString();return a>c?1:a<c?-1:0},string:function(a,c){if(!c)return 1;if(!a)return-1;a=a.toString().toLowerCase();c=c.toString().toLowerCase();return a>c?1:a<c?-1:0}},_by:function(a,c){if(!a)return c;"function"!=typeof c&&(c=this._as[c||"string"]);dhx.assert(c,"Invalid sorting method");return function(e,g){return c(e[a],g[a])}},_dir:function(a,
c){return"asc"!=a&&a?function(a,g){return-1*c(a,g)}:c}}};
dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(a,c,e){"string"==typeof a&&(a=dhx.ui.get(a));a._initBindSource&&a._initBindSource();this._initBindSource&&this._initBindSource();a.getBindData||dhx.extend(a,dhx.BindSource);if(!this._bind_ready){var g=this.render;if(this.filter){var h=this._settings.id;this.data._on_sync=function(){a._bind_updated[h]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var a=this.callEvent("onBindRequest");this._in_bind_processing=
!1;return g.apply(this,!1===a?arguments:[])}};if(this.getValue||this.getValues)this.save=function(){this.validate&&!this.validate()||a.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)};this._bind_ready=!0}a.addBind(this._settings.id,c,e);dhx.debug_bind&&dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+a.name+"@"+a._settings.id);var l=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return a.getBindData(l)});!this._settings.dataFeed&&
this.loadNext&&this.data.attachEvent("onStoreLoad",function(){a._bind_updated[l]=!1});this.isVisible(this._settings.id)&&this.refresh()},unbind:function(a){return this._unbind(a)},_unbind:function(a){a.removeBind(this._settings.id);var c=this._sync_events||(this.data?this.data._sync_events:0);if(c&&a.data)for(var e=0;e<c.length;e++)a.data.detachEvent(c[e])}};
dhx.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(a){this._do_not_update_binds=!0;a.call(this);this._do_not_update_binds=!1;this._update_binds()},setBindData:function(a,c){c&&(this._ignore_binds[c]=!0);dhx.debug_bind&&dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+c);if(this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var e=this.getCursor();e&&(a=dhx.extend(this.item(e),
a,!0),this.update(e,a))}this.callEvent("onBindUpdate",[a,c]);this.save&&this.save();c&&(this._ignore_binds[c]=!1)},getBindData:function(a,c){if(this._bind_updated[a])return!1;var e=dhx.ui.get(a);e.isVisible(e._settings.id)&&(this._bind_updated[a]=!0,dhx.debug_bind&&dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+e.name+"@"+e._settings.id),this._bind_update(e,this._bind_hash[a][0],this._bind_hash[a][1]),c&&e.filter&&e.refresh())},addBind:function(a,c,e){this._bind_hash[a]=[c,e]},removeBind:function(a){delete this._bind_hash[a];
delete this._bind_updated[a];delete this._ignore_binds[a]},_bind_specific_rules:function(a){a.filter?dhx.extend(this,dhx.CollectionBind):a.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var a in this._bind_hash)this._ignore_binds[a]||(this._bind_updated[a]=!1,this.getBindData(a,!0))},_bind_update_common:function(a,c,e){a.setValue?a.setValue(e?e[c]:e):a.filter?a.data.silent(function(){this.filter(c,e)}):!e&&a.clear?
a.clear():a._check_data_feed(e)&&a.setValues(dhx.clone(e));a.callEvent("onBindApply",[e,c,this])}};dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(a){a=(this.data=a)&&a.id?a.id:dhx.uid();this._settings={id:a};dhx.ui.views[a]=this},setValue:function(a){this.data=a;this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(a){this.data=a||{};a=a&&a.id?a.id:dhx.uid();this._settings={id:a};dhx.ui.views[a]=this},getValues:function(){return this.data},setValues:function(a){this.data=a;this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings);
dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1},$init:function(a){this.data.provideApi(this,!0);a=a&&a.id?a.id:dhx.uid();this._settings.id=a;dhx.ui.views[a]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings);
dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,c,e){var g=this.getValue()||"";e&&(g=e(g));a.setValue?a.setValue(g):a.filter?a.data.silent(function(){this.filter(c,g)}):(e={},e[c]=g,a._check_data_feed(g)&&a.setValues(e));a.callEvent("onBindApply",[g,c,this])}};dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,c){var e=this.getValues()||null;this._bind_update_common(a,c,e)}};
dhx.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(a){a=this.getSelected();this.setCursor(a?a.id||a:null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",dhx.bind(function(a,c,e){a&&a==this.getCursor()&&"paint"!=e&&this._update_binds()},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(a,c){this._cursor==a&&(this._cursor=
c)},this))},setCursor:function(a){a==this._cursor||null!==a&&!this.item(a)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this._cursor},_bind_update:function(a,c){var e=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(a,c,e)}};dhx.ui||(dhx.ui={});dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(a){return a._settings?a:dhx.ui.views[a]});
dhtmlXDataStore=function(a){a=new dhx.DataCollection(a);a._dp_init=function(a){a._methods=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(e,g,h){e&&!a._silent&&a.setUpdated(e,!0,this._old_names[h])});a._getRowData=function(a,c){var h=this.obj.data.item(a),l={id:a};l[this.action_param]=this.obj.getUserData(a);if(h)for(var m in h)l[m]=h[m];return l};this.changeId=function(e,g){this.data.changeId(e,
g);a._silent=!0;this.data.callEvent("onStoreUpdated",[g,this.item(g),"update"]);a._silent=!1};a._clearUpdateFlag=function(){};this._userdata={}};a.dummy=function(){};a.setUserData=function(a,e,g){this._userdata[a]=g};a.getUserData=function(a,e){return this._userdata[a]};a.dataFeed=function(a){this.define("dataFeed",a)};dhx.extend(a,dhx.BindSource);return a};
window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1};this._settings=this._settings||this._settings;this._settings.id||(this._settings.id=dhx.uid());this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this});
window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filtered_state||this._settings.dataFeed?!0:!1};this._settings=this._settings||this._settings;this._settings.id||(this._settings.id=dhx.uid());this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this});dhx.BaseBind.unsync=function(a){return dhx.BaseBind._unbind.call(this,a)};
dhx.BaseBind.unbind=function(a){return dhx.BaseBind._unbind.call(this,a)};dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};
dhx.BaseBind.legacySync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();this.attachEvent("onAfterEditStop",function(a){this.save(a);return!0});this.attachEvent("onDataRequest",function(c,g){for(var h=c;h<c+g;h++)if(!a.data.order[h])return a.loadNext(g,c),!1});this.save=function(c){c||(c=this.getCursor());var g=this.item(c),h=a.item(c),l;for(l in g)0!==l.indexOf("$")&&(h[l]=g[l]);a.refresh(c)};return a&&"DataCollection"==a.name?a.data.sync.apply(this.data,
arguments):this.data.sync.apply(this.data,arguments)};
window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(a){dhx.BaseBind.bind.apply(this,arguments);a.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXForm.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var c=
this._settings.dataFeed;if("function"==typeof c)return c.call(this,a.id||a,a);c=c+(-1==c.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a);this.load(c);return!1},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(a){return!0});
window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(a){a.sync=function(c,e){this._initBindSource&&this._initBindSource();c._initBindSource&&c._initBindSource();var g=function(g){a.clearAll();g=c.data.order;for(var l=c.data.pull,m=[],n=0;n<g.length;n++)m[n]=e&&e.copy?dhx.clone(l[g[n]]):l[g[n]];a._process_loading(m);a.callEvent("onSyncApply",[])};this.save=function(a){a||(a=this.getCursor());var e=this.item(a),g=c.item(a);this.callEvent("onStoreSave",[a,e,g])&&
(dhx.extend(c.item(a),e,!0),c.update(a))};this.item=function(a){return this.getEvent(a)};this._sync_events=[c.data.attachEvent("onStoreUpdated",function(a,c,e){g.call(this)}),c.data.attachEvent("onIdChange",function(a,c){combo.changeOptionId(a,c)})];this.attachEvent("onEventChanged",function(a){this.save(a)});this.attachEvent("onEventAdded",function(a,e){c.data.pull[a]||c.add(e)});this.attachEvent("onEventDeleted",function(a){c.data.pull[a]&&c.remove(a)});g()};a.unsync=function(a){dhx.BaseBind._unbind.call(this,
a)};a._initBindSource=function(){this._settings||(this._settings={id:dhx.uid()})}},Scheduler.$syncFactory(window.scheduler));
window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXCombo.unsync=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXCombo.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXCombo.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var e=this,g=function(a){e.clearAll();e.addOption(this.serialize());
e.callEvent("onSyncApply",[])};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,c,e){g.call(this)}),a.data.attachEvent("onIdChange",function(a,c){e.changeOptionId(a,c)})];g.call(a)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",
[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(a){return this.getOption(a)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return this.optionsArr.length||this._settings.dataFeed?!0:!1},dhtmlXCombo.prototype.refresh=function(){this.render(!0)});
window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(a,c,e){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXGridObject.prototype.unsync=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXGridObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXGridObject.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();
var e=this;this.save=function(c){c||(c=this.getCursor());dhx.extend(a.item(c),this.item(c),!0);a.update(c)};var g=function(a){a=e.getCursor?e.getCursor():null;var c=0;e._legacy_ignore_next?(c=e._legacy_ignore_next,e._legacy_ignore_next=!1):e.clearAll();var g=this.dataCount();if(g){e._parsing=!0;for(var n=c;n<g;n++){var r=this.order[n];!r||c&&e.rowsBuffer[n]||(e.rowsBuffer[n]={idd:r,data:this.pull[r]},e.rowsBuffer[n]._parser=e._process_store_row,e.rowsBuffer[n]._locator=e._get_store_data,e.rowsAr[r]=
this.pull[r])}e.rowsBuffer[g-1]||(e.rowsBuffer[g-1]=dhtmlx.undefined,e.xmlFileUrl=e.xmlFileUrl||this.url);e.pagingOn?e.changePage():e._srnd&&e._fillers?e._update_srnd_view():(e.render_dataset(),e.callEvent("onXLE",[]));e._parsing=!1}a&&e.setCursor&&e.setCursor(e.rowsAr[a]?a:null);e.callEvent("onSyncApply",[])};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,c,m){"delete"==m?(e.deleteRow(a),e.data.callEvent("onStoreUpdated",[a,c,m])):"update"==m?(e.callEvent("onSyncUpdate",[c,m]),
e.update(a,c),e.data.callEvent("onStoreUpdated",[a,c,m])):"add"==m?(e.callEvent("onSyncUpdate",[c,m]),e.add(a,c,this.indexById(a)),e.data.callEvent("onStoreUpdated",[a,c,m])):g.call(this)}),a.data.attachEvent("onStoreLoad",function(c,g){e.xmlFileUrl=a.data.url;e._legacy_ignore_next=c.getInfo(g)._from}),a.data.attachEvent("onIdChange",function(a,c){e.changeRowId(a,c)})];e.attachEvent("onDynXLS",function(c,l){for(var m=c;m<c+l;m++)if(!a.data.order[m])return a.loadNext(l,c),!1;e._legacy_ignore_next=
c;g.call(a.data)});g.call(a.data);e.attachEvent("onEditCell",function(a,c,e,g,r){2==a&&g!=r&&this.save(c);return!0});e.attachEvent("onClearAll",function(){this._f_rowsBuffer=null});c&&c.sort&&e.attachEvent("onBeforeSorting",function(c,g,m){if("connector"==g)return!1;var n=this.getColumnId(c);a.sort("#"+n+"#","asc"==m?"asc":"desc","int"==g?g:"string");e.setSortImgState(!0,c,m);return!1});c&&c.filter&&(e.attachEvent("onFilterStart",function(c,g){if(e._con_f_used&&e._con_f_used.length)return!1;a.data.silent(function(){a.filter();
for(var m=0;m<c.length;m++)if(""!=g[m]){var n=e.getColumnId(c[m]);a.filter("#"+n+"#",g[m],0!=m)}});a.refresh();return!1}),e.collectValues=function(c){c=this.getColumnId(c);return function(a){var c=[],e={};this.data.each(function(g){g=g[a];e[g]||(e[g]=!0,c.push(g))});c.sort();return c}.call(a,c)});c&&c.select&&e.attachEvent("onRowSelect",function(c){a.setCursor(c)});e.clearAndLoad=function(c){a.clearAll();a.load(c)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings=
{id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(a){a.call(this)},this)};dhx4._eventable(this.data);for(var a=0;a<this._cCount;a++)this.columnIds[a]||(this.columnIds[a]="cell"+a);this.attachEvent("onSelectStateChanged",function(a){this.callEvent("onSelectChange",[a])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(a,e){2===a&&this.getCursor&&e&&e==this.getCursor()&&
this._update_binds();return!0});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(a){if(null===a)return null;var c=this.getRowById(a);if(!c)return null;c=dhx.copy(c._attrs);c.id=a;for(var e=this.getColumnsNum(),g=0;g<e;g++)c[this.columnIds[g]]=this.cells(a,g).getValue();return c},dhtmlXGridObject.prototype.update=function(a,c){for(var e=0;e<this.columnIds.length;e++){var g=this.columnIds[e];dhx.isUndefined(c[g])||this.cells(a,e).setValue(c[g])}e=
this.getRowById(a)._attrs;for(g in c)e[g]=c[g];this.callEvent("onBindUpdate",[a])},dhtmlXGridObject.prototype.add=function(a,c,e){for(var g=[],h=0;h<this.columnIds.length;h++){var l=this.columnIds[h];g[h]=dhx.isUndefined(c[l])?"":c[l]}this.addRow(a,g,e);this.getRowById(a)._attrs=dhx.copy(c)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return this.rowsBuffer.length||this._f_rowsBuffer||this._settings.dataFeed?!0:
!1},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(a,c){if(this._settings.dataFeed){var e={};if(!a&&!c)return;if("function"==typeof a){if(!c)return;a(c,e)}else dhx.isUndefined(a)?e=c:e[a]=c;this.clearAll();var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,c,e);var h=[],l;for(l in e)h.push("dhx_filter["+l+"]="+encodeURIComponent(e[l]));this.load(g+(0>g.indexOf("?")?"?":"&")+h.join("&"));return!1}if(null===c)return this.filterBy(0,
function(){return!1});this.filterBy(0,function(e,g){return a.call(this,g,c)})});
window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXTreeObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},
this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onEdit",function(a,c){2===a&&c&&c==this.getCursor()&&this._update_binds();return!0}))},dhtmlXTreeObject.prototype.item=function(a){return null===a?null:{id:a,text:this.getItemText(a)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},
dhtmlXTreeObject.prototype.filter=function(a,c){if(this._settings.dataFeed){var e={};if(a||c){if("function"==typeof a){if(!c)return;a(c,e)}else dhx.isUndefined(a)?e=c:e[a]=c;this.deleteChildItems(0);var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,[data.id||data,data]);var h=[],l;for(l in e)h.push("dhx_filter["+l+"]="+encodeURIComponent(e[l]));this.loadXML(g+(0>g.indexOf("?")?"?":"&")+h.join("&"));return!1}}},dhtmlXTreeObject.prototype.update=function(a,c){dhx.isUndefined(c.text)||
this.setItemText(a,c.text)});
function dataProcessor(a){this.serverProcessor=a;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=!0;this.updateMode="cell";this._tMode="GET";this._payload=this._headers=null;this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",
error:"color:red;",clear:"font-weight:normal;text-decoration:none;"};this.enableUTFencoding(!0);dhx4._eventable(this);this.connector_init&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true");return this}
dataProcessor.prototype={setTransactionMode:function(a,c){"object"==typeof a?(this._tMode=a.mode||this._tMode,this._headers=this._headers||a.headers,this._payload=this._payload||a.payload):(this._tMode=a,this._tSend=c);"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0)},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=dhx4.s2b(a)},setDataColumns:function(a){this._columns="string"==typeof a?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},
enableDataNames:function(a){this._endnm=dhx4.s2b(a)},enablePartialDataSend:function(a){this._changed=dhx4.s2b(a)},setUpdateMode:function(a,c){this.autoUpdate="cell"==a;this.updateMode=a;this.dnd=c},ignore:function(a,c){this._silent_mode=!0;a.call(c||window);this._silent_mode=!1},setUpdated:function(a,c,e){if(!this._silent_mode){var g=this.findRow(a);e=e||"updated";var h=this.obj.getUserData(a,this.action_param);h&&"updated"==e&&(e=h);c?(this.set_invalid(a,!1),this.updatedRows[g]=a,this.obj.setUserData(a,
this.action_param,e),this._in_progress[a]&&(this._in_progress[a]="wait")):this.is_invalid(a)||(this.updatedRows.splice(g,1),this.obj.setUserData(a,this.action_param,""));c||this._clearUpdateFlag(a);this.markRow(a,c,e);c&&this.autoUpdate&&this.sendData(a)}},_clearUpdateFlag:function(a){},markRow:function(a,c,e){var g="",h=this.is_invalid(a);h&&(g=this.styles[h],c=!0);if(this.callEvent("onRowMark",[a,c,e,h])&&(g=this.styles[c?e:"clear"]+g,this.obj[this._methods[0]](a,g),h&&h.details))for(g+=this.styles[h+
"_cell"],c=0;c<h.details.length;c++)if(h.details[c])this.obj[this._methods[1]](a,c,g)},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(a,c,e){e&&(c={value:c,details:e,toString:function(){return this.value.toString()}});this._invalid[a]=c},checkBeforeUpdate:function(a){return!0},sendData:function(a){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){this.obj.editStop&&this.obj.editStop();if("undefined"==
typeof a||this._tSend)return this.sendAllData();if(this._in_progress[a])return!1;this.messages=[];if("deleted"!==this.getState(a)&&!this.checkBeforeUpdate(a)&&this.callEvent("onValidationError",[a,this.messages]))return!1;this._beforeSendData(this._getRowData(a),a)}},_beforeSendData:function(a,c){if(!this.callEvent("onBeforeUpdate",[c,this.getState(c),a]))return!1;this._sendData(a,c)},serialize:function(a,c){if("string"==typeof a)return a;if("undefined"!=typeof c)return this.serialize_one(a,"");var e=
[],g=[],h;for(h in a)a.hasOwnProperty(h)&&(e.push(this.serialize_one(a[h],h+this.post_delim)),g.push(h));e.push("ids="+this.escape(g.join(",")));dhtmlx.security_key&&e.push("dhx_security="+dhtmlx.security_key);return e.join("&")},serialize_one:function(a,c){if("string"==typeof a)return a;var e=[],g;for(g in a)a.hasOwnProperty(g)&&("id"!=g&&g!=this.action_param||"REST"!=this._tMode)&&e.push(this.escape((c||"")+g)+"="+this.escape(a[g]));return e.join("&")},_sendData:function(a,c){if(a){if(!this.callEvent("onBeforeDataSending",
c?[c,this.getState(c),a]:[null,null,a]))return!1;c&&(this._in_progress[c]=(new Date).valueOf());var e=this,g=function(g){var h=[];if(c)h.push(c);else if(a)for(var l in a)h.push(l);return e.afterUpdate(e,g,h)},h=this.serverProcessor+(this._user?dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");if("GET"==this._tMode)dhx4.ajax.get(h+(-1!=h.indexOf("?")?"&":"?")+this.serialize(a,c),g);else if("POST"==this._tMode)dhx4.ajax.post(h,this.serialize(a,
c),g);else if("REST"==this._tMode){var l=this.getState(c),h=h.replace(/(\&|\?)editing\=true/,""),m=h.split("?");m[1]&&(m[1]="?"+m[1]);var n="",r="post";"inserted"==l?n=this.serialize(a,c):("deleted"==l?r="DELETE":(r="PUT",n=this.serialize(a,c)),h=m[0]+c+(m[1]||""));if(this._payload)for(var u in this._payload)h=h+(-1===h.indexOf("?")?"?":"&")+this.escape(u)+"="+this.escape(this._payload[u]);dhx4.ajax.query({url:h,method:r,headers:this._headers,data:n,callback:g})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=
[];for(var a=!0,c=0;c<this.updatedRows.length;c++)"deleted"!==this.getState(this.updatedRows[c])&&(a&=this.checkBeforeUpdate(this.updatedRows[c]));if(!a&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(c=0;c<this.updatedRows.length&&(this._in_progress[this.updatedRows[c]]||this.is_invalid(this.updatedRows[c])||(this._beforeSendData(this._getRowData(this.updatedRows[c]),this.updatedRows[c]),!this._waitMode||"tree"!=this.obj.mytype&&
!this.obj._h2));c++);}},_getAllData:function(a){a={};for(var c=!1,e=0;e<this.updatedRows.length;e++){var g=this.updatedRows[e];this._in_progress[g]||this.is_invalid(g)||!this.callEvent("onBeforeUpdate",[g,this.getState(g),this._getRowData(g)])||(a[g]=this._getRowData(g,g+this.post_delim),c=!0,this._in_progress[g]=(new Date).valueOf())}return c?a:null},setVerificator:function(a,c){this.mandatoryFields[a]=c||function(a){return""!==a}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(a){for(var c=
0,c=0;c<this.updatedRows.length&&a!=this.updatedRows[c];c++);return c},defineAction:function(a,c){this._uActions||(this._uActions=[]);this._uActions[a]=c},afterUpdateCallback:function(a,c,e,g){var h=a,l="error"!=e&&"invalid"!=e;l||this.set_invalid(a,e);if(this._uActions&&this._uActions[e]&&!this._uActions[e](g))return delete this._in_progress[h];"wait"!=this._in_progress[h]&&this.setUpdated(a,!1);var m=a;switch(e){case "inserted":case "insert":c!=a&&(this.obj[this._methods[2]](a,c),a=c);break;case "delete":case "deleted":return this.obj.setUserData(a,
this.action_param,"true_deleted"),this.obj[this._methods[3]](a),delete this._in_progress[h],this.callEvent("onAfterUpdate",[a,e,c,g])}"wait"!=this._in_progress[h]?(l&&this.obj.setUserData(a,this.action_param,""),delete this._in_progress[h]):(delete this._in_progress[h],this.setUpdated(c,!0,this.obj.getUserData(a,this.action_param)));this.callEvent("onAfterUpdate",[m,e,c,g])},afterUpdate:function(a,c,e){if(window.JSON)try{var g=JSON.parse(c.xmlDoc.responseText),h=g.action||this.getState(e)||"updated",
l=g.sid||e[0],m=g.tid||e[0];a.afterUpdateCallback(l,m,h,g);a.finalizeUpdate();return}catch(n){}h=dhx4.ajax.xmltop("data",c.xmlDoc);if(!h||"DIV"==h.tagName)return this.cleanUpdate(e);c=dhx4.ajax.xpath("//data/action",h);if(!c.length)return this.cleanUpdate(e);for(e=0;e<c.length;e++)g=c[e],h=g.getAttribute("type"),l=g.getAttribute("sid"),m=g.getAttribute("tid"),a.afterUpdateCallback(l,m,h,g);a.finalizeUpdate()},cleanUpdate:function(a){if(a)for(var c=0;c<a.length;c++)delete this._in_progress[a[c]]},
finalizeUpdate:function(){this._waitMode&&this._waitMode--;("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData();this.callEvent("onAfterUpdateFinish",[]);this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(a){this.obj=a;a._dp_init&&a._dp_init(this);this.connector_init&&(a._dataprocessor=this)},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(a){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",
a)},setAutoUpdate:function(a,c){a=a||2E3;this._user=c||(new Date).valueOf();this._update_busy=this._need_update=!1;this.attachEvent("onAfterUpdate",function(a,c,e,m){this.afterAutoUpdate(a,c,e,m)});this.attachEvent("onFullSync",function(){this.fullSync()});var e=this;window.setInterval(function(){e.loadUpdate()},a)},afterAutoUpdate:function(a,c,e,g){return"collision"==c?(this._need_update=!0,!1):!0},fullSync:function(){1==this._need_update&&(this._need_update=!1,this.loadUpdate());return!0},getUpdates:function(a,
c){if(this._update_busy)return!1;this._update_busy=!0;dhx4.ajax.get(a,c)},_v:function(a){return a.firstChild?a.firstChild.nodeValue:""},_a:function(a){for(var c=[],e=0;e<a.length;e++)c[e]=this._v(a[e]);return c},loadUpdate:function(){var a=this,c=this.obj.getUserData(0,"version"),c=this.serverProcessor+dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+c].join("&"),c=c.replace("editing=true&","");this.getUpdates(c,function(c){c=dhx4.ajax.xmltop("updates",c.xmlDoc);var g=dhx4.ajax.xpath("//userdata",
c);a.obj.setUserData(0,"version",a._v(g[0]));c=dhx4.ajax.xpath("//update",c);if(c.length){a._silent_mode=!0;for(g=0;g<c.length;g++){var h=c[g].getAttribute("status"),l=c[g].getAttribute("id"),m=c[g].getAttribute("parent");switch(h){case "inserted":a.callEvent("insertCallback",[c[g],l,m]);break;case "updated":a.callEvent("updateCallback",[c[g],l,m]);break;case "deleted":a.callEvent("deleteCallback",[c[g],l,m])}}a._silent_mode=!1}a._update_busy=!1;a=null})}};
window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.connector_init=!0);
function dhtmlXVaultObject(a){var c=this;this.conf={version:"2.3",skin:a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxvault")||"dhx_skyblue",param_name:"undefined"!=typeof a.paramName?a.paramName:"file",engine:null,list:"list_default",url:a.uploadUrl||"",multiple_files:"undefined"!=typeof a.multiple?1==a.multiple:!0,swf_file:a.swfPath||"",swf_url:a.swfUrl||"",swf_logs:a.swfLogs||"no",sl_xap:a.slXap,sl_url:a.slUrl,sl_logs:a.slLogs,enabled:!0,auto_start:"undefined"!=
typeof a.autoStart?1==a.autoStart:!0,auto_remove:"undefined"!=typeof a.autoRemove?1==a.autoRemove:!1,files_added:0,uploaded_count:0,files_limit:"undefined"!=typeof a.filesLimit?a.filesLimit:0,max_file_size:0,buttons:{upload:"undefined"!=typeof a.buttonUpload?1==a.buttonUpload:!1,clear:"undefined"!=typeof a.buttonClear?1==a.buttonClear:!0},ofs:{dhx_skyblue:5,dhx_web:7,dhx_terrace:10,bootstrap:10},uploaded_state:{},uploaded_files:{},progress_mode:"percent",icon_def:"",icons:{}};this.list=new this[this.conf.list];
this.conf.icon_def=this.icon_def;for(var e in this.icons)for(var g=0;g<this.icons[e].length;g++)this.conf.icons[this.icons[e][g]]=e;"string"==typeof a.mode&&"function"==typeof this[a.mode]?this.conf.engine=a.mode:(this.conf.engine="html4",g=null,"undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&(g=new XMLHttpRequest,"undefined"==typeof g.upload&&(g=null)),null!=g?this.conf.engine="html5":"undefined"!=typeof window.swfobject||!1===g?(g=swfobject.getFlashPlayerVersion(),
10<=g.major&&(this.conf.engine="flash")):(this.conf.sl_v=this.getSLVersion(),this.conf.sl_v&&(this.conf.engine="sl")),g=null);g="undefined"!=typeof a.parent?a.parent:a.container;g="string"==typeof g?document.getElementById(g):g;a.parent=a.container=null;1==g._attach_mode?this.base=g:(this.base=document.createElement("DIV"),g.appendChild(this.base));this.base.className+=" dhx_vault_"+this.conf.skin;1==g._no_border&&(this.base.style.border="0px solid white");g=a=null;this.p_controls=document.createElement("DIV");
this.p_controls.className="dhx_vault_controls";this.base.appendChild(this.p_controls);this.p_controls.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.p_files=document.createElement("DIV");this.p_files.className="dhx_vault_files";this.base.appendChild(this.p_files);this._doOnFilesClick=function(a){a=a||event;a=a.target||a.srcElement;for(var e=null;a!=c.p_files&&null==e;)null==e&&null!=a&&null!=a._action?e=a._action:a=a.parentNode;null!=e&&("delete_file"==
e.data?c.conf.enabled&&c._removeFileFromQueue(e.id):"show_file"==e.data&&(c.conf.wnd&&c.conf.wnd.progressOn(),$p.ajax.get_and_show_blob(c.actionUrl(e.id,"get"),"",function(){c.conf.wnd&&c.conf.wnd.progressOff()})))};"function"==typeof window.addEventListener?this.p_files.addEventListener("click",this._doOnFilesClick,!1):this.p_files.attachEvent("onclick",this._doOnFilesClick);this.file_data={};this._initToolbar=function(){this.b_opts={browse:{str:"btnAdd",onclick:null},upload:{str:"btnUpload",onclick:function(){c.conf.enabled&&
(c.conf.uploading||c._uploadStart())}},cancel:{str:"btnCancel",onclick:function(){c.conf.enabled&&(c._uploadStop(),c._switchButton(!1))}},clear:{str:"btnClean",onclick:function(){c.conf.enabled&&c.clear()},css:"float:right!important;"}};this.buttons={};for(var a in this.b_opts){var e=document.createElement("DIV");e.innerHTML="<div class='dhxvault_button_icon dhx_vault_icon_"+a+"'></div><div class='dhxvault_button_text'>"+this.strings[this.b_opts[a].str]+"</div>";null!=this.b_opts[a].css&&(e.style.cssText+=
this.b_opts[a].css);e.className="dhx_vault_button";e._css=e.className;e._onclick=this.b_opts[a].onclick;e.onmouseover=function(){1==c.conf.enabled&&1!=this._hover&&(this._hover=!0,this.className=this._css+" dhx_vault_button"+this._css_p+"_hover")};e.onmouseout=function(){1==c.conf.enabled&&1==this._hover&&(this._hover=!1,this.className=this._css)};e.onmousedown=function(){1==c.conf.enabled&&1==this._hover&&(this._pressed=!0,this.className=this._css+" dhx_vault_button"+this._css_p+"_pressed")};e.onmouseup=
function(a){1==c.conf.enabled&&1==this._pressed&&(this._pressed=!1,this.className=this._css+(this._hover?" dhx_vault_button"+this._css_p+"_hover":""),null!=this._onclick&&this._onclick())};this.b_opts[a].tooltip&&(e.title=this.b_opts[a].tooltip);this.p_controls.appendChild(e);this.buttons[a]=e;e=null;if("upload"==a||"clear"==a)this.buttons[a].style.display=1==this.conf.buttons[a]?"":"none";this.b_opts[a].onclick=null;this.b_opts[a]=null;delete this.b_opts[a]}this.b_opts=null;delete this.b_opts;this.buttons.cancel.style.display=
"none"};this._readableSize=function(a){for(var c=!1,e="b Kb Mb Gb Tb Pb Eb".split(" "),g=0;g<e.length;g++)1024<a?a/=1024:!1===c&&(c=g);!1===c&&(c=e.length-1);return Math.round(100*a)/100+" "+e[c]};this._beforeAddFileToList=function(a,c,e){return!0===this.callEvent("onBeforeFileAdd",[{id:null,name:a,size:c,lastModifiedDate:e,serverName:null,uploaded:!1,error:!1}])};this._addFileToList=function(a,c,e,g,r){var u=this.getFileExtension(c),u=0<u.length?this.conf.icons[u.toLowerCase()]||this.conf.icon_def:
this.conf.icon_def;this.list.addFileItem(a,this.p_files);this.list.renderFileRecord(a,{name:c,icon:u,size:e,readableSize:this._readableSize(e||0),state:g,progress:r});this.callEvent("onFileAdd",[{id:a,name:c,size:e,lastModifiedDate:this.file_data[a].file.lastModifiedDate||null,serverName:null,uploaded:!1,error:!1}])};this._removeFileFromList=function(a){this.list.removeFileRecord(a);null!=this.conf.uploaded_files[a]&&(this.conf.uploaded_files[a]=null,delete this.conf.uploaded_files[a]);null!=this.conf.uploaded_state[a]&&
(this.conf.uploaded_state[a]=null,delete this.conf.uploaded_state[a])};this._updateFileInList=function(a,c,e){0!=this.list.isFileItemExist(a)&&("uploading"==c&&"eta"==this.conf.progress_mode&&null!=this._etaStart&&this._etaStart(a),this._updateProgress(a,c,e))};this._updateProgress=function(a,e,g){if("added"==e)this.list.updateFileState(a,{state:e}),"eta"==this.conf.progress_mode&&null!=this._etaEnd&&this._etaEnd(a);else if("fail"==e)this.list.updateFileState(a,{state:e,str_error:this.strings.error}),
"eta"==this.conf.progress_mode&&null!=this._etaEnd&&this._etaEnd(a);else if("uploaded"==e){"eta"==this.conf.progress_mode&&null!=this._etaEnd&&this._etaEnd(a);var n=this.strings.done,r="html4"!=this.conf.engine?null:{name:this.file_data[a].name,size:this.file_data[a].size,readableSize:this._readableSize(this.file_data[a].size||0)};window.setTimeout(function(){c.list.updateFileState(a,{state:"uploaded",str_done:n});null!=r&&c.list.updateFileNameSize(a,r)},100)}else"uploading"==e&&(100>g&&"loader"==
this.conf.progress_type||1==this.file_data[a].custom?this.list.updateFileState(a,{state:"uploading_html4"}):"eta"==this.conf.progress_mode?(e=null!=this._etaCheck?this._etaCheck(a,g):null,this.list.updateFileState(a,{state:"uploading",progress:g,eta:null==e?null:"eta: "+e})):"percent"==this.conf.progress_mode&&this.list.updateFileState(a,{state:"uploading",progress:g,eta:g+"%"}))};this._removeFilesByState=function(a){for(var c in this.file_data)!0!==a&&this.file_data[c].state!=a||this._removeFileFromQueue(c)};
this._switchButton=function(a){if(1==a)1==this.conf.buttons.upload&&(this.buttons.upload.style.display="none",this.buttons.cancel.style.display="");else{a=this.conf.uploaded_count;var c=[],e;for(e in this.conf.uploaded_state)c.push({id:e,name:this._fileName,size:null!=this.file_data[e]?this.file_data[e].size:null,lastModifiedDate:null!=this.file_data[e]?this.file_data[e].file.lastModifiedDate||null:null,serverName:this.conf.uploaded_files[e]?this.conf.uploaded_files[e].serverName:null,uploaded:this.conf.uploaded_state[e],
error:!this.conf.uploaded_state[e]});1==this.conf.buttons.upload&&(this.buttons.upload.style.display="",this.buttons.cancel.style.display="none");this.conf.uploaded_count=0;this.conf.uploaded_state={};0<a&&this.callEvent("onUploadComplete",[c])}};this._uploadStart=function(){this._switchButton(!0);if(!this.conf.uploading)for(var a in this.file_data)"fail"==this.file_data[a].state&&(this.file_data[a].state="added",this._updateFileInList(a,"added",0));this.conf.uploading=!0;var c=!1;for(a in this.file_data)c||
"added"!=[this.file_data[a].state]||(c=!0,this.file_data[a].state="uploading",this._updateFileInList(a,"uploading",0),this._doUploadFile(a));c||(this.conf.uploading=!1,this._switchButton(!1))};this._onUploadSuccess=function(a,c,e,g){if("undefined"!=typeof e&&"flash"==this.conf.engine){try{eval("dhx4.temp="+e.data)}catch(r){dhx4.temp=null}e=dhx4.temp;dhx4.temp=null;if(null!=e&&1==e.state&&null!=e.name)c=e.name,null!=e.extra&&(g=e.extra);else{this._onUploadFail(a,null!=e&&null!=e.extra?e.extra:null);
return}}this.conf.uploaded_count++;this.conf.uploaded_files[a]={realName:this.file_data[a].name,serverName:c};this.file_data[a].state="uploaded";this.conf.uploaded_state[a]=!0;this._updateFileInList(a,"uploaded",100);this.callEvent("onUploadFile",[{id:a,name:this.file_data[a].name,size:this.file_data[a].size,lastModifiedDate:this.file_data[a].file.lastModifiedDate||null,serverName:c,uploaded:!0,error:!1},g]);this.conf.auto_remove&&this._removeFileFromQueue(a);this.conf.uploading&&this._uploadStart()};
this._onUploadFail=function(a,c){this.file_data[a].state="fail";this._updateFileInList(a,"fail",0);this.conf.uploaded_state[a]=!1;this.callEvent("onUploadFail",[{id:a,name:this.file_data[a].name,size:this.file_data[a].size,lastModifiedDate:this.file_data[a].file.lastModifiedDate||null,serverName:null,uploaded:!1,error:!0},c]);this.conf.uploading&&this._uploadStart()};this._onUploadAbort=function(a){this.conf.uploading=!1;this.file_data[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",
[{id:a,name:this.file_data[a].name,size:this.file_data[a].size,lastModifiedDate:this.file_data[a].file.lastModifiedDate,serverName:null,uploaded:!1,error:!1}])};this.unload=function(){this.callEvent=function(){return!0};"function"==typeof window.addEventListener?this.p_files.removeEventListener("click",this._doOnFilesClick,!1):this.p_files.detachEvent("onclick",this._doOnFilesClick);this._removeFilesByState(!0);this.file_data=this.conf.uploaded_files=null;this._unloadEngine();this.list.unload();this.icons=
this.list=null;for(var a in this.buttons)this.buttons[a].onclick=null,this.buttons[a].onmouseover=null,this.buttons[a].onmouseout=null,this.buttons[a].onmousedown=null,this.buttons[a].onmouseup=null,this.buttons[a]._onclick=null,this.buttons[a].parentNode.removeChild(this.buttons[a]),this.buttons[a]=null,delete this.buttons[a];this.buttons=null;this.p_controls.onselectstart=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_controls=null;this.p_files.parentNode.removeChild(this.p_files);
this.p_files=null;window.dhx4._eventable(this,"clear");this.callEvent=null;for(a in this.conf)this.conf[a]=null,delete this.conf[a];this.strings=this.conf=null;for(a in this)"function"==typeof this[a]&&(this[a]=null);1!=this.base._attach_mode&&this.base.parentNode.removeChild(this.base);c=a=this.base=null};a=new this[this.conf.engine];for(e in a)this[e]=a[e],a[e]=null;e=a=p=null;this._initToolbar();this._initEngine();this.setSkin(this.conf.skin);window.dhx4._eventable(this);this.attachEvent("onFileAdd",
function(){this.conf.files_added++});this.attachEvent("onBeforeFileAdd",function(){return 0==this.conf.files_limit?!0:this.conf.files_added<this.conf.files_limit});this.actionUrl=function(a,c){var e=this.file_data[a].name,g=this.getFileExtension(e),r=this.conf.url+(0>this.conf.url.indexOf("?")?"?":"&")+"mode="+c+"&name=",e=e.replace("."+g,"");return r+(e+"&extension="+g)};$p.ajax.post_ex(this.conf.url+(0>this.conf.url.indexOf("?")?"?":"&")+"mode=conf","",!0).then(function(a){return JSON.parse(a.responseText)}).then(function(a){if(c&&
a&&(null!=a.maxFileSize&&(c.conf.max_file_size=parseInt(a.maxFileSize)),a.hasOwnProperty("list")))for(var e in a.list)c.file_data[a.list[e].ref]={file:{lastModifiedDate:new Date(a.list[e].lastModifiedDate)},size:a.list[e].size,name:a.list[e].name,state:"uploaded"},c._addFileToList(a.list[e].ref,a.list[e].name,a.list[e].size)}).catch(function(a){console.log(a)});return this}dhtmlXVaultObject.prototype.icon_def="icon_def";
dhtmlXVaultObject.prototype.icons={icon_image:"jpg jpeg gif png bmp tiff pcx svg ico".split(" "),icon_psd:["psd"],icon_video:"avi mpg mpeg rm move mov mkv flv f4v mp4 3gp".split(" "),icon_audio:"wav aiff au mp3 aac wma ogg flac ape wv m4a mid midi".split(" "),icon_arch:"rar zip tar tgz arj gzip bzip2 7z ace apk deb".split(" "),icon_text:["txt","nfo","djvu","xml"],icon_html:["htm","html"],icon_doc:["doc","docx","rtf","odt"],icon_xls:["xls","xlsx"],icon_pdf:["pdf","ps"],icon_exe:["exe"],icon_dmg:["dmg"]};
dhtmlXVaultObject.prototype.upload=function(){this.conf.uploading||this._uploadStart()};dhtmlXVaultObject.prototype.setAutoStart=function(a){this.conf.auto_start=1==a};dhtmlXVaultObject.prototype.setAutoRemove=function(a){this.conf.auto_remove=1==a};dhtmlXVaultObject.prototype.setURL=function(a){this.conf.url=a};
dhtmlXVaultObject.prototype.enable=function(){1!=this.conf.enabled&&(this.conf.enabled=!0,this.base.className=String(this.base.className).replace(/\s{0,}dhx_vault_dis/gi,""),"flash"==this.conf.engine&&(document.getElementById(this.conf.swf_obj_id).style.display=""))};dhtmlXVaultObject.prototype.disable=function(){1==this.conf.enabled&&(this.conf.enabled=!1,this.base.className+=" dhx_vault_dis","flash"==this.conf.engine&&(document.getElementById(this.conf.swf_obj_id).style.display="none"))};
dhtmlXVaultObject.prototype.setWidth=function(a){1!=this.base._attach_mode&&(this.base.parentNode.style.width=a+"px",this.setSizes())};dhtmlXVaultObject.prototype.setHeight=function(a){1!=this.base._attach_mode&&(this.base.parentNode.style.height=a+"px",this.setSizes())};dhtmlXVaultObject.prototype.setFilesLimit=function(a){this.conf.files_added=0;this.conf.files_limit=a};
dhtmlXVaultObject.prototype.getStatus=function(){var a=0,c;for(c in this.file_data){if("uploaded"!=this.file_data[c].state)return-1;a=1}return a};dhtmlXVaultObject.prototype.getData=function(){var a=[],c;for(c in this.conf.uploaded_files)a.push({id:c,name:this.file_data[c].name,size:this.file_data[c].size,serverName:this.conf.uploaded_files[c].serverName,uploaded:!0,error:!1});return a};
dhtmlXVaultObject.prototype.clear=function(){!0===this.callEvent("onBeforeClear",[])&&(this.conf.uploading&&this._uploadStop(),this._switchButton(!1),this._removeFilesByState(!0),this.callEvent("onClear",[]))};
dhtmlXVaultObject.prototype.setSkin=function(a){a!=this.conf.skin&&(this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhx_vault_"+this.conf.skin)," dhx_vault_"+a),this.conf.skin=a);this._updateBttonsSkin();var c=this.conf.ofs[this.conf.skin];this.buttons.browse.style.marginLeft=c+"px";this.buttons.upload.style.marginLeft="dhx_terrace"==a?"-1px":c+"px";this.buttons.cancel.style.marginLeft=this.buttons.upload.style.marginLeft;this.buttons.clear.style.marginRight=c+"px";c="";"dhx_terrace"==
a&&(c=1==this.conf.buttons.upload?"0px":"3px");this.buttons.browse.style.borderTopRightRadius=c;this.buttons.browse.style.borderBottomRightRadius=c;this.buttons.upload.style.borderTopLeftRadius=c;this.buttons.upload.style.borderBottomLeftRadius=c;this.buttons.cancel.style.borderTopLeftRadius=this.buttons.upload.style.borderTopLeftRadius;this.buttons.cancel.style.borderBottomLeftRadius=this.buttons.upload.style.borderBottomLeftRadius;this.setSizes()};
dhtmlXVaultObject.prototype._updateBttonsSkin=function(){for(var a in this.buttons){var c="dhx_vault_button",e="";null!=this.buttonCss&&null!=this.buttonCss[this.conf.skin]&&null!=this.buttonCss[this.conf.skin][a]&&(e=this.buttonCss[this.conf.skin][a],c+=e);this.buttons[a]._css=this.buttons[a].className=c;this.buttons[a]._css_p=e}};
dhtmlXVaultObject.prototype.setSizes=function(){var a=this.base.offsetHeight-this.base.clientHeight;this.base.style.width=Math.max(0,this.base.parentNode.clientWidth-(this.base.offsetWidth-(this.base.clientWidth||this.base.scrollWidth)))+"px";this.base.style.height=Math.max(0,this.base.parentNode.clientHeight-a)+"px";a=this.conf.ofs[this.conf.skin];this.p_files.style.top=this.p_controls.offsetHeight+"px";this.p_files.style.left=a+"px";this.conf.ofs_f||(this.p_files.style.width="100px",this.p_files.style.height=
"100px",this.conf.ofs_f={w:this.p_files.offsetWidth-this.p_files.clientWidth,h:this.p_files.offsetHeight-this.p_files.clientHeight});this.p_files.style.width=Math.max(this.base.clientWidth-2*a-this.conf.ofs_f.w,0)+"px";this.p_files.style.height=Math.max(this.base.clientHeight-this.p_controls.offsetHeight-a-this.conf.ofs_f.h,0)+"px";"function"==typeof this.callEvent&&this.callEvent("_onSetSizes",[])};
dhtmlXVaultObject.prototype.getFileExtension=function(a){var c="";a=String(a).match(/\.([^\.\s]*)$/i);null!=a&&(c=a[1]);return c};dhtmlXVaultObject.prototype.strings={done:"Готово",error:"Ошибка",btnAdd:"Добавить файлы",btnUpload:"Загрузить",btnClean:"Очистить",btnCancel:"Отмена"};
dhtmlXVaultObject.prototype.setStrings=function(a){for(var c in a)this.strings[c]=a[c];for(c in this.file_data)a=this.file_data[c].state,"uploaded"!=a&&"fail"!=a||this.list.updateFileState(c,{state:a,str_error:this.strings.error,str_done:this.strings.done});a={browse:"btnAdd",upload:"btnUpload",clear:"btnClean",cancel:"btnCancel"};for(c in a)this.buttons[c].childNodes[1].innerHTML=this.strings[a[c]]};dhtmlXVaultObject.prototype.getMaxFileSize=function(){return this.conf.max_file_size};
dhtmlXVaultObject.prototype.html5=function(){};
dhtmlXVaultObject.prototype.html5.prototype={_initEngine:function(){var a=this;this.buttons.browse.onclick=function(){a.conf.enabled&&a.f.click()};this.conf.progress_type="percentage";this.conf.dnd_enabled=!0;var c=window.navigator.userAgent;null!=c.match(/Windows/gi)&&null!=c.match(/AppleWebKit/gi)&&null!=c.match(/Safari/gi)&&(c.match(/Version\/5\.1\.5/gi)&&(this.conf.multiple_files=!1),c.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this.conf.dnd_enabled=!1),c.match(/Version\/5\.1\.1/gi)&&(this.conf.multiple_files=
!1,this.conf.dnd_enabled=!1),c.match(/Version\/5\.1\.2/gi)&&(this.conf.dnd_enabled=!1),c.match(/Version\/5\.1\.7/gi)&&(this.conf.multiple_files=!1));this._addFileInput();this.conf.dnd_enabled&&null!=this._initDND&&this._initDND()},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var a=this;this.f=document.createElement("INPUT");this.f.type="file";this.conf.multiple_files&&(this.f.multiple="1");this.f.className="dhx_vault_input";this.p_controls.appendChild(this.f);
this.f.onchange=function(){a._parseFilesInInput(this.files);window.dhx4.isOpera?a._addFileInput():this.value=""}},_doUploadFile:function(a){if(1==this.file_data[a].custom)this._cfUploadStart(a);else{var c=this;this.loader||(this.loader=new XMLHttpRequest,this.loader.upload.onprogress=function(a){"uploading"==c.file_data[this._idd].state&&c._updateFileInList(this._idd,"uploading",Math.round(100*a.loaded/a.total))},this.loader.onload=function(a){try{eval("dhx4.temp="+this.responseText)}catch(g){}a=
dhx4.temp;dhx4.temp=null;null!=a&&"object"==typeof a&&"undefined"!=typeof a.state&&1==a.state?c._onUploadSuccess(this.upload._idd,a.name,null,a.extra):c._onUploadFail(this.upload._idd,null!=a&&null!=a.extra?a.extra:null)},this.loader.onerror=function(a){c._onUploadFail(this.upload._idd)},this.loader.onabort=function(a){c._onUploadAbort(this.upload._idd)});this.loader.upload._idd=a;this.loader.open("POST",this.conf.url+(0>this.conf.url.indexOf("?")?"?":"&")+"name="+this.file_data[a].name,!0,$p.ajax.username,
$p.ajax.password);this.loader.withCredentials=!0;this.loader.setRequestHeader("Authorization","Basic "+btoa(unescape(encodeURIComponent($p.ajax.username+":"+$p.ajax.password))));this.loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this.loader.send(this.file_data[a].file)}},_uploadStop:function(){this.conf.uploading&&(null!=this.cf_loader_id?this._cfUploadStop():null!=this.loader&&this.loader.abort())},_parseFilesInInput:function(a){for(var c=0;c<a.length;c++)this._addFileToQueue(a[c])},
_addFileToQueue:function(a){if(this._beforeAddFileToList(a.name,a.size,a.lastModifiedDate)){var c=a._idd||window.dhx4.newId();this.file_data[c]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(c,a.name,a.size,"added",0);this.conf.auto_start&&!this.conf.uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(a){if(this.file_data[a]){var c={id:a,name:this.file_data[a].name,size:this.file_data[a].size,serverName:null!=this.conf.uploaded_files&&null!=this.conf.uploaded_files[a]?
this.conf.uploaded_files[a].serverName:null,uploaded:"uploaded"==this.file_data[a].state,error:"fail"==this.file_data[a].state};if(!0===this.callEvent("onBeforeFileRemove",[c])){var e=!1;if(null!=this.cf_loader_id||this.conf.uploading&&null!=this.loader&&a==this.loader.upload._idd&&"uploading"==this.file_data[a].state)this._uploadStop(),e=!0;this.file_data[a].file=null;this.file_data[a].name=null;this.file_data[a].size=null;this.file_data[a].state=null;this.file_data[a]=null;delete this.file_data[a];
this._removeFileFromList(a);this.callEvent("onFileRemove",[c]);e&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.conf.dnd_enabled&&null!=this._unloadDND&&this._unloadDND();this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.loader&&(this.loader.upload.onprogress=null,this.loader.onload=null,this.loader.onerror=null,this.loader.onabort=null,this.loader=this.loader.upload._idd=null);this._unloadEngine=this._removeFileFromQueue=this._addFileToQueue=
this._parseFilesInInput=this._uploadStop=this._doUploadFile=this._initEngine=null}};
dhtmlXVaultObject.prototype.list_default=function(){this.t={};this.addFileItem=function(a,c){var e=document.createElement("DIV");e._idd=a;c.appendChild(e);this.t[a]=e};this.isFileItemExist=function(a){return null!=this.t[a]};this.renderFileRecord=function(a,c){var e=this.t[a];null!=!e&&(e.className="dhx_vault_file dhx_vault_file_"+c.state,e.innerHTML="<div class='dhx_vault_file_param dhx_vault_file_name'>&nbsp;</div><div class='dhx_vault_file_param dhx_vault_file_progress'>&nbsp;</div><div class='dhx_vault_file_param dhx_vault_file_delete'>&nbsp;</div><div class='dhx_vault_file_icon dhx_vault_"+c.icon+
"'><div class='dhx_vault_all_icons'></div></div>",e.childNodes[2]._action={id:a,data:"delete_file"},e._action={id:a,data:"show_file"},this.updateFileNameSize(a,c))};this.removeFileRecord=function(a){var c=this.t[a];null!=c&&(c._idd=null,c.childNodes[2]._action=null,c.parentNode.removeChild(c),this.t[a]=null,delete this.t[a])};this.updateFileNameSize=function(a,c){var e=this.t[a];null!=e&&(e.childNodes[0].innerHTML="<div class='dhx_vault_file_name_text'>"+c.name+(isNaN(c.size)||!1===c.size?"&nbsp;":
" ("+c.readableSize+")")+"</div>",e.childNodes[0].title=c.name+(isNaN(c.size)||!1===c.size?"":" ("+c.readableSize+")"))};this.updateFileState=function(a,c){var e=this.t[a];if(null!=e){var g=!1;null!=this.updateFileStateExtra&&(g=this.updateFileStateExtra(a,c));g||("added"==c.state&&(e.className="dhx_vault_file dhx_vault_file_added",e.childNodes[1].className="dhx_vault_file_param dhx_vault_file_progress",e.childNodes[1].innerHTML="&nbsp;"),"fail"==c.state&&(e.className="dhx_vault_file dhx_vault_file_fail",
e.childNodes[1].className="dhx_vault_file_param dhx_vault_file_progress",e.childNodes[1].innerHTML=c.str_error),"uploaded"==c.state&&(e.className="dhx_vault_file dhx_vault_file_uploaded",e.childNodes[1].className="dhx_vault_file_param dhx_vault_file_progress",e.childNodes[1].innerHTML=c.str_done),"uploading_html4"!=c.state&&"uploading"!=c.state)||(e.className="dhx_vault_file dhx_vault_file_uploading",e.childNodes[1].className="dhx_vault_file_param dhx_vault_file_uploading",e.childNodes[1].innerHTML=
"<div class='dhx_vault_progress'><div class='dhx_vault_progress_loader'>&nbsp;</div></div>")}};this.updateStrings=function(){};this.unload=function(){this.t=null}};
"undefined"!=typeof window.dhtmlXCellObject&&"undefined"==typeof dhtmlXCellObject.prototype.attachVault&&(dhtmlXCellObject.prototype.attachVault=function(a){var c=document.createElement("DIV");c.style.position="relative";c.style.width="100%";c.style.height="100%";c.style.overflow="hidden";this._attachObject(c);c._attach_mode=!0;c._no_border=!0;"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(c._no_border=!1);if("object"!=typeof a||null==a)a={};a.parent=c;"undefined"==
typeof a.skin&&(a.skin=this.conf.skin);this.dataType="vault";this.dataObj=new dhtmlXVaultObject(a);"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&this.layout._getMainInst().attachEvent("onExpand",function(a){for(var c=0;c<a.length;c++){var h=this.cells(a[c]);"vault"==h.dataType&&null!=h.dataObj&&h.dataObj.setSizes()}});a=c=a.parent=null;return this.dataObj});dhtmlXVaultObject.prototype.buttonCss={bootstrap:{browse:"_browse",upload:"_upload",cancel:"_cancel",clear:"_clear"}};
"undefined"!=typeof window.dhtmlXPopup&&"undefined"==typeof dhtmlXPopup.prototype.attachVault&&(dhtmlXPopup.prototype.attachVault=function(a,c,e){return this._attachNode("vault",{width:a||350,height:c||200,conf:e||{}})},dhtmlXPopup.prototype._attach_init_vault=function(a){a.conf.parent=this._nodeId;document.getElementById(this._nodeId)._no_border=!0;"undefined"==typeof a.conf.skin&&(a.conf.skin=this.conf.skin);this._nodeObj=new dhtmlXVaultObject(a.conf)});
