(function(n){"use strict";function t(t,i,r,u){function o(r){r.requireAuthentication=!1;var e=function(n){u.error(n);i.defer().resolve(n)};return r.serverUrl.indexOf("data:")===0?{promise:i(function(t){var i=r.serverUrl.substr(29),u;i=atob(i);u=n.fromJson(i);t(f(r.data,u))}),cancel:e}:{promise:i(function(n){n(t.retrieveDataAsync(r).promise.then(function(n){return f(r.data,n)}))}),cancel:e}}function e(n){var r={},t,i;for(t in n)if(n.hasOwnProperty(t))for(i in n[t])n[t].hasOwnProperty(i)&&(r[i]=n[t][i].toLocaleLowerCase());return r}function f(t,i){var u={Counter:0,CurrentPage:1,FilteredRecordCount:0,TotalRecordCount:0,Payload:[],TotalPages:0},f,o,s,h,c,l,a;if(i.length===0)return u;f=i;o=t.Columns.filter(function(n){return n.SortOrder>0}).map(function(n){return(n.SortDirection==="Descending"?"-":"")+n.Name});for(s in o)o.hasOwnProperty(s)&&(f=r("orderBy")(f,o[s]));return h=t.Columns.filter(function(n){return n.Filter&&n.Filter.Text}).map(function(n){var t={};return n.Filter.Operator==="Contains"&&(t[n.Name]=n.Filter.Text),t}),h.length>0&&(f=r("filter")(f,e(h))),t.Search&&t.Search.Operator==="Auto"&&t.Search.Text&&(c=t.Columns.filter(function(n){return n.Searchable}).map(function(n){var i={};return i[n.Name]=t.Search.Text,i}),c.length>0&&(f=r("filter")(f,function(t){var r=e(c),i=!1;return n.forEach(r,function(n,r){t[r]&&t[r].toLocaleLowerCase().indexOf(n)>=0&&(i=!0)}),i}))),u.FilteredRecordCount=f.length,u.TotalRecordCount=f.length,u.Payload=f.slice(t.Skip,t.Take+t.Skip),u.TotalPages=(u.FilteredRecordCount+t.Take-1)/t.Take,u.TotalPages>0&&(l=Math.pow(10,0),a=1+t.Skip/u.FilteredRecordCount*u.TotalPages,u.CurrentPage=(a*l|0)/l,u.CurrentPage<1&&(u.CurrentPage=1)),u}return{getByKey:t.getByKey,get:t.get,retrieveDataAsync:o,pageRequest:f}}n.module("tubular.services").factory("tubularLocalData",t).run(["tubularHttp","tubularLocalData",function(n,t){n.registerService("local",t)}]);t.$inject=["tubularHttp","$q","$filter","$log"]})(angular);