/**
 * highcharts-ng
 * @version v1.0.0 - 2017-01-14
 * @link https://github.com/pablojim/highcharts-ng
 * @author Barry Fitzgerald <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
typeof module!="undefined"&&typeof exports!="undefined"&&module.exports===exports&&(module.exports="highcharts-ng"),function(){"use strict";function n(n,r){var o=0,f=this,s={},e={},h=f.changeDetection||angular.equals;this.$onInit=function(){f.config.getChartObj=function(){return f.chart};s=angular.merge({},f.config);e=t(n,f.config,o);f.chart=new Highcharts[u(e)](e)};this.$doCheck=function(){var c,r,u;if(!h(f.config,s)){if(s=angular.merge({},f.config),e=t(n,f.config,o),c=i(e.series,o),e.series){for(r=f.chart.series.length-1;r>=0;r--)u=f.chart.series[r],u.options.id!=="highcharts-navigator-series"&&c.indexOf(u.options.id)<0&&u.remove(!1);angular.forEach(f.config.series,function(n){f.chart.get(n.id)||f.chart.addSeries(n)})}f.chart.update(e,!0)}};this.$onDestroy=function(){if(f.chart){try{f.chart.destroy()}catch(t){}r(function(){n.remove()},0)}}}function t(n,t,r){var u={},f={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{},xAxis:{events:{}},yAxis:{events:{}}};return t?(t.series&&i(t.series,r),u=angular.merge(f,t)):u=f,u.chart.renderTo=n[0],u}function u(n){return n===undefined||n.chartType===undefined?"Chart":r[(""+n.chartType).toLowerCase()]}function i(n,t){var i=[];return angular.forEach(n,function(n){angular.isDefined(n.id)||(n.id="series-"+t++);i.push(n.id)}),i}angular.module("highcharts-ng",[]).component("highchart",{bindings:{config:"<",changeDetection:"<"},controller:n});n.$inject=["$element","$timeout"];var r={stock:"StockChart",map:"Map",chart:"Chart"}}(),function(n){"use strict";n.module("tubular-hchart.directives",["tubular.services","highcharts-ng"]).component("tbHighcharts",{template:'<div class="tubular-chart"><highchart config="$ctrl.options" ng-hide="$ctrl.isEmpty || $ctrl.hasError"><\/highchart><div class="alert alert-info" ng-show="$ctrl.isEmpty">{{$ctrl.emptyMessage}}<\/div><div class="alert alert-warning" ng-show="$ctrl.hasError">{{$ctrl.errorMessage}}<\/div><\/div>',bindings:{serverUrl:"@",title:"@?",requireAuthentication:"=?",name:"@?chartName",chartType:"@?",emptyMessage:"@?",errorMessage:"@?",onLoad:"=?",options:"=?",onClick:"=?"},controller:["$scope","tubularHttp","$timeout",function(t,i,r){var u=this;u.dataService=i.getDataService(u.dataServiceName);u.showLegend=n.isUndefined(u.showLegend)?!0:u.showLegend;u.chartType=u.chartType||"line";u.options=n.extend({},u.options,{options:{chart:{type:u.chartType},plotOptions:{pie:{point:{events:{click:u.onClick||n.noop}}},series:{point:{events:{click:u.onClick||n.noop}}}}},title:{text:u.title||""},xAxis:{categories:[]},yAxis:{},series:[]});u.requireAuthentication=n.isUndefined(u.requireAuthentication)?!0:u.requireAuthentication;u.loadData=function(){i.setRequireAuthentication(u.requireAuthentication);u.hasError=!1;i.get(u.serverUrl).promise.then(function(n){if(!n||!n.Data||n.Data.length===0){if(u.isEmpty=!0,u.options.series=[{data:[]}],u.onLoad)u.onLoad(u.options,{});return}if(u.isEmpty=!1,n.Series)u.options.xAxis.categories=n.Labels,u.options.series=n.Series.map(function(t,i){return{name:t,data:n.Data[i]}});else{var t=n.Labels.map(function(t,i){return{name:t,y:n.Data[i]}});u.options.series=[{name:n.SerieName||"",data:t,showInLegend:(n.SerieName||"")!==""}]}if(u.onLoad){r(function(){u.onLoad(u.options,{},u.options.getHighcharts().series)},100);u.onLoad(u.options,{},null)}},function(n){t.$emit("tbChart_OnConnectionError",n);u.hasError=!0})};t.$watch("$ctrl.serverUrl",function(t){n.isDefined(t)&&t!=null&&t!=""&&u.loadData()});t.$watch("$ctrl.chartType",function(t){n.isDefined(t)&&t!=null&&(u.options.options.chart.type=t)})}]})}(window.angular);