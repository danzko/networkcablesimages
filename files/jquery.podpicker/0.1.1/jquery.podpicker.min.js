/*!
 * Pod Picker (jQuery Plugin) - A Podcast Timeline Generator
 * https://github.com/RoberMac/jQuery-PodPicker
 *
 * Copyright (c) 2015 RoberTu <robertu0717@gmail.com>
 * @license MIT
 * @version v0.1.1
 */
"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=function(e){return"undefined"==typeof e},r=function(e){return e&&(e.jquery&&e.length>0||e.nodeType)},i=function(e){return"string"==typeof e},o=function(e){return"boolean"==typeof e},n=function(e){return e.constructor===Array},a=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},s=function(e){return/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/.test(e)},d={items_param:"Pod Picker: `items` parameter is required",items_type:"Pod Picker: `items` parameter must be an array",items_empty:"Pod Picker: `items` parameter cannot be an empty array",options_audioElem_type:"Pod Picker: `options.audioElem` must be a DOM Element or jQuery Object",options_timelineColor_type:"Pod Picker: `options.timelineColor` must be a string",options_isShowStartTime_type:"Pod Picker: `options.isShowStartTime` must be a boolean",options_timelineColor_type_value:"Pod Picker: `options.timelineColor` must be a hex color",audioFile_format:"Pod Picker: does not support MP3 file format",start_format:'Pod Picker: `start` time string must be "hh:mm:ss", "mm:ss" or "ss" format'},u=function(t){!s(t)&&e.error(d.start_format);var r=t.split(":"),i=r.length;switch(i){case 1:return 1*r[0];case 2:return 60*r[0]+1*r[1];case 3:return 60*r[0]*60+60*r[1]+1*r[2];default:e.error(d.start_format)}};e.fn.createPodPicker=function(s,m){function l(){var t='<div id="pp-timeline"><ul style="color:'+m.timelineColor+'">';e.each(s,function(e,r){var i=u(r.start),o=m.isShowStartTime?r.start+" - "+r.title:r.title;t+='<li class="pp-item"><span>'+o+"</span></li>",f.data("_startTimeSet").push(i)}),t+='</ul><span id="pp-pointer"></span></div>',f.append(t),c()}function c(){e(".pp-item span").click(function(){m.audioElem.play(),m.audioElem.currentTime=f.data("_startTimeSet")[e(this).parent().index()],f.data("_seekingIndex",window.setTimeout(function(){e("#pp-pointer").addClass("seeking")},500))}),e(m.audioElem).bind("timeupdate",function(){{var t=m.audioElem.currentTime,r=f.data("_startTimeSet");r.length}Math.abs(f.data("_preTime")-t)>1?e.each(r,function(e){r[e+1]?t>=r[e]&&t<=r[e+1]?p(e+1):null:t>=r[e]?p(e+1):null}):e.each(r,function(e){t>r[e]-1&&t<=r[e]+1&&f.data("_itemsIndex")!==e+1?p(e+1):null}),f.data("_preTime",t)}).bind("seeking",function(){m.audioElem.pause()}).bind("seeked",function(){window.clearTimeout(f.data("_seekingIndex")),m.audioElem.play(),e("#pp-pointer").removeClass("seeking")})}function p(t){var r=e(".pp-item");f.data("_itemsIndex",t),r.eq(t-1).children().addClass("currentSection"),e.each(r,function(e){e!==t-1?r.eq(e).children().removeClass("currentSection"):null});var i=r.height();e("#pp-pointer").css("top",t*i-i/2-6+"px")}e.fn._PodPicker.isCreated?e.error("Pod Picker already exists"):(e.fn._PodPicker.isCreated=!0,e.fn._PodPicker.selector=this.selector),this.data({_preTime:0,_itemsIndex:0,_seekingIndex:0,_startTimeSet:[]}),t(s)?e.error(d.items_param):n(s)?s.length<=0&&e.error(d.items_empty):e.error(d.items_type),s=s.sort(function(e,t){var e=u(e.start),t=u(t.start);return e>t?1:t>e?-1:0});var m=e.extend({},{audioElem:e("audio").get()[0],timelineColor:"#CECECF",isShowStartTime:!1},m);r(m.audioElem)?m.audioElem=e(m.audioElem).get()[0]:e.error(d.options_audioElem_type),i(m.timelineColor)?a(m.timelineColor)?null:e.error(d.options_timelineColor_type_value):e.error(d.options_timelineColor_type),!o(m.isShowStartTime)&&e.error(d.options_isShowStartTime_type);var f=this,_=setInterval(function(){var t=m.audioElem.currentSrc;t&&(clearInterval(_),t.match(/\.mp3/i)?e.error(d.audioFile_format):l())},10);return this},e.fn.removePodPicker=function(){if(e.fn._PodPicker.selector&&e.fn._PodPicker.selector!==this.selector){var t='Pod Picker: Did you mean `$("'+e.fn._PodPicker.selector+'").removePodPicker()` ?';e.error(t)}else e.fn._PodPicker.selector||e.error("Pod Picker: has not been created");return e("#pp-timeline").remove(),e(".pp-item").unbind(),e("audio").unbind(),e.fn._PodPicker.isCreated=!1,this},e.fn._PodPicker={isCreated:!1,selector:""}});
//# sourceMappingURL=jquery.podpicker.min.js.map