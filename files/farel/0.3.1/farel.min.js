System.registerDynamic("farel/firebase_emitter",["rxjs/Observable"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("rxjs/Observable");!function(a){a[a.ChildAdded=0]="ChildAdded",a[a.ChildChanged=1]="ChildChanged",a[a.ChildMoved=2]="ChildMoved",a[a.ChildRemoved=3]="ChildRemoved",a[a.Value=4]="Value"}(b.FirebaseEventType||(b.FirebaseEventType={}));var g=b.FirebaseEventType,h=function(){function a(a,b){var c=this;this._ref=a;var d=function(a){var d=function(b,d){var e=c._normalizeEventName(d.eventType),f=function(b,c){a.next({eventType:d.eventType,snapshot:b,prevChild:c})},g=function(b){a.error(b)};return d.emitOnce?c._ref.once(e,f,g):c._ref.on(e,f,g),function(){c._ref.off(e,f),b()}};return b.reduce(d.bind(c),function(){})};this._emitter=f.Observable.create(d)}return Object.defineProperty(a.prototype,"emitter",{get:function(){return this._emitter},enumerable:!0,configurable:!0}),a.prototype.ref=function(){return this._ref.ref()},a.prototype.toString=function(){return this._ref.toString()},a.prototype._normalizeEventName=function(a){switch(a){case g.ChildAdded:return"child_added";case g.ChildChanged:return"child_changed";case g.ChildMoved:return"child_moved";case g.ChildRemoved:return"child_removed";case g.Value:return"value"}},a}();return b.FirebaseEmitter=h,d.define=e,c.exports}),System.registerDynamic("farel/farel_ref",["angular2/core","firebase","farel/firebase_emitter","rxjs/add/operator/do","rxjs/add/operator/map","rxjs/add/operator/skipWhile"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},j=a("angular2/core"),k=a("firebase"),l=a("farel/firebase_emitter");a("rxjs/add/operator/do"),a("rxjs/add/operator/map"),a("rxjs/add/operator/skipWhile"),b.FAREL_BASE_URL=new j.OpaqueToken("farelBaseUrl");var m=function(){function a(a){this._ref="string"==typeof a?new k(a):a}return Object.defineProperty(a.prototype,"ref",{get:function(){return this._ref.ref()},enumerable:!0,configurable:!0}),a.prototype.toString=function(){return this._ref.toString()},a.prototype.asObject=function(a,b){return new n(a(this.ref),b)},a.prototype.asArray=function(a,b){return new o(a(this.ref),b)},a=g([j.Injectable(),i(0,j.Inject(b.FAREL_BASE_URL)),h("design:paramtypes",[Object])],a)}();b.Farel=m;var n=function(a){function b(b,c){a.call(this,b),this._serializer=c,this._initEmitter()}return f(b,a),b.prototype.subscribe=function(a,b,c){return this._emitter.subscribe(a,b,c)},b.prototype._initEmitter=function(){var a=this,b=new l.FirebaseEmitter(this._ref,[{eventType:l.FirebaseEventType.Value}]);this._emitter=b.emitter.map(function(b){return a._serialize(b.snapshot)})},b.prototype._serialize=function(a){return new this._serializer(a)},b}(m);b.FarelObject=n;var o=function(a){function b(b,c){a.call(this,b),this._serializer=c,this._list=[],this._initEmitter()}return f(b,a),b.prototype.subscribe=function(a,b,c){return this._emitter.subscribe(a,b,c)},b.prototype._initEmitter=function(){var a=this,b=new l.FirebaseEmitter(this._ref,[{eventType:l.FirebaseEventType.ChildAdded},{eventType:l.FirebaseEventType.ChildChanged},{eventType:l.FirebaseEventType.ChildMoved},{eventType:l.FirebaseEventType.ChildRemoved},{eventType:l.FirebaseEventType.Value,emitOnce:!0}]);this._emitter=b.emitter["do"](function(b){switch(b.eventType){case l.FirebaseEventType.ChildAdded:return a._childAdded(b.snapshot,b.prevChild);case l.FirebaseEventType.ChildChanged:return a._childChanged(b.snapshot);case l.FirebaseEventType.ChildMoved:return a._childMoved(b.snapshot,b.prevChild);case l.FirebaseEventType.ChildRemoved:return a._childRemoved(b.snapshot)}}).skipWhile(function(a){return a.eventType!==l.FirebaseEventType.Value}).map(function(b){return a._list})},b.prototype._serialize=function(a){return new this._serializer(a)},b.prototype._childAdded=function(a,b){var c=this._nextChildIndex(b),d=this._serialize(a);this._list.splice(c,0,d)},b.prototype._childChanged=function(a){var b=this._indexForChild(a.key());b>-1&&(this._list[b]=this._serialize(a))},b.prototype._childMoved=function(a,b){var c=this._indexForChild(a.key());if(c>-1){var d=this._list.splice(c,1)[0],e=this._nextChildIndex(b);this._list.splice(e,0,d)}},b.prototype._childRemoved=function(a){var b=this._indexForChild(a.key());b>-1&&this._list.splice(b,1)},b.prototype._indexForChild=function(a){return this._list.findIndex(function(b){return b.$key===a})},b.prototype._nextChildIndex=function(a){if(!a)return 0;var b=this._indexForChild(a);return-1===b?this._list.length:b+1},b}(m);return b.FarelArray=o,d.define=e,c.exports}),System.registerDynamic("farel/farel_record",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=function(){function a(a){var b=this;this.$snapshot=a;var c=this.$snapshot.val();null===c||"object"!=typeof c||Array.isArray(c)?this.$val=c:Object.keys(c).forEach(function(a){return b[a]=c[a]})}return Object.defineProperty(a.prototype,"$ref",{get:function(){return this.$snapshot.ref()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"$key",{get:function(){return this.$snapshot.key()},enumerable:!0,configurable:!0}),a}();return b.FarelRecord=f,d.define=e,c.exports}),System.registerDynamic("farel/farel",["farel/farel_ref","farel/farel_record"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("farel/farel_ref");b.Farel=f.Farel,b.FarelObject=f.FarelObject,b.FarelArray=f.FarelArray,b.FAREL_BASE_URL=f.FAREL_BASE_URL;var g=a("farel/farel_record");return b.FarelRecord=g.FarelRecord,d.define=e,c.exports});
//# sourceMappingURL=farel.min.js.map