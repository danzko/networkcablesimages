!function(){var t={_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,create:function(t,e,n){var i=Object.create(this);return i._init(t,e,n),i},_init:function(t,e,n){this._bindHandlers(),this._createPanel(t,e),this._createTitleBar(n||"QuickSettings"),this._createContent(),document.body.appendChild(this._panel)},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},_createPanel:function(e,n){this._panel=document.createElement("div"),this._panel.className="msettings_main",this._panel.style.zIndex=++t._topZ,this.setPosition(e||0,n||0),this._controls={}},_createTitleBar:function(t){this._titleBar=document.createElement("div"),this._titleBar.textContent=t,this._titleBar.className="msettings_title_bar",this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle),this._panel.appendChild(this._titleBar)},_createContent:function(){this._content=document.createElement("div"),this._content.className="msettings_content",this._panel.appendChild(this._content)},setPosition:function(t,e){this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px"},setSize:function(t,e){this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px"},setWidth:function(t){this._panel.style.width=t+"px",this._content.style.width=t+"px"},setDraggable:function(t){this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default"},setCollapsible:function(t){this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default"},_startDrag:function(e){this._draggable&&(this._panel.style.zIndex=++t._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=e.clientX,this._startY=e.clientY),e.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),n=parseInt(this._panel.style.top),i=t.clientX,a=t.clientY;this.setPosition(e+i-this._startX,n+a-this._startY),this._startX=i,this._startY=a,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},setGlobalChangeHandler:function(t){this._globalChangeHandler=t},toggleCollapsed:function(){this._collapsed?this.expand():this.collapse()},collapse:function(){this._panel.removeChild(this._content),this._collapsed=!0},expand:function(){this._panel.appendChild(this._content),this._collapsed=!1},hide:function(){this._panel.style.visibility="hidden",this._hidden=!0},show:function(){this._panel.style.visibility="visible",this._panel.style.zIndex=++t._topZ,this._hidden=!1},_createContainer:function(){var t=document.createElement("div");return t.className="msettings_container",t},_createLabel:function(t){var e=document.createElement("div");return e.innerHTML=t,e.className="msettings_label",e},setKey:function(t){this._keyCode=t.toUpperCase().charCodeAt(0),document.body.addEventListener("keyup",this.onKeyUp)},_onKeyUp:function(t){t.keyCode===this._keyCode&&this.toggleVisibility()},toggleVisibility:function(){this._hidden?this.show():this.hide()},bindRange:function(t,e,n,i,a,l){this.addRange(t,e,n,i,a,function(e){l[t]=e})},addRange:function(t,e,n,i,a,l){var o=this._createContainer(),s=document.createElement("input");s.type="range",s.id=t,s.min=e||0,s.max=n||100,s.step=a||1,s.value=i||0,s.className="msettings_range";var r=this._createLabel("<b>"+t+":</b> "+s.value);o.appendChild(r),o.appendChild(s),this._content.appendChild(o),this._controls[t]={container:o,control:s,label:r,callback:l};var c="input";this._isIE()&&(c="change");var d=this._globalChangeHandler;s.addEventListener(c,function(){r.innerHTML="<b>"+t+":</b> "+s.value,l&&l(parseFloat(s.value)),d&&d()})},_isIE:function(){return-1!=navigator.userAgent.indexOf("rv:11")?!0:-1!=navigator.userAgent.indexOf("MSIE")?!0:!1},getRangeValue:function(t){return this._controls[t].control.value},setRangeValue:function(t,e){var n=this._controls[t];n.control.value=e,n.label.innerHTML="<b>"+t+":</b> "+n.control.value,n.callback&&n.callback(parseFloat(n.control.value)),this._globalChangeHandler&&this._globalChangeHandler()},setRangeParameters:function(t,e,n,i){var a=this._controls[t];a.control.min=e,a.control.max=n,a.control.step=i},bindBoolean:function(t,e,n){this.addBoolean(t,e,function(e){n[t]=e})},addBoolean:function(t,e,n){var i=this._createContainer(),a=document.createElement("span");a.className="msettings_checkbox_label",a.textContent=t;var l=document.createElement("input");l.type="checkbox",l.id=t,l.checked=e,l.className="msettings_checkbox",i.appendChild(l),i.appendChild(a),this._content.appendChild(i),this._controls[t]={container:i,control:l,callback:n};var o=this._globalChangeHandler;l.addEventListener("change",function(){n&&n(l.checked),o&&o()}),a.addEventListener("click",function(){l.disabled||(l.checked=!l.checked,n&&n(l.checked),o&&o())})},getBoolean:function(t){return this._controls[t].control.checked},setBoolean:function(t,e){this._controls[t].control.checked=e,this._controls[t].callback&&this._controls[t].callback(e),this._globalChangeHandler&&this._globalChangeHandler()},addButton:function(t,e){var n=this._createContainer(),i=document.createElement("input");i.type="button",i.id=t,i.value=t,i.className="msettings_button",n.appendChild(i),this._content.appendChild(n),this._controls[t]={container:n,control:i};var a=this._globalChangeHandler;i.addEventListener("click",function(){e&&e(i),a&&a()})},bindColor:function(t,e,n){this.addColor(t,e,function(e){n[t]=e})},addColor:function(t,e,n){var i=this._createContainer(),a=this._createLabel("<b>"+t+":</b> "+e),l=document.createElement("input");try{l.type="color"}catch(o){l.type="text"}l.id=t,l.value=e||"#ff0000",l.className="msettings_color",i.appendChild(a),i.appendChild(l),this._content.appendChild(i),this._controls[t]={container:i,control:l,label:a,callback:n};var s=this._globalChangeHandler;l.addEventListener("input",function(){a.innerHTML="<b>"+t+":</b> "+l.value,n&&n(l.value),s&&s()})},getColor:function(t){return this._controls[t].control.value},setColor:function(t,e){var n=this._controls[t];n.control.value=e,n.label.innerHTML="<b>"+t+":</b> "+n.control.value,n.callback&&n.callback(n.control.value),this._globalChangeHandler&&this._globalChangeHandler()},bindText:function(t,e,n){this.addText(t,e,function(e){n[t]=e})},addText:function(t,e,n){var i=this._createContainer(),a=this._createLabel("<b>"+t+"</b>"),l=document.createElement("input");l.type="text",l.id=t,l.value=e||"",l.className="msettings_text_input",i.appendChild(a),i.appendChild(l),this._content.appendChild(i),this._controls[t]={container:i,control:l,label:a,callback:n};var o=this._globalChangeHandler;l.addEventListener("input",function(){n&&n(l.value),o&&o()})},addTextArea:function(t,e,n){var i=this._createContainer(),a=this._createLabel("<b>"+t+"</b>"),l=document.createElement("textarea");l.id=t,l.rows=5,l.value=e||"",l.className="msettings_textarea",i.appendChild(a),i.appendChild(l),this._content.appendChild(i),this._controls[t]={container:i,control:l,label:a,callback:n};var o=this._globalChangeHandler;l.addEventListener("input",function(){n&&n(l.value),o&&o()})},setTextAreaRows:function(t,e){this._controls[t].control.rows=e},getText:function(t){return this._controls[t].control.value},setText:function(t,e){var n=this._controls[t];n.control.value=e,n.callback&&n.callback(e),this._globalChangeHandler&&this._globalChangeHandler()},addInfo:function(t,e){var n=this._createContainer();n.innerHTML=e,this._controls[t]={container:n},this._content.appendChild(n)},bindDropDown:function(t,e,n){this.addDropDown(t,e,function(e){n[t]=e.value})},addDropDown:function(t,e,n){for(var i=this._createContainer(),a=this._createLabel("<b>"+t+"</b>"),l=document.createElement("select"),o=0;o<e.length;o++){var s=document.createElement("option");s.label=e[o],l.add(s)}var r=this._globalChangeHandler;l.addEventListener("change",function(){var t=l.selectedIndex,e=l.options;n&&n({index:t,value:e[t].label}),r&&r()}),l.className="msettings_select",i.appendChild(a),i.appendChild(l),this._content.appendChild(i),this._controls[t]={container:i,control:l,label:a,callback:n}},getDropDownValue:function(t){var e=this._controls[t],n=e.control,i=n.selectedIndex,a=n.options;return{index:i,value:a[i].label}},setDropDownIndex:function(t,e){var n=this._controls[t],i=n.control.options;n.control.selectedIndex=e,n.callback&&n.callback({index:e,value:i[e].label}),this._globalChangeHandler&&this._globalChangeHandler()},getInfo:function(t){return this._controls[t].container.innerHTML},setInfo:function(t,e){this._controls[t].container.innerHTML=e},addImage:function(t,e){var n=this._createContainer(),i=this._createLabel("<b>"+t+"</b>");img=document.createElement("img"),img.className="msettings_image",img.src=e,n.appendChild(i),n.appendChild(img),this._content.appendChild(n),this._controls[t]={container:n,control:img,label:i}},setImageURL:function(t,e){this._controls[t].control.src=e},addProgressBar:function(t,e,n,i){var a=this._createContainer(),l=this._createLabel("");progress=document.createElement("progress"),progress.className="msettings_progress",progress.max=e,progress.value=n,i?l.innerHTML="<b>"+t+":<b> "+n+" / "+e:l.innerHTML="<b>"+t+"<b>",a.appendChild(l),a.appendChild(progress),this._content.appendChild(a),this._controls[t]={container:a,control:progress,showNumbers:i,label:l}},getProgress:function(t){return this._controls[t].control.value},setProgress:function(t,e){var n=this._controls[t].control;n.value=e,this._controls[t].showNumbers?this._controls[t].label.innerHTML="<b>"+t+":<b> "+n.value+" / "+n.max:this._controls[t].label.innerHTML="<b>"+t+"<b>"},addElement:function(t,e){var n=this._createContainer(),i=this._createLabel("<b>"+t+"</b>");n.appendChild(i),n.appendChild(e),this._content.appendChild(n),this._controls[t]={container:n,label:i}},addHTML:function(t,e){var n=document.createElement("div");n.innerHTML=e,this.addElement(t,n)},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null},enableControl:function(t){this._controls[t].control&&(this._controls[t].control.disabled=!1)},disableControl:function(t){this._controls[t].control&&(this._controls[t].control.disabled=!0)}};"function"==typeof define&&define.amd?define(t):window.QuickSettings=t}();