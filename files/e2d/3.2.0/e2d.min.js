!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.e2d=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports={addColorStop:a("./src/addColorStop"),arc:a("./src/arc"),arcTo:a("./src/arcTo"),beginPath:a("./src/beginPath"),bezierCurveTo:a("./src/bezierCurveTo"),Canvas:a("./src/Canvas"),clearRect:a("./src/clearRect"),clip:a("./src/clip"),clipPath:a("./src/clipPath"),closePath:a("./src/closePath"),createClass:a("./src/createClass"),createLinearGradient:a("./src/createLinearGradient"),createRadialGradient:a("./src/createRadialGradient"),createRegularPolygon:a("./src/createRegularPolygon"),drawCanvas:a("./src/drawCanvas"),drawImage:a("./src/drawImage"),ellipse:a("./src/ellipse"),fill:a("./src/fill"),fillArc:a("./src/fillArc"),fillCanvas:a("./src/fillCanvas"),fillImage:a("./src/fillImage"),fillImagePattern:a("./src/fillImagePattern"),fillRect:a("./src/fillRect"),fillStyle:a("./src/fillStyle"),fillText:a("./src/fillText"),globalAlpha:a("./src/globalAlpha"),globalCompositeOperation:a("./src/globalCompositeOperation"),hitRect:a("./src/hitRect"),hitRegion:a("./src/hitRegion"),imageSmoothingEnabled:a("./src/imageSmoothingEnabled"),Img:a("./src/Img"),Instruction:a("./src/Instruction"),lineStyle:a("./src/lineStyle"),lineTo:a("./src/lineTo"),moveTo:a("./src/moveTo"),moveToLineTo:a("./src/moveToLineTo"),path:a("./src/path"),placeHolder:a("./src/placeHolder"),quadraticCurveTo:a("./src/quadraticCurveTo"),rect:a("./src/rect"),Renderer:a("./src/Renderer"),resetTransform:a("./src/resetTransform"),rotate:a("./src/rotate"),scale:a("./src/scale"),setTransform:a("./src/setTransform"),shadowStyle:a("./src/shadowStyle"),stroke:a("./src/stroke"),strokeArc:a("./src/strokeArc"),strokeRect:a("./src/strokeRect"),strokeStyle:a("./src/strokeStyle"),strokeText:a("./src/strokeText"),text:a("./src/text"),textStyle:a("./src/textStyle"),transform:a("./src/transform"),transformPoints:a("./src/transformPoints"),translate:a("./src/translate")}},{"./src/Canvas":10,"./src/Img":11,"./src/Instruction":12,"./src/Renderer":13,"./src/addColorStop":14,"./src/arc":15,"./src/arcTo":16,"./src/beginPath":17,"./src/bezierCurveTo":18,"./src/clearRect":19,"./src/clip":20,"./src/clipPath":21,"./src/closePath":22,"./src/createClass":23,"./src/createLinearGradient":24,"./src/createRadialGradient":25,"./src/createRegularPolygon":26,"./src/drawCanvas":27,"./src/drawImage":28,"./src/ellipse":29,"./src/fill":30,"./src/fillArc":31,"./src/fillCanvas":32,"./src/fillImage":33,"./src/fillImagePattern":34,"./src/fillRect":35,"./src/fillStyle":36,"./src/fillText":37,"./src/globalAlpha":38,"./src/globalCompositeOperation":39,"./src/hitRect":40,"./src/hitRegion":41,"./src/imageSmoothingEnabled":42,"./src/lineStyle":43,"./src/lineTo":44,"./src/moveTo":45,"./src/moveToLineTo":46,"./src/path":47,"./src/placeHolder":48,"./src/quadraticCurveTo":49,"./src/rect":50,"./src/resetTransform":51,"./src/rotate":52,"./src/scale":53,"./src/setTransform":54,"./src/shadowStyle":55,"./src/stroke":56,"./src/strokeArc":57,"./src/strokeRect":58,"./src/strokeStyle":59,"./src/strokeText":60,"./src/text":61,"./src/textStyle":62,"./src/transform":63,"./src/transformPoints":64,"./src/translate":65}],2:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],3:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],4:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:5}],5:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],7:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":6,_process:5,inherits:3}],8:[function(a,b,c){c=b.exports=function(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c=String(a),f=d[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];return f?f:1===c.length?c.charCodeAt(0):void 0};var d=c.code=c.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=c.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};for(f=97;123>f;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;58>f;f++)d[f-48]=f;for(f=1;13>f;f++)d["f"+f]=f+111;for(f=0;10>f;f++)d["numpad "+f]=f+96;var g=c.names=c.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]},{}],9:[function(a,b,c){b.exports=function(a,b){for(var c=a[0],d=a[1],e=!1,f=0,g=b.length-1;f<b.length;g=f++){var h=b[f][0],i=b[f][1],j=b[g][0],k=b[g][1],l=i>d!=k>d&&(j-h)*(d-i)/(k-i)+h>c;l&&(e=!e)}return e}},{}],10:[function(a,b,c){"use strict";function d(b,c){var d=a("./Renderer");return this.renderer=new d(b,c,window.document.createElement("div")),this.fillPattern=null,this.skipPatternCreation=!1,Object.seal(this)}d.prototype.render=function(a){var b,c=[];for(b=0;b<arguments.length;b++)c.push(arguments[b]);return this.renderer.render(c),this.skipPatternCreation||(this.fillPattern=this.renderer.ctx.createPattern(this.renderer.canvas,"no-repeat")),this},d.prototype.style=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return this.renderer.style.apply(this.renderer,a),this},d.prototype.toImage=function(a){return this.renderer.toImage()},d.prototype.resize=function(a,b){return this.renderer.resize(+a,+b),this},Object.defineProperty(d.prototype,"height",{get:function(){return this.renderer.canvas.width},enumerable:!0,configurable:!1}),Object.defineProperty(d.prototype,"width",{get:function(){return this.renderer.canvas.width},enumerable:!0,configurable:!1}),d.create=function(a,b,c){return new d(a,b,c)},Object.seal(d),Object.seal(d.prototype),b.exports=d},{"./Renderer":13}],11:[function(a,b,c){"use strict";function d(){e.EventEmitter.call(this),this.imageElement=null,this.imagePattern=null,this.imagePatternRepeat=null,Object.seal(this)}var e=(a("path"),a("events")),f=a("util");f.inherits(d,e.EventEmitter),Object.defineProperty(d.prototype,"src",{set:function(a){var b=new Image;this.imageElement=b,b.src=a,b.complete?setTimeout(this.imageLoad.bind(this),0):b.onload=this.imageLoad.bind(this)},get:function(){return this.imageElement.src}}),d.prototype.imageLoad=function(){var a=window.document.createElement("canvas").getContext("2d");return this.imagePattern=a.createPattern(this.imageElement,"no-repeat"),this.imagePatternRepeat=a.createPattern(this.imageElement,"repeat"),this.emit("load",this)},Object.defineProperty(d.prototype,"width",{enumerable:!0,get:function(){return this.imageElement.width},set:function(a){this.imageElement.width=a}}),Object.defineProperty(d.prototype,"height",{enumerable:!0,get:function(){return this.imageElement.height},set:function(a){this.imageElement.height=a}}),Object.seal(d),Object.seal(d.prototype),b.exports=d},{events:2,path:4,util:7}],12:[function(a,b,c){"use strict";function d(a,b){this.type=a,this.props=b,Object.seal(this)}Object.seal(d),Object.seal(d.prototype),b.exports=d},{}],13:[function(a,b,c){"use strict";function d(a,b,c,d){e.EventEmitter.call(this),d=d||{},this.transformStack=new Float64Array(6*((d.transformStackCount||500)+1)),this.transformStackIndex=6,this.transformStack.set(j),this.fillStyleStack=[],this.strokeStyleStack=[],this.lineStyleStack=[],this.textStyleStack=[],this.shadowStyleStack=[],this.globalAlphaStack=[],this.imageSmoothingEnabledStack=[],this.globalCompositeOperationStack=[],this.pi2=2*Math.PI,this.isReady=!1,this.mouseState="up",this.mouseData={x:0,y:0,state:this.mouseState,clicked:!1,activeRegions:[]},this.lastMouseEvent=null,this.ranMouseEvent=!1,this.mouseRegions=[],this.activeRegions=[],this.styleQueue=[],this.keyData={},this.touchData={touches:[],ids:[]},this.lastTouchEvent=null,this.ranTouchEvent=!1,this.touchRegions=[],c&&1===c.nodeType?this.parent=c:(this.parent=window.document.createElement("div"),this.parent.style.margin="0 auto",this.parent.style.width=a+"px",this.parent.style.height=b+"px",window.document.body.appendChild(this.parent)),(!a||0>=a)&&(a=window.innerWidth),(!b||0>=b)&&(b=window.innerHeight),this.canvas=window.document.createElement("canvas"),this.canvas.tabIndex=1,this.ctx=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b,this.parent.appendChild(this.canvas),this.hookMouseEvents(),this.hookKeyboardEvents(),this.hookTouchEvents(),this.boundHookRenderFunction=this.hookRender.bind(this),Object.seal(this)}var e=(a("./createLinearGradient"),a("./createRadialGradient"),a("events")),f=a("util"),g=a("keycode"),h=a("./transformPoints"),i=a("point-in-polygon"),j=[1,0,0,1,0,0],k=a("./Img");f.inherits(d,e.EventEmitter),d.prototype.render=function(a){var b,c,d,e,f,g,i,j,l=[1,0,0,1,0,0],m=this.ctx,n=[],o=n.concat;for(this.fillStyleStack.splice(0,this.fillStyleStack.length),this.strokeStyleStack.splice(0,this.strokeStyleStack.length),this.lineStyleStack.splice(0,this.lineStyleStack.length),this.textStyleStack.splice(0,this.textStyleStack.length),this.shadowStyleStack.splice(0,this.shadowStyleStack.length),this.globalCompositeOperationStack.splice(0,this.globalCompositeOperationStack.length),this.globalAlphaStack.splice(0,this.globalAlphaStack.length),this.imageSmoothingEnabledStack.splice(0,this.imageSmoothingEnabledStack.length),b=0,c=arguments.length;c>b;b++)n.push(arguments[b]);for(b=0,c=n.length;c>b;b++){if(d=n[b],d&&d.constructor===Array){for(n=o.apply([],n),d=n[b];d&&d.constructor===Array;)n=o.apply([],n),d=n[b];c=n.length}if(d)if(e=d.props,f=d.type,"transform"!==f)if("setTransform"!==f)if("scale"!==f)if("translate"!==f)if("rotate"!==f)if("restore"!==f)if("fillRect"!==f)if("strokeRect"!==f)if("clearRect"!==f)if("rect"!==f)if("fillStyle"!==f)if("strokeStyle"!==f)if("endFillStyle"!==f)if("endStrokeStyle"!==f)if("lineStyle"!==f)if("endLineStyle"!==f)if("textStyle"!==f)if("endTextStyle"!==f)if("shadowStyle"!==f)if("endShadowStyle"!==f)if("strokeText"!==f)if("fillText"!==f)if("text"!==f)if("drawImage"!==f)if("drawImageSize"!==f)if("drawImageSource"!==f)if("fillImagePattern"!==f)if("fillImage"!==f)if("fillImageSize"!==f)if("fillImageSource"!==f)if("fillCanvas"!==f)if("fillCanvasSize"!==f)if("fillCanvasSource"!==f)if("drawCanvas"!==f)if("drawCanvasSize"!==f)if("drawCanvasSource"!==f)"strokeArc"!==f?"strokeArc-counterclockwise"!==f?"fillArc"!==f?"fillArc-counterclockwise"!==f?"moveTo"!==f?"lineTo"!==f?"bezierCurveTo"!==f?"quadraticCurveTo"!==f?"anticlockwise-arc"!==f?"arc"!==f?"full-arc"!==f?"quick-arc"!==f?"arcTo"!==f?"anticlockwise-ellipse"!==f?"ellipse"!==f?"full-ellipse"!==f?"quick-ellipse"!==f?"globalCompositeOperation"!==f?"endGlobalCompositeOperation"!==f?"fill"!==f?"stroke"!==f?"beginClip"!==f?"clip"!==f?"endClip"!==f?"beginPath"!==f?"closePath"!==f?"globalAlpha"!==f?"endGlobalAlpha"!==f?"hitRegion"!==f?"imageSmoothingEnabled"!==f?"endImageSmoothingEnabled"!==f||(m.imageSmoothingEnabled=this.imageSmoothingEnabledStack.pop()):(this.imageSmoothingEnabledStack.push(m.imageSmoothingEnabled),m.imageSmoothingEnabled=e.value):(g={id:e.id,points:h(e.points,this.transformStack[this.transformStack.length-1])},this.mouseRegions.push(g),this.touchRegions.push(g)):m.globalAlpha=this.globalAlphaStack.pop():(this.globalAlphaStack.push(m.globalAlpha),m.globalAlpha*=e.value):m.closePath():m.beginPath():m.restore():m.clip():(m.save(),m.beginPath()):m.stroke():m.fill():m.globalCompositeOperation=this.globalCompositeOperationStack.pop():(this.globalCompositeOperationStack.push(m.globalCompositeOperation),m.globalCompositeOperation=e.value):(this.save(),this.translate(e.x,e.y),this.scale(e.radiusX,e.radiusY),this.arc(0,0,1,0,this.pi2),this.restore()):(this.save(),this.translate(e.x,e.y),this.rotate(e.rotation),this.scale(e.radiusX,e.radiusY),this.arc(0,0,1,0,this.pi2),this.restore()):(this.save(),this.translate(e.x,e.y),this.rotate(e.rotation),this.scale(e.radiusX,e.radiusY),this.arc(0,0,1,e.startAngle,e.endAngle),this.restore()):(this.save(),this.translate(e.x,e.y),this.rotate(e.rotation),this.scale(e.radiusX,e.radiusY),this.arc(0,0,1,e.startAngle,e.endAngle,!0),this.restore()):m.arcTo(e.x1,e.y1,e.x2,e.y2,e.r):m.arc(0,0,e.r,0,this.pi2):m.arc(e.x,e.y,e.r,0,this.pi2):m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle):m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle,!0):m.quadraticCurveTo(e.cpx,e.cpy,e.x,e.y):m.bezierCurveTo(e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.x,e.y):m.lineTo(e.x,e.y):m.moveTo(e.x,e.y):(m.beginPath(),m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle,!0),m.closePath(),m.fill()):(m.beginPath(),m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle),m.closePath(),m.fill()):(m.beginPath(),m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle,!0),m.closePath(),m.stroke()):(m.beginPath(),m.arc(e.x,e.y,e.r,e.startAngle,e.endAngle),m.closePath(),m.stroke());else{if(!e.img)continue;m.drawImage(e.img.renderer.canvas,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}else{if(!e.img)continue;m.drawImage(e.img.renderer.canvas,e.dx,e.dy,e.dWidth,e.dHeight)}else{if(!e.img)continue;m.drawImage(e.img.renderer.canvas,e.dx,e.dy)}else{if(!e.img)continue;m.save(),m.fillStyle=e.img.fillPattern,m.translate(e.dx,e.dy),m.scale(e.dWidth/e.sWidth,e.dHeight/e.sHeight),m.translate(-e.sx,-e.sy),m.fillRect(e.sx,e.sy,e.sWidth,e.sHeight),m.restore()}else{if(!e.img)continue;g=e.img,m.save(),m.fillStyle=g.fillPattern,m.translate(e.dx,e.dy),m.scale(e.dWidth/g.width,e.dHeight/g.height),m.fillRect(0,0,g.width,g.height),m.restore()}else{if(!e.img)continue;g=e.img,m.save(),m.fillStyle=g.fillPattern,m.translate(e.dx,e.dy),m.fillRect(0,0,g.width,g.height),m.restore()}else{if(!e.img)continue;m.save(),m.fillStyle=e.img.imagePattern,m.translate(e.dx,e.dy),m.scale(e.dWidth/e.sWidth,e.dHeight/e.sHeight),m.translate(-e.sx,-e.sy),m.fillRect(e.sx,e.sy,e.sWidth,e.sHeight),m.restore()}else{if(!e.img)continue;g=e.img.imageElement,m.save(),m.fillStyle=e.img.imagePattern,m.translate(e.dx,e.dy),m.scale(e.dWidth/g.width,e.dHeight/g.height),m.fillRect(0,0,g.width,g.height),m.restore()}else{if(!e.img)continue;g=e.img.imageElement,m.save(),m.fillStyle=e.img.imagePattern,m.translate(e.dx,e.dy),m.fillRect(0,0,g.width,g.height),m.restore()}else{if(!e.img)continue;m.fillStyle=e.img.imagePatternRepeat,m.translate(e.dx,e.dy),m.fillRect(0,0,e.dWidth,e.dHeight),m.restore()}else{if(!e.img)continue;g=e.img.constructor===k?e.img.imageElement||new Image:e.img,m.drawImage(g,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}else{if(!e.img)continue;g=e.img.constructor===k?e.img.imageElement||new Image:e.img,m.drawImage(g,e.dx,e.dy,e.dWidth,e.dHeight)}else{if(!e.img)continue;g=e.img.constructor===k?e.img.imageElement||new Image:e.img,m.drawImage(g||new Image,e.dx,e.dy)}else{if(0!==e.maxWidth){e.fill&&m.fillText(e.text,e.x,e.y,e.maxWidth),e.stroke&&m.strokeText(e.text,e.x,e.y,e.maxWidth);continue}e.fill&&m.fillText(e.text,e.x,e.y),e.stroke&&m.strokeText(e.text,e.x,e.y)}else{if(e.maxWidth){m.fillText(e.text,e.x,e.y,e.maxWidth);continue}m.fillText(e.text,e.x,e.y)}else{if(e.maxWidth){m.strokeText(e.text,e.x,e.y,e.maxWidth);continue}m.strokeText(e.text,e.x,e.y)}else g=this.shadowStyleStack.pop(),m.shadowBlur=g.shadowBlur,m.shadowColor=g.shadowColor,m.shadowOffsetX=g.shadowOffsetX,m.shadowOffsetY=g.shadowOffsetY;else this.shadowStyleStack.push({shadowBlur:m.shadowBlur,shadowColor:m.shadowColor,shadowOffsetX:m.shadowOffsetX,shadowOffsetY:m.shadowOffsetY}),null!==e.shadowBlur&&(m.shadowBlur=e.shadowBlur),null!==e.shadowColor&&(m.shadowColor=e.shadowColor),null!==e.shadowOffsetX&&(m.shadowOffsetX=e.shadowOffsetX),null!==e.shadowOffsetY&&(m.shadowOffsetY=e.shadowOffsetY);else g=this.textStyleStack.pop(),m.font=g.font,m.textAlign=g.textAlign,m.textBaseline=g.textBaseline,m.direction=g.direction;else this.textStyleStack.push({font:m.font,textAlign:m.textAlign,textBaseline:m.textBaseline,direction:m.direction}),null!==e.font&&(m.font=e.font),null!==e.textAlign&&(m.textAlign=e.textAlign),null!==e.textBaseline&&(m.textBaseline=e.textBaseline),null!==e.lineJoin&&(m.direction=e.direction);else g=this.lineStyleStack.pop(),m.lineWidth=g.lineWidth,m.lineCap=g.lineCap,m.lineJoin=g.lineJoin,m.miterLimit=g.miterLimit,m.setLineDash(g.lineDash),m.lineDashOffset=g.lineDashOffset;else this.lineStyleStack.push({lineWidth:m.lineWidth,lineCap:m.lineCap,lineJoin:m.lineJoin,miterLimit:m.miterLimit,lineDash:m.getLineDash(),lineDashOffset:m.lineDashOffset}),null!==e.lineWidth&&(m.lineWidth=e.lineWidth),null!==e.lineCap&&(m.lineCap=e.lineCap),null!==e.lineJoin&&(m.lineJoin=e.lineJoin),null!==e.miterLimit&&(m.miterLimit=e.miterLimit),e.lineDash.length>0&&m.setLineDash(e.lineDash),null!==e.lineDashOffset&&(m.lineDashOffset=e.lineDashOffset);else m.strokeStyle=this.strokeStyleStack.pop();else m.fillStyle=this.fillStyleStack.pop();else this.strokeStyleStack.push(m.strokeStyle),m.strokeStyle=e.value;else this.fillStyleStack.push(m.fillStyle),m.fillStyle=e.value;else m.rect(e.x,e.y,e.width,e.height);else m.clearRect(e.x,e.y,e.width,e.height);else m.strokeRect(e.x,e.y,e.width,e.height);else m.fillRect(e.x,e.y,e.width,e.height);else this.transformStackIndex-=6,l[0]=this.transformStack[this.transformStackIndex-6],l[1]=this.transformStack[this.transformStackIndex-5],l[2]=this.transformStack[this.transformStackIndex-4],l[3]=this.transformStack[this.transformStackIndex-3],l[4]=this.transformStack[this.transformStackIndex-2],l[5]=this.transformStack[this.transformStackIndex-1],m.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]);else l[0]=this.transformStack[this.transformStackIndex-6],l[1]=this.transformStack[this.transformStackIndex-5],l[2]=this.transformStack[this.transformStackIndex-4],l[3]=this.transformStack[this.transformStackIndex-3],l[4]=this.transformStack[this.transformStackIndex-2],l[5]=this.transformStack[this.transformStackIndex-1],j=Math.cos(e.r),i=Math.sin(e.r),this.transformStackIndex+=6,this.transformStackIndex>this.transformStack.length&&this.increaseTransformStackSize(),this.transformStack[this.transformStackIndex-6]=l[0]*j+l[2]*i,this.transformStack[this.transformStackIndex-5]=l[1]*j+l[3]*i,this.transformStack[this.transformStackIndex-4]=l[0]*-i+l[2]*j,this.transformStack[this.transformStackIndex-3]=l[1]*-i+l[3]*j,this.transformStack[this.transformStackIndex-2]=l[4],this.transformStack[this.transformStackIndex-1]=l[5],m.setTransform(this.transformStack[this.transformStackIndex-6],this.transformStack[this.transformStackIndex-5],this.transformStack[this.transformStackIndex-4],this.transformStack[this.transformStackIndex-3],this.transformStack[this.transformStackIndex-2],this.transformStack[this.transformStackIndex-1]);else l[0]=this.transformStack[this.transformStackIndex-6],
l[1]=this.transformStack[this.transformStackIndex-5],l[2]=this.transformStack[this.transformStackIndex-4],l[3]=this.transformStack[this.transformStackIndex-3],l[4]=this.transformStack[this.transformStackIndex-2],l[5]=this.transformStack[this.transformStackIndex-1],this.transformStackIndex+=6,this.transformStackIndex>this.transformStack.length&&this.increaseTransformStackSize(),this.transformStack[this.transformStackIndex-6]=l[0],this.transformStack[this.transformStackIndex-5]=l[1],this.transformStack[this.transformStackIndex-4]=l[2],this.transformStack[this.transformStackIndex-3]=l[3],this.transformStack[this.transformStackIndex-2]=l[4]+l[0]*e.x+l[2]*e.y,this.transformStack[this.transformStackIndex-1]=l[5]+l[1]*e.x+l[3]*e.y,m.setTransform(this.transformStack[this.transformStackIndex-6],this.transformStack[this.transformStackIndex-5],this.transformStack[this.transformStackIndex-4],this.transformStack[this.transformStackIndex-3],this.transformStack[this.transformStackIndex-2],this.transformStack[this.transformStackIndex-1]);else l[0]=this.transformStack[this.transformStackIndex-6],l[1]=this.transformStack[this.transformStackIndex-5],l[2]=this.transformStack[this.transformStackIndex-4],l[3]=this.transformStack[this.transformStackIndex-3],l[4]=this.transformStack[this.transformStackIndex-2],l[5]=this.transformStack[this.transformStackIndex-1],this.transformStackIndex+=6,this.transformStackIndex>this.transformStack.length&&this.increaseTransformStackSize(),this.transformStack[this.transformStackIndex-6]=l[0]*e.x,this.transformStack[this.transformStackIndex-5]=l[1]*e.x,this.transformStack[this.transformStackIndex-4]=l[2]*e.y,this.transformStack[this.transformStackIndex-3]=l[3]*e.y,this.transformStack[this.transformStackIndex-2]=l[4],this.transformStack[this.transformStackIndex-1]=l[5],m.setTransform(this.transformStack[this.transformStackIndex-6],this.transformStack[this.transformStackIndex-5],this.transformStack[this.transformStackIndex-4],this.transformStack[this.transformStackIndex-3],this.transformStack[this.transformStackIndex-2],this.transformStack[this.transformStackIndex-1]);else this.transformStackIndex+=6,this.transformStackIndex>this.transformStack.length&&this.increaseTransformStackSize(),this.transformStack[this.transformStackIndex-6]=e[0],this.transformStack[this.transformStackIndex-5]=e[1],this.transformStack[this.transformStackIndex-4]=e[2],this.transformStack[this.transformStackIndex-3]=e[3],this.transformStack[this.transformStackIndex-2]=e[4],this.transformStack[this.transformStackIndex-1]=e[5],m.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]);else l[0]=this.transformStack[this.transformStackIndex-6],l[1]=this.transformStack[this.transformStackIndex-5],l[2]=this.transformStack[this.transformStackIndex-4],l[3]=this.transformStack[this.transformStackIndex-3],l[4]=this.transformStack[this.transformStackIndex-2],l[5]=this.transformStack[this.transformStackIndex-1],this.transformStackIndex+=6,this.transformStackIndex>this.transformStack.length&&this.increaseTransformStackSize(),this.transformStack[this.transformStackIndex-6]=l[0]*e[0]+l[2]*e[1],this.transformStack[this.transformStackIndex-5]=l[1]*e[0]+l[3]*e[1],this.transformStack[this.transformStackIndex-4]=l[0]*e[2]+l[2]*e[3],this.transformStack[this.transformStackIndex-3]=l[1]*e[2]+l[3]*e[3],this.transformStack[this.transformStackIndex-2]=l[0]*e[4]+l[2]*e[5]+l[4],this.transformStack[this.transformStackIndex-1]=l[1]*e[4]+l[3]*e[5]+l[5],m.setTransform(this.transformStack[this.transformStackIndex-6],this.transformStack[this.transformStackIndex-5],this.transformStack[this.transformStackIndex-4],this.transformStack[this.transformStackIndex-3],this.transformStack[this.transformStackIndex-2],this.transformStack[this.transformStackIndex-1])}return this.applyStyles()},d.create=function(a,b,c,e){return arguments.length>2?new d(a,b,c,e):2===arguments.length?new d(a,b):new d},d.prototype.resize=function(a,b){this.canvas.width.toString()!==a.toString()&&(this.canvas.width=a,this.parent!==document.body&&(this.parent.style.width=a+"px")),this.canvas.height.toString()!==b.toString()&&(this.canvas.height=b,this.parent!==document.body&&(this.parent.style.height=b+"px"))},d.prototype.toImage=function(){var b=a("./Img"),c=new b;return c.src=this.canvas.toDataURL("image/png"),c},d.prototype.hookRender=function(){return this.isReady&&(this.lastMouseEvent&&!this.ranMouseEvent&&this.mouseMove(this.lastMouseEvent),this.lastTouchEvent&&!this.ranTouchEvent&&this.touchEvent(this.lastMouseEvent),this.fireFrame()),window.requestAnimationFrame(this.boundHookRenderFunction)},d.prototype.hookMouseEvents=function(){return window.document.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),window.document.addEventListener("mouseup",this.mouseUp.bind(this))},d.prototype.hookTouchEvents=function(){return["touchstart","touchmove","touchend","touchcancel"].forEach(function(a){return window.document.addEventListener(a,this.touchEvent.bind(this))},this)},d.prototype.touchEvent=function(a){for(var b,c,d=this.canvas.getBoundingClientRect(),e=this.touchRegions.slice(),f=[0,0],g=this.touchData.ids.splice(0,this.touchData.ids.length),h=this.touchData.touches.splice(0,this.touchData.touches.length),j=0;j<a.touches.length;j++){var k=a.touches.item(j),l=g.indexOf(k.identifier);c=-1===l?{x:0,y:0,activeRegions:[],id:k.identifier,touched:!0,held:!1}:h[l],c.touched=-1===l,c.held=!c.touched,c.x=k.clientX-d.left,c.y=k.clientY-d.top,this.touchData.touches.push(c),this.touchData.ids.push(c.identifier),f[0]=c.x,f[1]=c.y,c.activeRegions.splice(0,c.activeRegions.length);for(var m=0;m<this.mouseRegions.length;j++)b=e[m],i(f,b.points)&&(c.activeRegions.push(b.id),e.splice(e.indexOf(b),1),m-=1)}return this.lastTouchEvent=a,this.ranTouchEvent=!0,a.preventDefault(),!1},d.prototype.mouseMove=function(a){var b,c=this.canvas.getBoundingClientRect(),d=[0,0];this.lastMouseEvent=a,this.ranMouseEvent=!0,d[0]=a.clientX-c.left,d[1]=a.clientY-c.top;for(var e=0;e<this.mouseRegions.length;e++)b=this.mouseRegions[e],i(d,b.points)&&(this.activeRegions.push(b.id),this.mouseRegions.splice(this.mouseRegions.indexOf(b),1),e-=1);return this.mouseData.x=d[0],this.mouseData.y=d[1],this.mouseData.clicked="down"===this.mouseState&&"up"===this.mouseData.state,this.mouseData.state=this.mouseState,this.mouseData.activeRegions=this.activeRegions,a.preventDefault(),!1},d.prototype.mouseDown=function(a){return this.mouseState="down",this.canvas.focus(),this.mouseMove(a)},d.prototype.mouseUp=function(a){return this.mouseState="up",this.mouseMove(a)},d.prototype.hookKeyboardEvents=function(){for(var a in g.code)g.code.hasOwnProperty(a)&&(this.keyData[a]="up");return this.canvas.addEventListener("keydown",this.keyDown.bind(this)),window.document.addEventListener("keyup",this.keyUp.bind(this))},d.prototype.keyChange=function(a){return a.preventDefault(),!1},d.prototype.keyDown=function(a){return this.keyData[g(a.keyCode)]="down",this.keyChange(a)},d.prototype.keyUp=function(a){return this.keyData[g(a.keyCode)]="up",this.keyChange(a)},d.prototype.fireFrame=function(){return this.mouseRegions.splice(0,this.mouseRegions.length),this.touchRegions.splice(0,this.touchRegions.length),this.emit("frame",{}),this.activeRegions.splice(0,this.activeRegions.length),this.ranMouseEvent=!1,this},d.prototype.style=function(){var a,b,c,d=[],e=[],f=d.concat;for(b=0,a=arguments.length;a>b;b++)d.push(arguments[b]);for(b=0,a=d.length;a>b;b++){if(c=d[b],c&&c.constructor===Array){for(d=f.apply([],d),c=d[b];c&&c.constructor===Array;)d=f.apply([],d),c=d[b];a=d.length}c&&e.push(c)}for(b=0;b<e.length;b++)this.styleQueue.push(e[b])},d.prototype.applyStyles=function(){for(var a,b=0;b<this.styleQueue.length;b++){a=this.styleQueue[b];for(var c in a)a.hasOwnProperty(c)&&(this.canvas.style[c]=a[c])}this.styleQueue.splice(0,this.styleQueue.length)},d.prototype.ready=function(){return this.isReady=!0,this.fireFrame(),window.requestAnimationFrame(this.hookRender.bind(this))},d.prototype.measureText=function(a,b){var c,d=this.ctx.font;return this.ctx.font=a,c=this.ctx.measureText(b),this.ctx.font=d,c},d.prototype.increaseTransformStackSize=function(){var a=this.transformStack;return this.transformStack=new Float64Array(this.transformStack.length+600),this.transformStack.set(a),this},Object.defineProperty(d.prototype,"height",{get:function(){return this.canvas.width},enumerable:!0,configurable:!1}),Object.defineProperty(d.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!1}),Object.seal(d),Object.seal(d.prototype),b.exports=d},{"./Img":11,"./createLinearGradient":24,"./createRadialGradient":25,"./transformPoints":64,events:2,keycode:8,"point-in-polygon":9,util:7}],14:[function(a,b,c){"use strict";function d(a,b){return new e("addColorStop",{offset:a,color:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],15:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){return arguments.length>5?new e(g?"anticlockwise-arc":"arc",{x:a,y:b,r:c,startAngle:d,endAngle:f}):5===arguments.length?new e("arc",{x:a,y:b,r:c,startAngle:d,endAngle:f}):arguments.length>=3?new e("full-arc",{x:a,y:b,r:c}):arguments.length>=1?new e("quick-arc",{r:a}):new e("quick-arc",{r:1})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],16:[function(a,b,c){"use strict";function d(a,b,c,d,f){return new e("arcTo",{x1:a,y1:b,x2:c,y2:d,r:f})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],17:[function(a,b,c){"use strict";function d(){return new e("beginPath")}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],18:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){return new e("bezierCurveTo",{cp1x:a,cp1y:b,cp2x:c,cp2y:d,x:f,y:g})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],19:[function(a,b,c){"use strict";function d(a,b,c,d){return arguments.length>2?new e("clearRect",{x:a,y:b,width:c,height:d}):new e("clearRect",{x:0,y:0,width:a,height:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],20:[function(a,b,c){"use strict";function d(a,b){for(var c=[new e("beginClip"),a,new e("clip")],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("endClip")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],21:[function(a,b,c){"use strict";function d(){return new e("clipPath")}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],22:[function(a,b,c){"use strict";function d(){return new e("closePath")}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],23:[function(a,b,c){"use strict";function d(){var a,b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);for(a=0;a<b.length;a++){for(;b[a]&&b[a].constructor===Array;)b=e.apply([],b);if(b[a]&&"placeholder"===b[a].type)break}return function(){var c=b,d=c.splice(a+1,b.length);return c.pop(),function(){var a,b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);return[c,b,d]}}()}var e=[].concat;b.exports=d},{}],24:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=window.document.createElement("canvas").getContext("2d"),g=f.createLinearGradient(a,b,c,d),h=0;h<e.length;h++){var i=e[h];g.addColorStop(i.props.offset,i.props.color)}return g}b.exports=d},{}],25:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){for(var h=window.document.createElement("canvas").getContext("2d"),i=h.createRadialGradient(a,b,c,d,e,f),j=0;j<g.length;j++){var k=g[j];i.addColorStop(k.props.offset,k.props.color)}return i}b.exports=d},{}],26:[function(a,b,c){"use strict";function d(a,b,c){a=+a||1,b[0]=+b[0]||0,b[1]=+b[1]||0,c=+c||3;for(var d=[],e=0;c>e;e++)d.push([b[0]+a*Math.cos(2*Math.PI*e/c),b[1]+a*Math.sin(2*Math.PI*e/c)]);return d}b.exports=d},{}],27:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){return 9===arguments.length?new e("drawCanvasSource",{img:a,sx:b,sy:c,sWidth:d,sHeight:f,dx:g,dy:h,dWidth:i,dHeight:j}):arguments.length>=5?new e("drawCanvasSize",{img:a,dx:b,dy:c,dWidth:d,dHeight:f}):arguments.length>=3?new e("drawCanvas",{img:a,dx:b,dy:c}):new e("drawCanvas",{img:a,dx:0,dy:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],28:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){return 9===arguments.length?new e("drawImageSource",{img:a,sx:b,sy:c,sWidth:d,sHeight:f,dx:g,dy:h,dWidth:i,dHeight:j}):arguments.length>=5?new e("drawImageSize",{img:a,dx:b,dy:c,dWidth:d,dHeight:f}):arguments.length>=3?new e("drawImage",{img:a,dx:b,dy:c}):new e("drawImage",{img:a,dx:0,dy:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],29:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i){return arguments.length>7?new e(i?"anticlockwise-ellipse":"ellipse",{x:a,y:b,radiusX:c,radiusY:d,startAngle:g,endAngle:h}):7===arguments.length?new e("ellipse",{x:a,y:b,radiusX:c,radiusY:d,rotation:f,startAngle:g,endAngle:h}):arguments.length>=5?new e("full-ellipse",{x:a,y:b,radiusX:c,radiusY:d,rotation:f}):4===arguments.length?new e("quick-ellipse",{x:a,y:b,radiusX:c,radiusY:d}):new e("quick-ellipse",{x:0,y:0,radiusX:a,radiusY:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],30:[function(a,b,c){"use strict";function d(){return new e("fill")}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],31:[function(a,b,c){"use strict";function d(a,b,c,d,g,h){return arguments.length>=6&&h?new e("fillArc-counterclockwise",{x:a,y:b,r:c,startAngle:d,endAngle:g}):arguments.length>3?new e("fillArc",{x:a,y:b,r:c,startAngle:d,endAngle:g}):arguments.length>1?new e("fillArc",{x:a,y:b,r:c,startAngle:0,endAngle:f}):new e("fillArc",{x:0,y:0,r:a,startAngle:0,endAngle:f})}var e=a("./Instruction"),f=2*Math.PI;b.exports=d},{"./Instruction":12}],32:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){return 9===arguments.length?new e("fillCanvasSource",{img:a,sx:b,sy:c,sWidth:d,sHeight:f,dx:g,dy:h,dWidth:i,dHeight:j}):arguments.length>=5?new e("fillCanvasSize",{img:a,dx:b,dy:c,dWidth:d,dHeight:f}):arguments.length>=3?new e("fillCanvas",{img:a,dx:b,dy:c}):new e("fillCanvas",{img:a,dx:0,dy:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],33:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){return 9===arguments.length?new e("fillImageSource",{img:a,sx:b,sy:c,sWidth:d,sHeight:f,dx:g,dy:h,dWidth:i,dHeight:j}):arguments.length>=5?new e("fillImageSize",{img:a,dx:b,dy:c,dWidth:d,dHeight:f}):arguments.length>=3?new e("fillImage",{img:a,dx:b,dy:c}):new e("fillImage",{img:a,dx:0,dy:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],34:[function(a,b,c){"use strict";function d(a,b,c,d,f){return arguments.length>=5?new e("fillImagePattern",{img:a,dx:b,dy:c,dWidth:d,dHeight:f}):arguments.length>=3?new e("fillImagePattern",{img:a,dx:0,dy:0,dWidth:b,dHeight:c}):new e("fillImagePattern",{img:a,dx:0,dy:0,dWidth:0,dHeight:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],35:[function(a,b,c){"use strict";function d(a,b,c,d){return arguments.length>=4?new e("fillRect",{x:a,y:b,width:c,height:d}):new e("fillRect",{x:0,y:0,width:a,height:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],36:[function(a,b,c){"use strict";function d(a,b){for(var c=[new e("fillStyle",{value:a})],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("endFillStyle")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],37:[function(a,b,c){var d=a("./Instruction");b.exports=function(a,b,c,e){return arguments.length<4&&(e=null),arguments.length<3&&(b=0,c=0),new d("fillText",{text:a,x:b,y:c,maxWidth:e})}},{"./Instruction":12}],38:[function(a,b,c){"use strict";function d(a,b){for(var c=[new e("globalAlpha",{value:a})],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("endGlobalAlpha")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],39:[function(a,b,c){"use strict";function d(a,b){var c=[new e("globalCompositeOperation",{value:a})];if(0===arguments.length)return[];for(var d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("endGlobalCompositeOperation")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],40:[function(a,b,c){"use strict";function d(a,b,c,d,f){arguments.length<=3&&(d=b,f=c,b=0,c=0);var g=[[b,c],[b,c+f],[b+d,c+f],[b+d,c]];return e(a,g)}var e=(a("./Instruction"),a("./hitRegion"));b.exports=d},{"./Instruction":12,"./hitRegion":41}],41:[function(a,b,c){"use strict";function d(a,b){return new e("hitRegion",{id:a,points:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],42:[function(a,b,c){"use strict";var d=a("./Instruction");b.exports=function(a,b){b=[];for(var c=1;c<arguments.length;c++)b.push(arguments[c]);return[new d("imageSmoothingEnabled",{value:Boolean(a)})].concat(b).concat(new d("endImageSmoothingEnabled"))}},{"./Instruction":12}],43:[function(a,b,c){"use strict";function d(a,b){a=a||{};var c={lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:[],lineDashOffset:null};"undefined"!=typeof a.lineWidth&&(c.lineWidth=a.lineWidth),"undefined"!=typeof a.lineCap&&(c.lineCap=a.lineCap),"undefined"!=typeof a.lineJoin&&(c.lineJoin=a.lineJoin),"undefined"!=typeof a.miterLimit&&(c.miterLimit=a.miterLimit),"undefined"!=typeof a.lineDash&&(c.lineDash=a.lineDash),"undefined"!=typeof a.lineDashOffset&&(c.lineDashOffset=a.lineDashOffset);for(var d=[new e("lineStyle",c)],f=1;f<arguments.length;f++)d.push(arguments[f]);return d.push(new e("endLineStyle")),d}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],44:[function(a,b,c){"use strict";function d(a,b){return 0===arguments.length?new e("lineTo",{x:0,y:0}):new e("lineTo",{x:a,y:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],45:[function(a,b,c){"use strict";function d(a,b){return 0===arguments.length?new e("moveTo",{x:0,y:0}):new e("moveTo",{x:a,y:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],46:[function(a,b,c){"use strict";function d(a,b){return 0===b?e(a[0],a[1]):f(a[0],a[1])}var e=a("./moveTo"),f=a("./lineTo");b.exports=d},{"./lineTo":44,"./moveTo":45}],47:[function(a,b,c){"use strict";function d(a){for(var b=[e()],c=0;c<arguments.length;c++)b.push(arguments[c]);return b.push(f()),b}var e=a("./beginPath"),f=a("./closePath");b.exports=d},{"./beginPath":17,"./closePath":22}],48:[function(a,b,c){"use strict";var d=a("./Instruction");b.exports=function(){return new d("placeholder")}},{"./Instruction":12}],49:[function(a,b,c){"use strict";function d(a,b,c,d){return new e("quadraticCurveTo",{cpx:a,cpy:b,x:c,y:d})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],50:[function(a,b,c){"use strict";function d(a,b,c,d){return arguments.length>2?new e("rect",{x:a,y:b,width:c,height:d}):new e("rect",{x:0,y:0,width:a,height:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],51:[function(a,b,c){"use strict";var d=a("./setTransform");b.exports=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return d([1,0,0,1,0,0],a)}},{"./setTransform":54}],52:[function(a,b,c){"use strict";function d(a,b){a=+a;for(var c=[new e("rotate",{r:a})],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("restore")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],53:[function(a,b,c){"use strict";function d(a,b,c){var d=2;"number"!=typeof b&&(b=a,d=1),c=c||[];for(var f=[new e("scale",{x:a,y:b})];d<arguments.length;d++)f.push(arguments[d]);return f.push(new e("restore")),f}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],54:[function(a,b,c){"use strict";var d=a("./Instruction");b.exports=function(a,b){for(var c=[new d("setTransform",[a[0],a[1],a[2],a[3],a[4],a[5]])],e=1;e<arguments.length;e++)c.push(arguments[e]);return c.push(new d("restore")),c}},{"./Instruction":12}],55:[function(a,b,c){"use strict";function d(a,b){a=a||{};var c={shadowBlur:null,shadowColor:null,shadowOffsetX:null,shadowOffsetY:null};"undefined"!=typeof a.shadowBlur&&(c.shadowBlur=a.shadowBlur),"undefined"!=typeof a.shadowColor&&(c.shadowColor=a.shadowColor),"undefined"!=typeof a.shadowOffsetX&&(c.shadowOffsetX=a.shadowOffsetX),"undefined"!=typeof a.direction&&(c.shadowOffsetY=a.shadowOffsetY);for(var d=[new e("shadowStyle",a)],f=1;f<arguments.length;f++)d.push(arguments[f]);return d.push(new e("endShadowStyle")),d}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],56:[function(a,b,c){"use strict";function d(){return new e("stroke")}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],57:[function(a,b,c){"use strict";function d(a,b,c,d,g,h){return arguments.length>=6&&h?new e("strokeArc-counterclockwise",{x:a,y:b,r:c,startAngle:d,endAngle:g}):arguments.length>3?new e("strokeArc",{x:a,y:b,r:c,startAngle:d,endAngle:g}):arguments.length>1?new e("strokeArc",{x:a,y:b,r:c,startAngle:0,endAngle:f}):new e("strokeArc",{x:0,y:0,r:a,startAngle:0,endAngle:f})}var e=a("./Instruction"),f=2*Math.PI;b.exports=d},{"./Instruction":12}],58:[function(a,b,c){"use strict";function d(a,b,c,d){return arguments.length>2?new e("strokeRect",{x:a,y:b,width:c,height:d}):new e("strokeRect",{x:0,y:0,width:a,height:b})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],59:[function(a,b,c){"use strict";function d(a,b){for(var c=[new e("strokeStyle",{value:a})],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(new e("endStrokeStyle")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],60:[function(a,b,c){var d=a("./Instruction");b.exports=function(a,b,c,e){return arguments.length<4&&(e=null),arguments.length<3&&(b=0,c=0),new d("strokeText",{text:a,x:b,y:c,maxWidth:e})}},{"./Instruction":12}],61:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){return 6===arguments.length?new e("text",{x:b,y:c,fill:d,stroke:f,text:a,maxWidth:g}):5===arguments.length?new e("text",{x:b,y:c,fill:d,stroke:f,text:a,maxWidth:0}):4===arguments.length?new e("text",{x:b,y:c,fill:d,stroke:!1,text:a,maxWidth:0}):3===arguments.length?new e("text",{x:b,y:c,fill:!0,stroke:!1,text:a,maxWidth:0}):new e("text",{x:0,y:0,fill:!0,stroke:!1,text:a,maxWidth:0})}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],62:[function(a,b,c){"use strict";function d(a,b){a=a||{};var c={font:null,textAlign:null,textBaseline:null,direction:null};"undefined"!=typeof a.font&&(c.font=a.font),"undefined"!=typeof a.textAlign&&(c.textAlign=a.textAlign),"undefined"!=typeof a.textBaseline&&(c.textBaseline=a.textBaseline),"undefined"!=typeof a.direction&&(c.direction=a.direction);for(var d=[new e("textStyle",a)],f=1;f<arguments.length;f++)d.push(arguments[f]);return d.push(new e("endTextStyle")),d}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],63:[function(a,b,c){"use strict";function d(a,b){for(var c=[new e("transform",[a[0],a[1],a[2],a[3],a[4],a[5]])],d=1,f=arguments.length;f>d;d++)c.push(arguments[d]);return c.push(new e("restore")),c}var e=a("./Instruction");b.exports=d},{"./Instruction":12}],64:[function(a,b,c){"use strict";function d(a,b){for(var c,d=[],e=a.length,f=0;e>f;f++)c=a[f],d.push([b[0]*c[0]+b[2]*c[1]+b[4],b[1]*c[0]+b[3]*c[1]+b[5]]);return d}b.exports=d},{}],65:[function(a,b,c){"use strict";function d(a,b,c){for(var d,f=[new e("translate",{x:a,y:b})],g=2;g<arguments.length;g++)d=arguments[g],Array.isArray(d)?f=f.concat(d):f.push(arguments[g]);return f.push(new e("restore")),f}var e=a("./Instruction");b.exports=d},{"./Instruction":12}]},{},[1])(1)});
