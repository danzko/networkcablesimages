/**
 * E2D Engine v1.0.5
 * @author Jack Dalton <jack@jackdalton.org>
 * Copyright Â© 2015 Jack Dalton under the MIT license (https://opensource.org/licenses/MIT)
 **/

"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),E2D={VERSION:"1.0.5"};E2D.Scene=function(){function e(e){e=e||{},this._options={},this._options.logging=e.logging||!0,this._options.idLength=e.idLength||16,this._options.logging&&console.log("E2D v"+E2D.VERSION),this._ids={},this._objects={},this._disabledObjects={},this._custom=e.custom||{},this._extensions=[]}return e.prototype.render=function(){var e=this,t=[];for(var n in e._objects)t.push(e._objects[n]);for(t.sort(function(e,t){return e._layer-t._layer}),n=0;n<t.length;n++)t[n].render()},e.prototype._updateExtensions=function(){for(var e=this,t=0;t<e._extensions.length;t++)e._extensions[t].fn()},e}(),E2D.Scene.prototype.Vector2=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0}return _createClass(e,[{key:"getPos",value:function(){return this}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"setPos",value:function(e){this.x="number"==typeof e.x?e.x:this.x,this.y="number"==typeof e.y?e.y:this.y}},{key:"setX",value:function(e){this.x="number"==typeof e?e:this.x}},{key:"setY",value:function(e){this.y="number"==typeof e?e:this.y}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2))}},{key:"midpoint",value:function(t){return new e((this.x+t.x)/2,(this.y+t.y)/2)}},{key:"translate",value:function(t){return 2==arguments.length?(this.x+="number"==typeof arguments[0]?arguments[0]:0,this.y+="number"==typeof arguments[1]?arguments[1]:0):t instanceof e&&(this.x+=t.x||0,this.y+=t.y||0),{x:this.x,y:this.y}}}]),e}();return e}(),E2D.Scene.prototype.generateId=function(e){var t=this;e=e||t._options.idLength;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ$_",o="",s=0;e>s;s++)o+=n[Math.floor(Math.random()*n.length)];return o},E2D.Scene.prototype.addObject=function(e){var t=this;e.pos=e.pos||{},"undefined"==typeof e?e={pos:new t.Vector2(0,0)}:("number"!=typeof e.pos.x||"number"!=typeof e.pos.y)&&t._options.logging&&console.warn("Invalid position supplied. Using (0, 0) (@addObject)");var n={};return n.id=e.id||t.generateId(),n.body={pos:e.pos},"undefined"!=typeof e.custom&&(n.custom=e.custom),"function"==typeof e.renderer&&(n._renderer=e.renderer,n.render=function(){n._renderer(n,arguments)},n._layer=e.layer||0),t._objects[n.id]=n,t._updateExtensions(),n},E2D.Scene.prototype.destroyObject=function(e){var t=this;return"undefined"==typeof t._objects[e]?(t._options.logging&&console.warn(e+" either doesn't exist, or hasn't been added to the scene. Object was not destroyed (@destroyObject)"),!1):(delete t._objects[e],t._updateExtensions(),!0)},E2D.Scene.prototype.enableObject=function(e){var t=this;return"undefined"==typeof t._disabledObjects[e]?(t._options.logging&&console.warn(e+" either doesn't exist, hasn't been disabled, or hasn't been added to the scene. Object was not enabled (@enableObject)"),!1):(t._objects[e]=t._disabledObjects[e],delete t._disabledObjects[e],t._updateExtensions(),!0)},E2D.Scene.prototype.disableObject=function(e){var t=this;return"undefined"==typeof t._objects[e]?(t._options.logging&&console.warn(e+" either doesn't exist, or hasn't been added to the scene. Object was not disabled (@disableObject)"),!1):(t._disabledObjects[e]=t._objects[e],t.destroyObject(e),t._updateExtensions(),!0)},E2D.Scene.prototype.registerExtension=function(e){var t=this,n=function o(e){_classCallCheck(this,o),e=e||{},this.title=e.title||"Untitled Extension "+t.generateId(),this.id=e.id||"ext"+t.generateId(),this.fn=function(){e.fn(t)},"undefined"==typeof e.fn&&(t._options.logging&&console.warn("No function provided with "+this.title+", using an empty function (@registerExtension)."),this.fn=function(){})};t._extensions.push(new n(e)),t._updateExtensions()},"undefined"!=typeof module?module.exports=E2D:window.E2D=E2D;