/**
 * E2D Engine v1.1.6
 * Built 03:07:19 UTC | 2016-2-27
 * @author Jack Dalton <jack@jackdalton.org>
 * Copyright Â© 2015 Jack Dalton under the MIT license (https://opensource.org/licenses/MIT)
 **/

var E2D={VERSION:"1.1.6"};E2D.Scene=function(){function t(t){t=t||{},this._options={},this._options.logging=t.logging||!0,this._options.idLength=t.idLength||16,this._options.logging&&console.log("E2D v"+E2D.VERSION),this._ids={},this._objects={},this._disabledObjects={},this.custom=t.custom||{},this._extensions={}}return t.prototype.render=function(){var t=this,e=[];for(var n in t._objects)t._objects.hasOwnProperty(n)&&e.push(t._objects[n]);e.sort(function(t,e){return t._layer-e._layer});for(var o=0,s=e;o<s.length;o++){var n=s[o];n.render()}},t.prototype._updateExtensions=function(){var t=this;for(var e in t._extensions)t._extensions[e].fn()},t}(),E2D.Scene.prototype.Vector2=function(){function t(t,e){return this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this}return t.prototype.getPos=function(){return this},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.setPos=function(t){return this.x="number"==typeof t.x?t.x:this.x,this.y="number"==typeof t.y?t.y:this.y,this},t.prototype.setX=function(t){return this.x="number"==typeof t?t:this.x,this},t.prototype.setY=function(t){return this.y="number"==typeof t?t:this.y,this},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},t.prototype.midpoint=function(t){return new E2D.Scene.prototype.Vector2((this.x+t.x)/2,(this.y+t.y)/2)},t.prototype.translate=function(t){return 2==arguments.length?(this.x+="number"==typeof arguments[0]?arguments[0]:0,this.y+="number"==typeof arguments[1]?arguments[1]:0):t instanceof Vector2&&(this.x+=t.x||0,this.y+=t.y||0),this},t.prototype.clone=function(){return new E2D.Scene.prototype.Vector2(this.x,this.y)},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},t}(),E2D.Scene.prototype.generateId=function(t){var e=this;t=t||e._options.idLength;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ$_",o="",s=0;t>s;s++)o+=n[Math.floor(Math.random()*n.length)];return o},E2D.Scene.prototype.addObject=function(t){var e=this;t.pos=t.pos||{},"undefined"==typeof t?t={pos:new e.Vector2(0,0)}:("number"!=typeof t.pos.x||"number"!=typeof t.pos.y)&&e._options.logging&&console.warn("Invalid position supplied. Using (0, 0) (@addObject)");var n={};return n.id=t.id||e.generateId(),n.body={pos:t.pos},"undefined"!=typeof t.custom&&(n.custom=t.custom),e._objects[n.id]=n,n._renderer="function"==typeof t.renderer?t.renderer:function(){},e._objects[n.id].render=function(){e._objects[n.id]._renderer(e._objects[n.id],arguments)},n._layer=t.layer||0,e._updateExtensions(),n},E2D.Scene.prototype.destroyObject=function(t){var e=this;return"undefined"==typeof e._objects[t]?(e._options.logging&&console.warn(t+" either doesn't exist, or hasn't been added to the scene. Object was not destroyed (@destroyObject)"),!1):(delete e._objects[t],e._updateExtensions(),!0)},E2D.Scene.prototype.enableObject=function(t){var e=this;return"undefined"==typeof e._disabledObjects[t]?(e._options.logging&&console.warn(t+" either doesn't exist, hasn't been disabled, or hasn't been added to the scene. Object was not enabled (@enableObject)"),!1):(e._objects[t]=e._disabledObjects[t],delete e._disabledObjects[t],e._updateExtensions(),!0)},E2D.Scene.prototype.disableObject=function(t){var e=this;return"undefined"==typeof e._objects[t]?(e._options.logging&&console.warn(t+" either doesn't exist, or hasn't been added to the scene. Object was not disabled (@disableObject)"),!1):(e._disabledObjects[t]=e._objects[t],e.destroyObject(t),e._updateExtensions(),!0)},E2D.Scene.prototype.getObjectById=function(t){return t=t||"","undefined"==typeof this._objects[t]&&"undefined"==typeof this._disabledObjects[t]?(console.warn('Object "'+t+'" does not exist. (@getObjectById)'),!1):this._objects[t]||this._disabledObjects[t]},E2D.Scene.prototype.registerExtension=function(t){var e=this,n=function(){function t(t){t=t||{},this.title=t.title||"Untitled Extension "+e.generateId(),this.id=t.id||"ext"+e.generateId(),this._enabled=!0,this.fn=function(){t.fn(e)},this._bak_fn=function(){t.fn(e)},"undefined"==typeof t.fn&&(e._options.logging&&console.warn("No function provided with "+this.title+", using an empty function (@registerExtension)."),this.fn=function(){})}return t.prototype.disable=function(){this.fn=function(){},this._enabled=!1},t.prototype.enable=function(){this.fn=this._bak_fn,this._enabled=!0},t}(),o=new n(t);return e._extensions[o.id]=o,e._updateExtensions(),o.id},E2D.Scene.prototype.getExtensionById=function(t){return t=t||"","undefined"==typeof this._extensions[t]?(console.warn('Extension "'+t+'" does not exist. (@getExtensionById)'),!1):this._extensions[t]},"undefined"!=typeof module?module.exports=E2D:window.E2D=E2D;
