Gt.controller("GtTabBar",["GtPageContainer"],"GtBar",function(){var a=this;this.currentIndex=0,this.elements=[],this.texts=[],this.buttons=[],this.indexs=[],this.container=new GtPageContainer(GtPageContainer.type.Hide),this.index=1,this.count=0,$(window).resize(function(){a.emit("update")})}),GtTabBar.prototype.add=function(a,b,c,d){this.count++;var e=this.index;this.index++;var f=this,g=new GtButton(a);return g.setStyle("tabBar"),b&&g.connect("click",function(){f.setCurrent(e)}),GtBar.prototype.add.call(this,g,d),this.texts[e]=a,this.elements[e]=b,this.buttons[e]=g,this.indexs.push(e),b&&this.container.addPage(e,b),this.currentIndex&&!c||this.setCurrent(e),this.emit("update"),g},GtTabBar.prototype.getButton=function(a){var b=this.elements.indexOf(a);return this.buttons[b]},GtTabBar.prototype.setText=function(a,b){this.getButton(a).setText(b)},GtTabBar.prototype.getText=function(a){return this.getButton(a).getText()},GtTabBar.prototype.remove=function(a){var b=this.elements.indexOf(a);b!=-1&&(this.count--,GtBar.prototype.remove.call(this,this.buttons[b]),this.container.removePage(b),this.texts[b]=null,this.elements[b]=null,this.buttons[b]=null,this.indexs.splice(this.indexs.indexOf(b),1),this.emit("update"))},GtTabBar.prototype.clear=function(){for(var a in this.elements)this.elements[a]&&this.remove(this.elements[a])},GtTabBar.prototype.getCurrentWidget=function(){return this.elements[this.currentIndex]},GtTabBar.prototype.setCurrent=function(a){a!==parseInt(a,10)&&(a=this.elements.indexOf(a)),this.emit("change",a,this.texts[a],this.elements[a])!==!1&&(this.getElement().children().removeClass("active"),this.buttons[a].getElement().addClass("active"),this.elements[a]&&this.container.setPage(a),this.currentIndex=a)},GtTabBar.prototype.setFirst=function(){this.indexs.length&&this.setCurrent(this.indexs[0])},GtTabBar.prototype.setLast=function(){this.indexs.length&&this.setCurrent(this.indexs[this.indexs.length-1])};