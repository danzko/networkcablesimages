function GtObject(){this.connections=[],this.uniqid=GtObject.uniqid()}function Gt(){}GtObject.uniqIdCounter=0,GtObject.uniqid=function(){return GtObject.uniqIdCounter++,"GtObject_"+GtObject.uniqIdCounter},GtObject.prototype.connect=function(a,b,c){return c?this.connections.push({event:a,callback:$.proxy(b,c)}):this.connections.push({event:a,callback:b}),"newConnect"!=a&&this.emit("newConnect",a),this},GtObject.prototype.emit=function(){var a=Array.prototype.slice.call(arguments),b=void 0;for(var c in this.connections)this.connections[c].event==a[0]&&(b=b||this.connections[c].callback.apply(this,a.slice(1)));return b},Gt.prototype=new GtObject,Gt.object=new Gt,Gt.loadedScripts=["GtObject","GtCanvasElement"],Gt.readyScripts=["GtObject","GtCanvasElement"],Gt.readyCallbacks=[],Gt.resources={},Gt.debug=!1,Gt.cache=!0,Gt.enableLogs=!1,Gt.touchEvents=!1,Gt.theme="",GtMobile=null,Gt.developmentMode=function(a){Gt.enableLogs=!0,Gt.cache=!1,Gt.debug=!!a},Gt.require=function(a,b){for(var c=a.length-1;c>=0;c--)Gt.readyScripts.indexOf(a[c])!=-1&&a.splice(c,1);if(0==a.length)return b();for(Gt.readyCallbacks.push({dependencies:a.slice(),callback:b}),c=a.length-1;c>=0;c--)Gt.loadedScripts.indexOf(a[c])!=-1&&a.splice(c,1);Gt.private_load(a)},Gt.get=function(a){return a in Gt.resources?Gt.resources[a]:(alert("Demande d'accès à une ressource non chargée : "+a),"")},Gt.ready=function(a,b){if(Gt.debug&&Gt.log(a+" loaded ("+b+")"),0==b?Gt.readyScripts.push(a+"@0"):1==b&&Gt.readyScripts.push(a+"@1"),2==b||Gt.readyScripts.indexOf(a+"@0")!=-1&&Gt.readyScripts.indexOf(a+"@1")!=-1){Gt.readyScripts.push(a),Gt.debug&&Gt.coloredLog(a+" loaded!","red"),Gt.log(a+" loaded!");for(var c=[],d=Gt.readyCallbacks.length-1;d>=0;d--){var e=!0;for(var f in Gt.readyCallbacks[d].dependencies)if(Gt.readyScripts.indexOf(Gt.readyCallbacks[d].dependencies[f])==-1){e=!1;break}e&&(c.push(Gt.readyCallbacks[d].callback),Gt.readyCallbacks.splice(d,1))}Gt.debug&&Gt.log("Reste "+Gt.readyCallbacks.length+" chargement(s)",Gt.readyCallbacks),Gt.readyCallbacks.length||Gt.stylisedLog("Chargement terminé !","color:black; font-weight:bold;");for(var d in c)c[d]()}},Gt.private_load=function(a){for(var b in a){Gt.loadedScripts.push(a[b]);var c;if(a[b].indexOf(":")!=-1){var d=a[b].substr(0,a[b].indexOf(":")),e=a[b].substr(a[b].indexOf(":")+1);"view"==d?(Gt.coloredLog("Loading of "+e+" view","green"),c=GtObject.myDirectory+"views/"+e+".html"):"theme"==d?(Gt.coloredLog("Loading of "+e+" theme","teal"),c=GtObject.libDirectory+"themes/"+e+".json"):"local-theme"==d?(Gt.coloredLog("Loading of "+e+" theme","teal"),c=GtObject.myDirectory+"themes/"+e+".json"):"theme"==d?(Gt.coloredLog("Loading of "+e+" theme","teal"),c=GtObject.libDirectory+"themes/"+e+".json"):(Gt.log("Loading of "+e+" resource"),c=GtObject.myDirectory+e),Gt.loadResourceFile(c,$.proxy(function(a){Gt.resources[this.name]=a,Gt.ready(this.name,2)},{name:a[b],type:d}))}else"Gt"==a[b].substr(0,2)?(Gt.coloredLog("Loading of "+a[b]+" lib","gray"),c=GtObject.libDirectory+"lib/"):(Gt.coloredLog("Loading of "+a[b]+" controller","blue"),c=GtObject.myDirectory+"controllers/"),Gt.loadScriptFile(c+a[b]+".js",$.proxy(function(a){Gt.ready(this.name,1)},{name:a[b]}))}},Gt.log=function(){if(Gt.enableLogs){var a=Array.prototype.slice.call(arguments);a.unshift("Gt :"),console.log.apply(console,a)}},Gt.coloredLog=function(a,b){Gt.enableLogs&&console.log("%cGt : "+a,"color:"+b+";")},Gt.stylisedLog=function(a,b){Gt.enableLogs&&console.log("%cGt : "+a,b)},Gt.private_addAnticacheFlag=function(a){var b=Math.round(1e8*Math.random());return a.indexOf("?")!=-1?a+"&"+b:a+"?"+b},Gt.loadResourceFile=function(a,b){Gt.cache||(a=Gt.private_addAnticacheFlag(a)),$.get(a,b)},Gt.loadCSSFile=function(a){if(Array.isArray(a))for(var b in a)Gt.loadCSSFile(a[b]);else{Gt.cache||(a=Gt.private_addAnticacheFlag(a));var c=document.getElementsByTagName("head")[0],d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("href",a),c.appendChild(d)}},Gt.loadScriptFile=function(a,b){if(Array.isArray(a)){var c=a.length,d=0;for(var e in a)Gt.loadScriptFile(a[e],function(){d++,d==c&&b&&b()})}else{Gt.cache||(a=Gt.private_addAnticacheFlag(a));var f=document.getElementsByTagName("head")[0],g=document.createElement("script");g.src=a;var h=!1;g.onload=g.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,b&&b(a),g.onload=g.onreadystatechange=null)},f.appendChild(g)}},Gt.controller=function(name){var dependencies=[],objectType="",constructor=null,readyCallback=null,autoView=!0,namePath=name;name.indexOf("/")!=-1&&(name=name.substr(name.lastIndexOf("/")+1));for(var i in arguments)"string"==typeof arguments[i]&&0!=i?objectType=arguments[i]:"object"==typeof arguments[i]?dependencies=arguments[i]:"function"!=typeof arguments[i]||constructor?"function"==typeof arguments[i]&&constructor?readyCallback=arguments[i]:"boolean"==typeof arguments[i]&&(autoView=arguments[i]):constructor=arguments[i];var isGt=!1;"Gt"==name.substr(0,2)&&(isGt=!0),objectType&&(dependencies.push(objectType),objectType.indexOf("/")!=-1&&(objectType=objectType.substr(objectType.lastIndexOf("/")+1))),!isGt&&"GtWidget"==objectType&&autoView&&dependencies.push("view:"+name),eval(name+" = {}"),eval(name+".prototype = {}"),eval(name+'.objectType = "'+objectType+'"'),Gt.debug&&Gt.log(name+" start require",dependencies),Gt.require(dependencies,function(){theConstructor=function(){objectType&&"GtWidget"==objectType?eval(objectType+'.call(this, "'+name+'")'):objectType&&eval(objectType+".call(this)"),this.objectName=name,constructor&&constructor.apply(this,arguments),!isGt&&"GtWidget"==objectType&&autoView&&this.view(Gt.get("view:"+name))},eval("myCurrentObject = "+name),eval(name+" = theConstructor"),objectType&&(eval(name+".prototype = new "+objectType),"GtCanvas"==objectType&&Gt.log(name+".prototype = new "+objectType)),eval('for (var a in myCurrentObject){if (a == "prototype")continue; '+name+"[a] = myCurrentObject[a]}"),eval("for (var a in myCurrentObject.prototype){"+name+".prototype[a] = myCurrentObject.prototype[a]}"),Gt.ready(namePath,0),readyCallback&&readyCallback.apply(this)})},Gt.setRemoteTheme=function(a){Gt.theme=Gt.get("theme:"+a)},Gt.setLocalTheme=function(a){Gt.theme=Gt.get("local-theme:"+a)},GtObject.prototype.init=function(){var args=Array.prototype.slice.call(arguments),objectType=eval(this.objectName+".objectType");eval(objectType+".apply(this, args)")},GtObject.libDirectory=document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].src,GtObject.libDirectory=GtObject.libDirectory.substr(0,GtObject.libDirectory.indexOf("Gt/lib/")+3),GtObject.myDirectory="/",Gt.log("GtObject lib loaded!");