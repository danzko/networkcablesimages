jQuery.notification=function(a,b){var c=function(){if(b.Notification&&(b.Notification.permissionLevel||b.Notification.permission))return b.Notification;var c=b.webkitNotifications;if(!c)return function(){var b={};return b.permission="unsupported",b.permissionLevel=function(){return"unsupported"},b.requestPermission=a.noop,b}();var d=["granted","default","denied"],e=function(b,d){if(d=d||{},b){var f=c.createNotification(d.iconUrl||"",b,d.body||"");return f.titleDir=d.titleDir||"auto",f.body=d.body||"",f.bodyDir=d.bodyDir||"auto",f.tag=d.tag||"",f.replaceId=d.tag||"",f.iconUrl=d.iconUrl||"",f.onclick=d.onclick||a.noop,f.onshow=d.onshow||a.noop,f.onerror=d.onerror||a.noop,f.onclose=d.onclose||a.noop,f.close=function(){f.cancel()},"granted"===e.permissionLevel()&&f.show(),f}};return e.permissionLevel=function(){return e.permission=d[c.checkPermission()]},e.permissionLevel(),e.requestPermission=function(a){if("default"!==e.permissionLevel())return a(),void 0;if(c.requestPermission.length)return c.requestPermission(function(){e.permissionLevel(),a()}),void 0;c.requestPermission();var d=b.setInterval(function(){var c=e.permissionLevel();"default"!==c&&(b.clearInterval(d),a())},200)},e}(),d=function(b){return"default"!==(c.permission||c.permissionLevel())?(b(),void 0):(a(document).one("click",function(){c.requestPermission(b)}),void 0)},e=function(b){var e=a.Deferred();if(!c.prototype)return e.reject("unsupported"),e.promise();"string"==typeof b&&(b={title:b}),b=b||{},b.autoclose="undefined"==typeof b.autoclose?!0:b.autoclose,b.timeout=b.timeout||1/0;var f=b.iconUrl||b.icon;return f&&(b.icon=f),d(function(){var a=c.permission||c.permissionLevel();if("granted"!==a)return e.reject(a),void 0;var d=new c(b.title,b);isFinite(b.timeout)&&d.addEventListener("show",function(){setTimeout(function(){d.close()},b.timeout)},!1),b.autoclose&&d.addEventListener("click",function(){d.close()},!1),e.resolve(d)}),e.promise()};return e.permission=c.permission,e.permissionLevel=c.permissionLevel||function(){return c.permission},e.requestPermission=d,e}(jQuery,window);